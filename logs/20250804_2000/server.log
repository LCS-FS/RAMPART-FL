2025-08-04 20:14:46,766 - INFO - Flower ServerApp starting with RLClientSelectionStrategy, initial target CIDs for FIT: ['14253419127413611185', '2084916872591185460', '12299381555463457224', '16914585134661348802', '18188538097619628519']
2025-08-04 20:14:46,766 - INFO - Instance log directory: /app/logs/20250804_2000
2025-08-04 20:14:46,766 - INFO - NOTE: 'flwr' core logger level temporarily set to INFO for detailed framework messages during debugging.
2025-08-04 20:14:46,767 - INFO - RL data will be logged to: /app/logs/20250804_2000/rl_training_data.csv
2025-08-04 20:14:46,767 - INFO - RL Agent parameters loaded: lr=0.01, gamma=0.9, temp_init=1.0, hist_len=3
2025-08-04 20:14:46,767 - INFO - RL Ablation Mode set to: 'multi-criteria'
2025-08-04 20:14:46,767 - INFO - Server Config: num_rounds=400
2025-08-04 20:14:46,767 - INFO - Manual FIT Selection: Targeting CIDs ['14253419127413611185', '2084916872591185460', '12299381555463457224', '16914585134661348802', '18188538097619628519'] each round for FIT.
2025-08-04 20:14:46,767 - INFO - EVALUATION Selection: Targeting ALL available clients each round for EVALUATION.
2025-08-04 20:14:46,767 - INFO - Strategy settings: min_fit_clients=5, min_evaluate_clients=1 (fraction_evaluate=1.0 implied for 'all')
2025-08-04 20:14:46,767 - INFO - Server start requires min_available_clients=5
2025-08-04 20:14:46,768 - INFO - Initializing global GAN models (Generator, Discriminator) with: input_dim=17, latent_dim=100, g_h1=128, g_h2=32, d_h1=128, d_h2=32
2025-08-04 20:14:46,790 - ERROR - ServerApp raised an exception
Traceback (most recent call last):
  File "/app/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.11/site-packages/flwr/server/serverapp/app.py", line 186, in run_serverapp
    updated_context = run_(
                      ^^^^^
  File "/app/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.11/site-packages/flwr/server/run_serverapp.py", line 63, in run
    server_app(driver=driver, context=context)
  File "/app/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.11/site-packages/flwr/server/server_app.py", line 115, in __call__
    components = self._server_fn(context)
                 ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/.flwr/apps/flower.RAMPART-FLIDS.1.0.0.91c8b510/src/server_app.py", line 369, in server_fn
    strategy = RLClientSelectionStrategy(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/.flwr/apps/flower.RAMPART-FLIDS.1.0.0.91c8b510/src/participant_selection.py", line 43, in __init__
    super().__init__(*args, **kwargs)
TypeError: FedAvg.__init__() got an unexpected keyword argument 'manually_selected_cids_for_fit'
2025-08-04 20:17:48,510 - INFO - Instance log directory: /app/logs/20250804_2000
2025-08-04 20:17:48,510 - INFO - NOTE: 'flwr' core logger level temporarily set to INFO for detailed framework messages during debugging.
2025-08-04 20:17:48,511 - INFO - RL data will be logged to: /app/logs/20250804_2000/rl_training_data.csv
2025-08-04 20:17:48,511 - INFO - RL Agent parameters loaded: lr=0.01, gamma=0.9, temp_init=1.0, hist_len=3
2025-08-04 20:17:48,511 - INFO - RL Ablation Mode set to: 'multi-criteria'
2025-08-04 20:17:48,511 - ERROR - ServerApp raised an exception
Traceback (most recent call last):
  File "/app/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.11/site-packages/flwr/server/serverapp/app.py", line 186, in run_serverapp
    updated_context = run_(
                      ^^^^^
  File "/app/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.11/site-packages/flwr/server/run_serverapp.py", line 63, in run
    server_app(driver=driver, context=context)
  File "/app/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.11/site-packages/flwr/server/server_app.py", line 115, in __call__
    components = self._server_fn(context)
                 ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/.flwr/apps/flower.RAMPART-FLIDS.1.0.0.04a4374e/src/server_app.py", line 314, in server_fn
    min_available_clients_for_server_start = max(
                                             ^^^^
TypeError: 'int' object is not iterable
2025-08-04 20:17:51,553 - WARNING - Connection attempt failed, retrying...
2025-08-04 20:17:52,257 - WARNING - Connection attempt failed, retrying in 0.25 seconds
2025-08-04 20:17:52,512 - WARNING - Connection attempt failed, retrying in 1.75 seconds
2025-08-04 20:17:54,265 - WARNING - Connection attempt failed, retrying in 1.47 seconds
2025-08-04 20:17:55,740 - WARNING - Connection attempt failed, retrying in 13.09 seconds
2025-08-04 20:21:07,052 - INFO - Instance log directory: /app/logs/20250804_2000
2025-08-04 20:21:07,052 - INFO - NOTE: 'flwr' core logger level temporarily set to INFO for detailed framework messages during debugging.
2025-08-04 20:21:07,053 - INFO - RL data will be logged to: /app/logs/20250804_2000/rl_training_data.csv
2025-08-04 20:21:07,053 - INFO - RL Agent parameters loaded: lr=0.01, gamma=0.9, temp_init=1.0, hist_len=3
2025-08-04 20:21:07,053 - INFO - RL Ablation Mode set to: 'multi-criteria'
2025-08-04 20:21:07,053 - INFO - Server Config: num_rounds=400
2025-08-04 20:21:07,054 - INFO - EVALUATION Selection: Targeting ALL available clients each round for EVALUATION.
2025-08-04 20:21:07,054 - INFO - Strategy settings: min_fit_clients=1, min_evaluate_clients=1 (fraction_evaluate=1.0 implied for 'all')
2025-08-04 20:21:07,054 - INFO - Server start requires min_available_clients=1
2025-08-04 20:21:07,054 - INFO - Initializing global GAN models (Generator, Discriminator) with: input_dim=17, latent_dim=100, g_h1=128, g_h2=32, d_h1=128, d_h2=32
2025-08-04 20:21:07,057 - INFO - RLAgent initialized with: lr=0.01, gamma=0.9, temp_init=1.0, hist_len=3, fair_thresh=2
2025-08-04 20:21:07,057 - INFO - RLClientSelectionStrategy and ServerConfig initialized.
2025-08-04 20:21:07,057 - INFO - Starting Flower ServerApp, config: num_rounds=400, no round_timeout
2025-08-04 20:21:07,057 - INFO - 
2025-08-04 20:21:07,058 - INFO - [INIT]
2025-08-04 20:21:07,058 - INFO - Using initial global parameters provided by strategy
2025-08-04 20:21:07,059 - INFO - Starting evaluation of initial global parameters
2025-08-04 20:21:07,059 - INFO - Evaluation returned no results (`None`)
2025-08-04 20:21:07,059 - INFO - 
2025-08-04 20:21:07,060 - INFO - [ROUND 1]
2025-08-04 20:21:07,060 - INFO - --- [Round 1, Fit] GHOST ROUND for attribute collection --- 
2025-08-04 20:21:07,060 - INFO -   No clients will be selected for FIT in this round. Evaluation at the end of this round will populate attributes.
2025-08-04 20:21:07,060 - INFO - --- [Round 1, Fit] GHOST ROUND COMPLETE. Expected 0 clients for FIT. --- 
2025-08-04 20:21:07,060 - INFO - configure_fit: no clients selected, cancel
2025-08-04 20:21:07,061 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:21:19,231 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:21:19,239 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.50117347240448, 'profile_name': 'Low-End IoT', 'f1_score': 0.6738351254480287, 'avg_anomaly_score': 0.5016811198773592, 'recall': 0.573170731707317, 'eval_time_seconds': 0.014687299728393555, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.5252173913043479, 'precision': 0.8173913043478261}
2025-08-04 20:21:19,239 - INFO - [Round 1, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:21:19,240 - INFO -   Initialized entry for new proxy_cid 12043264814094380418 with partition_id: 0 and cores: 1.
2025-08-04 20:21:19,240 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 1.
2025-08-04 20:21:19,241 - INFO -   Initialized entry for new proxy_cid 8560019474512340676 with partition_id: 8 and cores: 5.
2025-08-04 20:21:19,241 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 1.
2025-08-04 20:21:19,241 - INFO -   Initialized entry for new proxy_cid 1640189632563049314 with partition_id: 1 and cores: 2.
2025-08-04 20:21:19,241 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 1.
2025-08-04 20:21:19,241 - INFO -   Initialized entry for new proxy_cid 5975185251685626785 with partition_id: 7 and cores: 4.
2025-08-04 20:21:19,241 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 1.
2025-08-04 20:21:19,241 - INFO -   Initialized entry for new proxy_cid 15388649110162717160 with partition_id: 5 and cores: 8.
2025-08-04 20:21:19,242 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 1.
2025-08-04 20:21:19,242 - INFO -   Initialized entry for new proxy_cid 4296149388320225194 with partition_id: 3 and cores: 2.
2025-08-04 20:21:19,242 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 1.
2025-08-04 20:21:19,242 - INFO -   Initialized entry for new proxy_cid 6587436948557123441 with partition_id: 4 and cores: 3.
2025-08-04 20:21:19,242 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 1.
2025-08-04 20:21:19,242 - INFO -   Initialized entry for new proxy_cid 10913316872057236365 with partition_id: 9 and cores: 1.
2025-08-04 20:21:19,242 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 1.
2025-08-04 20:21:19,243 - INFO -   Initialized entry for new proxy_cid 2395859185497387824 with partition_id: 2 and cores: 5.
2025-08-04 20:21:19,243 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 1.
2025-08-04 20:21:19,243 - INFO -   Initialized entry for new proxy_cid 17456602372862189643 with partition_id: 6 and cores: 2.
2025-08-04 20:21:19,243 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 1.
2025-08-04 20:21:19,244 - INFO - [Round 1, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:21:19,252 - INFO - ==================================================
2025-08-04 20:21:19,252 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:21:19,252 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:21:19,252 - INFO - ==================================================
2025-08-04 20:21:19,253 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:21:19,253 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5018
2025-08-04 20:21:19,253 - INFO -   Global Accuracy (Wgtd Avg): 0.5215
2025-08-04 20:21:19,253 - INFO -   Global F1 Score (Wgtd Avg): 0.6683
2025-08-04 20:21:19,253 - INFO -   Global Precision (Wgtd Avg): 0.8039
2025-08-04 20:21:19,253 - INFO -   Global Recall (Wgtd Avg): 0.5719
2025-08-04 20:21:19,253 - INFO -   Avg Eval Time per Client: 0.04s
2025-08-04 20:21:19,255 - INFO - 
2025-08-04 20:21:19,255 - INFO - [ROUND 2]
2025-08-04 20:21:19,257 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:21:25,274 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:21:25,275 - INFO - [Round 2, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:21:25,276 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:21:25,276 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:21:25,276 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 8.00
2025-08-04 20:21:25,276 - INFO - Fit phase aggregation: No valid training losses received from clients for aggregation.
2025-08-04 20:21:25,277 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.10s across 1 clients
2025-08-04 20:21:25,277 - INFO - Fit phase aggregation: Summary
2025-08-04 20:21:25,277 - INFO -   fit_clients_total_received: 1
2025-08-04 20:21:25,277 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:21:25,277 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:21:25,277 - INFO -   fit_clients_valid_for_loss_aggregation: 0
2025-08-04 20:21:25,277 - INFO -   allocated_cores_avg_per_client: 8.0000
2025-08-04 20:21:25,278 - INFO -   aggregated_g_loss: None
2025-08-04 20:21:25,278 - INFO -   aggregated_d_loss: None
2025-08-04 20:21:25,278 - INFO -   fit_time_avg_seconds_all_reporting: 0.1022
2025-08-04 20:21:25,278 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:21:31,330 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:21:31,334 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.5012621402740478, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.6696730552423901, 'avg_anomaly_score': 0.5017445201835324, 'recall': 0.5766990291262136, 'eval_time_seconds': 0.027921438217163086, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.5274193548387097, 'precision': 0.7983870967741935}
2025-08-04 20:21:31,334 - INFO - [Round 2, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:21:31,334 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 2.
2025-08-04 20:21:31,335 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 2.
2025-08-04 20:21:31,335 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 2.
2025-08-04 20:21:31,335 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 2.
2025-08-04 20:21:31,335 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 2.
2025-08-04 20:21:31,335 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 2.
2025-08-04 20:21:31,335 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 2.
2025-08-04 20:21:31,336 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 2.
2025-08-04 20:21:31,336 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 2.
2025-08-04 20:21:31,336 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 2.
2025-08-04 20:21:31,337 - INFO - [Round 2, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:21:31,346 - INFO - ==================================================
2025-08-04 20:21:31,346 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:21:31,346 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:21:31,347 - INFO - ==================================================
2025-08-04 20:21:31,347 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:21:31,347 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5018
2025-08-04 20:21:31,347 - INFO -   Global Accuracy (Wgtd Avg): 0.5215
2025-08-04 20:21:31,347 - INFO -   Global F1 Score (Wgtd Avg): 0.6683
2025-08-04 20:21:31,347 - INFO -   Global Precision (Wgtd Avg): 0.8039
2025-08-04 20:21:31,347 - INFO -   Global Recall (Wgtd Avg): 0.5719
2025-08-04 20:21:31,347 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:21:31,349 - INFO - 
2025-08-04 20:21:31,349 - INFO - [ROUND 3]
2025-08-04 20:21:31,350 - INFO - [RLAgent choose_actions_softmax] Round 3. Temperature: 1.0000
2025-08-04 20:21:31,351 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:21:31,351 - INFO -   Optimistic init for new high-core state (6, 0, 2, 6, 0) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:21:31,351 - INFO -   Optimistic init for new high-core state (6, 1, 2, 6, 0) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:21:31,352 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:21:31,376 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09848516877899455), '5975185251685626785': np.float64(0.09848516877899455), '8560019474512340676': np.float64(0.10353460618234611), '12043264814094380418': np.float64(0.09848516877899455), '4296149388320225194': np.float64(0.09848516877899455), '15388649110162717160': np.float64(0.10353460618234611), '2395859185497387824': np.float64(0.10353460618234611), '10913316872057236365': np.float64(0.09848516877899455), '6587436948557123441': np.float64(0.09848516877899455), '17456602372862189643': np.float64(0.09848516877899455)}
2025-08-04 20:21:31,376 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:21:31,377 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:21:31,377 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:21:31,381 - INFO -   New temperature for next round: 0.9950
2025-08-04 20:21:31,381 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 0, 2, 6, 0), '15388649110162717160': (6, 1, 2, 6, 0), '2395859185497387824': (6, 0, 2, 6, 0)}
2025-08-04 20:21:31,381 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:21:37,405 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:21:37,405 - INFO - [Round 3, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:21:37,430 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:21:37,430 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:21:37,430 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:21:37,430 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:21:37,430 - INFO - Fit phase aggregation: Aggregated G_Loss=0.7043, Aggregated D_Loss=1.3815 from 1 clients (65 examples)
2025-08-04 20:21:37,430 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.81s across 3 clients
2025-08-04 20:21:37,431 - INFO - Fit phase aggregation: Summary
2025-08-04 20:21:37,431 - INFO -   fit_clients_total_received: 3
2025-08-04 20:21:37,431 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:21:37,431 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:21:37,431 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:21:37,431 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:21:37,431 - INFO -   aggregated_g_loss: 0.7043
2025-08-04 20:21:37,431 - INFO -   aggregated_d_loss: 1.3815
2025-08-04 20:21:37,431 - INFO -   fit_time_avg_seconds_all_reporting: 0.8061
2025-08-04 20:21:37,432 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:21:43,479 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:21:43,479 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.5076600313186646, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.6716417910447762, 'avg_anomaly_score': 0.5078370602171901, 'recall': 0.5775669642857143, 'eval_time_seconds': 0.0393528938293457, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.5295211529521153, 'precision': 0.8023255813953488}
2025-08-04 20:21:43,479 - INFO - [Round 3, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:21:43,479 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 3.
2025-08-04 20:21:43,480 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 3.
2025-08-04 20:21:43,480 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 3.
2025-08-04 20:21:43,480 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 3.
2025-08-04 20:21:43,480 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 3.
2025-08-04 20:21:43,480 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 3.
2025-08-04 20:21:43,480 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 3.
2025-08-04 20:21:43,481 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 3.
2025-08-04 20:21:43,481 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 3.
2025-08-04 20:21:43,481 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 3.
2025-08-04 20:21:43,481 - INFO - [Round 3, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:21:43,486 - INFO - ==================================================
2025-08-04 20:21:43,486 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:21:43,487 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:21:43,487 - INFO - ==================================================
2025-08-04 20:21:43,487 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:21:43,487 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5078
2025-08-04 20:21:43,487 - INFO -   Global Accuracy (Wgtd Avg): 0.5334
2025-08-04 20:21:43,488 - INFO -   Global F1 Score (Wgtd Avg): 0.6766
2025-08-04 20:21:43,488 - INFO -   Global Precision (Wgtd Avg): 0.8138
2025-08-04 20:21:43,488 - INFO -   Global Recall (Wgtd Avg): 0.5790
2025-08-04 20:21:43,488 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:21:43,488 - INFO -   [Mode: multi-criteria] Final reward is Perf(1.1668) - FairPenalty(0.0000) - ResourceCost(0.3600) = 0.8068
2025-08-04 20:21:43,488 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 3.
2025-08-04 20:21:43,489 - INFO -   Final Global Reward for action: 0.8068. Client states at selection: {'8560019474512340676': (6, 0, 2, 6, 0), '15388649110162717160': (6, 1, 2, 6, 0), '2395859185497387824': (6, 0, 2, 6, 0)}
2025-08-04 20:21:43,489 - INFO -   Performance Reward: 1.1668, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:21:43,489 - INFO -   Next round's global F1 (for next state Q-val): 0.6766
2025-08-04 20:21:43,489 - INFO -   Optimistic init for new high-core state (6, 1, 2, 6, 6) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:21:43,489 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:21:43,489 - INFO -       State(s): (6, 0, 2, 6, 0) -> NextState(s'): (6, 1, 2, 6, 6)
2025-08-04 20:21:43,489 - INFO -       Q(s) updated from 0.0500 to 0.0580 (TotalReward: 0.8068, NextMaxQ: 0.0500)
2025-08-04 20:21:43,490 - INFO -   Optimistic init for new high-core state (6, 2, 2, 6, 6) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:21:43,490 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:21:43,490 - INFO -       State(s): (6, 1, 2, 6, 0) -> NextState(s'): (6, 2, 2, 6, 6)
2025-08-04 20:21:43,490 - INFO -       Q(s) updated from 0.0500 to 0.0580 (TotalReward: 0.8068, NextMaxQ: 0.0500)
2025-08-04 20:21:43,491 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:21:43,491 - INFO -       State(s): (6, 0, 2, 6, 0) -> NextState(s'): (6, 1, 2, 6, 6)
2025-08-04 20:21:43,491 - INFO -       Q(s) updated from 0.0580 to 0.0660 (TotalReward: 0.8068, NextMaxQ: 0.0500)
2025-08-04 20:21:43,492 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.05}
2025-08-04 20:21:43,492 - INFO - 
2025-08-04 20:21:43,493 - INFO - [ROUND 4]
2025-08-04 20:21:43,493 - INFO - [RLAgent choose_actions_softmax] Round 4. Temperature: 0.9950
2025-08-04 20:21:43,493 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:21:43,494 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:21:43,494 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09847748253182326), '5975185251685626785': np.float64(0.09847748253182326), '8560019474512340676': np.float64(0.10355254075907905), '12043264814094380418': np.float64(0.09847748253182326), '4296149388320225194': np.float64(0.09847748253182326), '15388649110162717160': np.float64(0.10355254075907905), '2395859185497387824': np.float64(0.10355254075907905), '10913316872057236365': np.float64(0.09847748253182326), '6587436948557123441': np.float64(0.09847748253182326), '17456602372862189643': np.float64(0.09847748253182326)}
2025-08-04 20:21:43,494 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:21:43,494 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:21:43,494 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:21:43,498 - INFO -   New temperature for next round: 0.9900
2025-08-04 20:21:43,498 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 1, 2, 6, 6), '15388649110162717160': (6, 2, 2, 6, 6), '2395859185497387824': (6, 1, 2, 6, 6)}
2025-08-04 20:21:43,498 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:21:49,518 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:21:49,519 - INFO - [Round 4, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:21:49,602 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:21:49,602 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:21:49,603 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:21:49,603 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:21:49,603 - INFO - Fit phase aggregation: Aggregated G_Loss=0.7401, Aggregated D_Loss=1.3520 from 1 clients (85 examples)
2025-08-04 20:21:49,603 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.13s across 3 clients
2025-08-04 20:21:49,603 - INFO - Fit phase aggregation: Summary
2025-08-04 20:21:49,603 - INFO -   fit_clients_total_received: 3
2025-08-04 20:21:49,603 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:21:49,604 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:21:49,604 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:21:49,604 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:21:49,604 - INFO -   aggregated_g_loss: 0.7401
2025-08-04 20:21:49,604 - INFO -   aggregated_d_loss: 1.3520
2025-08-04 20:21:49,604 - INFO -   fit_time_avg_seconds_all_reporting: 0.1295
2025-08-04 20:21:49,605 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:21:58,654 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:21:58,654 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.5079598426818848, 'profile_name': 'Low-End IoT', 'f1_score': 0.6450060168471721, 'avg_anomaly_score': 0.5085192125083672, 'recall': 0.551440329218107, 'eval_time_seconds': 0.020766258239746094, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.4878472222222222, 'precision': 0.7768115942028986}
2025-08-04 20:21:58,654 - INFO - [Round 4, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 4.
2025-08-04 20:21:58,655 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 4.
2025-08-04 20:21:58,656 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 4.
2025-08-04 20:21:58,656 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 4.
2025-08-04 20:21:58,656 - INFO - [Round 4, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:21:58,660 - INFO - ==================================================
2025-08-04 20:21:58,660 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:21:58,660 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:21:58,660 - INFO - ==================================================
2025-08-04 20:21:58,660 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:21:58,660 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5085
2025-08-04 20:21:58,661 - INFO -   Global Accuracy (Wgtd Avg): 0.5019
2025-08-04 20:21:58,661 - INFO -   Global F1 Score (Wgtd Avg): 0.6547
2025-08-04 20:21:58,661 - INFO -   Global Precision (Wgtd Avg): 0.7875
2025-08-04 20:21:58,661 - INFO -   Global Recall (Wgtd Avg): 0.5603
2025-08-04 20:21:58,661 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:21:58,661 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0287) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3887
2025-08-04 20:21:58,662 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 4.
2025-08-04 20:21:58,662 - INFO -   Final Global Reward for action: -0.3887. Client states at selection: {'8560019474512340676': (6, 1, 2, 6, 6), '15388649110162717160': (6, 2, 2, 6, 6), '2395859185497387824': (6, 1, 2, 6, 6)}
2025-08-04 20:21:58,662 - INFO -   Performance Reward: -0.0287, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:21:58,662 - INFO -   Next round's global F1 (for next state Q-val): 0.6547
2025-08-04 20:21:58,662 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:21:58,662 - INFO -       State(s): (6, 1, 2, 6, 6) -> NextState(s'): (6, 2, 2, 6, 6)
2025-08-04 20:21:58,662 - INFO -       Q(s) updated from 0.0500 to 0.0461 (TotalReward: -0.3887, NextMaxQ: 0.0500)
2025-08-04 20:21:58,663 - INFO -   Optimistic init for new high-core state (6, 3, 2, 6, 6) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:21:58,663 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:21:58,663 - INFO -       State(s): (6, 2, 2, 6, 6) -> NextState(s'): (6, 3, 2, 6, 6)
2025-08-04 20:21:58,663 - INFO -       Q(s) updated from 0.0500 to 0.0461 (TotalReward: -0.3887, NextMaxQ: 0.0500)
2025-08-04 20:21:58,664 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:21:58,664 - INFO -       State(s): (6, 1, 2, 6, 6) -> NextState(s'): (6, 2, 2, 6, 6)
2025-08-04 20:21:58,664 - INFO -       Q(s) updated from 0.0461 to 0.0421 (TotalReward: -0.3887, NextMaxQ: 0.0461)
2025-08-04 20:21:58,664 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:21:58,665 - INFO - 
2025-08-04 20:21:58,665 - INFO - [ROUND 5]
2025-08-04 20:21:58,665 - INFO - [RLAgent choose_actions_softmax] Round 5. Temperature: 0.9900
2025-08-04 20:21:58,665 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:21:58,666 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04606255642196035, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.04606255642196035, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:21:58,666 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09855078412604851), '5975185251685626785': np.float64(0.09855078412604851), '8560019474512340676': np.float64(0.10324435973213344), '12043264814094380418': np.float64(0.09855078412604851), '4296149388320225194': np.float64(0.09855078412604851), '15388649110162717160': np.float64(0.10365579165339371), '2395859185497387824': np.float64(0.10324435973213344), '10913316872057236365': np.float64(0.09855078412604851), '6587436948557123441': np.float64(0.09855078412604851), '17456602372862189643': np.float64(0.09855078412604851)}
2025-08-04 20:21:58,666 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:21:58,666 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:21:58,667 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:21:58,670 - INFO -   New temperature for next round: 0.9851
2025-08-04 20:21:58,671 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 2, 2, 6, 6), '15388649110162717160': (6, 3, 2, 6, 6), '2395859185497387824': (6, 2, 2, 6, 6)}
2025-08-04 20:21:58,671 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:22:04,690 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:22:04,691 - INFO - [Round 5, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:22:04,695 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:22:04,695 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:04,695 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:04,696 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:22:04,696 - INFO - Fit phase aggregation: Aggregated G_Loss=0.7929, Aggregated D_Loss=1.3107 from 1 clients (105 examples)
2025-08-04 20:22:04,696 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.14s across 3 clients
2025-08-04 20:22:04,696 - INFO - Fit phase aggregation: Summary
2025-08-04 20:22:04,696 - INFO -   fit_clients_total_received: 3
2025-08-04 20:22:04,696 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:22:04,696 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:22:04,696 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:22:04,696 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:22:04,696 - INFO -   aggregated_g_loss: 0.7929
2025-08-04 20:22:04,696 - INFO -   aggregated_d_loss: 1.3107
2025-08-04 20:22:04,697 - INFO -   fit_time_avg_seconds_all_reporting: 0.1403
2025-08-04 20:22:04,697 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:22:13,738 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:22:13,739 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.5075551271438599, 'profile_name': 'Low-End IoT', 'f1_score': 0.6425992779783394, 'avg_anomaly_score': 0.5085243460618787, 'recall': 0.5493827160493827, 'eval_time_seconds': 0.01897120475769043, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.484375, 'precision': 0.7739130434782608}
2025-08-04 20:22:13,739 - INFO - [Round 5, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:22:13,739 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 5.
2025-08-04 20:22:13,739 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 5.
2025-08-04 20:22:13,739 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 5.
2025-08-04 20:22:13,739 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 5.
2025-08-04 20:22:13,739 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 5.
2025-08-04 20:22:13,740 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 5.
2025-08-04 20:22:13,740 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 5.
2025-08-04 20:22:13,740 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 5.
2025-08-04 20:22:13,740 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 5.
2025-08-04 20:22:13,740 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 5.
2025-08-04 20:22:13,741 - INFO - [Round 5, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:22:13,745 - INFO - ==================================================
2025-08-04 20:22:13,745 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:22:13,746 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:22:13,746 - INFO - ==================================================
2025-08-04 20:22:13,746 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:22:13,746 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5085
2025-08-04 20:22:13,746 - INFO -   Global Accuracy (Wgtd Avg): 0.4898
2025-08-04 20:22:13,746 - INFO -   Global F1 Score (Wgtd Avg): 0.6464
2025-08-04 20:22:13,747 - INFO -   Global Precision (Wgtd Avg): 0.7774
2025-08-04 20:22:13,747 - INFO -   Global Recall (Wgtd Avg): 0.5532
2025-08-04 20:22:13,747 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:22:13,747 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0110) - FairPenalty(0.0100) - ResourceCost(0.3600) = -0.3810
2025-08-04 20:22:13,747 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 5.
2025-08-04 20:22:13,747 - INFO -   Final Global Reward for action: -0.3810. Client states at selection: {'8560019474512340676': (6, 2, 2, 6, 6), '15388649110162717160': (6, 3, 2, 6, 6), '2395859185497387824': (6, 2, 2, 6, 6)}
2025-08-04 20:22:13,747 - INFO -   Performance Reward: -0.0110, Fairness Penalty: 0.0100, Resource Cost: 0.3600
2025-08-04 20:22:13,747 - INFO -   Next round's global F1 (for next state Q-val): 0.6464
2025-08-04 20:22:13,747 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:22:13,748 - INFO -       State(s): (6, 2, 2, 6, 6) -> NextState(s'): (6, 3, 2, 6, 6)
2025-08-04 20:22:13,748 - INFO -       Q(s) updated from 0.0461 to 0.0422 (TotalReward: -0.3810, NextMaxQ: 0.0500)
2025-08-04 20:22:13,748 - INFO -   Optimistic init for new high-core state (6, 4, 2, 6, 6) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:22:13,748 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:22:13,749 - INFO -       State(s): (6, 3, 2, 6, 6) -> NextState(s'): (6, 4, 2, 6, 6)
2025-08-04 20:22:13,749 - INFO -       Q(s) updated from 0.0500 to 0.0461 (TotalReward: -0.3810, NextMaxQ: 0.0500)
2025-08-04 20:22:13,749 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:22:13,749 - INFO -       State(s): (6, 2, 2, 6, 6) -> NextState(s'): (6, 3, 2, 6, 6)
2025-08-04 20:22:13,749 - INFO -       Q(s) updated from 0.0422 to 0.0384 (TotalReward: -0.3810, NextMaxQ: 0.0461)
2025-08-04 20:22:13,750 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:22:13,750 - INFO - 
2025-08-04 20:22:13,750 - INFO - [ROUND 6]
2025-08-04 20:22:13,751 - INFO - [RLAgent choose_actions_softmax] Round 6. Temperature: 0.9851
2025-08-04 20:22:13,751 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:22:13,751 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04614013954611241, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.04614013954611241, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:22:13,751 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09854183060165927), '5975185251685626785': np.float64(0.09854183060165927), '8560019474512340676': np.float64(0.10326725199361705), '12043264814094380418': np.float64(0.09854183060165927), '4296149388320225194': np.float64(0.09854183060165927), '15388649110162717160': np.float64(0.10367268180115105), '2395859185497387824': np.float64(0.10326725199361705), '10913316872057236365': np.float64(0.09854183060165927), '6587436948557123441': np.float64(0.09854183060165927), '17456602372862189643': np.float64(0.09854183060165927)}
2025-08-04 20:22:13,751 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:22:13,752 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:13,752 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:13,756 - INFO -   New temperature for next round: 0.9801
2025-08-04 20:22:13,756 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 3, 2, 6, 6), '15388649110162717160': (6, 4, 2, 6, 6), '2395859185497387824': (6, 3, 2, 6, 6)}
2025-08-04 20:22:13,756 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:22:19,777 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:22:19,777 - INFO - [Round 6, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:22:19,782 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:22:19,782 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:19,782 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:19,782 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:22:19,782 - INFO - Fit phase aggregation: Aggregated G_Loss=0.8855, Aggregated D_Loss=1.2490 from 1 clients (126 examples)
2025-08-04 20:22:19,783 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.14s across 3 clients
2025-08-04 20:22:19,783 - INFO - Fit phase aggregation: Summary
2025-08-04 20:22:19,783 - INFO -   fit_clients_total_received: 3
2025-08-04 20:22:19,783 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:22:19,783 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:22:19,783 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:22:19,783 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:22:19,783 - INFO -   aggregated_g_loss: 0.8855
2025-08-04 20:22:19,784 - INFO -   aggregated_d_loss: 1.2490
2025-08-04 20:22:19,784 - INFO -   fit_time_avg_seconds_all_reporting: 0.1391
2025-08-04 20:22:19,784 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:22:28,830 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:22:28,830 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.5036728382110596, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.6398442569759896, 'avg_anomaly_score': 0.5052545436977065, 'recall': 0.5502232142857143, 'eval_time_seconds': 0.04099917411804199, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.4839609483960948, 'precision': 0.7643410852713178}
2025-08-04 20:22:28,830 - INFO - [Round 6, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:22:28,830 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 6.
2025-08-04 20:22:28,830 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 6.
2025-08-04 20:22:28,831 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 6.
2025-08-04 20:22:28,831 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 6.
2025-08-04 20:22:28,831 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 6.
2025-08-04 20:22:28,831 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 6.
2025-08-04 20:22:28,831 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 6.
2025-08-04 20:22:28,831 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 6.
2025-08-04 20:22:28,832 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 6.
2025-08-04 20:22:28,832 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 6.
2025-08-04 20:22:28,832 - INFO - [Round 6, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:22:28,837 - INFO - ==================================================
2025-08-04 20:22:28,837 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:22:28,837 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:22:28,837 - INFO - ==================================================
2025-08-04 20:22:28,837 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:22:28,837 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5053
2025-08-04 20:22:28,838 - INFO -   Global Accuracy (Wgtd Avg): 0.4886
2025-08-04 20:22:28,838 - INFO -   Global F1 Score (Wgtd Avg): 0.6455
2025-08-04 20:22:28,838 - INFO -   Global Precision (Wgtd Avg): 0.7764
2025-08-04 20:22:28,838 - INFO -   Global Recall (Wgtd Avg): 0.5524
2025-08-04 20:22:28,838 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:22:28,838 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0011) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.4011
2025-08-04 20:22:28,838 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 6.
2025-08-04 20:22:28,838 - INFO -   Final Global Reward for action: -0.4011. Client states at selection: {'8560019474512340676': (6, 3, 2, 6, 6), '15388649110162717160': (6, 4, 2, 6, 6), '2395859185497387824': (6, 3, 2, 6, 6)}
2025-08-04 20:22:28,838 - INFO -   Performance Reward: -0.0011, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:22:28,839 - INFO -   Next round's global F1 (for next state Q-val): 0.6455
2025-08-04 20:22:28,839 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:22:28,839 - INFO -       State(s): (6, 3, 2, 6, 6) -> NextState(s'): (6, 4, 2, 6, 6)
2025-08-04 20:22:28,839 - INFO -       Q(s) updated from 0.0461 to 0.0421 (TotalReward: -0.4011, NextMaxQ: 0.0500)
2025-08-04 20:22:28,839 - INFO -   Optimistic init for new high-core state (6, 5, 2, 6, 6) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:22:28,840 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:22:28,840 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:28,840 - INFO -       Q(s) updated from 0.0500 to 0.0459 (TotalReward: -0.4011, NextMaxQ: 0.0500)
2025-08-04 20:22:28,840 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:22:28,840 - INFO -       State(s): (6, 3, 2, 6, 6) -> NextState(s'): (6, 4, 2, 6, 6)
2025-08-04 20:22:28,840 - INFO -       Q(s) updated from 0.0421 to 0.0381 (TotalReward: -0.4011, NextMaxQ: 0.0459)
2025-08-04 20:22:28,841 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:22:28,841 - INFO - 
2025-08-04 20:22:28,842 - INFO - [ROUND 7]
2025-08-04 20:22:28,842 - INFO - [RLAgent choose_actions_softmax] Round 7. Temperature: 0.9801
2025-08-04 20:22:28,842 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:22:28,842 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.0459386828144551, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.0459386828144551, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:22:28,843 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09853861739088257), '5975185251685626785': np.float64(0.09853861739088257), '8560019474512340676': np.float64(0.10326696572145137), '12043264814094380418': np.float64(0.09853861739088257), '4296149388320225194': np.float64(0.09853861739088257), '15388649110162717160': np.float64(0.10369574682091924), '2395859185497387824': np.float64(0.10326696572145137), '10913316872057236365': np.float64(0.09853861739088257), '6587436948557123441': np.float64(0.09853861739088257), '17456602372862189643': np.float64(0.09853861739088257)}
2025-08-04 20:22:28,843 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:22:28,843 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:28,844 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:28,848 - INFO -   New temperature for next round: 0.9752
2025-08-04 20:22:28,848 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 4, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 4, 2, 6, 6)}
2025-08-04 20:22:28,848 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:22:34,871 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:22:34,871 - INFO - [Round 7, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:22:34,876 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:22:34,876 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:34,877 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:34,877 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:22:34,877 - INFO - Fit phase aggregation: Aggregated G_Loss=1.0113, Aggregated D_Loss=1.1833 from 1 clients (146 examples)
2025-08-04 20:22:34,877 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.15s across 3 clients
2025-08-04 20:22:34,877 - INFO - Fit phase aggregation: Summary
2025-08-04 20:22:34,877 - INFO -   fit_clients_total_received: 3
2025-08-04 20:22:34,877 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:22:34,877 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:22:34,878 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:22:34,878 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:22:34,878 - INFO -   aggregated_g_loss: 1.0113
2025-08-04 20:22:34,878 - INFO -   aggregated_d_loss: 1.1833
2025-08-04 20:22:34,878 - INFO -   fit_time_avg_seconds_all_reporting: 0.1470
2025-08-04 20:22:34,878 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:22:43,919 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:22:43,919 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.49434006214141846, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.6335963923337091, 'avg_anomaly_score': 0.4970740362521141, 'recall': 0.545631067961165, 'eval_time_seconds': 0.021199941635131836, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.47580645161290325, 'precision': 0.7553763440860215}
2025-08-04 20:22:43,919 - INFO - [Round 7, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:22:43,919 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 7.
2025-08-04 20:22:43,920 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 7.
2025-08-04 20:22:43,920 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 7.
2025-08-04 20:22:43,920 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 7.
2025-08-04 20:22:43,920 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 7.
2025-08-04 20:22:43,920 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 7.
2025-08-04 20:22:43,920 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 7.
2025-08-04 20:22:43,921 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 7.
2025-08-04 20:22:43,921 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 7.
2025-08-04 20:22:43,921 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 7.
2025-08-04 20:22:43,921 - INFO - [Round 7, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:22:43,926 - INFO - ==================================================
2025-08-04 20:22:43,926 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:22:43,926 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:22:43,926 - INFO - ==================================================
2025-08-04 20:22:43,926 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:22:43,926 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4970
2025-08-04 20:22:43,926 - INFO -   Global Accuracy (Wgtd Avg): 0.4891
2025-08-04 20:22:43,927 - INFO -   Global F1 Score (Wgtd Avg): 0.6459
2025-08-04 20:22:43,927 - INFO -   Global Precision (Wgtd Avg): 0.7768
2025-08-04 20:22:43,927 - INFO -   Global Recall (Wgtd Avg): 0.5527
2025-08-04 20:22:43,927 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:22:43,927 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0700) - ResourceCost(0.3600) = -0.4297
2025-08-04 20:22:43,927 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 7.
2025-08-04 20:22:43,927 - INFO -   Final Global Reward for action: -0.4297. Client states at selection: {'8560019474512340676': (6, 4, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 4, 2, 6, 6)}
2025-08-04 20:22:43,927 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0700, Resource Cost: 0.3600
2025-08-04 20:22:43,928 - INFO -   Next round's global F1 (for next state Q-val): 0.6459
2025-08-04 20:22:43,928 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:22:43,928 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:43,928 - INFO -       Q(s) updated from 0.0459 to 0.0416 (TotalReward: -0.4297, NextMaxQ: 0.0500)
2025-08-04 20:22:43,928 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:22:43,928 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:43,929 - INFO -       Q(s) updated from 0.0500 to 0.0457 (TotalReward: -0.4297, NextMaxQ: 0.0500)
2025-08-04 20:22:43,929 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:22:43,929 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:43,929 - INFO -       Q(s) updated from 0.0416 to 0.0373 (TotalReward: -0.4297, NextMaxQ: 0.0457)
2025-08-04 20:22:43,930 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:22:43,930 - INFO - 
2025-08-04 20:22:43,930 - INFO - [ROUND 8]
2025-08-04 20:22:43,931 - INFO - [RLAgent choose_actions_softmax] Round 8. Temperature: 0.9752
2025-08-04 20:22:43,931 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:22:43,931 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04565313455771025, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.04565313455771025, '2395859185497387824': 0.04565313455771025, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:22:43,932 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09858263687371216), '5975185251685626785': np.float64(0.09858263687371216), '8560019474512340676': np.float64(0.10330718062800498), '12043264814094380418': np.float64(0.09858263687371216), '4296149388320225194': np.float64(0.09858263687371216), '15388649110162717160': np.float64(0.10330718062800498), '2395859185497387824': np.float64(0.10330718062800498), '10913316872057236365': np.float64(0.09858263687371216), '6587436948557123441': np.float64(0.09858263687371216), '17456602372862189643': np.float64(0.09858263687371216)}
2025-08-04 20:22:43,932 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:22:43,932 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:43,932 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:43,936 - INFO -   New temperature for next round: 0.9704
2025-08-04 20:22:43,936 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:22:43,936 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:22:49,963 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:22:49,963 - INFO - [Round 8, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:22:49,968 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:22:49,968 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:49,968 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:22:49,968 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:22:49,968 - INFO - Fit phase aggregation: Aggregated G_Loss=1.2125, Aggregated D_Loss=1.1079 from 1 clients (163 examples)
2025-08-04 20:22:49,969 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.15s across 3 clients
2025-08-04 20:22:49,969 - INFO - Fit phase aggregation: Summary
2025-08-04 20:22:49,969 - INFO -   fit_clients_total_received: 3
2025-08-04 20:22:49,969 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:22:49,969 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:22:49,969 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:22:49,969 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:22:49,969 - INFO -   aggregated_g_loss: 1.2125
2025-08-04 20:22:49,970 - INFO -   aggregated_d_loss: 1.1079
2025-08-04 20:22:49,970 - INFO -   fit_time_avg_seconds_all_reporting: 0.1504
2025-08-04 20:22:49,970 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:22:56,013 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:22:56,013 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.47764474153518677, 'profile_name': 'Low-End IoT', 'f1_score': 0.6401925391095066, 'avg_anomaly_score': 0.48153913776493734, 'recall': 0.5473251028806584, 'eval_time_seconds': 0.013329505920410156, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.4809027777777778, 'precision': 0.7710144927536232}
2025-08-04 20:22:56,013 - INFO - [Round 8, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:22:56,014 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 8.
2025-08-04 20:22:56,014 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 8.
2025-08-04 20:22:56,014 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 8.
2025-08-04 20:22:56,014 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 8.
2025-08-04 20:22:56,014 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 8.
2025-08-04 20:22:56,014 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 8.
2025-08-04 20:22:56,015 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 8.
2025-08-04 20:22:56,015 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 8.
2025-08-04 20:22:56,015 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 8.
2025-08-04 20:22:56,015 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 8.
2025-08-04 20:22:56,016 - INFO - [Round 8, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:22:56,019 - INFO - ==================================================
2025-08-04 20:22:56,019 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:22:56,020 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:22:56,020 - INFO - ==================================================
2025-08-04 20:22:56,020 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:22:56,020 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4816
2025-08-04 20:22:56,020 - INFO -   Global Accuracy (Wgtd Avg): 0.4935
2025-08-04 20:22:56,020 - INFO -   Global F1 Score (Wgtd Avg): 0.6489
2025-08-04 20:22:56,020 - INFO -   Global Precision (Wgtd Avg): 0.7805
2025-08-04 20:22:56,020 - INFO -   Global Recall (Wgtd Avg): 0.5554
2025-08-04 20:22:56,020 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:22:56,021 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0028) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4472
2025-08-04 20:22:56,021 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 8.
2025-08-04 20:22:56,021 - INFO -   Final Global Reward for action: -0.4472. Client states at selection: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:22:56,021 - INFO -   Performance Reward: 0.0028, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:22:56,021 - INFO -   Next round's global F1 (for next state Q-val): 0.6489
2025-08-04 20:22:56,021 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:22:56,021 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:56,022 - INFO -       Q(s) updated from 0.0457 to 0.0411 (TotalReward: -0.4472, NextMaxQ: 0.0457)
2025-08-04 20:22:56,022 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:22:56,022 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:56,022 - INFO -       Q(s) updated from 0.0411 to 0.0366 (TotalReward: -0.4472, NextMaxQ: 0.0411)
2025-08-04 20:22:56,023 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:22:56,023 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:22:56,023 - INFO -       Q(s) updated from 0.0366 to 0.0321 (TotalReward: -0.4472, NextMaxQ: 0.0366)
2025-08-04 20:22:56,024 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:22:56,024 - INFO - 
2025-08-04 20:22:56,025 - INFO - [ROUND 9]
2025-08-04 20:22:56,025 - INFO - [RLAgent choose_actions_softmax] Round 9. Temperature: 0.9704
2025-08-04 20:22:56,025 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:22:56,025 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.03211416580209314, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03211416580209314, '2395859185497387824': 0.03211416580209314, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:22:56,025 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09900063718127852), '5975185251685626785': np.float64(0.09900063718127852), '8560019474512340676': np.float64(0.1023318465770168), '12043264814094380418': np.float64(0.09900063718127852), '4296149388320225194': np.float64(0.09900063718127852), '15388649110162717160': np.float64(0.1023318465770168), '2395859185497387824': np.float64(0.1023318465770168), '10913316872057236365': np.float64(0.09900063718127852), '6587436948557123441': np.float64(0.09900063718127852), '17456602372862189643': np.float64(0.09900063718127852)}
2025-08-04 20:22:56,026 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:22:56,026 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:56,026 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:22:56,030 - INFO -   New temperature for next round: 0.9655
2025-08-04 20:22:56,030 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:22:56,030 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:23:02,051 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:23:02,052 - INFO - [Round 9, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:23:02,057 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:23:02,057 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:02,057 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:02,057 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:23:02,057 - INFO - Fit phase aggregation: Aggregated G_Loss=1.4843, Aggregated D_Loss=1.0405 from 1 clients (188 examples)
2025-08-04 20:23:02,057 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 3 clients
2025-08-04 20:23:02,057 - INFO - Fit phase aggregation: Summary
2025-08-04 20:23:02,058 - INFO -   fit_clients_total_received: 3
2025-08-04 20:23:02,058 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:23:02,058 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:23:02,058 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:23:02,058 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:23:02,058 - INFO -   aggregated_g_loss: 1.4843
2025-08-04 20:23:02,058 - INFO -   aggregated_d_loss: 1.0405
2025-08-04 20:23:02,058 - INFO -   fit_time_avg_seconds_all_reporting: 0.1595
2025-08-04 20:23:02,059 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:23:08,546 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:23:08,546 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.45102137327194214, 'profile_name': 'Low-End IoT', 'f1_score': 0.6666666666666666, 'avg_anomaly_score': 0.45606368155706495, 'recall': 0.5666666666666667, 'eval_time_seconds': 0.009170770645141602, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.5142857142857142, 'precision': 0.8095238095238095}
2025-08-04 20:23:08,546 - INFO - [Round 9, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:23:08,546 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 9.
2025-08-04 20:23:08,547 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 9.
2025-08-04 20:23:08,547 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 9.
2025-08-04 20:23:08,547 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 9.
2025-08-04 20:23:08,547 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 9.
2025-08-04 20:23:08,547 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 9.
2025-08-04 20:23:08,548 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 9.
2025-08-04 20:23:08,548 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 9.
2025-08-04 20:23:08,548 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 9.
2025-08-04 20:23:08,548 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 9.
2025-08-04 20:23:08,549 - INFO - [Round 9, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:23:08,553 - INFO - ==================================================
2025-08-04 20:23:08,553 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:23:08,553 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:23:08,553 - INFO - ==================================================
2025-08-04 20:23:08,553 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:23:08,554 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4583
2025-08-04 20:23:08,554 - INFO -   Global Accuracy (Wgtd Avg): 0.5020
2025-08-04 20:23:08,554 - INFO -   Global F1 Score (Wgtd Avg): 0.6548
2025-08-04 20:23:08,554 - INFO -   Global Precision (Wgtd Avg): 0.7876
2025-08-04 20:23:08,554 - INFO -   Global Recall (Wgtd Avg): 0.5603
2025-08-04 20:23:08,554 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:23:08,554 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0054) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4446
2025-08-04 20:23:08,554 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 9.
2025-08-04 20:23:08,554 - INFO -   Final Global Reward for action: -0.4446. Client states at selection: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:23:08,554 - INFO -   Performance Reward: 0.0054, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:23:08,555 - INFO -   Next round's global F1 (for next state Q-val): 0.6548
2025-08-04 20:23:08,555 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:23:08,555 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:08,555 - INFO -       Q(s) updated from 0.0321 to 0.0276 (TotalReward: -0.4446, NextMaxQ: 0.0321)
2025-08-04 20:23:08,555 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:23:08,555 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:08,555 - INFO -       Q(s) updated from 0.0276 to 0.0232 (TotalReward: -0.4446, NextMaxQ: 0.0276)
2025-08-04 20:23:08,556 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:23:08,556 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:08,556 - INFO -       Q(s) updated from 0.0232 to 0.0187 (TotalReward: -0.4446, NextMaxQ: 0.0232)
2025-08-04 20:23:08,557 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:23:08,557 - INFO - 
2025-08-04 20:23:08,558 - INFO - [ROUND 10]
2025-08-04 20:23:08,558 - INFO - [RLAgent choose_actions_softmax] Round 10. Temperature: 0.9655
2025-08-04 20:23:08,558 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:23:08,558 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.018692456063305732, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.018692456063305732, '2395859185497387824': 0.018692456063305732, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:23:08,559 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09941696202931449), '5975185251685626785': np.float64(0.09941696202931449), '8560019474512340676': np.float64(0.10136042193159951), '12043264814094380418': np.float64(0.09941696202931449), '4296149388320225194': np.float64(0.09941696202931449), '15388649110162717160': np.float64(0.10136042193159951), '2395859185497387824': np.float64(0.10136042193159951), '10913316872057236365': np.float64(0.09941696202931449), '6587436948557123441': np.float64(0.09941696202931449), '17456602372862189643': np.float64(0.09941696202931449)}
2025-08-04 20:23:08,559 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:23:08,559 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:23:08,559 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:23:08,563 - INFO -   New temperature for next round: 0.9607
2025-08-04 20:23:08,563 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:23:08,563 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:23:14,586 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:23:14,586 - INFO - [Round 10, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:23:14,590 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:23:14,591 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:14,591 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:14,591 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:23:14,591 - INFO - Fit phase aggregation: Aggregated G_Loss=1.7879, Aggregated D_Loss=0.9925 from 1 clients (206 examples)
2025-08-04 20:23:14,591 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 3 clients
2025-08-04 20:23:14,591 - INFO - Fit phase aggregation: Summary
2025-08-04 20:23:14,591 - INFO -   fit_clients_total_received: 3
2025-08-04 20:23:14,591 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:23:14,591 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:23:14,591 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:23:14,592 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:23:14,592 - INFO -   aggregated_g_loss: 1.7879
2025-08-04 20:23:14,592 - INFO -   aggregated_d_loss: 0.9925
2025-08-04 20:23:14,592 - INFO -   fit_time_avg_seconds_all_reporting: 0.1640
2025-08-04 20:23:14,592 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:23:22,325 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:23:22,325 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.41097426414489746, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.6482803374432187, 'avg_anomaly_score': 0.41974362374903823, 'recall': 0.5574776785714286, 'eval_time_seconds': 0.04055523872375488, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.49604834960483496, 'precision': 0.7744186046511627}
2025-08-04 20:23:22,326 - INFO - [Round 10, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:23:22,326 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 10.
2025-08-04 20:23:22,326 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 10.
2025-08-04 20:23:22,326 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 10.
2025-08-04 20:23:22,326 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 10.
2025-08-04 20:23:22,326 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 10.
2025-08-04 20:23:22,327 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 10.
2025-08-04 20:23:22,327 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 10.
2025-08-04 20:23:22,327 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 10.
2025-08-04 20:23:22,327 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 10.
2025-08-04 20:23:22,327 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 10.
2025-08-04 20:23:22,328 - INFO - [Round 10, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:23:22,332 - INFO - ==================================================
2025-08-04 20:23:22,332 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:23:22,332 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:23:22,332 - INFO - ==================================================
2025-08-04 20:23:22,332 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:23:22,332 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4198
2025-08-04 20:23:22,333 - INFO -   Global Accuracy (Wgtd Avg): 0.5026
2025-08-04 20:23:22,333 - INFO -   Global F1 Score (Wgtd Avg): 0.6553
2025-08-04 20:23:22,333 - INFO -   Global Precision (Wgtd Avg): 0.7881
2025-08-04 20:23:22,333 - INFO -   Global Recall (Wgtd Avg): 0.5608
2025-08-04 20:23:22,333 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:23:22,333 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0004) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4496
2025-08-04 20:23:22,333 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 10.
2025-08-04 20:23:22,334 - INFO -   Final Global Reward for action: -0.4496. Client states at selection: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:23:22,334 - INFO -   Performance Reward: 0.0004, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:23:22,334 - INFO -   Next round's global F1 (for next state Q-val): 0.6553
2025-08-04 20:23:22,334 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:23:22,334 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:22,334 - INFO -       Q(s) updated from 0.0187 to 0.0142 (TotalReward: -0.4496, NextMaxQ: 0.0187)
2025-08-04 20:23:22,335 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:23:22,335 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:22,335 - INFO -       Q(s) updated from 0.0142 to 0.0097 (TotalReward: -0.4496, NextMaxQ: 0.0142)
2025-08-04 20:23:22,336 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:23:22,336 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:22,336 - INFO -       Q(s) updated from 0.0097 to 0.0052 (TotalReward: -0.4496, NextMaxQ: 0.0097)
2025-08-04 20:23:22,336 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:23:22,337 - INFO - 
2025-08-04 20:23:22,337 - INFO - [ROUND 11]
2025-08-04 20:23:22,337 - INFO - [RLAgent choose_actions_softmax] Round 11. Temperature: 0.9607
2025-08-04 20:23:22,337 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:23:22,337 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.00516204163105918, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.00516204163105918, '2395859185497387824': 0.00516204163105918, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:23:22,338 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09983862971046131), '5975185251685626785': np.float64(0.09983862971046131), '8560019474512340676': np.float64(0.10037653067559026), '12043264814094380418': np.float64(0.09983862971046131), '4296149388320225194': np.float64(0.09983862971046131), '15388649110162717160': np.float64(0.10037653067559026), '2395859185497387824': np.float64(0.10037653067559026), '10913316872057236365': np.float64(0.09983862971046131), '6587436948557123441': np.float64(0.09983862971046131), '17456602372862189643': np.float64(0.09983862971046131)}
2025-08-04 20:23:22,338 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:23:22,338 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:23:22,338 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:23:22,342 - INFO -   New temperature for next round: 0.9559
2025-08-04 20:23:22,342 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:23:22,343 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:23:28,363 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:23:28,364 - INFO - [Round 11, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:23:28,368 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:23:28,368 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:28,368 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:28,368 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:23:28,368 - INFO - Fit phase aggregation: Aggregated G_Loss=1.9986, Aggregated D_Loss=0.9612 from 1 clients (226 examples)
2025-08-04 20:23:28,369 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.17s across 3 clients
2025-08-04 20:23:28,369 - INFO - Fit phase aggregation: Summary
2025-08-04 20:23:28,369 - INFO -   fit_clients_total_received: 3
2025-08-04 20:23:28,369 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:23:28,369 - INFO -   fit_clients_skipped_training: 2
2025-08-04 20:23:28,369 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:23:28,369 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:23:28,369 - INFO -   aggregated_g_loss: 1.9986
2025-08-04 20:23:28,369 - INFO -   aggregated_d_loss: 0.9612
2025-08-04 20:23:28,369 - INFO -   fit_time_avg_seconds_all_reporting: 0.1721
2025-08-04 20:23:28,370 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:23:34,413 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:23:34,413 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.35009565353393557, 'profile_name': 'Low-End IoT', 'f1_score': 0.6797385620915033, 'avg_anomaly_score': 0.3590332769212269, 'recall': 0.5777777777777777, 'eval_time_seconds': 0.00861811637878418, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.5333333333333333, 'precision': 0.8253968253968254}
2025-08-04 20:23:34,413 - INFO - [Round 11, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:23:34,413 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 11.
2025-08-04 20:23:34,414 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 11.
2025-08-04 20:23:34,414 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 11.
2025-08-04 20:23:34,414 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 11.
2025-08-04 20:23:34,414 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 11.
2025-08-04 20:23:34,414 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 11.
2025-08-04 20:23:34,414 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 11.
2025-08-04 20:23:34,415 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 11.
2025-08-04 20:23:34,415 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 11.
2025-08-04 20:23:34,415 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 11.
2025-08-04 20:23:34,416 - INFO - [Round 11, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:23:34,420 - INFO - ==================================================
2025-08-04 20:23:34,420 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:23:34,420 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:23:34,420 - INFO - ==================================================
2025-08-04 20:23:34,420 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:23:34,421 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3634
2025-08-04 20:23:34,421 - INFO -   Global Accuracy (Wgtd Avg): 0.5054
2025-08-04 20:23:34,421 - INFO -   Global F1 Score (Wgtd Avg): 0.6571
2025-08-04 20:23:34,421 - INFO -   Global Precision (Wgtd Avg): 0.7903
2025-08-04 20:23:34,421 - INFO -   Global Recall (Wgtd Avg): 0.5624
2025-08-04 20:23:34,421 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:23:34,421 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0017) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4483
2025-08-04 20:23:34,422 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 11.
2025-08-04 20:23:34,422 - INFO -   Final Global Reward for action: -0.4483. Client states at selection: {'8560019474512340676': (6, 5, 2, 6, 6), '15388649110162717160': (6, 5, 2, 6, 6), '2395859185497387824': (6, 5, 2, 6, 6)}
2025-08-04 20:23:34,422 - INFO -   Performance Reward: 0.0017, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:23:34,422 - INFO -   Next round's global F1 (for next state Q-val): 0.6571
2025-08-04 20:23:34,422 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:23:34,422 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:34,422 - INFO -       Q(s) updated from 0.0052 to 0.0007 (TotalReward: -0.4483, NextMaxQ: 0.0052)
2025-08-04 20:23:34,423 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:23:34,423 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:34,423 - INFO -       Q(s) updated from 0.0007 to -0.0038 (TotalReward: -0.4483, NextMaxQ: 0.0007)
2025-08-04 20:23:34,424 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:23:34,424 - INFO -       State(s): (6, 5, 2, 6, 6) -> NextState(s'): (6, 5, 2, 6, 6)
2025-08-04 20:23:34,424 - INFO -       Q(s) updated from -0.0038 to -0.0083 (TotalReward: -0.4483, NextMaxQ: -0.0038)
2025-08-04 20:23:34,425 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:23:34,425 - INFO - 
2025-08-04 20:23:34,425 - INFO - [ROUND 12]
2025-08-04 20:23:34,426 - INFO - [RLAgent choose_actions_softmax] Round 12. Temperature: 0.9559
2025-08-04 20:23:34,426 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:23:34,426 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': -0.008288434534908518, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': -0.008288434534908518, '2395859185497387824': -0.008288434534908518, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:23:34,427 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10025967514105567), '5975185251685626785': np.float64(0.10025967514105567), '8560019474512340676': np.float64(0.09939409133753675), '12043264814094380418': np.float64(0.10025967514105567), '4296149388320225194': np.float64(0.10025967514105567), '15388649110162717160': np.float64(0.09939409133753675), '2395859185497387824': np.float64(0.09939409133753675), '10913316872057236365': np.float64(0.10025967514105567), '6587436948557123441': np.float64(0.10025967514105567), '17456602372862189643': np.float64(0.10025967514105567)}
2025-08-04 20:23:34,427 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:23:34,427 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:23:34,427 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:23:34,428 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:23:34,432 - INFO -   New temperature for next round: 0.9511
2025-08-04 20:23:34,432 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'1640189632563049314': (6, 0, 0, 6, 6), '5975185251685626785': (6, 0, 1, 6, 6), '12043264814094380418': (6, 0, 0, 6, 6), '4296149388320225194': (6, 0, 0, 6, 6), '10913316872057236365': (6, 0, 0, 6, 6)}
2025-08-04 20:23:34,432 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:23:43,465 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:23:43,466 - INFO - [Round 12, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:23:43,474 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:23:43,475 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.00
2025-08-04 20:23:43,475 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0722, Aggregated D_Loss=0.9358 from 5 clients (1247 examples)
2025-08-04 20:23:43,475 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.81s across 5 clients
2025-08-04 20:23:43,475 - INFO - Fit phase aggregation: Summary
2025-08-04 20:23:43,475 - INFO -   fit_clients_total_received: 5
2025-08-04 20:23:43,475 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:23:43,475 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:23:43,476 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:23:43,476 - INFO -   allocated_cores_avg_per_client: 2.0000
2025-08-04 20:23:43,476 - INFO -   aggregated_g_loss: 2.0722
2025-08-04 20:23:43,476 - INFO -   aggregated_d_loss: 0.9358
2025-08-04 20:23:43,476 - INFO -   fit_time_avg_seconds_all_reporting: 1.8083
2025-08-04 20:23:43,477 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:23:49,521 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:23:49,522 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.2977990865707397, 'profile_name': 'Low-End IoT', 'f1_score': 0.65625, 'avg_anomaly_score': 0.30374885960058734, 'recall': 0.5575221238938053, 'eval_time_seconds': 0.011025190353393555, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.5, 'precision': 0.7974683544303798}
2025-08-04 20:23:49,522 - INFO - [Round 12, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:23:49,522 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 12.
2025-08-04 20:23:49,522 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 12.
2025-08-04 20:23:49,522 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 12.
2025-08-04 20:23:49,523 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 12.
2025-08-04 20:23:49,524 - INFO - [Round 12, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:23:49,528 - INFO - ==================================================
2025-08-04 20:23:49,528 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:23:49,528 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:23:49,528 - INFO - ==================================================
2025-08-04 20:23:49,528 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:23:49,529 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3027
2025-08-04 20:23:49,529 - INFO -   Global Accuracy (Wgtd Avg): 0.5243
2025-08-04 20:23:49,529 - INFO -   Global F1 Score (Wgtd Avg): 0.6703
2025-08-04 20:23:49,529 - INFO -   Global Precision (Wgtd Avg): 0.8062
2025-08-04 20:23:49,529 - INFO -   Global Recall (Wgtd Avg): 0.5736
2025-08-04 20:23:49,529 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:23:49,529 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0120) - FairPenalty(0.0000) - ResourceCost(0.2000) = -0.1880
2025-08-04 20:23:49,529 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 12.
2025-08-04 20:23:49,529 - INFO -   Final Global Reward for action: -0.1880. Client states at selection: {'1640189632563049314': (6, 0, 0, 6, 6), '5975185251685626785': (6, 0, 1, 6, 6), '12043264814094380418': (6, 0, 0, 6, 6), '4296149388320225194': (6, 0, 0, 6, 6), '10913316872057236365': (6, 0, 0, 6, 6)}
2025-08-04 20:23:49,529 - INFO -   Performance Reward: 0.0120, Fairness Penalty: 0.0000, Resource Cost: 0.2000
2025-08-04 20:23:49,530 - INFO -   Next round's global F1 (for next state Q-val): 0.6703
2025-08-04 20:23:49,530 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:23:49,530 - INFO -       State(s): (6, 0, 0, 6, 6) -> NextState(s'): (6, 1, 0, 6, 6)
2025-08-04 20:23:49,530 - INFO -       Q(s) updated from 0.0000 to -0.0019 (TotalReward: -0.1880, NextMaxQ: 0.0000)
2025-08-04 20:23:49,531 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:23:49,531 - INFO -       State(s): (6, 0, 1, 6, 6) -> NextState(s'): (6, 1, 1, 6, 6)
2025-08-04 20:23:49,531 - INFO -       Q(s) updated from 0.0000 to -0.0019 (TotalReward: -0.1880, NextMaxQ: 0.0000)
2025-08-04 20:23:49,531 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:23:49,531 - INFO -       State(s): (6, 0, 0, 6, 6) -> NextState(s'): (6, 1, 0, 6, 6)
2025-08-04 20:23:49,532 - INFO -       Q(s) updated from -0.0019 to -0.0037 (TotalReward: -0.1880, NextMaxQ: 0.0000)
2025-08-04 20:23:49,532 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:23:49,532 - INFO -       State(s): (6, 0, 0, 6, 6) -> NextState(s'): (6, 1, 0, 6, 6)
2025-08-04 20:23:49,533 - INFO -       Q(s) updated from -0.0037 to -0.0056 (TotalReward: -0.1880, NextMaxQ: 0.0000)
2025-08-04 20:23:49,533 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:23:49,533 - INFO -       State(s): (6, 0, 0, 6, 6) -> NextState(s'): (6, 1, 0, 6, 6)
2025-08-04 20:23:49,533 - INFO -       Q(s) updated from -0.0056 to -0.0074 (TotalReward: -0.1880, NextMaxQ: 0.0000)
2025-08-04 20:23:49,534 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:23:49,534 - INFO - 
2025-08-04 20:23:49,535 - INFO - [ROUND 13]
2025-08-04 20:23:49,535 - INFO - [RLAgent choose_actions_softmax] Round 13. Temperature: 0.9511
2025-08-04 20:23:49,537 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:23:49,537 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.03733011900731023, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03733011900731023, '2395859185497387824': 0.03733011900731023, '10913316872057236365': 0.0, '6587436948557123441': -0.0018796908551863174, '17456602372862189643': -0.00740673196608531}
2025-08-04 20:23:49,538 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0989084801132669), '5975185251685626785': np.float64(0.0989084801132669), '8560019474512340676': np.float64(0.10286772456459048), '12043264814094380418': np.float64(0.0989084801132669), '4296149388320225194': np.float64(0.0989084801132669), '15388649110162717160': np.float64(0.10286772456459048), '2395859185497387824': np.float64(0.10286772456459048), '10913316872057236365': np.float64(0.0989084801132669), '6587436948557123441': np.float64(0.09871319928290849), '17456602372862189643': np.float64(0.09814122645698568)}
2025-08-04 20:23:49,539 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:23:49,539 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:23:49,539 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:23:49,545 - INFO -   New temperature for next round: 0.9464
2025-08-04 20:23:49,546 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 4, 2, 6, 6), '15388649110162717160': (6, 4, 2, 6, 6), '2395859185497387824': (6, 4, 2, 6, 6)}
2025-08-04 20:23:49,546 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:23:55,568 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:23:55,568 - INFO - [Round 13, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:23:55,573 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:23:55,573 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:23:55,573 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:23:55,574 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0801, Aggregated D_Loss=0.9252 from 2 clients (267 examples)
2025-08-04 20:23:55,574 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.74s across 3 clients
2025-08-04 20:23:55,574 - INFO - Fit phase aggregation: Summary
2025-08-04 20:23:55,574 - INFO -   fit_clients_total_received: 3
2025-08-04 20:23:55,574 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:23:55,574 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:23:55,574 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:23:55,574 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:23:55,575 - INFO -   aggregated_g_loss: 2.0801
2025-08-04 20:23:55,575 - INFO -   aggregated_d_loss: 0.9252
2025-08-04 20:23:55,575 - INFO -   fit_time_avg_seconds_all_reporting: 0.7415
2025-08-04 20:23:55,575 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:24:01,625 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:24:01,625 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.30250115394592286, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7241379310344828, 'avg_anomaly_score': 0.30440907644443826, 'recall': 0.6237623762376238, 'eval_time_seconds': 0.012114524841308594, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.6065573770491803, 'precision': 0.863013698630137}
2025-08-04 20:24:01,625 - INFO - [Round 13, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:24:01,625 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 13.
2025-08-04 20:24:01,625 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 13.
2025-08-04 20:24:01,626 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 13.
2025-08-04 20:24:01,626 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 13.
2025-08-04 20:24:01,626 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 13.
2025-08-04 20:24:01,626 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 13.
2025-08-04 20:24:01,626 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 13.
2025-08-04 20:24:01,627 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 13.
2025-08-04 20:24:01,627 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 13.
2025-08-04 20:24:01,627 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 13.
2025-08-04 20:24:01,628 - INFO - [Round 13, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:24:01,632 - INFO - ==================================================
2025-08-04 20:24:01,632 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:24:01,632 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:24:01,632 - INFO - ==================================================
2025-08-04 20:24:01,632 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:24:01,632 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3047
2025-08-04 20:24:01,633 - INFO -   Global Accuracy (Wgtd Avg): 0.5573
2025-08-04 20:24:01,633 - INFO -   Global F1 Score (Wgtd Avg): 0.6932
2025-08-04 20:24:01,633 - INFO -   Global Precision (Wgtd Avg): 0.8337
2025-08-04 20:24:01,633 - INFO -   Global Recall (Wgtd Avg): 0.5932
2025-08-04 20:24:01,633 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:24:01,633 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.1183) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.3017
2025-08-04 20:24:01,633 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 13.
2025-08-04 20:24:01,633 - INFO -   Final Global Reward for action: -0.3017. Client states at selection: {'8560019474512340676': (6, 4, 2, 6, 6), '15388649110162717160': (6, 4, 2, 6, 6), '2395859185497387824': (6, 4, 2, 6, 6)}
2025-08-04 20:24:01,634 - INFO -   Performance Reward: 0.1183, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:24:01,634 - INFO -   Next round's global F1 (for next state Q-val): 0.6932
2025-08-04 20:24:01,634 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:24:01,634 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 4, 2, 6, 6)
2025-08-04 20:24:01,634 - INFO -       Q(s) updated from 0.0373 to 0.0343 (TotalReward: -0.3017, NextMaxQ: 0.0373)
2025-08-04 20:24:01,635 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:24:01,635 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 4, 2, 6, 6)
2025-08-04 20:24:01,635 - INFO -       Q(s) updated from 0.0343 to 0.0312 (TotalReward: -0.3017, NextMaxQ: 0.0343)
2025-08-04 20:24:01,636 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:24:01,636 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 4, 2, 6, 6)
2025-08-04 20:24:01,636 - INFO -       Q(s) updated from 0.0312 to 0.0282 (TotalReward: -0.3017, NextMaxQ: 0.0312)
2025-08-04 20:24:01,636 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:24:01,637 - INFO - 
2025-08-04 20:24:01,637 - INFO - [ROUND 14]
2025-08-04 20:24:01,637 - INFO - [RLAgent choose_actions_softmax] Round 14. Temperature: 0.9464
2025-08-04 20:24:01,638 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:24:01,638 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.028175847046968627, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.028175847046968627, '2395859185497387824': 0.028175847046968627, '10913316872057236365': 0.0, '6587436948557123441': -0.0018796908551863174, '17456602372862189643': 0.0}
2025-08-04 20:24:01,638 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09912101781663794), '5975185251685626785': np.float64(0.09912101781663794), '8560019474512340676': np.float64(0.10211651939386412), '12043264814094380418': np.float64(0.09912101781663794), '4296149388320225194': np.float64(0.09912101781663794), '15388649110162717160': np.float64(0.10211651939386412), '2395859185497387824': np.float64(0.10211651939386412), '10913316872057236365': np.float64(0.09912101781663794), '6587436948557123441': np.float64(0.09892433491858005), '17456602372862189643': np.float64(0.09912101781663794)}
2025-08-04 20:24:01,639 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:24:01,639 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:01,639 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:01,642 - INFO -   New temperature for next round: 0.9416
2025-08-04 20:24:01,642 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 4, 2, 6, 6), '15388649110162717160': (6, 4, 2, 6, 6), '2395859185497387824': (6, 4, 2, 6, 6)}
2025-08-04 20:24:01,642 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:24:07,661 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:24:07,661 - INFO - [Round 14, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:24:07,667 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:24:07,667 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:24:07,667 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:24:07,667 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0808, Aggregated D_Loss=0.9209 from 2 clients (290 examples)
2025-08-04 20:24:07,667 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.19s across 3 clients
2025-08-04 20:24:07,668 - INFO - Fit phase aggregation: Summary
2025-08-04 20:24:07,668 - INFO -   fit_clients_total_received: 3
2025-08-04 20:24:07,668 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:24:07,668 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:24:07,668 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:24:07,668 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:24:07,668 - INFO -   aggregated_g_loss: 2.0808
2025-08-04 20:24:07,668 - INFO -   aggregated_d_loss: 0.9209
2025-08-04 20:24:07,668 - INFO -   fit_time_avg_seconds_all_reporting: 0.1934
2025-08-04 20:24:07,669 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:24:13,715 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:24:13,715 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.324431037902832, 'profile_name': 'Low-End IoT', 'f1_score': 0.71875, 'avg_anomaly_score': 0.3225516478220622, 'recall': 0.6106194690265486, 'eval_time_seconds': 0.009402751922607422, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.5909090909090909, 'precision': 0.8734177215189873}
2025-08-04 20:24:13,715 - INFO - [Round 14, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:24:13,715 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 14.
2025-08-04 20:24:13,715 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 14.
2025-08-04 20:24:13,716 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 14.
2025-08-04 20:24:13,717 - INFO - [Round 14, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:24:13,722 - INFO - ==================================================
2025-08-04 20:24:13,722 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:24:13,722 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:24:13,722 - INFO - ==================================================
2025-08-04 20:24:13,722 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:24:13,722 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3223
2025-08-04 20:24:13,722 - INFO -   Global Accuracy (Wgtd Avg): 0.5950
2025-08-04 20:24:13,723 - INFO -   Global F1 Score (Wgtd Avg): 0.7193
2025-08-04 20:24:13,723 - INFO -   Global Precision (Wgtd Avg): 0.8651
2025-08-04 20:24:13,723 - INFO -   Global Recall (Wgtd Avg): 0.6156
2025-08-04 20:24:13,723 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:24:13,723 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.1353) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.2847
2025-08-04 20:24:13,723 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 14.
2025-08-04 20:24:13,723 - INFO -   Final Global Reward for action: -0.2847. Client states at selection: {'8560019474512340676': (6, 4, 2, 6, 6), '15388649110162717160': (6, 4, 2, 6, 6), '2395859185497387824': (6, 4, 2, 6, 6)}
2025-08-04 20:24:13,724 - INFO -   Performance Reward: 0.1353, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:24:13,724 - INFO -   Next round's global F1 (for next state Q-val): 0.7193
2025-08-04 20:24:13,724 - INFO -   Optimistic init for new high-core state (6, 4, 2, 7, 7) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:24:13,724 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:24:13,724 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 4, 2, 7, 7)
2025-08-04 20:24:13,724 - INFO -       Q(s) updated from 0.0282 to 0.0255 (TotalReward: -0.2847, NextMaxQ: 0.0500)
2025-08-04 20:24:13,725 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:24:13,725 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (6, 4, 2, 7, 7)
2025-08-04 20:24:13,725 - INFO -       Q(s) updated from 0.0255 to 0.0228 (TotalReward: -0.2847, NextMaxQ: 0.0500)
2025-08-04 20:24:13,725 - INFO -   Optimistic init for new high-core state (7, 4, 2, 7, 7) (CID 2395859185497387824): Q set to 0.05
2025-08-04 20:24:13,725 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:24:13,725 - INFO -       State(s): (6, 4, 2, 6, 6) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:13,726 - INFO -       Q(s) updated from 0.0228 to 0.0202 (TotalReward: -0.2847, NextMaxQ: 0.0500)
2025-08-04 20:24:13,726 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:24:13,726 - INFO - 
2025-08-04 20:24:13,727 - INFO - [ROUND 15]
2025-08-04 20:24:13,727 - INFO - [RLAgent choose_actions_softmax] Round 15. Temperature: 0.9416
2025-08-04 20:24:13,727 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:24:13,727 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:24:13,727 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09839029030931509), '5975185251685626785': np.float64(0.09839029030931509), '8560019474512340676': np.float64(0.10375598927826475), '12043264814094380418': np.float64(0.09839029030931509), '4296149388320225194': np.float64(0.09839029030931509), '15388649110162717160': np.float64(0.10375598927826475), '2395859185497387824': np.float64(0.10375598927826475), '10913316872057236365': np.float64(0.09839029030931509), '6587436948557123441': np.float64(0.09839029030931509), '17456602372862189643': np.float64(0.09839029030931509)}
2025-08-04 20:24:13,728 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:24:13,728 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:13,728 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:13,731 - INFO -   New temperature for next round: 0.9369
2025-08-04 20:24:13,731 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (6, 4, 2, 7, 7), '15388649110162717160': (6, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:24:13,731 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:24:19,753 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:24:19,753 - INFO - [Round 15, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:24:19,759 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:24:19,759 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:24:19,759 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:24:19,760 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0792, Aggregated D_Loss=0.9162 from 2 clients (317 examples)
2025-08-04 20:24:19,760 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.20s across 3 clients
2025-08-04 20:24:19,760 - INFO - Fit phase aggregation: Summary
2025-08-04 20:24:19,760 - INFO -   fit_clients_total_received: 3
2025-08-04 20:24:19,760 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:24:19,760 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:24:19,761 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:24:19,761 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:24:19,761 - INFO -   aggregated_g_loss: 2.0792
2025-08-04 20:24:19,761 - INFO -   aggregated_d_loss: 0.9162
2025-08-04 20:24:19,761 - INFO -   fit_time_avg_seconds_all_reporting: 0.1961
2025-08-04 20:24:19,762 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:24:25,809 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:24:25,809 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.30646822452545164, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7829059829059829, 'avg_anomaly_score': 0.3021744866820778, 'recall': 0.6676384839650146, 'eval_time_seconds': 0.013559103012084961, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.684863523573201, 'precision': 0.9462809917355371}
2025-08-04 20:24:25,809 - INFO - [Round 15, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:24:25,809 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 15.
2025-08-04 20:24:25,809 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 15.
2025-08-04 20:24:25,810 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 15.
2025-08-04 20:24:25,811 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 15.
2025-08-04 20:24:25,812 - INFO - [Round 15, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:24:25,816 - INFO - ==================================================
2025-08-04 20:24:25,816 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:24:25,816 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:24:25,816 - INFO - ==================================================
2025-08-04 20:24:25,816 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:24:25,817 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3021
2025-08-04 20:24:25,817 - INFO -   Global Accuracy (Wgtd Avg): 0.6795
2025-08-04 20:24:25,817 - INFO -   Global F1 Score (Wgtd Avg): 0.7779
2025-08-04 20:24:25,817 - INFO -   Global Precision (Wgtd Avg): 0.9355
2025-08-04 20:24:25,817 - INFO -   Global Recall (Wgtd Avg): 0.6657
2025-08-04 20:24:25,817 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:24:25,817 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.2038) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.2162
2025-08-04 20:24:25,817 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 15.
2025-08-04 20:24:25,817 - INFO -   Final Global Reward for action: -0.2162. Client states at selection: {'8560019474512340676': (6, 4, 2, 7, 7), '15388649110162717160': (6, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:24:25,818 - INFO -   Performance Reward: 0.2038, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:24:25,818 - INFO -   Next round's global F1 (for next state Q-val): 0.7779
2025-08-04 20:24:25,818 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:24:25,818 - INFO -       State(s): (6, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:25,818 - INFO -       Q(s) updated from 0.0500 to 0.0478 (TotalReward: -0.2162, NextMaxQ: 0.0500)
2025-08-04 20:24:25,819 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:24:25,819 - INFO -       State(s): (6, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:25,819 - INFO -       Q(s) updated from 0.0478 to 0.0456 (TotalReward: -0.2162, NextMaxQ: 0.0500)
2025-08-04 20:24:25,819 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:24:25,820 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:25,820 - INFO -       Q(s) updated from 0.0500 to 0.0478 (TotalReward: -0.2162, NextMaxQ: 0.0500)
2025-08-04 20:24:25,820 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:24:25,821 - INFO - 
2025-08-04 20:24:25,821 - INFO - [ROUND 16]
2025-08-04 20:24:25,821 - INFO - [RLAgent choose_actions_softmax] Round 16. Temperature: 0.9369
2025-08-04 20:24:25,821 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:24:25,822 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04778849348479327, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.04778849348479327, '2395859185497387824': 0.04778849348479327, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:24:25,822 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09845438237180042), '5975185251685626785': np.float64(0.09845438237180042), '8560019474512340676': np.float64(0.10360644113246567), '12043264814094380418': np.float64(0.09845438237180042), '4296149388320225194': np.float64(0.09845438237180042), '15388649110162717160': np.float64(0.10360644113246567), '2395859185497387824': np.float64(0.10360644113246567), '10913316872057236365': np.float64(0.09845438237180042), '6587436948557123441': np.float64(0.09845438237180042), '17456602372862189643': np.float64(0.09845438237180042)}
2025-08-04 20:24:25,822 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:24:25,822 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:25,822 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:25,826 - INFO -   New temperature for next round: 0.9322
2025-08-04 20:24:25,826 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:24:25,827 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:24:31,850 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:24:31,850 - INFO - [Round 16, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:24:31,855 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:24:31,855 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:24:31,855 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:24:31,855 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0808, Aggregated D_Loss=0.9099 from 2 clients (341 examples)
2025-08-04 20:24:31,856 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.20s across 3 clients
2025-08-04 20:24:31,856 - INFO - Fit phase aggregation: Summary
2025-08-04 20:24:31,856 - INFO -   fit_clients_total_received: 3
2025-08-04 20:24:31,856 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:24:31,856 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:24:31,856 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:24:31,856 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:24:31,856 - INFO -   aggregated_g_loss: 2.0808
2025-08-04 20:24:31,856 - INFO -   aggregated_d_loss: 0.9099
2025-08-04 20:24:31,857 - INFO -   fit_time_avg_seconds_all_reporting: 0.2012
2025-08-04 20:24:31,857 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:24:37,899 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:24:37,899 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.3051837086677551, 'profile_name': 'Low-End IoT', 'f1_score': 0.7677496991576414, 'avg_anomaly_score': 0.3010557218351298, 'recall': 0.6563786008230452, 'eval_time_seconds': 0.013648509979248047, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6649305555555556, 'precision': 0.9246376811594202}
2025-08-04 20:24:37,899 - INFO - [Round 16, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 16.
2025-08-04 20:24:37,900 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 16.
2025-08-04 20:24:37,901 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 16.
2025-08-04 20:24:37,901 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 16.
2025-08-04 20:24:37,902 - INFO - [Round 16, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:24:37,906 - INFO - ==================================================
2025-08-04 20:24:37,906 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:24:37,906 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:24:37,906 - INFO - ==================================================
2025-08-04 20:24:37,906 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:24:37,907 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3001
2025-08-04 20:24:37,907 - INFO -   Global Accuracy (Wgtd Avg): 0.6642
2025-08-04 20:24:37,907 - INFO -   Global F1 Score (Wgtd Avg): 0.7673
2025-08-04 20:24:37,907 - INFO -   Global Precision (Wgtd Avg): 0.9228
2025-08-04 20:24:37,907 - INFO -   Global Recall (Wgtd Avg): 0.6567
2025-08-04 20:24:37,907 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:24:37,907 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0139) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.4339
2025-08-04 20:24:37,907 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 16.
2025-08-04 20:24:37,907 - INFO -   Final Global Reward for action: -0.4339. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:24:37,908 - INFO -   Performance Reward: -0.0139, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:24:37,908 - INFO -   Next round's global F1 (for next state Q-val): 0.7673
2025-08-04 20:24:37,908 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:24:37,908 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:37,908 - INFO -       Q(s) updated from 0.0478 to 0.0434 (TotalReward: -0.4339, NextMaxQ: 0.0478)
2025-08-04 20:24:37,909 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:24:37,909 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:37,909 - INFO -       Q(s) updated from 0.0434 to 0.0390 (TotalReward: -0.4339, NextMaxQ: 0.0434)
2025-08-04 20:24:37,909 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:24:37,910 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:24:37,910 - INFO -       Q(s) updated from 0.0390 to 0.0346 (TotalReward: -0.4339, NextMaxQ: 0.0390)
2025-08-04 20:24:37,910 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:24:37,911 - INFO - 
2025-08-04 20:24:37,911 - INFO - [ROUND 17]
2025-08-04 20:24:37,911 - INFO - [RLAgent choose_actions_softmax] Round 17. Temperature: 0.9322
2025-08-04 20:24:37,911 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:24:37,911 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.034640825089869764, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.034640825089869764, '2395859185497387824': 0.034640825089869764, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:24:37,912 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09887701180523015), '5975185251685626785': np.float64(0.09887701180523015), '8560019474512340676': np.float64(0.1026203057877963), '12043264814094380418': np.float64(0.09887701180523015), '4296149388320225194': np.float64(0.09887701180523015), '15388649110162717160': np.float64(0.1026203057877963), '2395859185497387824': np.float64(0.1026203057877963), '10913316872057236365': np.float64(0.09887701180523015), '6587436948557123441': np.float64(0.09887701180523015), '17456602372862189643': np.float64(0.09887701180523015)}
2025-08-04 20:24:37,912 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:24:37,912 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:37,912 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:37,916 - INFO -   New temperature for next round: 0.9276
2025-08-04 20:24:37,916 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:24:37,916 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:24:43,938 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:24:43,939 - INFO - [Round 17, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:24:43,944 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:24:43,944 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:24:43,944 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:24:43,944 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0818, Aggregated D_Loss=0.9042 from 2 clients (362 examples)
2025-08-04 20:24:43,944 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.21s across 3 clients
2025-08-04 20:24:43,944 - INFO - Fit phase aggregation: Summary
2025-08-04 20:24:43,944 - INFO -   fit_clients_total_received: 3
2025-08-04 20:24:43,944 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:24:43,945 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:24:43,945 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:24:43,945 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:24:43,945 - INFO -   aggregated_g_loss: 2.0818
2025-08-04 20:24:43,945 - INFO -   aggregated_d_loss: 0.9042
2025-08-04 20:24:43,945 - INFO -   fit_time_avg_seconds_all_reporting: 0.2095
2025-08-04 20:24:43,945 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:24:49,991 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:24:49,991 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.30469785928726195, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.759075907590759, 'avg_anomaly_score': 0.30014547998670765, 'recall': 0.6460674157303371, 'eval_time_seconds': 0.01660752296447754, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6498800959232613, 'precision': 0.92}
2025-08-04 20:24:49,991 - INFO - [Round 17, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:24:49,991 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 17.
2025-08-04 20:24:49,992 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 17.
2025-08-04 20:24:49,992 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 17.
2025-08-04 20:24:49,992 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 17.
2025-08-04 20:24:49,992 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 17.
2025-08-04 20:24:49,992 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 17.
2025-08-04 20:24:49,993 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 17.
2025-08-04 20:24:49,993 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 17.
2025-08-04 20:24:49,993 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 17.
2025-08-04 20:24:49,993 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 17.
2025-08-04 20:24:49,995 - INFO - [Round 17, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:24:49,999 - INFO - ==================================================
2025-08-04 20:24:50,000 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:24:50,000 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:24:50,000 - INFO - ==================================================
2025-08-04 20:24:50,000 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:24:50,000 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.2988
2025-08-04 20:24:50,000 - INFO -   Global Accuracy (Wgtd Avg): 0.6640
2025-08-04 20:24:50,001 - INFO -   Global F1 Score (Wgtd Avg): 0.7671
2025-08-04 20:24:50,001 - INFO -   Global Precision (Wgtd Avg): 0.9226
2025-08-04 20:24:50,001 - INFO -   Global Recall (Wgtd Avg): 0.6565
2025-08-04 20:24:50,001 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:24:50,001 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.4202
2025-08-04 20:24:50,001 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 17.
2025-08-04 20:24:50,001 - INFO -   Final Global Reward for action: -0.4202. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:24:50,002 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:24:50,002 - INFO -   Next round's global F1 (for next state Q-val): 0.7671
2025-08-04 20:24:50,002 - INFO -   Optimistic init for new high-core state (7, 5, 2, 7, 7) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:24:50,002 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:24:50,002 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:24:50,002 - INFO -       Q(s) updated from 0.0346 to 0.0305 (TotalReward: -0.4202, NextMaxQ: 0.0500)
2025-08-04 20:24:50,003 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:24:50,003 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:24:50,003 - INFO -       Q(s) updated from 0.0305 to 0.0265 (TotalReward: -0.4202, NextMaxQ: 0.0500)
2025-08-04 20:24:50,004 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:24:50,004 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:24:50,004 - INFO -       Q(s) updated from 0.0265 to 0.0225 (TotalReward: -0.4202, NextMaxQ: 0.0500)
2025-08-04 20:24:50,005 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:24:50,005 - INFO - 
2025-08-04 20:24:50,005 - INFO - [ROUND 18]
2025-08-04 20:24:50,006 - INFO - [RLAgent choose_actions_softmax] Round 18. Temperature: 0.9276
2025-08-04 20:24:50,006 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:24:50,006 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:24:50,007 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09836564731720264), '5975185251685626785': np.float64(0.09836564731720264), '8560019474512340676': np.float64(0.10381348959319382), '12043264814094380418': np.float64(0.09836564731720264), '4296149388320225194': np.float64(0.09836564731720264), '15388649110162717160': np.float64(0.10381348959319382), '2395859185497387824': np.float64(0.10381348959319382), '10913316872057236365': np.float64(0.09836564731720264), '6587436948557123441': np.float64(0.09836564731720264), '17456602372862189643': np.float64(0.09836564731720264)}
2025-08-04 20:24:50,007 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:24:50,007 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:50,007 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:24:50,012 - INFO -   New temperature for next round: 0.9229
2025-08-04 20:24:50,012 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:24:50,012 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:24:56,033 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:24:56,034 - INFO - [Round 18, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:24:56,038 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:24:56,038 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:24:56,039 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:24:56,039 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0820, Aggregated D_Loss=0.8994 from 2 clients (386 examples)
2025-08-04 20:24:56,039 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.21s across 3 clients
2025-08-04 20:24:56,039 - INFO - Fit phase aggregation: Summary
2025-08-04 20:24:56,039 - INFO -   fit_clients_total_received: 3
2025-08-04 20:24:56,039 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:24:56,040 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:24:56,040 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:24:56,040 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:24:56,040 - INFO -   aggregated_g_loss: 2.0820
2025-08-04 20:24:56,040 - INFO -   aggregated_d_loss: 0.8994
2025-08-04 20:24:56,040 - INFO -   fit_time_avg_seconds_all_reporting: 0.2149
2025-08-04 20:24:56,041 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:25:02,086 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:25:02,086 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.32105398178100586, 'profile_name': 'Low-End IoT', 'f1_score': 0.7450980392156863, 'avg_anomaly_score': 0.31254699230194094, 'recall': 0.6333333333333333, 'eval_time_seconds': 0.008761882781982422, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6285714285714286, 'precision': 0.9047619047619048}
2025-08-04 20:25:02,086 - INFO - [Round 18, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 18.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 18.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 18.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 18.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 18.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 18.
2025-08-04 20:25:02,087 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 18.
2025-08-04 20:25:02,088 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 18.
2025-08-04 20:25:02,088 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 18.
2025-08-04 20:25:02,088 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 18.
2025-08-04 20:25:02,089 - INFO - [Round 18, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:25:02,094 - INFO - ==================================================
2025-08-04 20:25:02,094 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:25:02,094 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:25:02,094 - INFO - ==================================================
2025-08-04 20:25:02,094 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:25:02,094 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3060
2025-08-04 20:25:02,095 - INFO -   Global Accuracy (Wgtd Avg): 0.6684
2025-08-04 20:25:02,095 - INFO -   Global F1 Score (Wgtd Avg): 0.7702
2025-08-04 20:25:02,095 - INFO -   Global Precision (Wgtd Avg): 0.9263
2025-08-04 20:25:02,095 - INFO -   Global Recall (Wgtd Avg): 0.6591
2025-08-04 20:25:02,095 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:25:02,095 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0028) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4472
2025-08-04 20:25:02,096 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 18.
2025-08-04 20:25:02,096 - INFO -   Final Global Reward for action: -0.4472. Client states at selection: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:02,096 - INFO -   Performance Reward: 0.0028, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:25:02,096 - INFO -   Next round's global F1 (for next state Q-val): 0.7702
2025-08-04 20:25:02,096 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:25:02,096 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:02,097 - INFO -       Q(s) updated from 0.0500 to 0.0455 (TotalReward: -0.4472, NextMaxQ: 0.0500)
2025-08-04 20:25:02,097 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:25:02,097 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:02,097 - INFO -       Q(s) updated from 0.0455 to 0.0410 (TotalReward: -0.4472, NextMaxQ: 0.0455)
2025-08-04 20:25:02,098 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:25:02,098 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:02,098 - INFO -       Q(s) updated from 0.0410 to 0.0364 (TotalReward: -0.4472, NextMaxQ: 0.0410)
2025-08-04 20:25:02,098 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:25:02,099 - INFO - 
2025-08-04 20:25:02,099 - INFO - [ROUND 19]
2025-08-04 20:25:02,099 - INFO - [RLAgent choose_actions_softmax] Round 19. Temperature: 0.9229
2025-08-04 20:25:02,099 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:25:02,099 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.03644779046557925, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03644779046557925, '2395859185497387824': 0.03644779046557925, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:25:02,100 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09880598550208601), '5975185251685626785': np.float64(0.09880598550208601), '8560019474512340676': np.float64(0.10278603382846598), '12043264814094380418': np.float64(0.09880598550208601), '4296149388320225194': np.float64(0.09880598550208601), '15388649110162717160': np.float64(0.10278603382846598), '2395859185497387824': np.float64(0.10278603382846598), '10913316872057236365': np.float64(0.09880598550208601), '6587436948557123441': np.float64(0.09880598550208601), '17456602372862189643': np.float64(0.09880598550208601)}
2025-08-04 20:25:02,100 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:25:02,100 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:02,101 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:02,104 - INFO -   New temperature for next round: 0.9183
2025-08-04 20:25:02,104 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:02,104 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:25:08,125 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:25:08,125 - INFO - [Round 19, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:25:08,131 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:25:08,131 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:25:08,131 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:25:08,131 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0821, Aggregated D_Loss=0.8950 from 2 clients (409 examples)
2025-08-04 20:25:08,131 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 3 clients
2025-08-04 20:25:08,131 - INFO - Fit phase aggregation: Summary
2025-08-04 20:25:08,131 - INFO -   fit_clients_total_received: 3
2025-08-04 20:25:08,132 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:25:08,132 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:25:08,132 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:25:08,132 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:25:08,132 - INFO -   aggregated_g_loss: 2.0821
2025-08-04 20:25:08,132 - INFO -   aggregated_d_loss: 0.8950
2025-08-04 20:25:08,132 - INFO -   fit_time_avg_seconds_all_reporting: 0.2279
2025-08-04 20:25:08,133 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:25:14,175 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:25:14,176 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.31906665563583375, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.768976897689769, 'avg_anomaly_score': 0.3114862310514747, 'recall': 0.6544943820224719, 'eval_time_seconds': 0.015932559967041016, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6642685851318945, 'precision': 0.932}
2025-08-04 20:25:14,176 - INFO - [Round 19, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:25:14,176 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 19.
2025-08-04 20:25:14,176 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 19.
2025-08-04 20:25:14,176 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 19.
2025-08-04 20:25:14,176 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 19.
2025-08-04 20:25:14,177 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 19.
2025-08-04 20:25:14,177 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 19.
2025-08-04 20:25:14,177 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 19.
2025-08-04 20:25:14,177 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 19.
2025-08-04 20:25:14,177 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 19.
2025-08-04 20:25:14,177 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 19.
2025-08-04 20:25:14,178 - INFO - [Round 19, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:25:14,182 - INFO - ==================================================
2025-08-04 20:25:14,182 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:25:14,182 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:25:14,182 - INFO - ==================================================
2025-08-04 20:25:14,183 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:25:14,183 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3097
2025-08-04 20:25:14,183 - INFO -   Global Accuracy (Wgtd Avg): 0.6684
2025-08-04 20:25:14,183 - INFO -   Global F1 Score (Wgtd Avg): 0.7702
2025-08-04 20:25:14,183 - INFO -   Global Precision (Wgtd Avg): 0.9263
2025-08-04 20:25:14,183 - INFO -   Global Recall (Wgtd Avg): 0.6591
2025-08-04 20:25:14,183 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:25:14,184 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4500
2025-08-04 20:25:14,184 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 19.
2025-08-04 20:25:14,184 - INFO -   Final Global Reward for action: -0.4500. Client states at selection: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:14,184 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:25:14,184 - INFO -   Next round's global F1 (for next state Q-val): 0.7702
2025-08-04 20:25:14,184 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:25:14,185 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:14,185 - INFO -       Q(s) updated from 0.0364 to 0.0319 (TotalReward: -0.4500, NextMaxQ: 0.0364)
2025-08-04 20:25:14,186 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:25:14,186 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:14,186 - INFO -       Q(s) updated from 0.0319 to 0.0274 (TotalReward: -0.4500, NextMaxQ: 0.0319)
2025-08-04 20:25:14,186 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:25:14,186 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:14,187 - INFO -       Q(s) updated from 0.0274 to 0.0229 (TotalReward: -0.4500, NextMaxQ: 0.0274)
2025-08-04 20:25:14,187 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:25:14,188 - INFO - 
2025-08-04 20:25:14,188 - INFO - [ROUND 20]
2025-08-04 20:25:14,189 - INFO - [RLAgent choose_actions_softmax] Round 20. Temperature: 0.9183
2025-08-04 20:25:14,189 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:25:14,189 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.02285205190110612, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.02285205190110612, '2395859185497387824': 0.02285205190110612, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:25:14,189 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0992497639269191), '5975185251685626785': np.float64(0.0992497639269191), '8560019474512340676': np.float64(0.10175055083718874), '12043264814094380418': np.float64(0.0992497639269191), '4296149388320225194': np.float64(0.0992497639269191), '15388649110162717160': np.float64(0.10175055083718874), '2395859185497387824': np.float64(0.10175055083718874), '10913316872057236365': np.float64(0.0992497639269191), '6587436948557123441': np.float64(0.0992497639269191), '17456602372862189643': np.float64(0.0992497639269191)}
2025-08-04 20:25:14,190 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:25:14,190 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:14,190 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:14,194 - INFO -   New temperature for next round: 0.9137
2025-08-04 20:25:14,194 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:14,194 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:25:20,216 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:25:20,216 - INFO - [Round 20, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:25:20,222 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:25:20,222 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:25:20,222 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:25:20,222 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0825, Aggregated D_Loss=0.8948 from 2 clients (429 examples)
2025-08-04 20:25:20,222 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.24s across 3 clients
2025-08-04 20:25:20,222 - INFO - Fit phase aggregation: Summary
2025-08-04 20:25:20,222 - INFO -   fit_clients_total_received: 3
2025-08-04 20:25:20,222 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:25:20,223 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:25:20,223 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:25:20,223 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:25:20,223 - INFO -   aggregated_g_loss: 2.0825
2025-08-04 20:25:20,223 - INFO -   aggregated_d_loss: 0.8948
2025-08-04 20:25:20,223 - INFO -   fit_time_avg_seconds_all_reporting: 0.2353
2025-08-04 20:25:20,224 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:25:26,267 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:25:26,268 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.33292776346206665, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7670343932511356, 'avg_anomaly_score': 0.3216904286781836, 'recall': 0.6595982142857143, 'eval_time_seconds': 0.03814888000488281, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.6662017666201767, 'precision': 0.9162790697674419}
2025-08-04 20:25:26,268 - INFO - [Round 20, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:25:26,268 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 20.
2025-08-04 20:25:26,268 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 20.
2025-08-04 20:25:26,268 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 20.
2025-08-04 20:25:26,269 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 20.
2025-08-04 20:25:26,271 - INFO - [Round 20, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:25:26,274 - INFO - ==================================================
2025-08-04 20:25:26,274 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:25:26,274 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:25:26,274 - INFO - ==================================================
2025-08-04 20:25:26,275 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:25:26,275 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3218
2025-08-04 20:25:26,275 - INFO -   Global Accuracy (Wgtd Avg): 0.6684
2025-08-04 20:25:26,275 - INFO -   Global F1 Score (Wgtd Avg): 0.7702
2025-08-04 20:25:26,275 - INFO -   Global Precision (Wgtd Avg): 0.9263
2025-08-04 20:25:26,275 - INFO -   Global Recall (Wgtd Avg): 0.6591
2025-08-04 20:25:26,275 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:25:26,275 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4500
2025-08-04 20:25:26,275 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 20.
2025-08-04 20:25:26,276 - INFO -   Final Global Reward for action: -0.4500. Client states at selection: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:26,276 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:25:26,276 - INFO -   Next round's global F1 (for next state Q-val): 0.7702
2025-08-04 20:25:26,276 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:25:26,276 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:26,276 - INFO -       Q(s) updated from 0.0229 to 0.0183 (TotalReward: -0.4500, NextMaxQ: 0.0229)
2025-08-04 20:25:26,285 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:25:26,285 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:26,285 - INFO -       Q(s) updated from 0.0183 to 0.0138 (TotalReward: -0.4500, NextMaxQ: 0.0183)
2025-08-04 20:25:26,286 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:25:26,286 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:26,286 - INFO -       Q(s) updated from 0.0138 to 0.0093 (TotalReward: -0.4500, NextMaxQ: 0.0138)
2025-08-04 20:25:26,286 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:25:26,287 - INFO - 
2025-08-04 20:25:26,287 - INFO - [ROUND 21]
2025-08-04 20:25:26,287 - INFO - [RLAgent choose_actions_softmax] Round 21. Temperature: 0.9137
2025-08-04 20:25:26,287 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:25:26,288 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.009296880399977687, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.009296880399977687, '2395859185497387824': 0.009296880399977687, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:25:26,288 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09969413944042728), '5975185251685626785': np.float64(0.09969413944042728), '8560019474512340676': np.float64(0.100713674639003), '12043264814094380418': np.float64(0.09969413944042728), '4296149388320225194': np.float64(0.09969413944042728), '15388649110162717160': np.float64(0.100713674639003), '2395859185497387824': np.float64(0.100713674639003), '10913316872057236365': np.float64(0.09969413944042728), '6587436948557123441': np.float64(0.09969413944042728), '17456602372862189643': np.float64(0.09969413944042728)}
2025-08-04 20:25:26,289 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:25:26,289 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:26,289 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:26,293 - INFO -   New temperature for next round: 0.9092
2025-08-04 20:25:26,293 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:26,293 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:25:32,315 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:25:32,316 - INFO - [Round 21, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:25:32,320 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:25:32,320 - INFO - Client (train_ex=0) reported status: skipped_no_normal_samples_for_round
2025-08-04 20:25:32,320 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:25:32,321 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0821, Aggregated D_Loss=0.8923 from 2 clients (447 examples)
2025-08-04 20:25:32,321 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 3 clients
2025-08-04 20:25:32,321 - INFO - Fit phase aggregation: Summary
2025-08-04 20:25:32,321 - INFO -   fit_clients_total_received: 3
2025-08-04 20:25:32,321 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:25:32,321 - INFO -   fit_clients_skipped_training: 1
2025-08-04 20:25:32,321 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:25:32,321 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:25:32,322 - INFO -   aggregated_g_loss: 2.0821
2025-08-04 20:25:32,322 - INFO -   aggregated_d_loss: 0.8923
2025-08-04 20:25:32,322 - INFO -   fit_time_avg_seconds_all_reporting: 0.2320
2025-08-04 20:25:32,322 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:25:38,366 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:25:38,366 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.3301261305809021, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7756482525366404, 'avg_anomaly_score': 0.318665714513871, 'recall': 0.6679611650485436, 'eval_time_seconds': 0.02039957046508789, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.6790322580645162, 'precision': 0.9247311827956989}
2025-08-04 20:25:38,366 - INFO - [Round 21, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 21.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 21.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 21.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 21.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 21.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 21.
2025-08-04 20:25:38,367 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 21.
2025-08-04 20:25:38,368 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 21.
2025-08-04 20:25:38,368 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 21.
2025-08-04 20:25:38,368 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 21.
2025-08-04 20:25:38,369 - INFO - [Round 21, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:25:38,373 - INFO - ==================================================
2025-08-04 20:25:38,373 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:25:38,373 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:25:38,373 - INFO - ==================================================
2025-08-04 20:25:38,374 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:25:38,374 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3193
2025-08-04 20:25:38,374 - INFO -   Global Accuracy (Wgtd Avg): 0.6699
2025-08-04 20:25:38,374 - INFO -   Global F1 Score (Wgtd Avg): 0.7712
2025-08-04 20:25:38,374 - INFO -   Global Precision (Wgtd Avg): 0.9275
2025-08-04 20:25:38,374 - INFO -   Global Recall (Wgtd Avg): 0.6600
2025-08-04 20:25:38,374 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:25:38,374 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0009) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4491
2025-08-04 20:25:38,375 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 21.
2025-08-04 20:25:38,375 - INFO -   Final Global Reward for action: -0.4491. Client states at selection: {'8560019474512340676': (7, 5, 2, 7, 7), '15388649110162717160': (7, 5, 2, 7, 7), '2395859185497387824': (7, 5, 2, 7, 7)}
2025-08-04 20:25:38,375 - INFO -   Performance Reward: 0.0009, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:25:38,375 - INFO -   Next round's global F1 (for next state Q-val): 0.7712
2025-08-04 20:25:38,375 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:25:38,375 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:38,375 - INFO -       Q(s) updated from 0.0093 to 0.0048 (TotalReward: -0.4491, NextMaxQ: 0.0093)
2025-08-04 20:25:38,376 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:25:38,376 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:38,376 - INFO -       Q(s) updated from 0.0048 to 0.0003 (TotalReward: -0.4491, NextMaxQ: 0.0048)
2025-08-04 20:25:38,376 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:25:38,377 - INFO -       State(s): (7, 5, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:25:38,377 - INFO -       Q(s) updated from 0.0003 to -0.0042 (TotalReward: -0.4491, NextMaxQ: 0.0003)
2025-08-04 20:25:38,377 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:25:38,378 - INFO - 
2025-08-04 20:25:38,378 - INFO - [ROUND 22]
2025-08-04 20:25:38,378 - INFO - [RLAgent choose_actions_softmax] Round 22. Temperature: 0.9092
2025-08-04 20:25:38,378 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:25:38,379 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': -0.004189335221828719, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': -0.004189335221828719, '2395859185497387824': -0.004189335221828719, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:25:38,379 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10013811044754593), '5975185251685626785': np.float64(0.10013811044754593), '8560019474512340676': np.float64(0.09967774228905953), '12043264814094380418': np.float64(0.10013811044754593), '4296149388320225194': np.float64(0.10013811044754593), '15388649110162717160': np.float64(0.09967774228905953), '2395859185497387824': np.float64(0.09967774228905953), '10913316872057236365': np.float64(0.10013811044754593), '6587436948557123441': np.float64(0.10013811044754593), '17456602372862189643': np.float64(0.10013811044754593)}
2025-08-04 20:25:38,379 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:25:38,379 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:25:38,379 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:25:38,379 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:25:38,383 - INFO -   New temperature for next round: 0.9046
2025-08-04 20:25:38,383 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'1640189632563049314': (7, 0, 0, 7, 7), '5975185251685626785': (7, 0, 1, 7, 7), '12043264814094380418': (7, 0, 0, 7, 7), '4296149388320225194': (7, 0, 0, 7, 7), '10913316872057236365': (7, 0, 0, 7, 7)}
2025-08-04 20:25:38,384 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:25:44,416 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:25:44,416 - INFO - [Round 22, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:25:44,423 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:25:44,423 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.00
2025-08-04 20:25:44,423 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.8976 from 5 clients (2315 examples)
2025-08-04 20:25:44,423 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.48s across 5 clients
2025-08-04 20:25:44,423 - INFO - Fit phase aggregation: Summary
2025-08-04 20:25:44,424 - INFO -   fit_clients_total_received: 5
2025-08-04 20:25:44,424 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:25:44,424 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:25:44,424 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:25:44,424 - INFO -   allocated_cores_avg_per_client: 2.0000
2025-08-04 20:25:44,424 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:25:44,424 - INFO -   aggregated_d_loss: 0.8976
2025-08-04 20:25:44,424 - INFO -   fit_time_avg_seconds_all_reporting: 0.4777
2025-08-04 20:25:44,425 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:25:50,466 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:25:50,466 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.335090184211731, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7863247863247863, 'avg_anomaly_score': 0.3244876428218397, 'recall': 0.6705539358600583, 'eval_time_seconds': 0.012375831604003906, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.6898263027295285, 'precision': 0.9504132231404959}
2025-08-04 20:25:50,466 - INFO - [Round 22, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:25:50,466 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 22.
2025-08-04 20:25:50,466 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 22.
2025-08-04 20:25:50,467 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 22.
2025-08-04 20:25:50,468 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 22.
2025-08-04 20:25:50,469 - INFO - [Round 22, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:25:50,473 - INFO - ==================================================
2025-08-04 20:25:50,473 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:25:50,473 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:25:50,473 - INFO - ==================================================
2025-08-04 20:25:50,473 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:25:50,473 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3229
2025-08-04 20:25:50,474 - INFO -   Global Accuracy (Wgtd Avg): 0.6790
2025-08-04 20:25:50,474 - INFO -   Global F1 Score (Wgtd Avg): 0.7775
2025-08-04 20:25:50,474 - INFO -   Global Precision (Wgtd Avg): 0.9351
2025-08-04 20:25:50,474 - INFO -   Global Recall (Wgtd Avg): 0.6654
2025-08-04 20:25:50,474 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:25:50,474 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0058) - FairPenalty(0.0000) - ResourceCost(0.2000) = -0.1942
2025-08-04 20:25:50,474 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 22.
2025-08-04 20:25:50,474 - INFO -   Final Global Reward for action: -0.1942. Client states at selection: {'1640189632563049314': (7, 0, 0, 7, 7), '5975185251685626785': (7, 0, 1, 7, 7), '12043264814094380418': (7, 0, 0, 7, 7), '4296149388320225194': (7, 0, 0, 7, 7), '10913316872057236365': (7, 0, 0, 7, 7)}
2025-08-04 20:25:50,474 - INFO -   Performance Reward: 0.0058, Fairness Penalty: 0.0000, Resource Cost: 0.2000
2025-08-04 20:25:50,475 - INFO -   Next round's global F1 (for next state Q-val): 0.7775
2025-08-04 20:25:50,475 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:25:50,475 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:25:50,475 - INFO -       Q(s) updated from 0.0000 to -0.0019 (TotalReward: -0.1942, NextMaxQ: 0.0000)
2025-08-04 20:25:50,475 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:25:50,476 - INFO -       State(s): (7, 0, 1, 7, 7) -> NextState(s'): (7, 1, 1, 7, 7)
2025-08-04 20:25:50,476 - INFO -       Q(s) updated from 0.0000 to -0.0019 (TotalReward: -0.1942, NextMaxQ: 0.0000)
2025-08-04 20:25:50,476 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:25:50,476 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:25:50,476 - INFO -       Q(s) updated from -0.0019 to -0.0039 (TotalReward: -0.1942, NextMaxQ: 0.0000)
2025-08-04 20:25:50,477 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:25:50,477 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:25:50,477 - INFO -       Q(s) updated from -0.0039 to -0.0058 (TotalReward: -0.1942, NextMaxQ: 0.0000)
2025-08-04 20:25:50,478 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:25:50,478 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:25:50,478 - INFO -       Q(s) updated from -0.0058 to -0.0077 (TotalReward: -0.1942, NextMaxQ: 0.0000)
2025-08-04 20:25:50,478 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:25:50,479 - INFO - 
2025-08-04 20:25:50,479 - INFO - [ROUND 23]
2025-08-04 20:25:50,479 - INFO - [RLAgent choose_actions_softmax] Round 23. Temperature: 0.9046
2025-08-04 20:25:50,480 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:25:50,480 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.02246735498845911, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.02246735498845911, '2395859185497387824': 0.02246735498845911, '10913316872057236365': 0.0, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:25:50,480 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09935544992038854), '5975185251685626785': np.float64(0.09935544992038854), '8560019474512340676': np.float64(0.10185398746365175), '12043264814094380418': np.float64(0.09935544992038854), '4296149388320225194': np.float64(0.09935544992038854), '15388649110162717160': np.float64(0.10185398746365175), '2395859185497387824': np.float64(0.10185398746365175), '10913316872057236365': np.float64(0.09935544992038854), '6587436948557123441': np.float64(0.0991423586731396), '17456602372862189643': np.float64(0.09851842933396235)}
2025-08-04 20:25:50,481 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:25:50,481 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:50,481 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:25:50,485 - INFO -   New temperature for next round: 0.9001
2025-08-04 20:25:50,485 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:25:50,486 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:25:59,507 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:25:59,507 - INFO - [Round 23, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:25:59,512 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:25:59,512 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:25:59,512 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0825, Aggregated D_Loss=0.8918 from 3 clients (497 examples)
2025-08-04 20:25:59,512 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.83s across 3 clients
2025-08-04 20:25:59,512 - INFO - Fit phase aggregation: Summary
2025-08-04 20:25:59,512 - INFO -   fit_clients_total_received: 3
2025-08-04 20:25:59,512 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:25:59,512 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:25:59,513 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:25:59,513 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:25:59,513 - INFO -   aggregated_g_loss: 2.0825
2025-08-04 20:25:59,513 - INFO -   aggregated_d_loss: 0.8918
2025-08-04 20:25:59,513 - INFO -   fit_time_avg_seconds_all_reporting: 0.8349
2025-08-04 20:25:59,513 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:26:05,556 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:26:05,556 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.345550000667572, 'profile_name': 'Low-End IoT', 'f1_score': 0.7821901323706378, 'avg_anomaly_score': 0.3324172638563646, 'recall': 0.668724279835391, 'eval_time_seconds': 0.013056039810180664, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6857638888888888, 'precision': 0.9420289855072463}
2025-08-04 20:26:05,556 - INFO - [Round 23, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:26:05,556 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 23.
2025-08-04 20:26:05,557 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 23.
2025-08-04 20:26:05,558 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 23.
2025-08-04 20:26:05,559 - INFO - [Round 23, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:26:05,563 - INFO - ==================================================
2025-08-04 20:26:05,563 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:26:05,563 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:26:05,563 - INFO - ==================================================
2025-08-04 20:26:05,563 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:26:05,563 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3307
2025-08-04 20:26:05,563 - INFO -   Global Accuracy (Wgtd Avg): 0.6812
2025-08-04 20:26:05,564 - INFO -   Global F1 Score (Wgtd Avg): 0.7791
2025-08-04 20:26:05,564 - INFO -   Global Precision (Wgtd Avg): 0.9370
2025-08-04 20:26:05,564 - INFO -   Global Recall (Wgtd Avg): 0.6667
2025-08-04 20:26:05,564 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:26:05,564 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0827) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.3373
2025-08-04 20:26:05,564 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 23.
2025-08-04 20:26:05,564 - INFO -   Final Global Reward for action: -0.3373. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (7, 4, 2, 7, 7)}
2025-08-04 20:26:05,564 - INFO -   Performance Reward: 0.0827, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:26:05,565 - INFO -   Next round's global F1 (for next state Q-val): 0.7791
2025-08-04 20:26:05,565 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:26:05,565 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:26:05,565 - INFO -       Q(s) updated from 0.0225 to 0.0191 (TotalReward: -0.3373, NextMaxQ: 0.0225)
2025-08-04 20:26:05,565 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:26:05,565 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:26:05,566 - INFO -       Q(s) updated from 0.0191 to 0.0157 (TotalReward: -0.3373, NextMaxQ: 0.0191)
2025-08-04 20:26:05,566 - INFO -   Optimistic init for new high-core state (8, 4, 2, 7, 7) (CID 2395859185497387824): Q set to 0.05
2025-08-04 20:26:05,566 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:26:05,566 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:26:05,566 - INFO -       Q(s) updated from 0.0157 to 0.0126 (TotalReward: -0.3373, NextMaxQ: 0.0500)
2025-08-04 20:26:05,567 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:26:05,568 - INFO - 
2025-08-04 20:26:05,568 - INFO - [ROUND 24]
2025-08-04 20:26:05,568 - INFO - [RLAgent choose_actions_softmax] Round 24. Temperature: 0.9001
2025-08-04 20:26:05,568 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:26:05,568 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.012599710726045366, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.012599710726045366, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:26:05,569 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09925860483744578), '5975185251685626785': np.float64(0.09925860483744578), '8560019474512340676': np.float64(0.10065782740634792), '12043264814094380418': np.float64(0.09925860483744578), '4296149388320225194': np.float64(0.09925860483744578), '15388649110162717160': np.float64(0.10065782740634792), '2395859185497387824': np.float64(0.10492845238148353), '10913316872057236365': np.float64(0.09925860483744578), '6587436948557123441': np.float64(0.09904465268579225), '17456602372862189643': np.float64(0.09841821593279941)}
2025-08-04 20:26:05,569 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:26:05,569 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:05,569 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:05,573 - INFO -   New temperature for next round: 0.8956
2025-08-04 20:26:05,573 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:05,573 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:26:11,595 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:26:11,595 - INFO - [Round 24, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:26:11,600 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:26:11,600 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:26:11,600 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8879 from 3 clients (520 examples)
2025-08-04 20:26:11,600 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.27s across 3 clients
2025-08-04 20:26:11,600 - INFO - Fit phase aggregation: Summary
2025-08-04 20:26:11,600 - INFO -   fit_clients_total_received: 3
2025-08-04 20:26:11,600 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:26:11,601 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:26:11,601 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:26:11,601 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:26:11,601 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:26:11,601 - INFO -   aggregated_d_loss: 0.8879
2025-08-04 20:26:11,601 - INFO -   fit_time_avg_seconds_all_reporting: 0.2715
2025-08-04 20:26:11,602 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:26:17,645 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:26:17,645 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.3353247046470642, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7741726151849448, 'avg_anomaly_score': 0.3221650245521081, 'recall': 0.6657366071428571, 'eval_time_seconds': 0.036415815353393555, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.6764295676429568, 'precision': 0.9248062015503876}
2025-08-04 20:26:17,645 - INFO - [Round 24, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:26:17,645 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 24.
2025-08-04 20:26:17,646 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 24.
2025-08-04 20:26:17,646 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 24.
2025-08-04 20:26:17,646 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 24.
2025-08-04 20:26:17,646 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 24.
2025-08-04 20:26:17,646 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 24.
2025-08-04 20:26:17,646 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 24.
2025-08-04 20:26:17,647 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 24.
2025-08-04 20:26:17,647 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 24.
2025-08-04 20:26:17,647 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 24.
2025-08-04 20:26:17,649 - INFO - [Round 24, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:26:17,652 - INFO - ==================================================
2025-08-04 20:26:17,652 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:26:17,652 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:26:17,653 - INFO - ==================================================
2025-08-04 20:26:17,653 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:26:17,653 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3222
2025-08-04 20:26:17,653 - INFO -   Global Accuracy (Wgtd Avg): 0.6794
2025-08-04 20:26:17,653 - INFO -   Global F1 Score (Wgtd Avg): 0.7778
2025-08-04 20:26:17,653 - INFO -   Global Precision (Wgtd Avg): 0.9355
2025-08-04 20:26:17,653 - INFO -   Global Recall (Wgtd Avg): 0.6656
2025-08-04 20:26:17,653 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:26:17,653 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0017) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.4217
2025-08-04 20:26:17,653 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 24.
2025-08-04 20:26:17,653 - INFO -   Final Global Reward for action: -0.4217. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:17,654 - INFO -   Performance Reward: -0.0017, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:26:17,654 - INFO -   Next round's global F1 (for next state Q-val): 0.7778
2025-08-04 20:26:17,654 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:26:17,654 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:26:17,654 - INFO -       Q(s) updated from 0.0126 to 0.0084 (TotalReward: -0.4217, NextMaxQ: 0.0126)
2025-08-04 20:26:17,654 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:26:17,655 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:26:17,655 - INFO -       Q(s) updated from 0.0084 to 0.0041 (TotalReward: -0.4217, NextMaxQ: 0.0084)
2025-08-04 20:26:17,655 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:26:17,655 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:26:17,655 - INFO -       Q(s) updated from 0.0500 to 0.0457 (TotalReward: -0.4217, NextMaxQ: 0.0500)
2025-08-04 20:26:17,656 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:26:17,656 - INFO - 
2025-08-04 20:26:17,657 - INFO - [ROUND 25]
2025-08-04 20:26:17,657 - INFO - [RLAgent choose_actions_softmax] Round 25. Temperature: 0.8956
2025-08-04 20:26:17,657 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:26:17,657 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.00414480402291321, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.00414480402291321, '2395859185497387824': 0.045733031575092155, '10913316872057236365': 0.0, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:26:17,657 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09949265458746205), '5975185251685626785': np.float64(0.09949265458746205), '8560019474512340676': np.float64(0.09995417626927398), '12043264814094380418': np.float64(0.09949265458746205), '4296149388320225194': np.float64(0.09949265458746205), '15388649110162717160': np.float64(0.09995417626927398), '2395859185497387824': np.float64(0.10470518397471801), '10913316872057236365': np.float64(0.09949265458746205), '6587436948557123441': np.float64(0.09927712143877813), '17456602372862189643': np.float64(0.09864606911064554)}
2025-08-04 20:26:17,658 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:26:17,658 - INFO -     Selected 1 CIDs with this factor: ['2395859185497387824']
2025-08-04 20:26:17,658 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824']
2025-08-04 20:26:17,661 - INFO -   New temperature for next round: 0.8911
2025-08-04 20:26:17,661 - INFO -   Final selected CIDs to return: ['2395859185497387824']. Corresponding states: {'2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:17,661 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:26:23,673 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:26:23,673 - INFO - [Round 25, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:26:23,675 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:26:23,676 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:26:23,676 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.8905 from 1 clients (536 examples)
2025-08-04 20:26:23,676 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.51s across 1 clients
2025-08-04 20:26:23,676 - INFO - Fit phase aggregation: Summary
2025-08-04 20:26:23,676 - INFO -   fit_clients_total_received: 1
2025-08-04 20:26:23,676 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:26:23,676 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:26:23,676 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:26:23,677 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:26:23,677 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:26:23,677 - INFO -   aggregated_d_loss: 0.8905
2025-08-04 20:26:23,677 - INFO -   fit_time_avg_seconds_all_reporting: 0.5079
2025-08-04 20:26:23,677 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:26:29,730 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:26:29,730 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.34051084518432617, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.77994046256011, 'avg_anomaly_score': 0.32549381957218454, 'recall': 0.6662754303599374, 'eval_time_seconds': 0.045548439025878906, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.6815772034459907, 'precision': 0.9403644395361679}
2025-08-04 20:26:29,730 - INFO - [Round 25, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:26:29,730 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 25.
2025-08-04 20:26:29,731 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 25.
2025-08-04 20:26:29,732 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 25.
2025-08-04 20:26:29,732 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 25.
2025-08-04 20:26:29,733 - INFO - [Round 25, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:26:29,737 - INFO - ==================================================
2025-08-04 20:26:29,737 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:26:29,737 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:26:29,737 - INFO - ==================================================
2025-08-04 20:26:29,737 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:26:29,737 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3266
2025-08-04 20:26:29,738 - INFO -   Global Accuracy (Wgtd Avg): 0.6847
2025-08-04 20:26:29,738 - INFO -   Global F1 Score (Wgtd Avg): 0.7815
2025-08-04 20:26:29,738 - INFO -   Global Precision (Wgtd Avg): 0.9398
2025-08-04 20:26:29,738 - INFO -   Global Recall (Wgtd Avg): 0.6688
2025-08-04 20:26:29,738 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:26:29,738 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0857) - FairPenalty(0.0200) - ResourceCost(0.1000) = -0.0343
2025-08-04 20:26:29,739 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 25.
2025-08-04 20:26:29,739 - INFO -   Final Global Reward for action: -0.0343. Client states at selection: {'2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:29,739 - INFO -   Performance Reward: 0.0857, Fairness Penalty: 0.0200, Resource Cost: 0.1000
2025-08-04 20:26:29,739 - INFO -   Next round's global F1 (for next state Q-val): 0.7815
2025-08-04 20:26:29,739 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:26:29,739 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:26:29,739 - INFO -       Q(s) updated from 0.0457 to 0.0453 (TotalReward: -0.0343, NextMaxQ: 0.0457)
2025-08-04 20:26:29,740 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:26:29,740 - INFO - 
2025-08-04 20:26:29,740 - INFO - [ROUND 26]
2025-08-04 20:26:29,741 - INFO - [RLAgent choose_actions_softmax] Round 26. Temperature: 0.8911
2025-08-04 20:26:29,741 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:26:29,741 - INFO -   Optimistic init for new high-core state (7, 3, 2, 7, 7) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:26:29,741 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.04534452092778437, '10913316872057236365': 0.0, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:26:29,741 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09845522614215807), '5975185251685626785': np.float64(0.09845522614215807), '8560019474512340676': np.float64(0.10413745196535491), '12043264814094380418': np.float64(0.09845522614215807), '4296149388320225194': np.float64(0.09845522614215807), '15388649110162717160': np.float64(0.10413745196535491), '2395859185497387824': np.float64(0.10359481919228539), '10913316872057236365': np.float64(0.09845522614215807), '6587436948557123441': np.float64(0.09824086977890312), '17456602372862189643': np.float64(0.0976132763873113)}
2025-08-04 20:26:29,742 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:26:29,742 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:29,742 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:29,746 - INFO -   New temperature for next round: 0.8867
2025-08-04 20:26:29,746 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (7, 3, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:29,746 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:26:35,768 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:26:35,768 - INFO - [Round 26, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:26:35,773 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:26:35,773 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:26:35,773 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0842, Aggregated D_Loss=0.8869 from 3 clients (566 examples)
2025-08-04 20:26:35,773 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.28s across 3 clients
2025-08-04 20:26:35,773 - INFO - Fit phase aggregation: Summary
2025-08-04 20:26:35,773 - INFO -   fit_clients_total_received: 3
2025-08-04 20:26:35,773 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:26:35,773 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:26:35,774 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:26:35,774 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:26:35,774 - INFO -   aggregated_g_loss: 2.0842
2025-08-04 20:26:35,774 - INFO -   aggregated_d_loss: 0.8869
2025-08-04 20:26:35,774 - INFO -   fit_time_avg_seconds_all_reporting: 0.2783
2025-08-04 20:26:35,774 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:26:41,815 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:26:41,815 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.33920702934265134, 'profile_name': 'Low-End IoT', 'f1_score': 0.7916666666666666, 'avg_anomaly_score': 0.32763106217890076, 'recall': 0.672566371681416, 'eval_time_seconds': 0.01426076889038086, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.696969696969697, 'precision': 0.9620253164556962}
2025-08-04 20:26:41,815 - INFO - [Round 26, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 26.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 26.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 26.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 26.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 26.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 26.
2025-08-04 20:26:41,816 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 26.
2025-08-04 20:26:41,817 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 26.
2025-08-04 20:26:41,817 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 26.
2025-08-04 20:26:41,817 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 26.
2025-08-04 20:26:41,818 - INFO - [Round 26, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:26:41,822 - INFO - ==================================================
2025-08-04 20:26:41,822 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:26:41,822 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:26:41,823 - INFO - ==================================================
2025-08-04 20:26:41,823 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:26:41,823 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3306
2025-08-04 20:26:41,823 - INFO -   Global Accuracy (Wgtd Avg): 0.6872
2025-08-04 20:26:41,823 - INFO -   Global F1 Score (Wgtd Avg): 0.7832
2025-08-04 20:26:41,823 - INFO -   Global Precision (Wgtd Avg): 0.9419
2025-08-04 20:26:41,823 - INFO -   Global Recall (Wgtd Avg): 0.6703
2025-08-04 20:26:41,824 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:26:41,824 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0836) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.3164
2025-08-04 20:26:41,824 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 26.
2025-08-04 20:26:41,824 - INFO -   Final Global Reward for action: -0.3164. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (7, 3, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:41,824 - INFO -   Performance Reward: 0.0836, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:26:41,824 - INFO -   Next round's global F1 (for next state Q-val): 0.7832
2025-08-04 20:26:41,824 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:26:41,824 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:26:41,824 - INFO -       Q(s) updated from 0.0500 to 0.0468 (TotalReward: -0.3164, NextMaxQ: 0.0500)
2025-08-04 20:26:41,825 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:26:41,825 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:26:41,825 - INFO -       Q(s) updated from 0.0468 to 0.0436 (TotalReward: -0.3164, NextMaxQ: 0.0468)
2025-08-04 20:26:41,826 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:26:41,826 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:26:41,826 - INFO -       Q(s) updated from 0.0453 to 0.0421 (TotalReward: -0.3164, NextMaxQ: 0.0453)
2025-08-04 20:26:41,826 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:26:41,827 - INFO - 
2025-08-04 20:26:41,827 - INFO - [ROUND 27]
2025-08-04 20:26:41,827 - INFO - [RLAgent choose_actions_softmax] Round 27. Temperature: 0.8867
2025-08-04 20:26:41,827 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:26:41,828 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04357561608078906, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.04357561608078906, '2395859185497387824': 0.042135377547821595, '10913316872057236365': 0.0, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:26:41,828 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09863261551073883), '5975185251685626785': np.float64(0.09863261551073883), '8560019474512340676': np.float64(0.10360111563915822), '12043264814094380418': np.float64(0.09863261551073883), '4296149388320225194': np.float64(0.09863261551073883), '15388649110162717160': np.float64(0.10360111563915822), '2395859185497387824': np.float64(0.10343296762025467), '10913316872057236365': np.float64(0.09863261551073883), '6587436948557123441': np.float64(0.0984167950102623), '17456602372862189643': np.float64(0.09778492853747238)}
2025-08-04 20:26:41,828 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:26:41,828 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:41,828 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:41,832 - INFO -   New temperature for next round: 0.8822
2025-08-04 20:26:41,832 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (7, 3, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:41,833 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:26:47,854 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:26:47,854 - INFO - [Round 27, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:26:47,859 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:26:47,860 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:26:47,860 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0853, Aggregated D_Loss=0.8869 from 3 clients (594 examples)
2025-08-04 20:26:47,860 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.30s across 3 clients
2025-08-04 20:26:47,860 - INFO - Fit phase aggregation: Summary
2025-08-04 20:26:47,860 - INFO -   fit_clients_total_received: 3
2025-08-04 20:26:47,860 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:26:47,860 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:26:47,860 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:26:47,860 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:26:47,861 - INFO -   aggregated_g_loss: 2.0853
2025-08-04 20:26:47,861 - INFO -   aggregated_d_loss: 0.8869
2025-08-04 20:26:47,861 - INFO -   fit_time_avg_seconds_all_reporting: 0.2955
2025-08-04 20:26:47,861 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:26:53,904 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:26:53,905 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.3488391637802124, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7806619078520441, 'avg_anomaly_score': 0.33314393545959453, 'recall': 0.6713169642857143, 'eval_time_seconds': 0.04799056053161621, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.6857275685727569, 'precision': 0.9325581395348838}
2025-08-04 20:26:53,905 - INFO - [Round 27, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:26:53,905 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 27.
2025-08-04 20:26:53,905 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 27.
2025-08-04 20:26:53,905 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 27.
2025-08-04 20:26:53,905 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 27.
2025-08-04 20:26:53,905 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 27.
2025-08-04 20:26:53,906 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 27.
2025-08-04 20:26:53,906 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 27.
2025-08-04 20:26:53,906 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 27.
2025-08-04 20:26:53,906 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 27.
2025-08-04 20:26:53,906 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 27.
2025-08-04 20:26:53,907 - INFO - [Round 27, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:26:53,911 - INFO - ==================================================
2025-08-04 20:26:53,911 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:26:53,912 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:26:53,912 - INFO - ==================================================
2025-08-04 20:26:53,912 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:26:53,912 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3330
2025-08-04 20:26:53,912 - INFO -   Global Accuracy (Wgtd Avg): 0.6876
2025-08-04 20:26:53,912 - INFO -   Global F1 Score (Wgtd Avg): 0.7835
2025-08-04 20:26:53,912 - INFO -   Global Precision (Wgtd Avg): 0.9423
2025-08-04 20:26:53,912 - INFO -   Global Recall (Wgtd Avg): 0.6706
2025-08-04 20:26:53,912 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:26:53,912 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0807) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.3193
2025-08-04 20:26:53,913 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 27.
2025-08-04 20:26:53,913 - INFO -   Final Global Reward for action: -0.3193. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (7, 3, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:26:53,913 - INFO -   Performance Reward: 0.0807, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:26:53,913 - INFO -   Next round's global F1 (for next state Q-val): 0.7835
2025-08-04 20:26:53,913 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:26:53,914 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:26:53,914 - INFO -       Q(s) updated from 0.0436 to 0.0400 (TotalReward: -0.3193, NextMaxQ: 0.0041)
2025-08-04 20:26:53,914 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:26:53,914 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:26:53,915 - INFO -       Q(s) updated from 0.0400 to 0.0364 (TotalReward: -0.3193, NextMaxQ: 0.0041)
2025-08-04 20:26:53,915 - INFO -   Optimistic init for new high-core state (8, 5, 2, 7, 7) (CID 2395859185497387824): Q set to 0.05
2025-08-04 20:26:53,915 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:26:53,915 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:26:53,915 - INFO -       Q(s) updated from 0.0421 to 0.0390 (TotalReward: -0.3193, NextMaxQ: 0.0500)
2025-08-04 20:26:53,916 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:26:53,916 - INFO - 
2025-08-04 20:26:53,917 - INFO - [ROUND 28]
2025-08-04 20:26:53,917 - INFO - [RLAgent choose_actions_softmax] Round 28. Temperature: 0.8822
2025-08-04 20:26:53,917 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:26:53,917 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.00414480402291321, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.00414480402291321, '2395859185497387824': 0.05, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:26:53,917 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0989369509089254), '5975185251685626785': np.float64(0.0995794845397573), '8560019474512340676': np.float64(0.1002689264436055), '12043264814094380418': np.float64(0.0989369509089254), '4296149388320225194': np.float64(0.0989369509089254), '15388649110162717160': np.float64(0.1002689264436055), '2395859185497387824': np.float64(0.10561842348864733), '10913316872057236365': np.float64(0.0989369509089254), '6587436948557123441': np.float64(0.0995794845397573), '17456602372862189643': np.float64(0.0989369509089254)}
2025-08-04 20:26:53,918 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:26:53,918 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:53,918 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:26:53,921 - INFO -   New temperature for next round: 0.8778
2025-08-04 20:26:53,922 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:26:53,922 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:26:59,944 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:26:59,944 - INFO - [Round 28, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:26:59,949 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:26:59,949 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:26:59,949 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.8860 from 3 clients (617 examples)
2025-08-04 20:26:59,949 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.28s across 3 clients
2025-08-04 20:26:59,949 - INFO - Fit phase aggregation: Summary
2025-08-04 20:26:59,949 - INFO -   fit_clients_total_received: 3
2025-08-04 20:26:59,950 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:26:59,950 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:26:59,950 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:26:59,950 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:26:59,950 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:26:59,950 - INFO -   aggregated_d_loss: 0.8860
2025-08-04 20:26:59,950 - INFO -   fit_time_avg_seconds_all_reporting: 0.2788
2025-08-04 20:26:59,951 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:27:05,996 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:27:05,997 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.3440726399421692, 'profile_name': 'Low-End IoT', 'f1_score': 0.7845968712394705, 'avg_anomaly_score': 0.33119378777013886, 'recall': 0.6707818930041153, 'eval_time_seconds': 0.01630258560180664, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6892361111111112, 'precision': 0.9449275362318841}
2025-08-04 20:27:05,997 - INFO - [Round 28, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:27:05,997 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 28.
2025-08-04 20:27:05,997 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 28.
2025-08-04 20:27:05,997 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 28.
2025-08-04 20:27:05,997 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 28.
2025-08-04 20:27:05,998 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 28.
2025-08-04 20:27:05,998 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 28.
2025-08-04 20:27:05,998 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 28.
2025-08-04 20:27:05,998 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 28.
2025-08-04 20:27:05,998 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 28.
2025-08-04 20:27:05,998 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 28.
2025-08-04 20:27:06,000 - INFO - [Round 28, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:27:06,004 - INFO - ==================================================
2025-08-04 20:27:06,004 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:27:06,004 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:27:06,004 - INFO - ==================================================
2025-08-04 20:27:06,005 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:27:06,005 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3295
2025-08-04 20:27:06,005 - INFO -   Global Accuracy (Wgtd Avg): 0.6879
2025-08-04 20:27:06,005 - INFO -   Global F1 Score (Wgtd Avg): 0.7837
2025-08-04 20:27:06,005 - INFO -   Global Precision (Wgtd Avg): 0.9425
2025-08-04 20:27:06,005 - INFO -   Global Recall (Wgtd Avg): 0.6707
2025-08-04 20:27:06,005 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:27:06,005 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0700) - ResourceCost(0.3600) = -0.3496
2025-08-04 20:27:06,006 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 28.
2025-08-04 20:27:06,006 - INFO -   Final Global Reward for action: -0.3496. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (7, 4, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:06,006 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0700, Resource Cost: 0.3600
2025-08-04 20:27:06,006 - INFO -   Next round's global F1 (for next state Q-val): 0.7837
2025-08-04 20:27:06,006 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:27:06,006 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:27:06,006 - INFO -       Q(s) updated from 0.0041 to 0.0006 (TotalReward: -0.3496, NextMaxQ: 0.0041)
2025-08-04 20:27:06,007 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:27:06,007 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:27:06,007 - INFO -       Q(s) updated from 0.0006 to -0.0029 (TotalReward: -0.3496, NextMaxQ: 0.0006)
2025-08-04 20:27:06,007 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:27:06,007 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:27:06,008 - INFO -       Q(s) updated from 0.0500 to 0.0465 (TotalReward: -0.3496, NextMaxQ: 0.0500)
2025-08-04 20:27:06,008 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:27:06,009 - INFO - 
2025-08-04 20:27:06,009 - INFO - [ROUND 29]
2025-08-04 20:27:06,009 - INFO - [RLAgent choose_actions_softmax] Round 29. Temperature: 0.8778
2025-08-04 20:27:06,009 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:27:06,010 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': -0.0028528786456946593, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': -0.0028528786456946593, '2395859185497387824': 0.04645355317390392, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:27:06,010 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09913161892718145), '5975185251685626785': np.float64(0.09977866250189371), '8560019474512340676': np.float64(0.09967520559417777), '12043264814094380418': np.float64(0.09913161892718145), '4296149388320225194': np.float64(0.09913161892718145), '15388649110162717160': np.float64(0.09967520559417777), '2395859185497387824': np.float64(0.10543416917194971), '10913316872057236365': np.float64(0.09913161892718145), '6587436948557123441': np.float64(0.09977866250189371), '17456602372862189643': np.float64(0.09913161892718145)}
2025-08-04 20:27:06,010 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:27:06,011 - INFO -     Selected 1 CIDs with this factor: ['2395859185497387824']
2025-08-04 20:27:06,011 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824']
2025-08-04 20:27:06,014 - INFO -   New temperature for next round: 0.8734
2025-08-04 20:27:06,014 - INFO -   Final selected CIDs to return: ['2395859185497387824']. Corresponding states: {'2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:06,014 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:27:12,025 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:27:12,025 - INFO - [Round 29, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:27:12,028 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:27:12,028 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:27:12,028 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0852, Aggregated D_Loss=0.8919 from 1 clients (633 examples)
2025-08-04 20:27:12,028 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.57s across 1 clients
2025-08-04 20:27:12,028 - INFO - Fit phase aggregation: Summary
2025-08-04 20:27:12,028 - INFO -   fit_clients_total_received: 1
2025-08-04 20:27:12,028 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:27:12,029 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:27:12,029 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:27:12,029 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:27:12,029 - INFO -   aggregated_g_loss: 2.0852
2025-08-04 20:27:12,029 - INFO -   aggregated_d_loss: 0.8919
2025-08-04 20:27:12,029 - INFO -   fit_time_avg_seconds_all_reporting: 0.5689
2025-08-04 20:27:12,030 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:27:21,069 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:27:21,069 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.3393629193305969, 'profile_name': 'Low-End IoT', 'f1_score': 0.7916666666666666, 'avg_anomaly_score': 0.3294103208816413, 'recall': 0.672566371681416, 'eval_time_seconds': 0.011125564575195312, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.696969696969697, 'precision': 0.9620253164556962}
2025-08-04 20:27:21,069 - INFO - [Round 29, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 29.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 29.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 29.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 29.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 29.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 29.
2025-08-04 20:27:21,070 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 29.
2025-08-04 20:27:21,071 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 29.
2025-08-04 20:27:21,071 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 29.
2025-08-04 20:27:21,071 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 29.
2025-08-04 20:27:21,073 - INFO - [Round 29, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:27:21,077 - INFO - ==================================================
2025-08-04 20:27:21,077 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:27:21,077 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:27:21,077 - INFO - ==================================================
2025-08-04 20:27:21,077 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:27:21,078 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3325
2025-08-04 20:27:21,078 - INFO -   Global Accuracy (Wgtd Avg): 0.6906
2025-08-04 20:27:21,078 - INFO -   Global F1 Score (Wgtd Avg): 0.7856
2025-08-04 20:27:21,078 - INFO -   Global Precision (Wgtd Avg): 0.9448
2025-08-04 20:27:21,078 - INFO -   Global Recall (Wgtd Avg): 0.6723
2025-08-04 20:27:21,078 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:27:21,078 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0840) - FairPenalty(0.0300) - ResourceCost(0.1000) = -0.0460
2025-08-04 20:27:21,079 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 29.
2025-08-04 20:27:21,079 - INFO -   Final Global Reward for action: -0.0460. Client states at selection: {'2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:21,079 - INFO -   Performance Reward: 0.0840, Fairness Penalty: 0.0300, Resource Cost: 0.1000
2025-08-04 20:27:21,079 - INFO -   Next round's global F1 (for next state Q-val): 0.7856
2025-08-04 20:27:21,079 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:27:21,079 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:27:21,079 - INFO -       Q(s) updated from 0.0465 to 0.0459 (TotalReward: -0.0460, NextMaxQ: 0.0465)
2025-08-04 20:27:21,080 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:27:21,080 - INFO - 
2025-08-04 20:27:21,080 - INFO - [ROUND 30]
2025-08-04 20:27:21,080 - INFO - [RLAgent choose_actions_softmax] Round 30. Temperature: 0.8734
2025-08-04 20:27:21,081 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:27:21,081 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.036429025034175486, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.036429025034175486, '2395859185497387824': 0.04594685891297685, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:27:21,081 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09823238397583864), '5975185251685626785': np.float64(0.09887679066190366), '8560019474512340676': np.float64(0.10331749064203186), '12043264814094380418': np.float64(0.09823238397583864), '4296149388320225194': np.float64(0.09823238397583864), '15388649110162717160': np.float64(0.10331749064203186), '2395859185497387824': np.float64(0.10444951751293578), '10913316872057236365': np.float64(0.09823238397583864), '6587436948557123441': np.float64(0.09887679066190366), '17456602372862189643': np.float64(0.09823238397583864)}
2025-08-04 20:27:21,081 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:27:21,082 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:27:21,082 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:27:21,086 - INFO -   New temperature for next round: 0.8691
2025-08-04 20:27:21,086 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (7, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:21,086 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:27:30,108 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:27:30,109 - INFO - [Round 30, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:27:30,114 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:27:30,114 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:27:30,114 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0848, Aggregated D_Loss=0.8842 from 3 clients (662 examples)
2025-08-04 20:27:30,114 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.30s across 3 clients
2025-08-04 20:27:30,114 - INFO - Fit phase aggregation: Summary
2025-08-04 20:27:30,114 - INFO -   fit_clients_total_received: 3
2025-08-04 20:27:30,114 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:27:30,115 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:27:30,115 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:27:30,115 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:27:30,115 - INFO -   aggregated_g_loss: 2.0848
2025-08-04 20:27:30,115 - INFO -   aggregated_d_loss: 0.8842
2025-08-04 20:27:30,115 - INFO -   fit_time_avg_seconds_all_reporting: 0.2958
2025-08-04 20:27:30,116 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:27:36,159 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:27:36,159 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.34999197721481323, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.781310837118754, 'avg_anomaly_score': 0.33362889212267394, 'recall': 0.671875, 'eval_time_seconds': 0.03529953956604004, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.6866573686657369, 'precision': 0.9333333333333333}
2025-08-04 20:27:36,159 - INFO - [Round 30, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:27:36,159 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 30.
2025-08-04 20:27:36,160 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 30.
2025-08-04 20:27:36,160 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 30.
2025-08-04 20:27:36,160 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 30.
2025-08-04 20:27:36,160 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 30.
2025-08-04 20:27:36,160 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 30.
2025-08-04 20:27:36,161 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 30.
2025-08-04 20:27:36,161 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 30.
2025-08-04 20:27:36,161 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 30.
2025-08-04 20:27:36,161 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 30.
2025-08-04 20:27:36,163 - INFO - [Round 30, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:27:36,167 - INFO - ==================================================
2025-08-04 20:27:36,167 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:27:36,167 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:27:36,167 - INFO - ==================================================
2025-08-04 20:27:36,168 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:27:36,168 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3334
2025-08-04 20:27:36,168 - INFO -   Global Accuracy (Wgtd Avg): 0.6911
2025-08-04 20:27:36,168 - INFO -   Global F1 Score (Wgtd Avg): 0.7859
2025-08-04 20:27:36,168 - INFO -   Global Precision (Wgtd Avg): 0.9452
2025-08-04 20:27:36,168 - INFO -   Global Recall (Wgtd Avg): 0.6726
2025-08-04 20:27:36,168 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:27:36,169 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0807) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.3293
2025-08-04 20:27:36,169 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 30.
2025-08-04 20:27:36,169 - INFO -   Final Global Reward for action: -0.3293. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (7, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:36,169 - INFO -   Performance Reward: 0.0807, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:27:36,169 - INFO -   Next round's global F1 (for next state Q-val): 0.7859
2025-08-04 20:27:36,169 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:27:36,169 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:27:36,169 - INFO -       Q(s) updated from 0.0364 to 0.0327 (TotalReward: -0.3293, NextMaxQ: -0.0029)
2025-08-04 20:27:36,170 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:27:36,170 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:27:36,170 - INFO -       Q(s) updated from 0.0327 to 0.0291 (TotalReward: -0.3293, NextMaxQ: -0.0029)
2025-08-04 20:27:36,171 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:27:36,171 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:27:36,171 - INFO -       Q(s) updated from 0.0459 to 0.0426 (TotalReward: -0.3293, NextMaxQ: 0.0459)
2025-08-04 20:27:36,171 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:27:36,172 - INFO - 
2025-08-04 20:27:36,172 - INFO - [ROUND 31]
2025-08-04 20:27:36,172 - INFO - [RLAgent choose_actions_softmax] Round 31. Temperature: 0.8691
2025-08-04 20:27:36,172 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:27:36,173 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': -0.0028528786456946593, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': -0.0028528786456946593, '2395859185497387824': 0.04260809332339967, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:27:36,173 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09916892903236743), '5975185251685626785': np.float64(0.09982275932254825), '8560019474512340676': np.float64(0.09971821439882493), '12043264814094380418': np.float64(0.09916892903236743), '4296149388320225194': np.float64(0.09916892903236743), '15388649110162717160': np.float64(0.09971821439882493), '2395859185497387824': np.float64(0.10507340739541658), '10913316872057236365': np.float64(0.09916892903236743), '6587436948557123441': np.float64(0.09982275932254825), '17456602372862189643': np.float64(0.09916892903236743)}
2025-08-04 20:27:36,173 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:27:36,173 - INFO -     Selected 1 CIDs with this factor: ['2395859185497387824']
2025-08-04 20:27:36,174 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824']
2025-08-04 20:27:36,177 - INFO -   New temperature for next round: 0.8647
2025-08-04 20:27:36,178 - INFO -   Final selected CIDs to return: ['2395859185497387824']. Corresponding states: {'2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:36,178 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:27:42,187 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:27:42,188 - INFO - [Round 31, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:27:42,190 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:27:42,190 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:27:42,190 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0854, Aggregated D_Loss=0.8845 from 1 clients (668 examples)
2025-08-04 20:27:42,190 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.58s across 1 clients
2025-08-04 20:27:42,191 - INFO - Fit phase aggregation: Summary
2025-08-04 20:27:42,191 - INFO -   fit_clients_total_received: 1
2025-08-04 20:27:42,191 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:27:42,191 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:27:42,191 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:27:42,191 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:27:42,191 - INFO -   aggregated_g_loss: 2.0854
2025-08-04 20:27:42,192 - INFO -   aggregated_d_loss: 0.8845
2025-08-04 20:27:42,192 - INFO -   fit_time_avg_seconds_all_reporting: 0.5832
2025-08-04 20:27:42,192 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:27:51,234 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:27:51,235 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.35277103185653685, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7854785478547854, 'avg_anomaly_score': 0.3396106196536149, 'recall': 0.6685393258426966, 'eval_time_seconds': 0.01316976547241211, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6882494004796164, 'precision': 0.952}
2025-08-04 20:27:51,235 - INFO - [Round 31, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:27:51,235 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 31.
2025-08-04 20:27:51,235 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 31.
2025-08-04 20:27:51,235 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 31.
2025-08-04 20:27:51,235 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 31.
2025-08-04 20:27:51,236 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 31.
2025-08-04 20:27:51,236 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 31.
2025-08-04 20:27:51,236 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 31.
2025-08-04 20:27:51,236 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 31.
2025-08-04 20:27:51,236 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 31.
2025-08-04 20:27:51,237 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 31.
2025-08-04 20:27:51,238 - INFO - [Round 31, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:27:51,242 - INFO - ==================================================
2025-08-04 20:27:51,242 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:27:51,242 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:27:51,242 - INFO - ==================================================
2025-08-04 20:27:51,242 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:27:51,242 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3377
2025-08-04 20:27:51,242 - INFO -   Global Accuracy (Wgtd Avg): 0.6918
2025-08-04 20:27:51,242 - INFO -   Global F1 Score (Wgtd Avg): 0.7864
2025-08-04 20:27:51,243 - INFO -   Global Precision (Wgtd Avg): 0.9458
2025-08-04 20:27:51,243 - INFO -   Global Recall (Wgtd Avg): 0.6730
2025-08-04 20:27:51,243 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:27:51,243 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0811) - FairPenalty(0.0300) - ResourceCost(0.1000) = -0.0489
2025-08-04 20:27:51,243 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 31.
2025-08-04 20:27:51,243 - INFO -   Final Global Reward for action: -0.0489. Client states at selection: {'2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:51,243 - INFO -   Performance Reward: 0.0811, Fairness Penalty: 0.0300, Resource Cost: 0.1000
2025-08-04 20:27:51,243 - INFO -   Next round's global F1 (for next state Q-val): 0.7864
2025-08-04 20:27:51,243 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:27:51,244 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:27:51,244 - INFO -       Q(s) updated from 0.0426 to 0.0421 (TotalReward: -0.0489, NextMaxQ: 0.0426)
2025-08-04 20:27:51,244 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:27:51,245 - INFO - 
2025-08-04 20:27:51,245 - INFO - [ROUND 32]
2025-08-04 20:27:51,245 - INFO - [RLAgent choose_actions_softmax] Round 32. Temperature: 0.8647
2025-08-04 20:27:51,245 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:27:51,245 - INFO -   Optimistic init for new high-core state (8, 3, 2, 7, 7) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:27:51,245 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.029100283105429243, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.05, '2395859185497387824': 0.042076386692577, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:27:51,246 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0981853839202999), '5975185251685626785': np.float64(0.09883599334658259), '8560019474512340676': np.float64(0.10244860292820081), '12043264814094380418': np.float64(0.0981853839202999), '4296149388320225194': np.float64(0.0981853839202999), '15388649110162717160': np.float64(0.10495491730811089), '2395859185497387824': np.float64(0.10399757346902366), '10913316872057236365': np.float64(0.0981853839202999), '6587436948557123441': np.float64(0.09883599334658259), '17456602372862189643': np.float64(0.0981853839202999)}
2025-08-04 20:27:51,246 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:27:51,246 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:27:51,246 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:27:51,250 - INFO -   New temperature for next round: 0.8604
2025-08-04 20:27:51,251 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:27:51,251 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:27:57,269 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:27:57,269 - INFO - [Round 32, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:27:57,274 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:27:57,274 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:27:57,274 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0852, Aggregated D_Loss=0.8904 from 3 clients (702 examples)
2025-08-04 20:27:57,274 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.30s across 3 clients
2025-08-04 20:27:57,274 - INFO - Fit phase aggregation: Summary
2025-08-04 20:27:57,275 - INFO -   fit_clients_total_received: 3
2025-08-04 20:27:57,275 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:27:57,275 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:27:57,275 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:27:57,275 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:27:57,275 - INFO -   aggregated_g_loss: 2.0852
2025-08-04 20:27:57,275 - INFO -   aggregated_d_loss: 0.8904
2025-08-04 20:27:57,275 - INFO -   fit_time_avg_seconds_all_reporting: 0.2987
2025-08-04 20:27:57,276 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:28:06,332 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:28:06,332 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.3529884457588196, 'profile_name': 'Low-End IoT', 'f1_score': 0.7813620071684588, 'avg_anomaly_score': 0.3397967005812603, 'recall': 0.6646341463414634, 'eval_time_seconds': 0.013865470886230469, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6817391304347826, 'precision': 0.9478260869565217}
2025-08-04 20:28:06,332 - INFO - [Round 32, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:28:06,332 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 32.
2025-08-04 20:28:06,332 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 32.
2025-08-04 20:28:06,333 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 32.
2025-08-04 20:28:06,336 - INFO - [Round 32, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:28:06,339 - INFO - ==================================================
2025-08-04 20:28:06,339 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:28:06,340 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:28:06,340 - INFO - ==================================================
2025-08-04 20:28:06,340 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:28:06,340 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3402
2025-08-04 20:28:06,340 - INFO -   Global Accuracy (Wgtd Avg): 0.6913
2025-08-04 20:28:06,340 - INFO -   Global F1 Score (Wgtd Avg): 0.7861
2025-08-04 20:28:06,341 - INFO -   Global Precision (Wgtd Avg): 0.9454
2025-08-04 20:28:06,341 - INFO -   Global Recall (Wgtd Avg): 0.6727
2025-08-04 20:28:06,341 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:28:06,341 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0005) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.4105
2025-08-04 20:28:06,341 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 32.
2025-08-04 20:28:06,341 - INFO -   Final Global Reward for action: -0.4105. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:06,341 - INFO -   Performance Reward: -0.0005, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:28:06,342 - INFO -   Next round's global F1 (for next state Q-val): 0.7861
2025-08-04 20:28:06,342 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:28:06,342 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:28:06,342 - INFO -       Q(s) updated from 0.0291 to 0.0250 (TotalReward: -0.4105, NextMaxQ: 0.0291)
2025-08-04 20:28:06,342 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:28:06,343 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:28:06,343 - INFO -       Q(s) updated from 0.0500 to 0.0458 (TotalReward: -0.4105, NextMaxQ: 0.0500)
2025-08-04 20:28:06,343 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:28:06,343 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:28:06,343 - INFO -       Q(s) updated from 0.0421 to 0.0379 (TotalReward: -0.4105, NextMaxQ: 0.0421)
2025-08-04 20:28:06,344 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:28:06,344 - INFO - 
2025-08-04 20:28:06,344 - INFO - [ROUND 33]
2025-08-04 20:28:06,344 - INFO - [RLAgent choose_actions_softmax] Round 33. Temperature: 0.8604
2025-08-04 20:28:06,344 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:28:06,345 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.02496666595657033, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.045845483134246516, '2395859185497387824': 0.037929793440130935, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:28:06,345 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09832336542071798), '5975185251685626785': np.float64(0.09897817402162068), '8560019474512340676': np.float64(0.10212267379386936), '12043264814094380418': np.float64(0.09832336542071798), '4296149388320225194': np.float64(0.09832336542071798), '15388649110162717160': np.float64(0.10463118053020896), '2395859185497387824': np.float64(0.10367297052909022), '10913316872057236365': np.float64(0.09832336542071798), '6587436948557123441': np.float64(0.09897817402162068), '17456602372862189643': np.float64(0.09832336542071798)}
2025-08-04 20:28:06,345 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:28:06,345 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:28:06,345 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:28:06,349 - INFO -   New temperature for next round: 0.8561
2025-08-04 20:28:06,349 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:06,349 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:28:12,369 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:28:12,370 - INFO - [Round 33, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:28:12,374 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:28:12,374 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:28:12,374 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0848, Aggregated D_Loss=0.8859 from 3 clients (728 examples)
2025-08-04 20:28:12,374 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.31s across 3 clients
2025-08-04 20:28:12,374 - INFO - Fit phase aggregation: Summary
2025-08-04 20:28:12,374 - INFO -   fit_clients_total_received: 3
2025-08-04 20:28:12,375 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:28:12,375 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:28:12,375 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:28:12,375 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:28:12,375 - INFO -   aggregated_g_loss: 2.0848
2025-08-04 20:28:12,375 - INFO -   aggregated_d_loss: 0.8859
2025-08-04 20:28:12,375 - INFO -   fit_time_avg_seconds_all_reporting: 0.3073
2025-08-04 20:28:12,376 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:28:18,416 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:28:18,416 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.35097024440765384, 'profile_name': 'Low-End IoT', 'f1_score': 0.7813620071684588, 'avg_anomaly_score': 0.3382427666498267, 'recall': 0.6646341463414634, 'eval_time_seconds': 0.01752758026123047, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6817391304347826, 'precision': 0.9478260869565217}
2025-08-04 20:28:18,417 - INFO - [Round 33, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:28:18,417 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 33.
2025-08-04 20:28:18,417 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 33.
2025-08-04 20:28:18,417 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 33.
2025-08-04 20:28:18,417 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 33.
2025-08-04 20:28:18,417 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 33.
2025-08-04 20:28:18,418 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 33.
2025-08-04 20:28:18,418 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 33.
2025-08-04 20:28:18,418 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 33.
2025-08-04 20:28:18,418 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 33.
2025-08-04 20:28:18,418 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 33.
2025-08-04 20:28:18,420 - INFO - [Round 33, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:28:18,424 - INFO - ==================================================
2025-08-04 20:28:18,424 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:28:18,424 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:28:18,424 - INFO - ==================================================
2025-08-04 20:28:18,425 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:28:18,425 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3387
2025-08-04 20:28:18,425 - INFO -   Global Accuracy (Wgtd Avg): 0.6918
2025-08-04 20:28:18,425 - INFO -   Global F1 Score (Wgtd Avg): 0.7864
2025-08-04 20:28:18,425 - INFO -   Global Precision (Wgtd Avg): 0.9458
2025-08-04 20:28:18,425 - INFO -   Global Recall (Wgtd Avg): 0.6730
2025-08-04 20:28:18,425 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:28:18,425 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0802) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.3298
2025-08-04 20:28:18,425 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 33.
2025-08-04 20:28:18,426 - INFO -   Final Global Reward for action: -0.3298. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:18,426 - INFO -   Performance Reward: 0.0802, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:28:18,426 - INFO -   Next round's global F1 (for next state Q-val): 0.7864
2025-08-04 20:28:18,426 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:28:18,426 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:28:18,427 - INFO -       Q(s) updated from 0.0250 to 0.0216 (TotalReward: -0.3298, NextMaxQ: 0.0250)
2025-08-04 20:28:18,427 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:28:18,427 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:28:18,427 - INFO -       Q(s) updated from 0.0458 to 0.0425 (TotalReward: -0.3298, NextMaxQ: 0.0458)
2025-08-04 20:28:18,428 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:28:18,428 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:28:18,428 - INFO -       Q(s) updated from 0.0379 to 0.0346 (TotalReward: -0.3298, NextMaxQ: 0.0379)
2025-08-04 20:28:18,428 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:28:18,429 - INFO - 
2025-08-04 20:28:18,429 - INFO - [ROUND 34]
2025-08-04 20:28:18,429 - INFO - [RLAgent choose_actions_softmax] Round 34. Temperature: 0.8561
2025-08-04 20:28:18,429 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:28:18,430 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.021643470419874695, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.04250140878037321, '2395859185497387824': 0.03459363477595174, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:28:18,430 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09843368494960228), '5975185251685626785': np.float64(0.09909253343416094), '8560019474512340676': np.float64(0.10186055914433764), '12043264814094380418': np.float64(0.09843368494960228), '4296149388320225194': np.float64(0.09843368494960228), '15388649110162717160': np.float64(0.10437280897118795), '2395859185497387824': np.float64(0.1034131402681412), '10913316872057236365': np.float64(0.09843368494960228), '6587436948557123441': np.float64(0.09909253343416094), '17456602372862189643': np.float64(0.09843368494960228)}
2025-08-04 20:28:18,430 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:28:18,431 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:28:18,431 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:28:18,434 - INFO -   New temperature for next round: 0.8518
2025-08-04 20:28:18,434 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:18,434 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:28:24,456 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:28:24,456 - INFO - [Round 34, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:28:24,462 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:28:24,462 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:28:24,462 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0852, Aggregated D_Loss=0.8858 from 3 clients (745 examples)
2025-08-04 20:28:24,462 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.32s across 3 clients
2025-08-04 20:28:24,463 - INFO - Fit phase aggregation: Summary
2025-08-04 20:28:24,463 - INFO -   fit_clients_total_received: 3
2025-08-04 20:28:24,463 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:28:24,463 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:28:24,463 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:28:24,463 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:28:24,463 - INFO -   aggregated_g_loss: 2.0852
2025-08-04 20:28:24,463 - INFO -   aggregated_d_loss: 0.8858
2025-08-04 20:28:24,464 - INFO -   fit_time_avg_seconds_all_reporting: 0.3155
2025-08-04 20:28:24,464 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:28:33,504 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:28:33,504 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.37571401596069337, 'profile_name': 'Low-End IoT', 'f1_score': 0.7581699346405228, 'avg_anomaly_score': 0.3594211374010359, 'recall': 0.6444444444444445, 'eval_time_seconds': 0.009247064590454102, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6476190476190476, 'precision': 0.9206349206349206}
2025-08-04 20:28:33,504 - INFO - [Round 34, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:28:33,504 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 34.
2025-08-04 20:28:33,505 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 34.
2025-08-04 20:28:33,506 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 34.
2025-08-04 20:28:33,506 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 34.
2025-08-04 20:28:33,508 - INFO - [Round 34, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:28:33,512 - INFO - ==================================================
2025-08-04 20:28:33,512 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:28:33,513 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:28:33,513 - INFO - ==================================================
2025-08-04 20:28:33,513 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:28:33,513 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3414
2025-08-04 20:28:33,513 - INFO -   Global Accuracy (Wgtd Avg): 0.6921
2025-08-04 20:28:33,513 - INFO -   Global F1 Score (Wgtd Avg): 0.7866
2025-08-04 20:28:33,513 - INFO -   Global Precision (Wgtd Avg): 0.9460
2025-08-04 20:28:33,514 - INFO -   Global Recall (Wgtd Avg): 0.6732
2025-08-04 20:28:33,514 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:28:33,514 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.3296
2025-08-04 20:28:33,514 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 34.
2025-08-04 20:28:33,514 - INFO -   Final Global Reward for action: -0.3296. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:33,514 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:28:33,514 - INFO -   Next round's global F1 (for next state Q-val): 0.7866
2025-08-04 20:28:33,514 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:28:33,515 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:28:33,515 - INFO -       Q(s) updated from 0.0216 to 0.0181 (TotalReward: -0.3296, NextMaxQ: -0.0029)
2025-08-04 20:28:33,515 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:28:33,515 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:28:33,516 - INFO -       Q(s) updated from 0.0425 to 0.0391 (TotalReward: -0.3296, NextMaxQ: 0.0390)
2025-08-04 20:28:33,516 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:28:33,516 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:28:33,517 - INFO -       Q(s) updated from 0.0346 to 0.0313 (TotalReward: -0.3296, NextMaxQ: 0.0346)
2025-08-04 20:28:33,517 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:28:33,518 - INFO - 
2025-08-04 20:28:33,518 - INFO - [ROUND 35]
2025-08-04 20:28:33,518 - INFO - [RLAgent choose_actions_softmax] Round 35. Temperature: 0.8518
2025-08-04 20:28:33,518 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:28:33,519 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': -0.0028528786456946593, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.038971224914727175, '2395859185497387824': 0.031262641712367686, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:28:33,519 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09879359646098482), '5975185251685626785': np.float64(0.09945818799949832), '8560019474512340676': np.float64(0.09935191645763117), '12043264814094380418': np.float64(0.09879359646098482), '4296149388320225194': np.float64(0.09879359646098482), '15388649110162717160': np.float64(0.10435191065150169), '2395859185497387824': np.float64(0.10341181458694643), '10913316872057236365': np.float64(0.09879359646098482), '6587436948557123441': np.float64(0.09945818799949832), '17456602372862189643': np.float64(0.09879359646098482)}
2025-08-04 20:28:33,519 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:28:33,519 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:28:33,519 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:28:33,523 - INFO -   New temperature for next round: 0.8475
2025-08-04 20:28:33,523 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:33,523 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:28:39,539 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:28:39,539 - INFO - [Round 35, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:28:39,542 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:28:39,542 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:28:39,542 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0850, Aggregated D_Loss=0.8855 from 2 clients (764 examples)
2025-08-04 20:28:39,542 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.41s across 2 clients
2025-08-04 20:28:39,542 - INFO - Fit phase aggregation: Summary
2025-08-04 20:28:39,543 - INFO -   fit_clients_total_received: 2
2025-08-04 20:28:39,543 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:28:39,543 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:28:39,543 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:28:39,543 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:28:39,543 - INFO -   aggregated_g_loss: 2.0850
2025-08-04 20:28:39,543 - INFO -   aggregated_d_loss: 0.8855
2025-08-04 20:28:39,544 - INFO -   fit_time_avg_seconds_all_reporting: 0.4069
2025-08-04 20:28:39,544 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:28:45,594 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:28:45,595 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.3523970484733582, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8027057497181511, 'avg_anomaly_score': 0.3364869798383405, 'recall': 0.6912621359223301, 'eval_time_seconds': 0.01739048957824707, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.717741935483871, 'precision': 0.956989247311828}
2025-08-04 20:28:45,595 - INFO - [Round 35, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:28:45,595 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 35.
2025-08-04 20:28:45,595 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 35.
2025-08-04 20:28:45,595 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 35.
2025-08-04 20:28:45,595 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 35.
2025-08-04 20:28:45,595 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 35.
2025-08-04 20:28:45,596 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 35.
2025-08-04 20:28:45,596 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 35.
2025-08-04 20:28:45,596 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 35.
2025-08-04 20:28:45,596 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 35.
2025-08-04 20:28:45,596 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 35.
2025-08-04 20:28:45,598 - INFO - [Round 35, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:28:45,602 - INFO - ==================================================
2025-08-04 20:28:45,602 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:28:45,603 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:28:45,603 - INFO - ==================================================
2025-08-04 20:28:45,603 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:28:45,603 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3378
2025-08-04 20:28:45,603 - INFO -   Global Accuracy (Wgtd Avg): 0.6921
2025-08-04 20:28:45,603 - INFO -   Global F1 Score (Wgtd Avg): 0.7866
2025-08-04 20:28:45,603 - INFO -   Global Precision (Wgtd Avg): 0.9460
2025-08-04 20:28:45,603 - INFO -   Global Recall (Wgtd Avg): 0.6732
2025-08-04 20:28:45,604 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:28:45,604 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0800) - FairPenalty(0.0500) - ResourceCost(0.2600) = -0.2300
2025-08-04 20:28:45,604 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 35.
2025-08-04 20:28:45,604 - INFO -   Final Global Reward for action: -0.2300. Client states at selection: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:45,604 - INFO -   Performance Reward: 0.0800, Fairness Penalty: 0.0500, Resource Cost: 0.2600
2025-08-04 20:28:45,604 - INFO -   Next round's global F1 (for next state Q-val): 0.7866
2025-08-04 20:28:45,604 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:28:45,604 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:28:45,604 - INFO -       Q(s) updated from 0.0390 to 0.0366 (TotalReward: -0.2300, NextMaxQ: 0.0390)
2025-08-04 20:28:45,605 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:28:45,605 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:28:45,605 - INFO -       Q(s) updated from 0.0313 to 0.0289 (TotalReward: -0.2300, NextMaxQ: 0.0313)
2025-08-04 20:28:45,606 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:28:45,606 - INFO - 
2025-08-04 20:28:45,606 - INFO - [ROUND 36]
2025-08-04 20:28:45,607 - INFO - [RLAgent choose_actions_softmax] Round 36. Temperature: 0.8475
2025-08-04 20:28:45,607 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:28:45,607 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.0181049603790566, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.03663225368981245, '2395859185497387824': 0.028931379070655322, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:28:45,607 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0985986050595672), '5975185251685626785': np.float64(0.09926522917970353), '8560019474512340676': np.float64(0.10164116662342083), '12043264814094380418': np.float64(0.0985986050595672), '4296149388320225194': np.float64(0.0985986050595672), '15388649110162717160': np.float64(0.10388750368808737), '2395859185497387824': np.float64(0.1029478460312488), '10913316872057236365': np.float64(0.0985986050595672), '6587436948557123441': np.float64(0.09926522917970353), '17456602372862189643': np.float64(0.0985986050595672)}
2025-08-04 20:28:45,607 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:28:45,608 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:28:45,608 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:28:45,611 - INFO -   New temperature for next round: 0.8433
2025-08-04 20:28:45,611 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:28:45,611 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:28:51,631 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:28:51,631 - INFO - [Round 36, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:28:51,636 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:28:51,636 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:28:51,636 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0850, Aggregated D_Loss=0.8792 from 3 clients (789 examples)
2025-08-04 20:28:51,637 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.33s across 3 clients
2025-08-04 20:28:51,637 - INFO - Fit phase aggregation: Summary
2025-08-04 20:28:51,637 - INFO -   fit_clients_total_received: 3
2025-08-04 20:28:51,637 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:28:51,637 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:28:51,637 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:28:51,637 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:28:51,637 - INFO -   aggregated_g_loss: 2.0850
2025-08-04 20:28:51,638 - INFO -   aggregated_d_loss: 0.8792
2025-08-04 20:28:51,638 - INFO -   fit_time_avg_seconds_all_reporting: 0.3267
2025-08-04 20:28:51,639 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:29:00,675 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:29:00,675 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.378485906124115, 'profile_name': 'Low-End IoT', 'f1_score': 0.7581699346405228, 'avg_anomaly_score': 0.36148328667595275, 'recall': 0.6444444444444445, 'eval_time_seconds': 0.009684324264526367, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6476190476190476, 'precision': 0.9206349206349206}
2025-08-04 20:29:00,676 - INFO - [Round 36, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:29:00,676 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 36.
2025-08-04 20:29:00,676 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 36.
2025-08-04 20:29:00,676 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 36.
2025-08-04 20:29:00,676 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 36.
2025-08-04 20:29:00,676 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 36.
2025-08-04 20:29:00,676 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 36.
2025-08-04 20:29:00,677 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 36.
2025-08-04 20:29:00,677 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 36.
2025-08-04 20:29:00,677 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 36.
2025-08-04 20:29:00,677 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 36.
2025-08-04 20:29:00,679 - INFO - [Round 36, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:29:00,683 - INFO - ==================================================
2025-08-04 20:29:00,683 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:29:00,683 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:29:00,683 - INFO - ==================================================
2025-08-04 20:29:00,683 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:29:00,683 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3420
2025-08-04 20:29:00,683 - INFO -   Global Accuracy (Wgtd Avg): 0.6918
2025-08-04 20:29:00,683 - INFO -   Global F1 Score (Wgtd Avg): 0.7864
2025-08-04 20:29:00,683 - INFO -   Global Precision (Wgtd Avg): 0.9458
2025-08-04 20:29:00,683 - INFO -   Global Recall (Wgtd Avg): 0.6730
2025-08-04 20:29:00,684 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:29:00,684 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.4202
2025-08-04 20:29:00,684 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 36.
2025-08-04 20:29:00,684 - INFO -   Final Global Reward for action: -0.4202. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:00,684 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:29:00,684 - INFO -   Next round's global F1 (for next state Q-val): 0.7864
2025-08-04 20:29:00,685 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:29:00,685 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:29:00,685 - INFO -       Q(s) updated from 0.0181 to 0.0137 (TotalReward: -0.4202, NextMaxQ: -0.0029)
2025-08-04 20:29:00,685 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:29:00,686 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:00,686 - INFO -       Q(s) updated from 0.0366 to 0.0323 (TotalReward: -0.4202, NextMaxQ: 0.0289)
2025-08-04 20:29:00,686 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:29:00,687 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:00,687 - INFO -       Q(s) updated from 0.0289 to 0.0247 (TotalReward: -0.4202, NextMaxQ: 0.0289)
2025-08-04 20:29:00,687 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:29:00,688 - INFO - 
2025-08-04 20:29:00,688 - INFO - [ROUND 37]
2025-08-04 20:29:00,688 - INFO - [RLAgent choose_actions_softmax] Round 37. Temperature: 0.8433
2025-08-04 20:29:00,688 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:29:00,688 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': -0.0028528786456946593, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.024700209046310796, '2395859185497387824': 0.024700209046310796, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:29:00,689 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09903422408275248), '5975185251685626785': np.float64(0.09970716949035588), '8560019474512340676': np.float64(0.09959955907160595), '12043264814094380418': np.float64(0.09903422408275248), '4296149388320225194': np.float64(0.09903422408275248), '15388649110162717160': np.float64(0.10290749076696), '2395859185497387824': np.float64(0.10290749076696), '10913316872057236365': np.float64(0.09903422408275248), '6587436948557123441': np.float64(0.09970716949035588), '17456602372862189643': np.float64(0.09903422408275248)}
2025-08-04 20:29:00,689 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:29:00,689 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:29:00,689 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:29:00,693 - INFO -   New temperature for next round: 0.8391
2025-08-04 20:29:00,693 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:00,694 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:29:09,714 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:29:09,714 - INFO - [Round 37, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:29:09,717 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:29:09,717 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:29:09,717 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0856, Aggregated D_Loss=0.8809 from 2 clients (803 examples)
2025-08-04 20:29:09,718 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.41s across 2 clients
2025-08-04 20:29:09,718 - INFO - Fit phase aggregation: Summary
2025-08-04 20:29:09,718 - INFO -   fit_clients_total_received: 2
2025-08-04 20:29:09,718 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:29:09,718 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:29:09,718 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:29:09,718 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:29:09,719 - INFO -   aggregated_g_loss: 2.0856
2025-08-04 20:29:09,719 - INFO -   aggregated_d_loss: 0.8809
2025-08-04 20:29:09,719 - INFO -   fit_time_avg_seconds_all_reporting: 0.4143
2025-08-04 20:29:09,719 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:29:15,768 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:29:15,768 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.35913429260253904, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7965811965811965, 'avg_anomaly_score': 0.34082769179166694, 'recall': 0.6793002915451894, 'eval_time_seconds': 0.012637138366699219, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7047146401985112, 'precision': 0.9628099173553719}
2025-08-04 20:29:15,768 - INFO - [Round 37, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:29:15,768 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 37.
2025-08-04 20:29:15,769 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 37.
2025-08-04 20:29:15,769 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 37.
2025-08-04 20:29:15,769 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 37.
2025-08-04 20:29:15,769 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 37.
2025-08-04 20:29:15,770 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 37.
2025-08-04 20:29:15,770 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 37.
2025-08-04 20:29:15,770 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 37.
2025-08-04 20:29:15,770 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 37.
2025-08-04 20:29:15,770 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 37.
2025-08-04 20:29:15,772 - INFO - [Round 37, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:29:15,776 - INFO - ==================================================
2025-08-04 20:29:15,776 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:29:15,776 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:29:15,777 - INFO - ==================================================
2025-08-04 20:29:15,777 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:29:15,777 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3389
2025-08-04 20:29:15,777 - INFO -   Global Accuracy (Wgtd Avg): 0.6926
2025-08-04 20:29:15,777 - INFO -   Global F1 Score (Wgtd Avg): 0.7869
2025-08-04 20:29:15,777 - INFO -   Global Precision (Wgtd Avg): 0.9464
2025-08-04 20:29:15,777 - INFO -   Global Recall (Wgtd Avg): 0.6735
2025-08-04 20:29:15,777 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:29:15,777 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0808) - FairPenalty(0.0600) - ResourceCost(0.2600) = -0.2392
2025-08-04 20:29:15,778 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 37.
2025-08-04 20:29:15,778 - INFO -   Final Global Reward for action: -0.2392. Client states at selection: {'15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:15,778 - INFO -   Performance Reward: 0.0808, Fairness Penalty: 0.0600, Resource Cost: 0.2600
2025-08-04 20:29:15,778 - INFO -   Next round's global F1 (for next state Q-val): 0.7869
2025-08-04 20:29:15,778 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:29:15,778 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:15,778 - INFO -       Q(s) updated from 0.0247 to 0.0223 (TotalReward: -0.2392, NextMaxQ: 0.0247)
2025-08-04 20:29:15,779 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:29:15,779 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:15,779 - INFO -       Q(s) updated from 0.0223 to 0.0199 (TotalReward: -0.2392, NextMaxQ: 0.0223)
2025-08-04 20:29:15,779 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:29:15,780 - INFO - 
2025-08-04 20:29:15,780 - INFO - [ROUND 38]
2025-08-04 20:29:15,781 - INFO - [RLAgent choose_actions_softmax] Round 38. Temperature: 0.8391
2025-08-04 20:29:15,781 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:29:15,781 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.013695996222180911, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.019869513906112173, '2395859185497387824': 0.019869513906112173, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:29:15,781 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09894996786994051), '5975185251685626785': np.float64(0.0996257310152831), '8560019474512340676': np.float64(0.10149988013750828), '12043264814094380418': np.float64(0.09894996786994051), '4296149388320225194': np.float64(0.09894996786994051), '15388649110162717160': np.float64(0.10224940924111144), '2395859185497387824': np.float64(0.10224940924111144), '10913316872057236365': np.float64(0.09894996786994051), '6587436948557123441': np.float64(0.0996257310152831), '17456602372862189643': np.float64(0.09894996786994051)}
2025-08-04 20:29:15,782 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:29:15,782 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:29:15,782 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:29:15,785 - INFO -   New temperature for next round: 0.8349
2025-08-04 20:29:15,785 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:15,785 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:29:21,806 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:29:21,807 - INFO - [Round 38, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:29:21,811 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:29:21,811 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:29:21,811 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0859, Aggregated D_Loss=0.8838 from 3 clients (833 examples)
2025-08-04 20:29:21,812 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.33s across 3 clients
2025-08-04 20:29:21,812 - INFO - Fit phase aggregation: Summary
2025-08-04 20:29:21,812 - INFO -   fit_clients_total_received: 3
2025-08-04 20:29:21,812 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:29:21,812 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:29:21,812 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:29:21,812 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:29:21,812 - INFO -   aggregated_g_loss: 2.0859
2025-08-04 20:29:21,813 - INFO -   aggregated_d_loss: 0.8838
2025-08-04 20:29:21,813 - INFO -   fit_time_avg_seconds_all_reporting: 0.3261
2025-08-04 20:29:21,813 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:29:27,858 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:29:27,859 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.3542289733886719, 'profile_name': 'Low-End IoT', 'f1_score': 0.789410348977136, 'avg_anomaly_score': 0.33768131935762036, 'recall': 0.6748971193415638, 'eval_time_seconds': 0.015561342239379883, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6961805555555556, 'precision': 0.9507246376811594}
2025-08-04 20:29:27,859 - INFO - [Round 38, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:29:27,859 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 38.
2025-08-04 20:29:27,859 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 38.
2025-08-04 20:29:27,860 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 38.
2025-08-04 20:29:27,863 - INFO - [Round 38, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:29:27,867 - INFO - ==================================================
2025-08-04 20:29:27,867 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:29:27,867 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:29:27,867 - INFO - ==================================================
2025-08-04 20:29:27,867 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:29:27,867 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3356
2025-08-04 20:29:27,867 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:29:27,868 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:29:27,868 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:29:27,868 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:29:27,868 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:29:27,868 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0700) - ResourceCost(0.3600) = -0.3496
2025-08-04 20:29:27,868 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 38.
2025-08-04 20:29:27,868 - INFO -   Final Global Reward for action: -0.3496. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:27,869 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0700, Resource Cost: 0.3600
2025-08-04 20:29:27,869 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:29:27,869 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:29:27,869 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:29:27,869 - INFO -       Q(s) updated from 0.0137 to 0.0102 (TotalReward: -0.3496, NextMaxQ: 0.0137)
2025-08-04 20:29:27,870 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:29:27,870 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:27,870 - INFO -       Q(s) updated from 0.0199 to 0.0164 (TotalReward: -0.3496, NextMaxQ: 0.0199)
2025-08-04 20:29:27,870 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:29:27,870 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:27,870 - INFO -       Q(s) updated from 0.0164 to 0.0128 (TotalReward: -0.3496, NextMaxQ: 0.0164)
2025-08-04 20:29:27,871 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:29:27,871 - INFO - 
2025-08-04 20:29:27,872 - INFO - [ROUND 39]
2025-08-04 20:29:27,872 - INFO - [RLAgent choose_actions_softmax] Round 39. Temperature: 0.8349
2025-08-04 20:29:27,872 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:29:27,872 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.010185886649504327, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.012840464008481503, '2395859185497387824': 0.012840464008481503, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:29:27,873 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09915692194981832), '5975185251685626785': np.float64(0.0998375130000213), '8560019474512340676': np.float64(0.10129839167055261), '12043264814094380418': np.float64(0.09915692194981832), '4296149388320225194': np.float64(0.09915692194981832), '15388649110162717160': np.float64(0.1016209862901566), '2395859185497387824': np.float64(0.1016209862901566), '10913316872057236365': np.float64(0.09915692194981832), '6587436948557123441': np.float64(0.0998375130000213), '17456602372862189643': np.float64(0.09915692194981832)}
2025-08-04 20:29:27,873 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:29:27,873 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:29:27,873 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:29:27,877 - INFO -   New temperature for next round: 0.8307
2025-08-04 20:29:27,878 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:27,878 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:29:33,896 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:29:33,896 - INFO - [Round 39, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:29:33,901 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:29:33,901 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:29:33,901 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0859, Aggregated D_Loss=0.8823 from 3 clients (857 examples)
2025-08-04 20:29:33,901 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.35s across 3 clients
2025-08-04 20:29:33,901 - INFO - Fit phase aggregation: Summary
2025-08-04 20:29:33,901 - INFO -   fit_clients_total_received: 3
2025-08-04 20:29:33,901 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:29:33,901 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:29:33,901 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:29:33,902 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:29:33,902 - INFO -   aggregated_g_loss: 2.0859
2025-08-04 20:29:33,902 - INFO -   aggregated_d_loss: 0.8823
2025-08-04 20:29:33,902 - INFO -   fit_time_avg_seconds_all_reporting: 0.3489
2025-08-04 20:29:33,903 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:29:39,951 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:29:39,951 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.3582840085029602, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7965811965811965, 'avg_anomaly_score': 0.34022089476620887, 'recall': 0.6793002915451894, 'eval_time_seconds': 0.012433052062988281, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7047146401985112, 'precision': 0.9628099173553719}
2025-08-04 20:29:39,951 - INFO - [Round 39, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:29:39,951 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 39.
2025-08-04 20:29:39,951 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 39.
2025-08-04 20:29:39,952 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 39.
2025-08-04 20:29:39,953 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 39.
2025-08-04 20:29:39,955 - INFO - [Round 39, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:29:39,958 - INFO - ==================================================
2025-08-04 20:29:39,958 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:29:39,959 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:29:39,959 - INFO - ==================================================
2025-08-04 20:29:39,959 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:29:39,959 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3384
2025-08-04 20:29:39,959 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:29:39,959 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:29:39,959 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:29:39,959 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:29:39,960 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:29:39,960 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0700) - ResourceCost(0.3600) = -0.4300
2025-08-04 20:29:39,960 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 39.
2025-08-04 20:29:39,960 - INFO -   Final Global Reward for action: -0.4300. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7)}
2025-08-04 20:29:39,960 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0700, Resource Cost: 0.3600
2025-08-04 20:29:39,960 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:29:39,960 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:29:39,960 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:29:39,961 - INFO -       Q(s) updated from 0.0102 to 0.0059 (TotalReward: -0.4300, NextMaxQ: 0.0102)
2025-08-04 20:29:39,961 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:29:39,961 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:39,962 - INFO -       Q(s) updated from 0.0128 to 0.0085 (TotalReward: -0.4300, NextMaxQ: 0.0128)
2025-08-04 20:29:39,962 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:29:39,962 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:39,962 - INFO -       Q(s) updated from 0.0085 to 0.0042 (TotalReward: -0.4300, NextMaxQ: 0.0085)
2025-08-04 20:29:39,963 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:29:39,963 - INFO - 
2025-08-04 20:29:39,963 - INFO - [ROUND 40]
2025-08-04 20:29:39,964 - INFO - [RLAgent choose_actions_softmax] Round 40. Temperature: 0.8307
2025-08-04 20:29:39,964 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:29:39,964 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.001942236682848252, '8560019474512340676': 0.005875700762854823, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.004219095920928549, '2395859185497387824': 0.004219095920928549, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.001942236682848252, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:29:39,964 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.099413419006908), '5975185251685626785': np.float64(0.10009921129407079), '8560019474512340676': np.float64(0.10104569582570024), '12043264814094380418': np.float64(0.099413419006908), '4296149388320225194': np.float64(0.099413419006908), '15388649110162717160': np.float64(0.10084439327580907), '2395859185497387824': np.float64(0.10084439327580907), '10913316872057236365': np.float64(0.099413419006908), '6587436948557123441': np.float64(0.10009921129407079), '17456602372862189643': np.float64(0.099413419006908)}
2025-08-04 20:29:39,965 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:29:39,965 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:29:39,965 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:29:39,968 - INFO -   New temperature for next round: 0.8266
2025-08-04 20:29:39,968 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 0, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7), '6587436948557123441': (7, 0, 1, 7, 7)}
2025-08-04 20:29:39,968 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:29:48,988 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:29:48,988 - INFO - [Round 40, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:29:48,995 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:29:48,995 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:29:48,995 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0856, Aggregated D_Loss=0.8868 from 5 clients (1026 examples)
2025-08-04 20:29:48,996 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.85s across 5 clients
2025-08-04 20:29:48,996 - INFO - Fit phase aggregation: Summary
2025-08-04 20:29:48,996 - INFO -   fit_clients_total_received: 5
2025-08-04 20:29:48,996 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:29:48,996 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:29:48,996 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:29:48,996 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:29:48,996 - INFO -   aggregated_g_loss: 2.0856
2025-08-04 20:29:48,996 - INFO -   aggregated_d_loss: 0.8868
2025-08-04 20:29:48,997 - INFO -   fit_time_avg_seconds_all_reporting: 0.8462
2025-08-04 20:29:48,997 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:29:55,043 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:29:55,043 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.36579447984695435, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7965811965811965, 'avg_anomaly_score': 0.34693786834664736, 'recall': 0.6793002915451894, 'eval_time_seconds': 0.012573957443237305, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7047146401985112, 'precision': 0.9628099173553719}
2025-08-04 20:29:55,043 - INFO - [Round 40, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:29:55,044 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 40.
2025-08-04 20:29:55,044 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 40.
2025-08-04 20:29:55,044 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 40.
2025-08-04 20:29:55,044 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 40.
2025-08-04 20:29:55,044 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 40.
2025-08-04 20:29:55,044 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 40.
2025-08-04 20:29:55,045 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 40.
2025-08-04 20:29:55,045 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 40.
2025-08-04 20:29:55,045 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 40.
2025-08-04 20:29:55,045 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 40.
2025-08-04 20:29:55,047 - INFO - [Round 40, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:29:55,050 - INFO - ==================================================
2025-08-04 20:29:55,051 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:29:55,051 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:29:55,051 - INFO - ==================================================
2025-08-04 20:29:55,051 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:29:55,051 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3452
2025-08-04 20:29:55,051 - INFO -   Global Accuracy (Wgtd Avg): 0.6926
2025-08-04 20:29:55,051 - INFO -   Global F1 Score (Wgtd Avg): 0.7869
2025-08-04 20:29:55,051 - INFO -   Global Precision (Wgtd Avg): 0.9464
2025-08-04 20:29:55,051 - INFO -   Global Recall (Wgtd Avg): 0.6735
2025-08-04 20:29:55,052 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:29:55,052 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0700) - ResourceCost(0.5000) = -0.5702
2025-08-04 20:29:55,052 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 40.
2025-08-04 20:29:55,052 - INFO -   Final Global Reward for action: -0.5702. Client states at selection: {'5975185251685626785': (7, 0, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 5, 2, 7, 7), '2395859185497387824': (8, 5, 2, 7, 7), '6587436948557123441': (7, 0, 1, 7, 7)}
2025-08-04 20:29:55,052 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0700, Resource Cost: 0.5000
2025-08-04 20:29:55,052 - INFO -   Next round's global F1 (for next state Q-val): 0.7869
2025-08-04 20:29:55,052 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:29:55,052 - INFO -       State(s): (7, 0, 1, 7, 7) -> NextState(s'): (7, 1, 1, 7, 7)
2025-08-04 20:29:55,052 - INFO -       Q(s) updated from -0.0019 to -0.0076 (TotalReward: -0.5702, NextMaxQ: 0.0000)
2025-08-04 20:29:55,053 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:29:55,053 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:29:55,053 - INFO -       Q(s) updated from 0.0059 to 0.0001 (TotalReward: -0.5702, NextMaxQ: -0.0029)
2025-08-04 20:29:55,053 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:29:55,054 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:55,054 - INFO -       Q(s) updated from 0.0042 to -0.0015 (TotalReward: -0.5702, NextMaxQ: 0.0042)
2025-08-04 20:29:55,054 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:29:55,054 - INFO -       State(s): (8, 5, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:29:55,055 - INFO -       Q(s) updated from -0.0015 to -0.0072 (TotalReward: -0.5702, NextMaxQ: -0.0015)
2025-08-04 20:29:55,055 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:29:55,055 - INFO -       State(s): (7, 0, 1, 7, 7) -> NextState(s'): (7, 1, 1, 7, 7)
2025-08-04 20:29:55,055 - INFO -       Q(s) updated from -0.0076 to -0.0133 (TotalReward: -0.5702, NextMaxQ: 0.0000)
2025-08-04 20:29:55,056 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:29:55,056 - INFO - 
2025-08-04 20:29:55,056 - INFO - [ROUND 41]
2025-08-04 20:29:55,056 - INFO - [RLAgent choose_actions_softmax] Round 41. Temperature: 0.8266
2025-08-04 20:29:55,056 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:29:55,057 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': 0.0, '8560019474512340676': -0.0028528786456946593, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': -0.00718812580034545, '2395859185497387824': -0.00718812580034545, '10913316872057236365': -0.00765318748285857, '6587436948557123441': 0.0, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:29:55,057 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09974511080402462), '5975185251685626785': np.float64(0.10067294098766232), '8560019474512340676': np.float64(0.10032606902625049), '12043264814094380418': np.float64(0.09974511080402462), '4296149388320225194': np.float64(0.09974511080402462), '15388649110162717160': np.float64(0.099801247489151), '2395859185497387824': np.float64(0.099801247489151), '10913316872057236365': np.float64(0.09974511080402462), '6587436948557123441': np.float64(0.10067294098766232), '17456602372862189643': np.float64(0.09974511080402462)}
2025-08-04 20:29:55,057 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:29:55,057 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '6587436948557123441']
2025-08-04 20:29:55,058 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '6587436948557123441']
2025-08-04 20:29:55,061 - INFO -   New temperature for next round: 0.8224
2025-08-04 20:29:55,061 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 1, 1, 7, 7), '8560019474512340676': (7, 4, 2, 7, 7), '6587436948557123441': (7, 1, 1, 7, 7)}
2025-08-04 20:29:55,061 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:30:01,083 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:30:01,083 - INFO - [Round 41, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:30:01,088 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:30:01,088 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.00
2025-08-04 20:30:01,088 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0865, Aggregated D_Loss=0.8820 from 3 clients (151 examples)
2025-08-04 20:30:01,088 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.19s across 3 clients
2025-08-04 20:30:01,088 - INFO - Fit phase aggregation: Summary
2025-08-04 20:30:01,089 - INFO -   fit_clients_total_received: 3
2025-08-04 20:30:01,089 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:30:01,089 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:30:01,089 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:30:01,089 - INFO -   allocated_cores_avg_per_client: 4.0000
2025-08-04 20:30:01,089 - INFO -   aggregated_g_loss: 2.0865
2025-08-04 20:30:01,089 - INFO -   aggregated_d_loss: 0.8820
2025-08-04 20:30:01,090 - INFO -   fit_time_avg_seconds_all_reporting: 0.1904
2025-08-04 20:30:01,090 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:30:10,139 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:30:10,139 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.3659600019454956, 'profile_name': 'Low-End IoT', 'f1_score': 0.7870036101083032, 'avg_anomaly_score': 0.350925633787281, 'recall': 0.6728395061728395, 'eval_time_seconds': 0.01409602165222168, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6927083333333334, 'precision': 0.9478260869565217}
2025-08-04 20:30:10,139 - INFO - [Round 41, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:30:10,140 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 41.
2025-08-04 20:30:10,140 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 41.
2025-08-04 20:30:10,140 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 41.
2025-08-04 20:30:10,140 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 41.
2025-08-04 20:30:10,140 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 41.
2025-08-04 20:30:10,140 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 41.
2025-08-04 20:30:10,141 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 41.
2025-08-04 20:30:10,141 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 41.
2025-08-04 20:30:10,141 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 41.
2025-08-04 20:30:10,141 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 41.
2025-08-04 20:30:10,143 - INFO - [Round 41, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:30:10,147 - INFO - ==================================================
2025-08-04 20:30:10,147 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:30:10,147 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:30:10,147 - INFO - ==================================================
2025-08-04 20:30:10,147 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:30:10,147 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3487
2025-08-04 20:30:10,147 - INFO -   Global Accuracy (Wgtd Avg): 0.6926
2025-08-04 20:30:10,147 - INFO -   Global F1 Score (Wgtd Avg): 0.7869
2025-08-04 20:30:10,147 - INFO -   Global Precision (Wgtd Avg): 0.9464
2025-08-04 20:30:10,148 - INFO -   Global Recall (Wgtd Avg): 0.6735
2025-08-04 20:30:10,148 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:30:10,148 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0200) - ResourceCost(0.2400) = -0.2600
2025-08-04 20:30:10,148 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 41.
2025-08-04 20:30:10,148 - INFO -   Final Global Reward for action: -0.2600. Client states at selection: {'5975185251685626785': (7, 1, 1, 7, 7), '8560019474512340676': (7, 4, 2, 7, 7), '6587436948557123441': (7, 1, 1, 7, 7)}
2025-08-04 20:30:10,149 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0200, Resource Cost: 0.2400
2025-08-04 20:30:10,149 - INFO -   Next round's global F1 (for next state Q-val): 0.7869
2025-08-04 20:30:10,149 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:30:10,149 - INFO -       State(s): (7, 1, 1, 7, 7) -> NextState(s'): (7, 2, 1, 7, 7)
2025-08-04 20:30:10,149 - INFO -       Q(s) updated from 0.0000 to -0.0026 (TotalReward: -0.2600, NextMaxQ: 0.0000)
2025-08-04 20:30:10,150 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:30:10,150 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:30:10,150 - INFO -       Q(s) updated from -0.0029 to -0.0055 (TotalReward: -0.2600, NextMaxQ: -0.0029)
2025-08-04 20:30:10,150 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:30:10,150 - INFO -       State(s): (7, 1, 1, 7, 7) -> NextState(s'): (7, 2, 1, 7, 7)
2025-08-04 20:30:10,151 - INFO -       Q(s) updated from -0.0026 to -0.0052 (TotalReward: -0.2600, NextMaxQ: 0.0000)
2025-08-04 20:30:10,151 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:30:10,151 - INFO - 
2025-08-04 20:30:10,152 - INFO - [ROUND 42]
2025-08-04 20:30:10,152 - INFO - [RLAgent choose_actions_softmax] Round 42. Temperature: 0.8224
2025-08-04 20:30:10,152 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:30:10,152 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': 0.0, '8560019474512340676': -0.005450025767048965, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.03232407491927635, '2395859185497387824': 0.03232407491927635, '10913316872057236365': -0.00765318748285857, '6587436948557123441': 0.0, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:30:10,153 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09880447623979835), '5975185251685626785': np.float64(0.09972819664082458), '8560019474512340676': np.float64(0.09906951180171936), '12043264814094380418': np.float64(0.09880447623979835), '4296149388320225194': np.float64(0.09880447623979835), '15388649110162717160': np.float64(0.10372585685881977), '2395859185497387824': np.float64(0.10372585685881977), '10913316872057236365': np.float64(0.09880447623979835), '6587436948557123441': np.float64(0.09972819664082458), '17456602372862189643': np.float64(0.09880447623979835)}
2025-08-04 20:30:10,153 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:30:10,153 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:30:10,153 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:30:10,157 - INFO -   New temperature for next round: 0.8183
2025-08-04 20:30:10,157 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:10,157 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:30:16,172 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:30:16,173 - INFO - [Round 42, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:30:16,177 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:30:16,177 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:30:16,177 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0858, Aggregated D_Loss=0.8829 from 2 clients (929 examples)
2025-08-04 20:30:16,177 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.46s across 2 clients
2025-08-04 20:30:16,177 - INFO - Fit phase aggregation: Summary
2025-08-04 20:30:16,178 - INFO -   fit_clients_total_received: 2
2025-08-04 20:30:16,178 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:30:16,178 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:30:16,178 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:30:16,178 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:30:16,178 - INFO -   aggregated_g_loss: 2.0858
2025-08-04 20:30:16,178 - INFO -   aggregated_d_loss: 0.8829
2025-08-04 20:30:16,178 - INFO -   fit_time_avg_seconds_all_reporting: 0.4572
2025-08-04 20:30:16,179 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:30:22,220 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:30:22,220 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.35697189569473264, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7858942065491183, 'avg_anomaly_score': 0.337562899979793, 'recall': 0.6713615023474179, 'eval_time_seconds': 0.050966501235961914, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.6901921802518224, 'precision': 0.9475427940364439}
2025-08-04 20:30:22,221 - INFO - [Round 42, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:30:22,221 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 42.
2025-08-04 20:30:22,221 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 42.
2025-08-04 20:30:22,221 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 42.
2025-08-04 20:30:22,221 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 42.
2025-08-04 20:30:22,221 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 42.
2025-08-04 20:30:22,221 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 42.
2025-08-04 20:30:22,222 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 42.
2025-08-04 20:30:22,222 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 42.
2025-08-04 20:30:22,222 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 42.
2025-08-04 20:30:22,222 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 42.
2025-08-04 20:30:22,224 - INFO - [Round 42, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:30:22,228 - INFO - ==================================================
2025-08-04 20:30:22,228 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:30:22,228 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:30:22,228 - INFO - ==================================================
2025-08-04 20:30:22,228 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:30:22,228 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3386
2025-08-04 20:30:22,229 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:30:22,229 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:30:22,229 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:30:22,229 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:30:22,229 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:30:22,229 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0400) - ResourceCost(0.2600) = -0.2998
2025-08-04 20:30:22,229 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 42.
2025-08-04 20:30:22,229 - INFO -   Final Global Reward for action: -0.2998. Client states at selection: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:22,229 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.2600
2025-08-04 20:30:22,229 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:30:22,230 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:30:22,230 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:30:22,230 - INFO -       Q(s) updated from 0.0323 to 0.0293 (TotalReward: -0.2998, NextMaxQ: 0.0323)
2025-08-04 20:30:22,230 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:30:22,230 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:30:22,231 - INFO -       Q(s) updated from 0.0293 to 0.0263 (TotalReward: -0.2998, NextMaxQ: 0.0293)
2025-08-04 20:30:22,231 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:30:22,231 - INFO - 
2025-08-04 20:30:22,232 - INFO - [ROUND 43]
2025-08-04 20:30:22,232 - INFO - [RLAgent choose_actions_softmax] Round 43. Temperature: 0.8183
2025-08-04 20:30:22,232 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:30:22,232 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': 0.0, '8560019474512340676': -0.005450025767048965, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.026265572900460103, '2395859185497387824': 0.026265572900460103, '10913316872057236365': -0.00765318748285857, '6587436948557123441': 0.0, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:30:22,233 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09894985800937921), '5975185251685626785': np.float64(0.09987960798783259), '8560019474512340676': np.float64(0.09921661913827728), '12043264814094380418': np.float64(0.09894985800937921), '4296149388320225194': np.float64(0.09894985800937921), '15388649110162717160': np.float64(0.10313743741958076), '2395859185497387824': np.float64(0.10313743741958076), '10913316872057236365': np.float64(0.09894985800937921), '6587436948557123441': np.float64(0.09987960798783259), '17456602372862189643': np.float64(0.09894985800937921)}
2025-08-04 20:30:22,233 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:30:22,233 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:30:22,233 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:30:22,237 - INFO -   New temperature for next round: 0.8142
2025-08-04 20:30:22,237 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:22,237 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:30:28,251 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:30:28,252 - INFO - [Round 43, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:30:28,255 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:30:28,255 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:30:28,255 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0861, Aggregated D_Loss=0.8783 from 2 clients (950 examples)
2025-08-04 20:30:28,255 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.46s across 2 clients
2025-08-04 20:30:28,255 - INFO - Fit phase aggregation: Summary
2025-08-04 20:30:28,255 - INFO -   fit_clients_total_received: 2
2025-08-04 20:30:28,255 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:30:28,256 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:30:28,256 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:30:28,256 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:30:28,256 - INFO -   aggregated_g_loss: 2.0861
2025-08-04 20:30:28,256 - INFO -   aggregated_d_loss: 0.8783
2025-08-04 20:30:28,256 - INFO -   fit_time_avg_seconds_all_reporting: 0.4554
2025-08-04 20:30:28,257 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:30:37,287 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:30:37,288 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.3606809496879578, 'profile_name': 'Low-End IoT', 'f1_score': 0.7813620071684588, 'avg_anomaly_score': 0.3451865248058153, 'recall': 0.6646341463414634, 'eval_time_seconds': 0.015279769897460938, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6817391304347826, 'precision': 0.9478260869565217}
2025-08-04 20:30:37,288 - INFO - [Round 43, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:30:37,288 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 43.
2025-08-04 20:30:37,288 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 43.
2025-08-04 20:30:37,289 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 43.
2025-08-04 20:30:37,289 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 43.
2025-08-04 20:30:37,289 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 43.
2025-08-04 20:30:37,289 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 43.
2025-08-04 20:30:37,289 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 43.
2025-08-04 20:30:37,289 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 43.
2025-08-04 20:30:37,290 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 43.
2025-08-04 20:30:37,290 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 43.
2025-08-04 20:30:37,292 - INFO - [Round 43, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:30:37,296 - INFO - ==================================================
2025-08-04 20:30:37,296 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:30:37,297 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:30:37,297 - INFO - ==================================================
2025-08-04 20:30:37,297 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:30:37,297 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3462
2025-08-04 20:30:37,297 - INFO -   Global Accuracy (Wgtd Avg): 0.6926
2025-08-04 20:30:37,297 - INFO -   Global F1 Score (Wgtd Avg): 0.7869
2025-08-04 20:30:37,297 - INFO -   Global Precision (Wgtd Avg): 0.9464
2025-08-04 20:30:37,297 - INFO -   Global Recall (Wgtd Avg): 0.6735
2025-08-04 20:30:37,297 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:30:37,298 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0400) - ResourceCost(0.2600) = -0.3002
2025-08-04 20:30:37,298 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 43.
2025-08-04 20:30:37,298 - INFO -   Final Global Reward for action: -0.3002. Client states at selection: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:37,298 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.2600
2025-08-04 20:30:37,298 - INFO -   Next round's global F1 (for next state Q-val): 0.7869
2025-08-04 20:30:37,298 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:30:37,298 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:30:37,298 - INFO -       Q(s) updated from 0.0263 to 0.0232 (TotalReward: -0.3002, NextMaxQ: 0.0263)
2025-08-04 20:30:37,299 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:30:37,299 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:30:37,299 - INFO -       Q(s) updated from 0.0232 to 0.0202 (TotalReward: -0.3002, NextMaxQ: 0.0232)
2025-08-04 20:30:37,300 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:30:37,300 - INFO - 
2025-08-04 20:30:37,300 - INFO - [ROUND 44]
2025-08-04 20:30:37,301 - INFO - [RLAgent choose_actions_softmax] Round 44. Temperature: 0.8142
2025-08-04 20:30:37,301 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:30:37,301 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': 0.0, '8560019474512340676': 8.902285065261022e-05, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.020211526554118925, '2395859185497387824': 0.020211526554118925, '10913316872057236365': -0.00765318748285857, '6587436948557123441': 0.0, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:30:37,301 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09902882222646382), '5975185251685626785': np.float64(0.09996401200888505), '8560019474512340676': np.float64(0.09997494205697553), '12043264814094380418': np.float64(0.09902882222646382), '4296149388320225194': np.float64(0.09902882222646382), '15388649110162717160': np.float64(0.10247646139646774), '2395859185497387824': np.float64(0.10247646139646774), '10913316872057236365': np.float64(0.09902882222646382), '6587436948557123441': np.float64(0.09996401200888505), '17456602372862189643': np.float64(0.09902882222646382)}
2025-08-04 20:30:37,302 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:30:37,302 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:30:37,302 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:30:37,305 - INFO -   New temperature for next round: 0.8102
2025-08-04 20:30:37,306 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:37,306 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:30:43,321 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:30:43,321 - INFO - [Round 44, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:30:43,324 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:30:43,325 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:30:43,325 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0858, Aggregated D_Loss=0.8786 from 2 clients (971 examples)
2025-08-04 20:30:43,325 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.49s across 2 clients
2025-08-04 20:30:43,325 - INFO - Fit phase aggregation: Summary
2025-08-04 20:30:43,325 - INFO -   fit_clients_total_received: 2
2025-08-04 20:30:43,325 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:30:43,325 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:30:43,325 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:30:43,326 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:30:43,326 - INFO -   aggregated_g_loss: 2.0858
2025-08-04 20:30:43,326 - INFO -   aggregated_d_loss: 0.8786
2025-08-04 20:30:43,326 - INFO -   fit_time_avg_seconds_all_reporting: 0.4890
2025-08-04 20:30:43,327 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:30:52,365 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:30:52,365 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.35799574851989746, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7965811965811965, 'avg_anomaly_score': 0.33911421118539853, 'recall': 0.6793002915451894, 'eval_time_seconds': 0.0149688720703125, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7047146401985112, 'precision': 0.9628099173553719}
2025-08-04 20:30:52,366 - INFO - [Round 44, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:30:52,366 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 44.
2025-08-04 20:30:52,366 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 44.
2025-08-04 20:30:52,366 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 44.
2025-08-04 20:30:52,366 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 44.
2025-08-04 20:30:52,367 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 44.
2025-08-04 20:30:52,367 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 44.
2025-08-04 20:30:52,367 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 44.
2025-08-04 20:30:52,367 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 44.
2025-08-04 20:30:52,367 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 44.
2025-08-04 20:30:52,367 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 44.
2025-08-04 20:30:52,370 - INFO - [Round 44, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:30:52,375 - INFO - ==================================================
2025-08-04 20:30:52,375 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:30:52,375 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:30:52,375 - INFO - ==================================================
2025-08-04 20:30:52,375 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:30:52,375 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3372
2025-08-04 20:30:52,376 - INFO -   Global Accuracy (Wgtd Avg): 0.6931
2025-08-04 20:30:52,376 - INFO -   Global F1 Score (Wgtd Avg): 0.7873
2025-08-04 20:30:52,376 - INFO -   Global Precision (Wgtd Avg): 0.9468
2025-08-04 20:30:52,376 - INFO -   Global Recall (Wgtd Avg): 0.6738
2025-08-04 20:30:52,376 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:30:52,376 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0400) - ResourceCost(0.2600) = -0.2196
2025-08-04 20:30:52,376 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 44.
2025-08-04 20:30:52,377 - INFO -   Final Global Reward for action: -0.2196. Client states at selection: {'15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:52,377 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0400, Resource Cost: 0.2600
2025-08-04 20:30:52,377 - INFO -   Next round's global F1 (for next state Q-val): 0.7873
2025-08-04 20:30:52,377 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:30:52,377 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:30:52,377 - INFO -       Q(s) updated from 0.0202 to 0.0180 (TotalReward: -0.2196, NextMaxQ: 0.0202)
2025-08-04 20:30:52,378 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:30:52,378 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:30:52,378 - INFO -       Q(s) updated from 0.0180 to 0.0158 (TotalReward: -0.2196, NextMaxQ: 0.0180)
2025-08-04 20:30:52,379 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:30:52,379 - INFO - 
2025-08-04 20:30:52,379 - INFO - [ROUND 45]
2025-08-04 20:30:52,380 - INFO - [RLAgent choose_actions_softmax] Round 45. Temperature: 0.8102
2025-08-04 20:30:52,380 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:30:52,380 - INFO -   Optimistic init for new high-core state (7, 2, 2, 7, 7) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:30:52,380 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.01578229910594733, '2395859185497387824': 0.01578229910594733, '10913316872057236365': -0.00765318748285857, '6587436948557123441': 0.0, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:30:52,380 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09850821469197778), '5975185251685626785': np.float64(0.09944318490851588), '8560019474512340676': np.float64(0.10577379483921497), '12043264814094380418': np.float64(0.09850821469197778), '4296149388320225194': np.float64(0.09850821469197778), '15388649110162717160': np.float64(0.10139938094193222), '2395859185497387824': np.float64(0.10139938094193222), '10913316872057236365': np.float64(0.09850821469197778), '6587436948557123441': np.float64(0.09944318490851588), '17456602372862189643': np.float64(0.09850821469197778)}
2025-08-04 20:30:52,381 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:30:52,381 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:30:52,381 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:30:52,384 - INFO -   New temperature for next round: 0.8061
2025-08-04 20:30:52,385 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:30:52,385 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:31:01,405 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:31:01,405 - INFO - [Round 45, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:31:01,409 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:31:01,409 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:31:01,410 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0858, Aggregated D_Loss=0.8810 from 3 clients (1005 examples)
2025-08-04 20:31:01,410 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.39s across 3 clients
2025-08-04 20:31:01,410 - INFO - Fit phase aggregation: Summary
2025-08-04 20:31:01,410 - INFO -   fit_clients_total_received: 3
2025-08-04 20:31:01,410 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:31:01,410 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:31:01,410 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:31:01,410 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:31:01,410 - INFO -   aggregated_g_loss: 2.0858
2025-08-04 20:31:01,411 - INFO -   aggregated_d_loss: 0.8810
2025-08-04 20:31:01,411 - INFO -   fit_time_avg_seconds_all_reporting: 0.3856
2025-08-04 20:31:01,411 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:31:10,442 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:31:10,443 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.3650073170661926, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7965811965811965, 'avg_anomaly_score': 0.34667624255859525, 'recall': 0.6793002915451894, 'eval_time_seconds': 0.014389753341674805, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7047146401985112, 'precision': 0.9628099173553719}
2025-08-04 20:31:10,443 - INFO - [Round 45, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:31:10,443 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 45.
2025-08-04 20:31:10,443 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 45.
2025-08-04 20:31:10,443 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 45.
2025-08-04 20:31:10,444 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 45.
2025-08-04 20:31:10,447 - INFO - [Round 45, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:31:10,450 - INFO - ==================================================
2025-08-04 20:31:10,450 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:31:10,450 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:31:10,451 - INFO - ==================================================
2025-08-04 20:31:10,451 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:31:10,451 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3448
2025-08-04 20:31:10,451 - INFO -   Global Accuracy (Wgtd Avg): 0.6931
2025-08-04 20:31:10,451 - INFO -   Global F1 Score (Wgtd Avg): 0.7873
2025-08-04 20:31:10,451 - INFO -   Global Precision (Wgtd Avg): 0.9468
2025-08-04 20:31:10,451 - INFO -   Global Recall (Wgtd Avg): 0.6738
2025-08-04 20:31:10,451 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:31:10,452 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.4000
2025-08-04 20:31:10,452 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 45.
2025-08-04 20:31:10,452 - INFO -   Final Global Reward for action: -0.4000. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:31:10,452 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:31:10,452 - INFO -   Next round's global F1 (for next state Q-val): 0.7873
2025-08-04 20:31:10,452 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:31:10,452 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 2, 2, 7, 7)
2025-08-04 20:31:10,452 - INFO -       Q(s) updated from 0.0500 to 0.0460 (TotalReward: -0.4000, NextMaxQ: 0.0500)
2025-08-04 20:31:10,453 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:31:10,453 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:31:10,453 - INFO -       Q(s) updated from 0.0158 to 0.0118 (TotalReward: -0.4000, NextMaxQ: 0.0158)
2025-08-04 20:31:10,453 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:31:10,454 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:31:10,454 - INFO -       Q(s) updated from 0.0118 to 0.0078 (TotalReward: -0.4000, NextMaxQ: 0.0118)
2025-08-04 20:31:10,454 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:31:10,455 - INFO - 
2025-08-04 20:31:10,455 - INFO - [ROUND 46]
2025-08-04 20:31:10,455 - INFO - [RLAgent choose_actions_softmax] Round 46. Temperature: 0.8061
2025-08-04 20:31:10,455 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:31:10,455 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.0051740000000000015, '8560019474512340676': 0.045950000000000005, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': 0.007754750290034543, '2395859185497387824': 0.007754750290034543, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.0051740000000000015, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:31:10,456 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09887760877736695), '5975185251685626785': np.float64(0.09918217541109174), '8560019474512340676': np.float64(0.10567613948360485), '12043264814094380418': np.float64(0.09887760877736695), '4296149388320225194': np.float64(0.09887760877736695), '15388649110162717160': np.float64(0.10078573290368849), '2395859185497387824': np.float64(0.10078573290368849), '10913316872057236365': np.float64(0.09887760877736695), '6587436948557123441': np.float64(0.09918217541109174), '17456602372862189643': np.float64(0.09887760877736695)}
2025-08-04 20:31:10,456 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:31:10,456 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:31:10,456 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:31:10,463 - INFO -   New temperature for next round: 0.8021
2025-08-04 20:31:10,463 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:31:10,463 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:31:19,484 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:31:19,484 - INFO - [Round 46, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:31:19,489 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:31:19,489 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:31:19,489 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0859, Aggregated D_Loss=0.8780 from 3 clients (1028 examples)
2025-08-04 20:31:19,490 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.39s across 3 clients
2025-08-04 20:31:19,490 - INFO - Fit phase aggregation: Summary
2025-08-04 20:31:19,490 - INFO -   fit_clients_total_received: 3
2025-08-04 20:31:19,490 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:31:19,490 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:31:19,490 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:31:19,490 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:31:19,491 - INFO -   aggregated_g_loss: 2.0859
2025-08-04 20:31:19,491 - INFO -   aggregated_d_loss: 0.8780
2025-08-04 20:31:19,491 - INFO -   fit_time_avg_seconds_all_reporting: 0.3892
2025-08-04 20:31:19,491 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:31:25,545 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:31:25,545 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.3630789637565613, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8045977011494253, 'avg_anomaly_score': 0.3451515304260567, 'recall': 0.693069306930693, 'eval_time_seconds': 0.008969545364379883, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7213114754098361, 'precision': 0.958904109589041}
2025-08-04 20:31:25,546 - INFO - [Round 46, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:31:25,546 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 46.
2025-08-04 20:31:25,546 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 46.
2025-08-04 20:31:25,546 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 46.
2025-08-04 20:31:25,546 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 46.
2025-08-04 20:31:25,546 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 46.
2025-08-04 20:31:25,547 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 46.
2025-08-04 20:31:25,547 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 46.
2025-08-04 20:31:25,547 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 46.
2025-08-04 20:31:25,547 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 46.
2025-08-04 20:31:25,547 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 46.
2025-08-04 20:31:25,549 - INFO - [Round 46, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:31:25,553 - INFO - ==================================================
2025-08-04 20:31:25,553 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:31:25,553 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:31:25,554 - INFO - ==================================================
2025-08-04 20:31:25,554 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:31:25,554 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3470
2025-08-04 20:31:25,554 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:31:25,554 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:31:25,554 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:31:25,554 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:31:25,554 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:31:25,554 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.4002
2025-08-04 20:31:25,555 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 46.
2025-08-04 20:31:25,555 - INFO -   Final Global Reward for action: -0.4002. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:31:25,555 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:31:25,555 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:31:25,555 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:31:25,555 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 2, 2, 7, 7)
2025-08-04 20:31:25,555 - INFO -       Q(s) updated from 0.0460 to 0.0419 (TotalReward: -0.4002, NextMaxQ: 0.0460)
2025-08-04 20:31:25,556 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:31:25,556 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:31:25,556 - INFO -       Q(s) updated from 0.0078 to 0.0036 (TotalReward: -0.4002, NextMaxQ: -0.0072)
2025-08-04 20:31:25,556 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:31:25,556 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 5, 2, 7, 7)
2025-08-04 20:31:25,556 - INFO -       Q(s) updated from 0.0036 to -0.0005 (TotalReward: -0.4002, NextMaxQ: -0.0072)
2025-08-04 20:31:25,557 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:31:25,557 - INFO - 
2025-08-04 20:31:25,557 - INFO - [ROUND 47]
2025-08-04 20:31:25,558 - INFO - [RLAgent choose_actions_softmax] Round 47. Temperature: 0.8021
2025-08-04 20:31:25,558 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:31:25,558 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.013251053716416772, '8560019474512340676': 0.04190180500323759, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': -0.00718812580034545, '2395859185497387824': -0.00718812580034545, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:31:25,559 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09949276604836702), '5975185251685626785': np.float64(0.09880080238083264), '8560019474512340676': np.float64(0.10583362331520367), '12043264814094380418': np.float64(0.09949276604836702), '4296149388320225194': np.float64(0.09949276604836702), '15388649110162717160': np.float64(0.09955047084064793), '2395859185497387824': np.float64(0.09955047084064793), '10913316872057236365': np.float64(0.09949276604836702), '6587436948557123441': np.float64(0.09880080238083264), '17456602372862189643': np.float64(0.09949276604836702)}
2025-08-04 20:31:25,559 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:31:25,559 - INFO -     Selected 1 CIDs with this factor: ['8560019474512340676']
2025-08-04 20:31:25,559 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676']
2025-08-04 20:31:25,563 - INFO -   New temperature for next round: 0.7981
2025-08-04 20:31:25,563 - INFO -   Final selected CIDs to return: ['8560019474512340676']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7)}
2025-08-04 20:31:25,563 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:31:31,574 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:31:31,574 - INFO - [Round 47, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:31:31,577 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:31:31,577 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:31:31,577 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0664, Aggregated D_Loss=0.8428 from 1 clients (7 examples)
2025-08-04 20:31:31,577 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.14s across 1 clients
2025-08-04 20:31:31,578 - INFO - Fit phase aggregation: Summary
2025-08-04 20:31:31,578 - INFO -   fit_clients_total_received: 1
2025-08-04 20:31:31,578 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:31:31,578 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:31:31,578 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:31:31,578 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:31:31,578 - INFO -   aggregated_g_loss: 2.0664
2025-08-04 20:31:31,578 - INFO -   aggregated_d_loss: 0.8428
2025-08-04 20:31:31,578 - INFO -   fit_time_avg_seconds_all_reporting: 0.1398
2025-08-04 20:31:31,579 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:31:37,627 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:31:37,627 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.34108078479766846, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7887788778877888, 'avg_anomaly_score': 0.32790248299674163, 'recall': 0.6713483146067416, 'eval_time_seconds': 0.013981342315673828, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6930455635491607, 'precision': 0.956}
2025-08-04 20:31:37,627 - INFO - [Round 47, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:31:37,627 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 47.
2025-08-04 20:31:37,628 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 47.
2025-08-04 20:31:37,629 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 47.
2025-08-04 20:31:37,631 - INFO - [Round 47, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:31:37,639 - INFO - ==================================================
2025-08-04 20:31:37,639 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:31:37,639 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:31:37,639 - INFO - ==================================================
2025-08-04 20:31:37,639 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:31:37,639 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3264
2025-08-04 20:31:37,639 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:31:37,639 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:31:37,640 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:31:37,640 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:31:37,640 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:31:37,640 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0000) - ResourceCost(0.1000) = -0.1000
2025-08-04 20:31:37,640 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 47.
2025-08-04 20:31:37,640 - INFO -   Final Global Reward for action: -0.1000. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7)}
2025-08-04 20:31:37,640 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0000, Resource Cost: 0.1000
2025-08-04 20:31:37,641 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:31:37,641 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:31:37,641 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:31:37,641 - INFO -       Q(s) updated from 0.0419 to 0.0405 (TotalReward: -0.1000, NextMaxQ: 0.0001)
2025-08-04 20:31:37,642 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:31:37,642 - INFO - 
2025-08-04 20:31:37,643 - INFO - [ROUND 48]
2025-08-04 20:31:37,643 - INFO - [RLAgent choose_actions_softmax] Round 48. Temperature: 0.7981
2025-08-04 20:31:37,643 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:31:37,644 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.013251053716416772, '8560019474512340676': 8.902285065261022e-05, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': -0.00049277611737853, '2395859185497387824': -0.00049277611737853, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:31:37,644 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09986224931825968), '5975185251685626785': np.float64(0.0991642380389917), '8560019474512340676': np.float64(0.1008357481290974), '12043264814094380418': np.float64(0.09986224931825968), '4296149388320225194': np.float64(0.09986224931825968), '15388649110162717160': np.float64(0.10076226460081031), '2395859185497387824': np.float64(0.10076226460081031), '10913316872057236365': np.float64(0.09986224931825968), '6587436948557123441': np.float64(0.0991642380389917), '17456602372862189643': np.float64(0.09986224931825968)}
2025-08-04 20:31:37,645 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:31:37,645 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:31:37,645 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:31:37,649 - INFO -   New temperature for next round: 0.7941
2025-08-04 20:31:37,649 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:31:37,649 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:31:43,671 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:31:43,672 - INFO - [Round 48, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:31:43,677 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:31:43,677 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:31:43,677 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0868, Aggregated D_Loss=0.8805 from 3 clients (1077 examples)
2025-08-04 20:31:43,677 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.40s across 3 clients
2025-08-04 20:31:43,678 - INFO - Fit phase aggregation: Summary
2025-08-04 20:31:43,678 - INFO -   fit_clients_total_received: 3
2025-08-04 20:31:43,678 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:31:43,678 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:31:43,678 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:31:43,678 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:31:43,678 - INFO -   aggregated_g_loss: 2.0868
2025-08-04 20:31:43,678 - INFO -   aggregated_d_loss: 0.8805
2025-08-04 20:31:43,678 - INFO -   fit_time_avg_seconds_all_reporting: 0.3983
2025-08-04 20:31:43,679 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:31:52,730 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:31:52,730 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.3631994009017944, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7887788778877888, 'avg_anomaly_score': 0.3477858071990436, 'recall': 0.6713483146067416, 'eval_time_seconds': 0.018850088119506836, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6930455635491607, 'precision': 0.956}
2025-08-04 20:31:52,730 - INFO - [Round 48, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:31:52,730 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 48.
2025-08-04 20:31:52,731 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 48.
2025-08-04 20:31:52,732 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 48.
2025-08-04 20:31:52,734 - INFO - [Round 48, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:31:52,738 - INFO - ==================================================
2025-08-04 20:31:52,738 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:31:52,738 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:31:52,738 - INFO - ==================================================
2025-08-04 20:31:52,738 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:31:52,739 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3464
2025-08-04 20:31:52,739 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:31:52,739 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:31:52,739 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:31:52,739 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:31:52,739 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:31:52,739 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.4100
2025-08-04 20:31:52,739 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 48.
2025-08-04 20:31:52,740 - INFO -   Final Global Reward for action: -0.4100. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7)}
2025-08-04 20:31:52,740 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:31:52,740 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:31:52,740 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:31:52,740 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:31:52,740 - INFO -       Q(s) updated from 0.0001 to -0.0041 (TotalReward: -0.4100, NextMaxQ: -0.0055)
2025-08-04 20:31:52,741 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:31:52,741 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:31:52,741 - INFO -       Q(s) updated from -0.0005 to -0.0046 (TotalReward: -0.4100, NextMaxQ: -0.0005)
2025-08-04 20:31:52,741 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:31:52,742 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:31:52,742 - INFO -       Q(s) updated from -0.0046 to -0.0087 (TotalReward: -0.4100, NextMaxQ: -0.0046)
2025-08-04 20:31:52,742 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:31:52,743 - INFO - 
2025-08-04 20:31:52,743 - INFO - [ROUND 49]
2025-08-04 20:31:52,743 - INFO - [RLAgent choose_actions_softmax] Round 49. Temperature: 0.7941
2025-08-04 20:31:52,743 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:31:52,743 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00765318748285857, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.005450025767048965, '12043264814094380418': -0.00765318748285857, '4296149388320225194': -0.00765318748285857, '15388649110162717160': -0.008687691057919888, '2395859185497387824': -0.008687691057919888, '10913316872057236365': -0.00765318748285857, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.00765318748285857}
2025-08-04 20:31:52,744 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10013894268822474), '5975185251685626785': np.float64(0.09943549246834918), '8560019474512340676': np.float64(0.10041716357475441), '12043264814094380418': np.float64(0.10013894268822474), '4296149388320225194': np.float64(0.10013894268822474), '15388649110162717160': np.float64(0.10000856902371176), '2395859185497387824': np.float64(0.10000856902371176), '10913316872057236365': np.float64(0.10013894268822474), '6587436948557123441': np.float64(0.09943549246834918), '17456602372862189643': np.float64(0.10013894268822474)}
2025-08-04 20:31:52,744 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:31:52,744 - INFO -     Selected 8 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '17456602372862189643']
2025-08-04 20:31:52,744 - INFO -   Selection by factor 1.00 yielded 8 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:31:52,744 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:31:52,749 - INFO -   New temperature for next round: 0.7901
2025-08-04 20:31:52,749 - INFO -   Final selected CIDs to return: ['8560019474512340676', '1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '1640189632563049314': (7, 0, 0, 7, 7), '12043264814094380418': (7, 0, 0, 7, 7), '4296149388320225194': (7, 0, 0, 7, 7), '10913316872057236365': (7, 0, 0, 7, 7)}
2025-08-04 20:31:52,750 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:32:01,780 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:32:01,781 - INFO - [Round 49, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:32:01,788 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:32:01,788 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.20
2025-08-04 20:32:01,788 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0859, Aggregated D_Loss=0.8786 from 5 clients (5065 examples)
2025-08-04 20:32:01,789 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.88s across 5 clients
2025-08-04 20:32:01,789 - INFO - Fit phase aggregation: Summary
2025-08-04 20:32:01,789 - INFO -   fit_clients_total_received: 5
2025-08-04 20:32:01,789 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:32:01,789 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:32:01,789 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:32:01,789 - INFO -   allocated_cores_avg_per_client: 2.2000
2025-08-04 20:32:01,789 - INFO -   aggregated_g_loss: 2.0859
2025-08-04 20:32:01,789 - INFO -   aggregated_d_loss: 0.8786
2025-08-04 20:32:01,790 - INFO -   fit_time_avg_seconds_all_reporting: 0.8767
2025-08-04 20:32:01,790 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:32:07,842 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:32:07,842 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.3684149503707886, 'profile_name': 'Low-End IoT', 'f1_score': 0.7916666666666666, 'avg_anomaly_score': 0.34857730296525086, 'recall': 0.672566371681416, 'eval_time_seconds': 0.009289741516113281, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.696969696969697, 'precision': 0.9620253164556962}
2025-08-04 20:32:07,843 - INFO - [Round 49, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:32:07,843 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 49.
2025-08-04 20:32:07,843 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 49.
2025-08-04 20:32:07,843 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 49.
2025-08-04 20:32:07,843 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 49.
2025-08-04 20:32:07,844 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 49.
2025-08-04 20:32:07,844 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 49.
2025-08-04 20:32:07,844 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 49.
2025-08-04 20:32:07,844 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 49.
2025-08-04 20:32:07,844 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 49.
2025-08-04 20:32:07,844 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 49.
2025-08-04 20:32:07,847 - INFO - [Round 49, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:32:07,850 - INFO - ==================================================
2025-08-04 20:32:07,850 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:32:07,851 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:32:07,851 - INFO - ==================================================
2025-08-04 20:32:07,851 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:32:07,851 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3501
2025-08-04 20:32:07,851 - INFO -   Global Accuracy (Wgtd Avg): 0.6931
2025-08-04 20:32:07,851 - INFO -   Global F1 Score (Wgtd Avg): 0.7873
2025-08-04 20:32:07,851 - INFO -   Global Precision (Wgtd Avg): 0.9468
2025-08-04 20:32:07,851 - INFO -   Global Recall (Wgtd Avg): 0.6738
2025-08-04 20:32:07,852 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:32:07,852 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0200) - ResourceCost(0.2200) = -0.2398
2025-08-04 20:32:07,852 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 49.
2025-08-04 20:32:07,852 - INFO -   Final Global Reward for action: -0.2398. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '1640189632563049314': (7, 0, 0, 7, 7), '12043264814094380418': (7, 0, 0, 7, 7), '4296149388320225194': (7, 0, 0, 7, 7), '10913316872057236365': (7, 0, 0, 7, 7)}
2025-08-04 20:32:07,852 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0200, Resource Cost: 0.2200
2025-08-04 20:32:07,852 - INFO -   Next round's global F1 (for next state Q-val): 0.7873
2025-08-04 20:32:07,852 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:32:07,852 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 5, 2, 7, 7)
2025-08-04 20:32:07,853 - INFO -       Q(s) updated from -0.0055 to -0.0078 (TotalReward: -0.2398, NextMaxQ: -0.0042)
2025-08-04 20:32:07,853 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:32:07,853 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:32:07,853 - INFO -       Q(s) updated from -0.0077 to -0.0100 (TotalReward: -0.2398, NextMaxQ: 0.0000)
2025-08-04 20:32:07,854 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:32:07,854 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:32:07,854 - INFO -       Q(s) updated from -0.0100 to -0.0123 (TotalReward: -0.2398, NextMaxQ: 0.0000)
2025-08-04 20:32:07,855 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:32:07,855 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:32:07,855 - INFO -       Q(s) updated from -0.0123 to -0.0145 (TotalReward: -0.2398, NextMaxQ: 0.0000)
2025-08-04 20:32:07,855 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:32:07,856 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:32:07,856 - INFO -       Q(s) updated from -0.0145 to -0.0168 (TotalReward: -0.2398, NextMaxQ: 0.0000)
2025-08-04 20:32:07,856 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:32:07,857 - INFO - 
2025-08-04 20:32:07,857 - INFO - [ROUND 50]
2025-08-04 20:32:07,857 - INFO - [RLAgent choose_actions_softmax] Round 50. Temperature: 0.7901
2025-08-04 20:32:07,857 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:32:07,858 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.004189335221828719, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03913073628799392, '2395859185497387824': 0.03913073628799392, '10913316872057236365': 0.0, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:32:07,858 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09958222120164228), '5975185251685626785': np.float64(0.09792603126650029), '8560019474512340676': np.float64(0.09905560924148547), '12043264814094380418': np.float64(0.09958222120164228), '4296149388320225194': np.float64(0.09958222120164228), '15388649110162717160': np.float64(0.10463829365002174), '2395859185497387824': np.float64(0.10463829365002174), '10913316872057236365': np.float64(0.09958222120164228), '6587436948557123441': np.float64(0.09792603126650029), '17456602372862189643': np.float64(0.0974868561189013)}
2025-08-04 20:32:07,859 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:32:07,859 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:32:07,859 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:32:07,862 - INFO -   New temperature for next round: 0.7862
2025-08-04 20:32:07,862 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:32:07,863 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:32:13,879 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:32:13,879 - INFO - [Round 50, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:32:13,883 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:32:13,883 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:32:13,883 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0860, Aggregated D_Loss=0.8797 from 2 clients (1121 examples)
2025-08-04 20:32:13,883 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.52s across 2 clients
2025-08-04 20:32:13,883 - INFO - Fit phase aggregation: Summary
2025-08-04 20:32:13,883 - INFO -   fit_clients_total_received: 2
2025-08-04 20:32:13,883 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:32:13,884 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:32:13,884 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:32:13,884 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:32:13,884 - INFO -   aggregated_g_loss: 2.0860
2025-08-04 20:32:13,884 - INFO -   aggregated_d_loss: 0.8797
2025-08-04 20:32:13,884 - INFO -   fit_time_avg_seconds_all_reporting: 0.5203
2025-08-04 20:32:13,885 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:32:19,930 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:32:19,931 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.3632100582122803, 'profile_name': 'Low-End IoT', 'f1_score': 0.7813620071684588, 'avg_anomaly_score': 0.3426655924838522, 'recall': 0.6646341463414634, 'eval_time_seconds': 0.015307188034057617, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6817391304347826, 'precision': 0.9478260869565217}
2025-08-04 20:32:19,931 - INFO - [Round 50, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:32:19,931 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 50.
2025-08-04 20:32:19,931 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 50.
2025-08-04 20:32:19,931 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 50.
2025-08-04 20:32:19,931 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 50.
2025-08-04 20:32:19,932 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 50.
2025-08-04 20:32:19,932 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 50.
2025-08-04 20:32:19,932 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 50.
2025-08-04 20:32:19,932 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 50.
2025-08-04 20:32:19,932 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 50.
2025-08-04 20:32:19,932 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 50.
2025-08-04 20:32:19,935 - INFO - [Round 50, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:32:19,938 - INFO - ==================================================
2025-08-04 20:32:19,938 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:32:19,939 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:32:19,939 - INFO - ==================================================
2025-08-04 20:32:19,939 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:32:19,939 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3439
2025-08-04 20:32:19,939 - INFO -   Global Accuracy (Wgtd Avg): 0.6926
2025-08-04 20:32:19,939 - INFO -   Global F1 Score (Wgtd Avg): 0.7869
2025-08-04 20:32:19,939 - INFO -   Global Precision (Wgtd Avg): 0.9464
2025-08-04 20:32:19,939 - INFO -   Global Recall (Wgtd Avg): 0.6735
2025-08-04 20:32:19,940 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:32:19,940 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0200) - ResourceCost(0.2600) = -0.2804
2025-08-04 20:32:19,940 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 50.
2025-08-04 20:32:19,940 - INFO -   Final Global Reward for action: -0.2804. Client states at selection: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:32:19,940 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0200, Resource Cost: 0.2600
2025-08-04 20:32:19,940 - INFO -   Next round's global F1 (for next state Q-val): 0.7869
2025-08-04 20:32:19,940 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:32:19,941 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:32:19,941 - INFO -       Q(s) updated from 0.0391 to 0.0363 (TotalReward: -0.2804, NextMaxQ: 0.0391)
2025-08-04 20:32:19,941 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:32:19,941 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:32:19,941 - INFO -       Q(s) updated from 0.0363 to 0.0334 (TotalReward: -0.2804, NextMaxQ: 0.0363)
2025-08-04 20:32:19,942 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:32:19,942 - INFO - 
2025-08-04 20:32:19,942 - INFO - [ROUND 51]
2025-08-04 20:32:19,943 - INFO - [RLAgent choose_actions_softmax] Round 51. Temperature: 0.7862
2025-08-04 20:32:19,943 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:32:19,943 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.007831677202039231, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03344638040979783, '2395859185497387824': 0.03344638040979783, '10913316872057236365': 0.0, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:32:19,943 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09977613024771582), '5975185251685626785': np.float64(0.0981084466580368), '8560019474512340676': np.float64(0.09878709542536465), '12043264814094380418': np.float64(0.09977613024771582), '4296149388320225194': np.float64(0.09977613024771582), '15388649110162717160': np.float64(0.104112621437724), '2395859185497387824': np.float64(0.104112621437724), '10913316872057236365': np.float64(0.09977613024771582), '6587436948557123441': np.float64(0.0981084466580368), '17456602372862189643': np.float64(0.09766624739225065)}
2025-08-04 20:32:19,944 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:32:19,944 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:32:19,944 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:32:19,948 - INFO -   New temperature for next round: 0.7822
2025-08-04 20:32:19,948 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:32:19,948 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:32:25,965 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:32:25,965 - INFO - [Round 51, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:32:25,968 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:32:25,969 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:32:25,969 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0861, Aggregated D_Loss=0.8717 from 2 clients (1144 examples)
2025-08-04 20:32:25,969 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.54s across 2 clients
2025-08-04 20:32:25,969 - INFO - Fit phase aggregation: Summary
2025-08-04 20:32:25,969 - INFO -   fit_clients_total_received: 2
2025-08-04 20:32:25,969 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:32:25,969 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:32:25,969 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:32:25,969 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:32:25,970 - INFO -   aggregated_g_loss: 2.0861
2025-08-04 20:32:25,970 - INFO -   aggregated_d_loss: 0.8717
2025-08-04 20:32:25,970 - INFO -   fit_time_avg_seconds_all_reporting: 0.5417
2025-08-04 20:32:25,970 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:32:35,016 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:32:35,017 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.3756803870201111, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7854362262422716, 'avg_anomaly_score': 0.3502021661809614, 'recall': 0.6709702660406885, 'eval_time_seconds': 0.05088925361633301, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.6895294897282969, 'precision': 0.9469906129210381}
2025-08-04 20:32:35,017 - INFO - [Round 51, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:32:35,017 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 51.
2025-08-04 20:32:35,017 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 51.
2025-08-04 20:32:35,017 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 51.
2025-08-04 20:32:35,017 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 51.
2025-08-04 20:32:35,018 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 51.
2025-08-04 20:32:35,018 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 51.
2025-08-04 20:32:35,018 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 51.
2025-08-04 20:32:35,018 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 51.
2025-08-04 20:32:35,018 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 51.
2025-08-04 20:32:35,019 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 51.
2025-08-04 20:32:35,021 - INFO - [Round 51, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:32:35,025 - INFO - ==================================================
2025-08-04 20:32:35,025 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:32:35,025 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:32:35,025 - INFO - ==================================================
2025-08-04 20:32:35,026 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:32:35,026 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3512
2025-08-04 20:32:35,026 - INFO -   Global Accuracy (Wgtd Avg): 0.6928
2025-08-04 20:32:35,026 - INFO -   Global F1 Score (Wgtd Avg): 0.7871
2025-08-04 20:32:35,026 - INFO -   Global Precision (Wgtd Avg): 0.9466
2025-08-04 20:32:35,026 - INFO -   Global Recall (Wgtd Avg): 0.6736
2025-08-04 20:32:35,026 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:32:35,026 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0200) - ResourceCost(0.2600) = -0.2798
2025-08-04 20:32:35,026 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 51.
2025-08-04 20:32:35,026 - INFO -   Final Global Reward for action: -0.2798. Client states at selection: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:32:35,027 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0200, Resource Cost: 0.2600
2025-08-04 20:32:35,027 - INFO -   Next round's global F1 (for next state Q-val): 0.7871
2025-08-04 20:32:35,027 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:32:35,027 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:32:35,027 - INFO -       Q(s) updated from 0.0334 to 0.0306 (TotalReward: -0.2798, NextMaxQ: 0.0334)
2025-08-04 20:32:35,027 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:32:35,027 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:32:35,028 - INFO -       Q(s) updated from 0.0306 to 0.0278 (TotalReward: -0.2798, NextMaxQ: 0.0306)
2025-08-04 20:32:35,028 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:32:35,028 - INFO - 
2025-08-04 20:32:35,028 - INFO - [ROUND 52]
2025-08-04 20:32:35,029 - INFO - [RLAgent choose_actions_softmax] Round 52. Temperature: 0.7822
2025-08-04 20:32:35,029 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:32:35,029 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.004060917609757356, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.027785424191705717, '2395859185497387824': 0.027785424191705717, '10913316872057236365': 0.0, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:32:35,029 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09987720635389477), '5975185251685626785': np.float64(0.09819951540658592), '8560019474512340676': np.float64(0.0993600376675921), '12043264814094380418': np.float64(0.09987720635389477), '4296149388320225194': np.float64(0.09987720635389477), '15388649110162717160': np.float64(0.103488709776977), '2395859185497387824': np.float64(0.103488709776977), '10913316872057236365': np.float64(0.09987720635389477), '6587436948557123441': np.float64(0.09819951540658592), '17456602372862189643': np.float64(0.09775468654970296)}
2025-08-04 20:32:35,030 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:32:35,030 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:32:35,030 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:32:35,034 - INFO -   New temperature for next round: 0.7783
2025-08-04 20:32:35,034 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:32:35,035 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:32:41,051 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:32:41,051 - INFO - [Round 52, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:32:41,054 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:32:41,054 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:32:41,055 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0860, Aggregated D_Loss=0.8689 from 2 clients (1168 examples)
2025-08-04 20:32:41,055 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.56s across 2 clients
2025-08-04 20:32:41,055 - INFO - Fit phase aggregation: Summary
2025-08-04 20:32:41,055 - INFO -   fit_clients_total_received: 2
2025-08-04 20:32:41,055 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:32:41,055 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:32:41,056 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:32:41,056 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:32:41,056 - INFO -   aggregated_g_loss: 2.0860
2025-08-04 20:32:41,056 - INFO -   aggregated_d_loss: 0.8689
2025-08-04 20:32:41,056 - INFO -   fit_time_avg_seconds_all_reporting: 0.5614
2025-08-04 20:32:41,057 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:32:50,097 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:32:50,097 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.40318349599838255, 'profile_name': 'Low-End IoT', 'f1_score': 0.7581699346405228, 'avg_anomaly_score': 0.3857218975112552, 'recall': 0.6444444444444445, 'eval_time_seconds': 0.0172119140625, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6476190476190476, 'precision': 0.9206349206349206}
2025-08-04 20:32:50,098 - INFO - [Round 52, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:32:50,098 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 52.
2025-08-04 20:32:50,098 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 52.
2025-08-04 20:32:50,098 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 52.
2025-08-04 20:32:50,098 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 52.
2025-08-04 20:32:50,099 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 52.
2025-08-04 20:32:50,099 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 52.
2025-08-04 20:32:50,099 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 52.
2025-08-04 20:32:50,099 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 52.
2025-08-04 20:32:50,099 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 52.
2025-08-04 20:32:50,099 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 52.
2025-08-04 20:32:50,102 - INFO - [Round 52, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:32:50,105 - INFO - ==================================================
2025-08-04 20:32:50,105 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:32:50,105 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:32:50,105 - INFO - ==================================================
2025-08-04 20:32:50,105 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:32:50,105 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3622
2025-08-04 20:32:50,105 - INFO -   Global Accuracy (Wgtd Avg): 0.6926
2025-08-04 20:32:50,105 - INFO -   Global F1 Score (Wgtd Avg): 0.7869
2025-08-04 20:32:50,105 - INFO -   Global Precision (Wgtd Avg): 0.9464
2025-08-04 20:32:50,105 - INFO -   Global Recall (Wgtd Avg): 0.6735
2025-08-04 20:32:50,105 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:32:50,106 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0200) - ResourceCost(0.2600) = -0.2802
2025-08-04 20:32:50,106 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 52.
2025-08-04 20:32:50,106 - INFO -   Final Global Reward for action: -0.2802. Client states at selection: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:32:50,106 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0200, Resource Cost: 0.2600
2025-08-04 20:32:50,106 - INFO -   Next round's global F1 (for next state Q-val): 0.7869
2025-08-04 20:32:50,106 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:32:50,106 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:32:50,106 - INFO -       Q(s) updated from 0.0278 to 0.0246 (TotalReward: -0.2802, NextMaxQ: -0.0087)
2025-08-04 20:32:50,106 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:32:50,106 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:32:50,107 - INFO -       Q(s) updated from 0.0246 to 0.0215 (TotalReward: -0.2802, NextMaxQ: -0.0087)
2025-08-04 20:32:50,107 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:32:50,108 - INFO - 
2025-08-04 20:32:50,108 - INFO - [ROUND 53]
2025-08-04 20:32:50,108 - INFO - [RLAgent choose_actions_softmax] Round 53. Temperature: 0.7783
2025-08-04 20:32:50,108 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:32:50,108 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.013251053716416772, '8560019474512340676': 0.040483588158861085, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': -0.008687691057919888, '2395859185497387824': -0.008687691057919888, '10913316872057236365': 0.0, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:32:50,109 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10023986041015502), '5975185251685626785': np.float64(0.09854768838201133), '8560019474512340676': np.float64(0.10559176813898996), '12043264814094380418': np.float64(0.10023986041015502), '4296149388320225194': np.float64(0.10023986041015502), '15388649110162717160': np.float64(0.09912718461565481), '2395859185497387824': np.float64(0.09912718461565481), '10913316872057236365': np.float64(0.10023986041015502), '6587436948557123441': np.float64(0.09854768838201133), '17456602372862189643': np.float64(0.0980990442250577)}
2025-08-04 20:32:50,109 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:32:50,109 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:32:50,109 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:32:50,112 - INFO -   New temperature for next round: 0.7744
2025-08-04 20:32:50,112 - INFO -   Final selected CIDs to return: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'1640189632563049314': (7, 1, 0, 7, 7), '8560019474512340676': (7, 2, 2, 7, 7), '12043264814094380418': (7, 1, 0, 7, 7), '4296149388320225194': (7, 1, 0, 7, 7), '10913316872057236365': (7, 1, 0, 7, 7)}
2025-08-04 20:32:50,112 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:32:59,133 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:32:59,133 - INFO - [Round 53, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:32:59,141 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:32:59,141 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.20
2025-08-04 20:32:59,141 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0858, Aggregated D_Loss=0.8735 from 5 clients (5451 examples)
2025-08-04 20:32:59,141 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.95s across 5 clients
2025-08-04 20:32:59,141 - INFO - Fit phase aggregation: Summary
2025-08-04 20:32:59,141 - INFO -   fit_clients_total_received: 5
2025-08-04 20:32:59,141 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:32:59,141 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:32:59,141 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:32:59,142 - INFO -   allocated_cores_avg_per_client: 2.2000
2025-08-04 20:32:59,142 - INFO -   aggregated_g_loss: 2.0858
2025-08-04 20:32:59,142 - INFO -   aggregated_d_loss: 0.8735
2025-08-04 20:32:59,142 - INFO -   fit_time_avg_seconds_all_reporting: 0.9508
2025-08-04 20:32:59,142 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:33:05,197 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:33:05,198 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.39414258003234864, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7965811965811965, 'avg_anomaly_score': 0.3652873454851193, 'recall': 0.6793002915451894, 'eval_time_seconds': 0.013955116271972656, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7047146401985112, 'precision': 0.9628099173553719}
2025-08-04 20:33:05,198 - INFO - [Round 53, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:33:05,198 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 53.
2025-08-04 20:33:05,198 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 53.
2025-08-04 20:33:05,199 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 53.
2025-08-04 20:33:05,200 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 53.
2025-08-04 20:33:05,202 - INFO - [Round 53, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:33:05,206 - INFO - ==================================================
2025-08-04 20:33:05,206 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:33:05,206 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:33:05,206 - INFO - ==================================================
2025-08-04 20:33:05,206 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:33:05,206 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3635
2025-08-04 20:33:05,206 - INFO -   Global Accuracy (Wgtd Avg): 0.6921
2025-08-04 20:33:05,207 - INFO -   Global F1 Score (Wgtd Avg): 0.7866
2025-08-04 20:33:05,207 - INFO -   Global Precision (Wgtd Avg): 0.9460
2025-08-04 20:33:05,207 - INFO -   Global Recall (Wgtd Avg): 0.6732
2025-08-04 20:33:05,207 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:33:05,207 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0000) - ResourceCost(0.2200) = -0.2204
2025-08-04 20:33:05,207 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 53.
2025-08-04 20:33:05,207 - INFO -   Final Global Reward for action: -0.2204. Client states at selection: {'1640189632563049314': (7, 1, 0, 7, 7), '8560019474512340676': (7, 2, 2, 7, 7), '12043264814094380418': (7, 1, 0, 7, 7), '4296149388320225194': (7, 1, 0, 7, 7), '10913316872057236365': (7, 1, 0, 7, 7)}
2025-08-04 20:33:05,207 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0000, Resource Cost: 0.2200
2025-08-04 20:33:05,207 - INFO -   Next round's global F1 (for next state Q-val): 0.7866
2025-08-04 20:33:05,208 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:33:05,208 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:33:05,208 - INFO -       Q(s) updated from 0.0000 to -0.0022 (TotalReward: -0.2204, NextMaxQ: 0.0000)
2025-08-04 20:33:05,209 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:33:05,209 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 2, 2, 7, 7)
2025-08-04 20:33:05,209 - INFO -       Q(s) updated from 0.0405 to 0.0382 (TotalReward: -0.2204, NextMaxQ: 0.0405)
2025-08-04 20:33:05,209 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:33:05,209 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:33:05,210 - INFO -       Q(s) updated from -0.0022 to -0.0044 (TotalReward: -0.2204, NextMaxQ: 0.0000)
2025-08-04 20:33:05,210 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:33:05,210 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:33:05,210 - INFO -       Q(s) updated from -0.0044 to -0.0065 (TotalReward: -0.2204, NextMaxQ: 0.0000)
2025-08-04 20:33:05,211 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:33:05,211 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:33:05,211 - INFO -       Q(s) updated from -0.0065 to -0.0087 (TotalReward: -0.2204, NextMaxQ: 0.0000)
2025-08-04 20:33:05,211 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:33:05,212 - INFO - 
2025-08-04 20:33:05,212 - INFO - [ROUND 54]
2025-08-04 20:33:05,212 - INFO - [RLAgent choose_actions_softmax] Round 54. Temperature: 0.7744
2025-08-04 20:33:05,212 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:33:05,213 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.013251053716416772, '8560019474512340676': 0.03823864105469425, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.021500459292206144, '2395859185497387824': 0.021500459292206144, '10913316872057236365': 0.0, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:33:05,213 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09948737093752621), '5975185251685626785': np.float64(0.09779953432123313), '8560019474512340676': np.float64(0.1045230602092556), '12043264814094380418': np.float64(0.09948737093752621), '4296149388320225194': np.float64(0.09948737093752621), '15388649110162717160': np.float64(0.10228816173346761), '2395859185497387824': np.float64(0.10228816173346761), '10913316872057236365': np.float64(0.09948737093752621), '6587436948557123441': np.float64(0.09779953432123313), '17456602372862189643': np.float64(0.09735206393123803)}
2025-08-04 20:33:05,213 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:33:05,214 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:33:05,214 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:33:05,217 - INFO -   New temperature for next round: 0.7705
2025-08-04 20:33:05,218 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:33:05,218 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:33:11,240 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:33:11,240 - INFO - [Round 54, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:33:11,246 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:33:11,246 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:33:11,246 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0844, Aggregated D_Loss=0.8677 from 3 clients (1222 examples)
2025-08-04 20:33:11,246 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.44s across 3 clients
2025-08-04 20:33:11,246 - INFO - Fit phase aggregation: Summary
2025-08-04 20:33:11,246 - INFO -   fit_clients_total_received: 3
2025-08-04 20:33:11,246 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:33:11,247 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:33:11,247 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:33:11,247 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:33:11,247 - INFO -   aggregated_g_loss: 2.0844
2025-08-04 20:33:11,247 - INFO -   aggregated_d_loss: 0.8677
2025-08-04 20:33:11,247 - INFO -   fit_time_avg_seconds_all_reporting: 0.4397
2025-08-04 20:33:11,248 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:33:20,287 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:33:20,287 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.372483491897583, 'profile_name': 'Low-End IoT', 'f1_score': 0.7813620071684588, 'avg_anomaly_score': 0.3461838640337405, 'recall': 0.6646341463414634, 'eval_time_seconds': 0.015131473541259766, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6817391304347826, 'precision': 0.9478260869565217}
2025-08-04 20:33:20,287 - INFO - [Round 54, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:33:20,287 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 54.
2025-08-04 20:33:20,288 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 54.
2025-08-04 20:33:20,288 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 54.
2025-08-04 20:33:20,288 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 54.
2025-08-04 20:33:20,288 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 54.
2025-08-04 20:33:20,288 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 54.
2025-08-04 20:33:20,289 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 54.
2025-08-04 20:33:20,289 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 54.
2025-08-04 20:33:20,289 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 54.
2025-08-04 20:33:20,289 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 54.
2025-08-04 20:33:20,292 - INFO - [Round 54, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:33:20,297 - INFO - ==================================================
2025-08-04 20:33:20,297 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:33:20,297 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:33:20,297 - INFO - ==================================================
2025-08-04 20:33:20,297 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:33:20,297 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3481
2025-08-04 20:33:20,297 - INFO -   Global Accuracy (Wgtd Avg): 0.6913
2025-08-04 20:33:20,297 - INFO -   Global F1 Score (Wgtd Avg): 0.7861
2025-08-04 20:33:20,298 - INFO -   Global Precision (Wgtd Avg): 0.9454
2025-08-04 20:33:20,298 - INFO -   Global Recall (Wgtd Avg): 0.6728
2025-08-04 20:33:20,298 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:33:20,298 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0007) - FairPenalty(0.0200) - ResourceCost(0.3600) = -0.3807
2025-08-04 20:33:20,298 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 54.
2025-08-04 20:33:20,298 - INFO -   Final Global Reward for action: -0.3807. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:33:20,298 - INFO -   Performance Reward: -0.0007, Fairness Penalty: 0.0200, Resource Cost: 0.3600
2025-08-04 20:33:20,298 - INFO -   Next round's global F1 (for next state Q-val): 0.7861
2025-08-04 20:33:20,298 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:33:20,298 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 2, 2, 7, 7)
2025-08-04 20:33:20,299 - INFO -       Q(s) updated from 0.0382 to 0.0344 (TotalReward: -0.3807, NextMaxQ: 0.0382)
2025-08-04 20:33:20,299 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:33:20,299 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:33:20,299 - INFO -       Q(s) updated from 0.0215 to 0.0174 (TotalReward: -0.3807, NextMaxQ: -0.0087)
2025-08-04 20:33:20,300 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:33:20,300 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:33:20,300 - INFO -       Q(s) updated from 0.0174 to 0.0133 (TotalReward: -0.3807, NextMaxQ: -0.0087)
2025-08-04 20:33:20,300 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:33:20,301 - INFO - 
2025-08-04 20:33:20,301 - INFO - [ROUND 55]
2025-08-04 20:33:20,301 - INFO - [RLAgent choose_actions_softmax] Round 55. Temperature: 0.7705
2025-08-04 20:33:20,301 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:33:20,302 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00868646583401429, '5975185251685626785': -0.013251053716416772, '8560019474512340676': 0.03439368326595148, '12043264814094380418': -0.00868646583401429, '4296149388320225194': -0.00868646583401429, '15388649110162717160': -0.008687691057919888, '2395859185497387824': -0.008687691057919888, '10913316872057236365': -0.00868646583401429, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:33:20,302 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09964916022747575), '5975185251685626785': np.float64(0.09906060292755918), '8560019474512340676': np.float64(0.10537905935378439), '12043264814094380418': np.float64(0.09964916022747575), '4296149388320225194': np.float64(0.09964916022747575), '15388649110162717160': np.float64(0.09964900177902496), '2395859185497387824': np.float64(0.09964900177902496), '10913316872057236365': np.float64(0.09964916022747575), '6587436948557123441': np.float64(0.09906060292755918), '17456602372862189643': np.float64(0.09860509032314443)}
2025-08-04 20:33:20,302 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:33:20,302 - INFO -     Selected 1 CIDs with this factor: ['8560019474512340676']
2025-08-04 20:33:20,303 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676']
2025-08-04 20:33:20,306 - INFO -   New temperature for next round: 0.7667
2025-08-04 20:33:20,307 - INFO -   Final selected CIDs to return: ['8560019474512340676']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7)}
2025-08-04 20:33:20,307 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:33:26,318 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:33:26,318 - INFO - [Round 55, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:33:26,320 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:33:26,320 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:33:26,320 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0734, Aggregated D_Loss=0.8457 from 1 clients (10 examples)
2025-08-04 20:33:26,321 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.14s across 1 clients
2025-08-04 20:33:26,321 - INFO - Fit phase aggregation: Summary
2025-08-04 20:33:26,321 - INFO -   fit_clients_total_received: 1
2025-08-04 20:33:26,321 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:33:26,321 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:33:26,321 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:33:26,322 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:33:26,322 - INFO -   aggregated_g_loss: 2.0734
2025-08-04 20:33:26,322 - INFO -   aggregated_d_loss: 0.8457
2025-08-04 20:33:26,322 - INFO -   fit_time_avg_seconds_all_reporting: 0.1371
2025-08-04 20:33:26,322 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:33:35,357 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:33:35,357 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.3466169714927673, 'profile_name': 'Low-End IoT', 'f1_score': 0.7916666666666666, 'avg_anomaly_score': 0.32540099503416003, 'recall': 0.672566371681416, 'eval_time_seconds': 0.009432554244995117, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.696969696969697, 'precision': 0.9620253164556962}
2025-08-04 20:33:35,357 - INFO - [Round 55, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:33:35,358 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 55.
2025-08-04 20:33:35,358 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 55.
2025-08-04 20:33:35,358 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 55.
2025-08-04 20:33:35,358 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 55.
2025-08-04 20:33:35,358 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 55.
2025-08-04 20:33:35,358 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 55.
2025-08-04 20:33:35,359 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 55.
2025-08-04 20:33:35,359 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 55.
2025-08-04 20:33:35,359 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 55.
2025-08-04 20:33:35,359 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 55.
2025-08-04 20:33:35,362 - INFO - [Round 55, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:33:35,365 - INFO - ==================================================
2025-08-04 20:33:35,365 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:33:35,366 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:33:35,366 - INFO - ==================================================
2025-08-04 20:33:35,366 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:33:35,366 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3267
2025-08-04 20:33:35,366 - INFO -   Global Accuracy (Wgtd Avg): 0.6891
2025-08-04 20:33:35,366 - INFO -   Global F1 Score (Wgtd Avg): 0.7845
2025-08-04 20:33:35,366 - INFO -   Global Precision (Wgtd Avg): 0.9435
2025-08-04 20:33:35,366 - INFO -   Global Recall (Wgtd Avg): 0.6714
2025-08-04 20:33:35,366 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:33:35,366 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0020) - FairPenalty(0.0000) - ResourceCost(0.1000) = -0.1020
2025-08-04 20:33:35,367 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 55.
2025-08-04 20:33:35,367 - INFO -   Final Global Reward for action: -0.1020. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7)}
2025-08-04 20:33:35,367 - INFO -   Performance Reward: -0.0020, Fairness Penalty: 0.0000, Resource Cost: 0.1000
2025-08-04 20:33:35,367 - INFO -   Next round's global F1 (for next state Q-val): 0.7845
2025-08-04 20:33:35,367 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:33:35,367 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:33:35,367 - INFO -       Q(s) updated from 0.0344 to 0.0330 (TotalReward: -0.1020, NextMaxQ: -0.0041)
2025-08-04 20:33:35,368 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:33:35,369 - INFO - 
2025-08-04 20:33:35,369 - INFO - [ROUND 56]
2025-08-04 20:33:35,369 - INFO - [RLAgent choose_actions_softmax] Round 56. Temperature: 0.7667
2025-08-04 20:33:35,369 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:33:35,369 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00868646583401429, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.004060917609757356, '12043264814094380418': -0.00868646583401429, '4296149388320225194': -0.00868646583401429, '15388649110162717160': 0.01334163250154462, '2395859185497387824': 0.01334163250154462, '10913316872057236365': -0.00868646583401429, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:33:35,370 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09958229728289715), '5975185251685626785': np.float64(0.0989911880985742), '8560019474512340676': np.float64(0.10018490159378708), '12043264814094380418': np.float64(0.09958229728289715), '4296149388320225194': np.float64(0.09958229728289715), '15388649110162717160': np.float64(0.10248491024951606), '2395859185497387824': np.float64(0.10248491024951606), '10913316872057236365': np.float64(0.09958229728289715), '6587436948557123441': np.float64(0.0989911880985742), '17456602372862189643': np.float64(0.09853371257844382)}
2025-08-04 20:33:35,370 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:33:35,370 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:33:35,370 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:33:35,374 - INFO -   New temperature for next round: 0.7629
2025-08-04 20:33:35,374 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:33:35,374 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:33:44,397 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:33:44,398 - INFO - [Round 56, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:33:44,402 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:33:44,403 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:33:44,403 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0844, Aggregated D_Loss=0.8669 from 3 clients (1265 examples)
2025-08-04 20:33:44,403 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.43s across 3 clients
2025-08-04 20:33:44,403 - INFO - Fit phase aggregation: Summary
2025-08-04 20:33:44,403 - INFO -   fit_clients_total_received: 3
2025-08-04 20:33:44,403 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:33:44,403 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:33:44,403 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:33:44,403 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:33:44,404 - INFO -   aggregated_g_loss: 2.0844
2025-08-04 20:33:44,404 - INFO -   aggregated_d_loss: 0.8669
2025-08-04 20:33:44,404 - INFO -   fit_time_avg_seconds_all_reporting: 0.4320
2025-08-04 20:33:44,404 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:33:50,454 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:33:50,454 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.3899646759033203, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8045977011494253, 'avg_anomaly_score': 0.36035271843925853, 'recall': 0.693069306930693, 'eval_time_seconds': 0.009600400924682617, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7213114754098361, 'precision': 0.958904109589041}
2025-08-04 20:33:50,455 - INFO - [Round 56, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:33:50,455 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 56.
2025-08-04 20:33:50,455 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 56.
2025-08-04 20:33:50,455 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 56.
2025-08-04 20:33:50,455 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 56.
2025-08-04 20:33:50,456 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 56.
2025-08-04 20:33:50,456 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 56.
2025-08-04 20:33:50,456 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 56.
2025-08-04 20:33:50,456 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 56.
2025-08-04 20:33:50,456 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 56.
2025-08-04 20:33:50,456 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 56.
2025-08-04 20:33:50,459 - INFO - [Round 56, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:33:50,463 - INFO - ==================================================
2025-08-04 20:33:50,463 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:33:50,463 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:33:50,463 - INFO - ==================================================
2025-08-04 20:33:50,463 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:33:50,463 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3630
2025-08-04 20:33:50,463 - INFO -   Global Accuracy (Wgtd Avg): 0.6900
2025-08-04 20:33:50,464 - INFO -   Global F1 Score (Wgtd Avg): 0.7851
2025-08-04 20:33:50,464 - INFO -   Global Precision (Wgtd Avg): 0.9443
2025-08-04 20:33:50,464 - INFO -   Global Recall (Wgtd Avg): 0.6719
2025-08-04 20:33:50,464 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:33:50,464 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0005) - FairPenalty(0.0300) - ResourceCost(0.3600) = -0.3895
2025-08-04 20:33:50,464 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 56.
2025-08-04 20:33:50,464 - INFO -   Final Global Reward for action: -0.3895. Client states at selection: {'8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:33:50,464 - INFO -   Performance Reward: 0.0005, Fairness Penalty: 0.0300, Resource Cost: 0.3600
2025-08-04 20:33:50,464 - INFO -   Next round's global F1 (for next state Q-val): 0.7851
2025-08-04 20:33:50,465 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:33:50,465 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:33:50,465 - INFO -       Q(s) updated from -0.0041 to -0.0080 (TotalReward: -0.3895, NextMaxQ: -0.0078)
2025-08-04 20:33:50,466 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:33:50,466 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:33:50,466 - INFO -       Q(s) updated from 0.0133 to 0.0094 (TotalReward: -0.3895, NextMaxQ: 0.0133)
2025-08-04 20:33:50,466 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:33:50,467 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:33:50,467 - INFO -       Q(s) updated from 0.0094 to 0.0055 (TotalReward: -0.3895, NextMaxQ: 0.0094)
2025-08-04 20:33:50,467 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:33:50,468 - INFO - 
2025-08-04 20:33:50,468 - INFO - [ROUND 57]
2025-08-04 20:33:50,468 - INFO - [RLAgent choose_actions_softmax] Round 57. Temperature: 0.7629
2025-08-04 20:33:50,468 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:33:50,469 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00868646583401429, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.007831677202039231, '12043264814094380418': -0.00868646583401429, '4296149388320225194': -0.00868646583401429, '15388649110162717160': 0.005529763125620915, '2395859185497387824': 0.005529763125620915, '10913316872057236365': -0.00868646583401429, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:33:50,469 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09983798740017225), '5975185251685626785': np.float64(0.09924239134808273), '8560019474512340676': np.float64(0.09994991854919096), '12043264814094380418': np.float64(0.09983798740017225), '4296149388320225194': np.float64(0.09983798740017225), '15388649110162717160': np.float64(0.10171594678645927), '2395859185497387824': np.float64(0.10171594678645927), '10913316872057236365': np.float64(0.09983798740017225), '6587436948557123441': np.float64(0.09924239134808273), '17456602372862189643': np.float64(0.09878145558103608)}
2025-08-04 20:33:50,469 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:33:50,469 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:33:50,470 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:33:50,473 - INFO -   New temperature for next round: 0.7590
2025-08-04 20:33:50,473 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:33:50,473 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:33:56,489 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:33:56,489 - INFO - [Round 57, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:33:56,493 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:33:56,493 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:33:56,493 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0842, Aggregated D_Loss=0.8648 from 2 clients (1275 examples)
2025-08-04 20:33:56,493 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.59s across 2 clients
2025-08-04 20:33:56,493 - INFO - Fit phase aggregation: Summary
2025-08-04 20:33:56,493 - INFO -   fit_clients_total_received: 2
2025-08-04 20:33:56,493 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:33:56,493 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:33:56,493 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:33:56,494 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:33:56,494 - INFO -   aggregated_g_loss: 2.0842
2025-08-04 20:33:56,494 - INFO -   aggregated_d_loss: 0.8648
2025-08-04 20:33:56,494 - INFO -   fit_time_avg_seconds_all_reporting: 0.5862
2025-08-04 20:33:56,494 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:34:02,536 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:34:02,536 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.3856860876083374, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7788778877887789, 'avg_anomaly_score': 0.3592341873857329, 'recall': 0.6629213483146067, 'eval_time_seconds': 0.013676643371582031, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6786570743405276, 'precision': 0.944}
2025-08-04 20:34:02,537 - INFO - [Round 57, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:34:02,537 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 57.
2025-08-04 20:34:02,537 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 57.
2025-08-04 20:34:02,537 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 57.
2025-08-04 20:34:02,537 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 57.
2025-08-04 20:34:02,537 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 57.
2025-08-04 20:34:02,537 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 57.
2025-08-04 20:34:02,538 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 57.
2025-08-04 20:34:02,538 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 57.
2025-08-04 20:34:02,538 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 57.
2025-08-04 20:34:02,538 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 57.
2025-08-04 20:34:02,541 - INFO - [Round 57, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:34:02,545 - INFO - ==================================================
2025-08-04 20:34:02,545 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:34:02,545 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:34:02,545 - INFO - ==================================================
2025-08-04 20:34:02,545 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:34:02,545 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3586
2025-08-04 20:34:02,546 - INFO -   Global Accuracy (Wgtd Avg): 0.6894
2025-08-04 20:34:02,546 - INFO -   Global F1 Score (Wgtd Avg): 0.7847
2025-08-04 20:34:02,546 - INFO -   Global Precision (Wgtd Avg): 0.9437
2025-08-04 20:34:02,546 - INFO -   Global Recall (Wgtd Avg): 0.6716
2025-08-04 20:34:02,546 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:34:02,546 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0006) - FairPenalty(0.0200) - ResourceCost(0.2600) = -0.2806
2025-08-04 20:34:02,546 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 57.
2025-08-04 20:34:02,546 - INFO -   Final Global Reward for action: -0.2806. Client states at selection: {'15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:34:02,546 - INFO -   Performance Reward: -0.0006, Fairness Penalty: 0.0200, Resource Cost: 0.2600
2025-08-04 20:34:02,547 - INFO -   Next round's global F1 (for next state Q-val): 0.7847
2025-08-04 20:34:02,547 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:34:02,547 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:34:02,547 - INFO -       Q(s) updated from 0.0055 to 0.0027 (TotalReward: -0.2806, NextMaxQ: 0.0055)
2025-08-04 20:34:02,547 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:34:02,548 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:34:02,548 - INFO -       Q(s) updated from 0.0027 to -0.0001 (TotalReward: -0.2806, NextMaxQ: 0.0027)
2025-08-04 20:34:02,548 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:34:02,549 - INFO - 
2025-08-04 20:34:02,549 - INFO - [ROUND 58]
2025-08-04 20:34:02,549 - INFO - [RLAgent choose_actions_softmax] Round 58. Temperature: 0.7590
2025-08-04 20:34:02,549 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:34:02,549 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00868646583401429, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.007831677202039231, '12043264814094380418': -0.00868646583401429, '4296149388320225194': -0.00868646583401429, '15388649110162717160': -8.952300899469886e-05, '2395859185497387824': -8.952300899469886e-05, '10913316872057236365': -0.00868646583401429, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:34:02,550 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09998719153370589), '5975185251685626785': np.float64(0.09938771697522349), '8560019474512340676': np.float64(0.10009985358480517), '12043264814094380418': np.float64(0.09998719153370589), '4296149388320225194': np.float64(0.09998719153370589), '15388649110162717160': np.float64(0.10112607715989716), '2395859185497387824': np.float64(0.10112607715989716), '10913316872057236365': np.float64(0.09998719153370589), '6587436948557123441': np.float64(0.09938771697522349), '17456602372862189643': np.float64(0.0989237920101301)}
2025-08-04 20:34:02,550 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:34:02,550 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:34:02,550 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:34:02,554 - INFO -   New temperature for next round: 0.7553
2025-08-04 20:34:02,555 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:34:02,555 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:34:08,576 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:34:08,576 - INFO - [Round 58, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:34:08,581 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:34:08,581 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:34:08,581 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0841, Aggregated D_Loss=0.8645 from 3 clients (1308 examples)
2025-08-04 20:34:08,581 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.44s across 3 clients
2025-08-04 20:34:08,582 - INFO - Fit phase aggregation: Summary
2025-08-04 20:34:08,582 - INFO -   fit_clients_total_received: 3
2025-08-04 20:34:08,582 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:34:08,582 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:34:08,582 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:34:08,582 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:34:08,582 - INFO -   aggregated_g_loss: 2.0841
2025-08-04 20:34:08,582 - INFO -   aggregated_d_loss: 0.8645
2025-08-04 20:34:08,583 - INFO -   fit_time_avg_seconds_all_reporting: 0.4449
2025-08-04 20:34:08,583 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:34:14,625 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:34:14,625 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.4016058683395386, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8045977011494253, 'avg_anomaly_score': 0.3654539975963655, 'recall': 0.693069306930693, 'eval_time_seconds': 0.01063680648803711, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7213114754098361, 'precision': 0.958904109589041}
2025-08-04 20:34:14,625 - INFO - [Round 58, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:34:14,625 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 58.
2025-08-04 20:34:14,626 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 58.
2025-08-04 20:34:14,626 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 58.
2025-08-04 20:34:14,626 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 58.
2025-08-04 20:34:14,626 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 58.
2025-08-04 20:34:14,626 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 58.
2025-08-04 20:34:14,626 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 58.
2025-08-04 20:34:14,627 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 58.
2025-08-04 20:34:14,627 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 58.
2025-08-04 20:34:14,627 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 58.
2025-08-04 20:34:14,630 - INFO - [Round 58, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:34:14,634 - INFO - ==================================================
2025-08-04 20:34:14,634 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:34:14,634 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:34:14,634 - INFO - ==================================================
2025-08-04 20:34:14,635 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:34:14,635 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3681
2025-08-04 20:34:14,635 - INFO -   Global Accuracy (Wgtd Avg): 0.6872
2025-08-04 20:34:14,635 - INFO -   Global F1 Score (Wgtd Avg): 0.7832
2025-08-04 20:34:14,635 - INFO -   Global Precision (Wgtd Avg): 0.9419
2025-08-04 20:34:14,635 - INFO -   Global Recall (Wgtd Avg): 0.6703
2025-08-04 20:34:14,635 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:34:14,636 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0020) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.4020
2025-08-04 20:34:14,636 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 58.
2025-08-04 20:34:14,636 - INFO -   Final Global Reward for action: -0.4020. Client states at selection: {'8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7)}
2025-08-04 20:34:14,636 - INFO -   Performance Reward: -0.0020, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:34:14,636 - INFO -   Next round's global F1 (for next state Q-val): 0.7832
2025-08-04 20:34:14,636 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:34:14,636 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:34:14,637 - INFO -       Q(s) updated from -0.0078 to -0.0118 (TotalReward: -0.4020, NextMaxQ: -0.0078)
2025-08-04 20:34:14,637 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:34:14,637 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:34:14,637 - INFO -       Q(s) updated from -0.0001 to -0.0042 (TotalReward: -0.4020, NextMaxQ: -0.0087)
2025-08-04 20:34:14,638 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:34:14,638 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:34:14,638 - INFO -       Q(s) updated from -0.0042 to -0.0082 (TotalReward: -0.4020, NextMaxQ: -0.0087)
2025-08-04 20:34:14,639 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:34:14,639 - INFO - 
2025-08-04 20:34:14,639 - INFO - [ROUND 59]
2025-08-04 20:34:14,640 - INFO - [RLAgent choose_actions_softmax] Round 59. Temperature: 0.7553
2025-08-04 20:34:14,640 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:34:14,640 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': -0.013251053716416772, '8560019474512340676': -0.011844052431137172, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.008687691057919888, '2395859185497387824': -0.008687691057919888, '10913316872057236365': -0.016802462182555808, '6587436948557123441': -0.013251053716416772, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:34:14,641 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09962522771306909), '5975185251685626785': np.float64(0.10009479554859375), '8560019474512340676': np.float64(0.1002814410348544), '12043264814094380418': np.float64(0.09962522771306909), '4296149388320225194': np.float64(0.09962522771306909), '15388649110162717160': np.float64(0.10070141465130632), '2395859185497387824': np.float64(0.10070141465130632), '10913316872057236365': np.float64(0.09962522771306909), '6587436948557123441': np.float64(0.10009479554859375), '17456602372862189643': np.float64(0.09962522771306909)}
2025-08-04 20:34:14,641 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:34:14,641 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:34:14,641 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:34:14,644 - INFO -   New temperature for next round: 0.7515
2025-08-04 20:34:14,644 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 0, 1, 7, 7), '8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7), '6587436948557123441': (7, 0, 1, 7, 7)}
2025-08-04 20:34:14,645 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:34:23,670 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:34:23,671 - INFO - [Round 59, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:34:23,678 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:34:23,678 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:34:23,678 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.8632 from 5 clients (1537 examples)
2025-08-04 20:34:23,678 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.41s across 5 clients
2025-08-04 20:34:23,678 - INFO - Fit phase aggregation: Summary
2025-08-04 20:34:23,679 - INFO -   fit_clients_total_received: 5
2025-08-04 20:34:23,679 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:34:23,679 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:34:23,679 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:34:23,679 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:34:23,679 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:34:23,679 - INFO -   aggregated_d_loss: 0.8632
2025-08-04 20:34:23,680 - INFO -   fit_time_avg_seconds_all_reporting: 0.4150
2025-08-04 20:34:23,680 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:34:29,722 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:34:29,722 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.39992755651474, 'profile_name': 'Low-End IoT', 'f1_score': 0.7870036101083032, 'avg_anomaly_score': 0.36765705328434706, 'recall': 0.6728395061728395, 'eval_time_seconds': 0.013685226440429688, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6927083333333334, 'precision': 0.9478260869565217}
2025-08-04 20:34:29,723 - INFO - [Round 59, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:34:29,723 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 59.
2025-08-04 20:34:29,723 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 59.
2025-08-04 20:34:29,723 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 59.
2025-08-04 20:34:29,723 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 59.
2025-08-04 20:34:29,723 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 59.
2025-08-04 20:34:29,724 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 59.
2025-08-04 20:34:29,724 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 59.
2025-08-04 20:34:29,724 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 59.
2025-08-04 20:34:29,724 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 59.
2025-08-04 20:34:29,724 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 59.
2025-08-04 20:34:29,727 - INFO - [Round 59, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:34:29,730 - INFO - ==================================================
2025-08-04 20:34:29,731 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:34:29,731 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:34:29,731 - INFO - ==================================================
2025-08-04 20:34:29,731 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:34:29,732 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3647
2025-08-04 20:34:29,732 - INFO -   Global Accuracy (Wgtd Avg): 0.6869
2025-08-04 20:34:29,732 - INFO -   Global F1 Score (Wgtd Avg): 0.7830
2025-08-04 20:34:29,732 - INFO -   Global Precision (Wgtd Avg): 0.9417
2025-08-04 20:34:29,732 - INFO -   Global Recall (Wgtd Avg): 0.6701
2025-08-04 20:34:29,732 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:34:29,732 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0600) - ResourceCost(0.5000) = -0.5602
2025-08-04 20:34:29,732 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 59.
2025-08-04 20:34:29,732 - INFO -   Final Global Reward for action: -0.5602. Client states at selection: {'5975185251685626785': (7, 0, 1, 7, 7), '8560019474512340676': (7, 4, 2, 7, 7), '15388649110162717160': (8, 4, 2, 7, 7), '2395859185497387824': (8, 4, 2, 7, 7), '6587436948557123441': (7, 0, 1, 7, 7)}
2025-08-04 20:34:29,733 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.5000
2025-08-04 20:34:29,733 - INFO -   Next round's global F1 (for next state Q-val): 0.7830
2025-08-04 20:34:29,733 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:34:29,733 - INFO -       State(s): (7, 0, 1, 7, 7) -> NextState(s'): (7, 1, 1, 7, 7)
2025-08-04 20:34:29,733 - INFO -       Q(s) updated from -0.0133 to -0.0188 (TotalReward: -0.5602, NextMaxQ: -0.0052)
2025-08-04 20:34:29,734 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:34:29,734 - INFO -       State(s): (7, 4, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:34:29,734 - INFO -       Q(s) updated from -0.0118 to -0.0174 (TotalReward: -0.5602, NextMaxQ: -0.0118)
2025-08-04 20:34:29,734 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:34:29,734 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:34:29,734 - INFO -       Q(s) updated from -0.0087 to -0.0143 (TotalReward: -0.5602, NextMaxQ: -0.0087)
2025-08-04 20:34:29,735 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:34:29,735 - INFO -       State(s): (8, 4, 2, 7, 7) -> NextState(s'): (8, 4, 2, 7, 7)
2025-08-04 20:34:29,735 - INFO -       Q(s) updated from -0.0143 to -0.0199 (TotalReward: -0.5602, NextMaxQ: -0.0143)
2025-08-04 20:34:29,736 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:34:29,736 - INFO -       State(s): (7, 0, 1, 7, 7) -> NextState(s'): (7, 1, 1, 7, 7)
2025-08-04 20:34:29,736 - INFO -       Q(s) updated from -0.0188 to -0.0242 (TotalReward: -0.5602, NextMaxQ: -0.0052)
2025-08-04 20:34:29,737 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:34:29,737 - INFO - 
2025-08-04 20:34:29,737 - INFO - [ROUND 60]
2025-08-04 20:34:29,737 - INFO - [RLAgent choose_actions_softmax] Round 60. Temperature: 0.7515
2025-08-04 20:34:29,737 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:34:29,738 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': -0.0051740000000000015, '8560019474512340676': -0.01743446681158278, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.019869238970815717, '2395859185497387824': -0.019869238970815717, '10913316872057236365': -0.016802462182555808, '6587436948557123441': -0.0051740000000000015, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:34:29,738 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09977846267864156), '5975185251685626785': np.float64(0.10133445485595323), '8560019474512340676': np.float64(0.09969458270685931), '12043264814094380418': np.float64(0.09977846267864156), '4296149388320225194': np.float64(0.09977846267864156), '15388649110162717160': np.float64(0.09937209709401312), '2395859185497387824': np.float64(0.09937209709401312), '10913316872057236365': np.float64(0.09977846267864156), '6587436948557123441': np.float64(0.10133445485595323), '17456602372862189643': np.float64(0.09977846267864156)}
2025-08-04 20:34:29,738 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:34:29,739 - INFO -     Selected 2 CIDs with this factor: ['5975185251685626785', '6587436948557123441']
2025-08-04 20:34:29,739 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441']
2025-08-04 20:34:29,742 - INFO -   New temperature for next round: 0.7477
2025-08-04 20:34:29,742 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 1, 1, 7, 7), '6587436948557123441': (7, 1, 1, 7, 7)}
2025-08-04 20:34:29,743 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:34:35,764 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:34:35,764 - INFO - [Round 60, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:34:35,767 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:34:35,768 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:34:35,768 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0812, Aggregated D_Loss=0.8522 from 2 clients (213 examples)
2025-08-04 20:34:35,768 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 2 clients
2025-08-04 20:34:35,768 - INFO - Fit phase aggregation: Summary
2025-08-04 20:34:35,768 - INFO -   fit_clients_total_received: 2
2025-08-04 20:34:35,769 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:34:35,769 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:34:35,769 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:34:35,769 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:34:35,769 - INFO -   aggregated_g_loss: 2.0812
2025-08-04 20:34:35,769 - INFO -   aggregated_d_loss: 0.8522
2025-08-04 20:34:35,769 - INFO -   fit_time_avg_seconds_all_reporting: 0.2301
2025-08-04 20:34:35,770 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:34:41,809 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:34:41,809 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.38799238204956055, 'profile_name': 'Low-End IoT', 'f1_score': 0.7870036101083032, 'avg_anomaly_score': 0.35878322418365216, 'recall': 0.6728395061728395, 'eval_time_seconds': 0.013927459716796875, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6927083333333334, 'precision': 0.9478260869565217}
2025-08-04 20:34:41,810 - INFO - [Round 60, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:34:41,810 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 60.
2025-08-04 20:34:41,810 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 60.
2025-08-04 20:34:41,810 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 60.
2025-08-04 20:34:41,810 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 60.
2025-08-04 20:34:41,810 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 60.
2025-08-04 20:34:41,810 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 60.
2025-08-04 20:34:41,811 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 60.
2025-08-04 20:34:41,811 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 60.
2025-08-04 20:34:41,811 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 60.
2025-08-04 20:34:41,811 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 60.
2025-08-04 20:34:41,814 - INFO - [Round 60, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:34:41,818 - INFO - ==================================================
2025-08-04 20:34:41,818 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:34:41,818 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:34:41,818 - INFO - ==================================================
2025-08-04 20:34:41,818 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:34:41,818 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3558
2025-08-04 20:34:41,818 - INFO -   Global Accuracy (Wgtd Avg): 0.6869
2025-08-04 20:34:41,819 - INFO -   Global F1 Score (Wgtd Avg): 0.7830
2025-08-04 20:34:41,819 - INFO -   Global Precision (Wgtd Avg): 0.9417
2025-08-04 20:34:41,819 - INFO -   Global Recall (Wgtd Avg): 0.6701
2025-08-04 20:34:41,819 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:34:41,819 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0000) - ResourceCost(0.1400) = -0.1400
2025-08-04 20:34:41,819 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 60.
2025-08-04 20:34:41,819 - INFO -   Final Global Reward for action: -0.1400. Client states at selection: {'5975185251685626785': (7, 1, 1, 7, 7), '6587436948557123441': (7, 1, 1, 7, 7)}
2025-08-04 20:34:41,819 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0000, Resource Cost: 0.1400
2025-08-04 20:34:41,820 - INFO -   Next round's global F1 (for next state Q-val): 0.7830
2025-08-04 20:34:41,820 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:34:41,820 - INFO -       State(s): (7, 1, 1, 7, 7) -> NextState(s'): (7, 2, 1, 7, 7)
2025-08-04 20:34:41,820 - INFO -       Q(s) updated from -0.0052 to -0.0065 (TotalReward: -0.1400, NextMaxQ: 0.0000)
2025-08-04 20:34:41,820 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:34:41,820 - INFO -       State(s): (7, 1, 1, 7, 7) -> NextState(s'): (7, 2, 1, 7, 7)
2025-08-04 20:34:41,821 - INFO -       Q(s) updated from -0.0065 to -0.0079 (TotalReward: -0.1400, NextMaxQ: 0.0000)
2025-08-04 20:34:41,821 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:34:41,822 - INFO - 
2025-08-04 20:34:41,823 - INFO - [ROUND 61]
2025-08-04 20:34:41,823 - INFO - [RLAgent choose_actions_softmax] Round 61. Temperature: 0.7477
2025-08-04 20:34:41,823 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:34:41,823 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': 0.0, '8560019474512340676': -0.007985340528254583, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.019869238970815717, '2395859185497387824': -0.019869238970815717, '10913316872057236365': -0.016802462182555808, '6587436948557123441': 0.0, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:34:41,824 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09951112631982204), '5975185251685626785': np.float64(0.10177261326109946), '8560019474512340676': np.float64(0.10069150763938747), '12043264814094380418': np.float64(0.09951112631982204), '4296149388320225194': np.float64(0.09951112631982204), '15388649110162717160': np.float64(0.0991038171196517), '2395859185497387824': np.float64(0.0991038171196517), '10913316872057236365': np.float64(0.09951112631982204), '6587436948557123441': np.float64(0.10177261326109946), '17456602372862189643': np.float64(0.09951112631982204)}
2025-08-04 20:34:41,824 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:34:41,824 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '6587436948557123441']
2025-08-04 20:34:41,824 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '6587436948557123441']
2025-08-04 20:34:41,828 - INFO -   New temperature for next round: 0.7440
2025-08-04 20:34:41,828 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 2, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '6587436948557123441': (7, 2, 1, 7, 7)}
2025-08-04 20:34:41,828 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:34:47,849 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:34:47,850 - INFO - [Round 61, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:34:47,854 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:34:47,854 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.00
2025-08-04 20:34:47,854 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0827, Aggregated D_Loss=0.8510 from 3 clients (228 examples)
2025-08-04 20:34:47,854 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.20s across 3 clients
2025-08-04 20:34:47,854 - INFO - Fit phase aggregation: Summary
2025-08-04 20:34:47,855 - INFO -   fit_clients_total_received: 3
2025-08-04 20:34:47,855 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:34:47,855 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:34:47,855 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:34:47,855 - INFO -   allocated_cores_avg_per_client: 4.0000
2025-08-04 20:34:47,855 - INFO -   aggregated_g_loss: 2.0827
2025-08-04 20:34:47,855 - INFO -   aggregated_d_loss: 0.8510
2025-08-04 20:34:47,855 - INFO -   fit_time_avg_seconds_all_reporting: 0.2040
2025-08-04 20:34:47,856 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:34:56,901 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:34:56,901 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.3931910753250122, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8045977011494253, 'avg_anomaly_score': 0.35883557552196943, 'recall': 0.693069306930693, 'eval_time_seconds': 0.009749412536621094, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7213114754098361, 'precision': 0.958904109589041}
2025-08-04 20:34:56,901 - INFO - [Round 61, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 61.
2025-08-04 20:34:56,902 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 61.
2025-08-04 20:34:56,903 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 61.
2025-08-04 20:34:56,903 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 61.
2025-08-04 20:34:56,906 - INFO - [Round 61, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:34:56,911 - INFO - ==================================================
2025-08-04 20:34:56,911 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:34:56,911 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:34:56,911 - INFO - ==================================================
2025-08-04 20:34:56,911 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:34:56,911 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3614
2025-08-04 20:34:56,911 - INFO -   Global Accuracy (Wgtd Avg): 0.6872
2025-08-04 20:34:56,911 - INFO -   Global F1 Score (Wgtd Avg): 0.7832
2025-08-04 20:34:56,912 - INFO -   Global Precision (Wgtd Avg): 0.9419
2025-08-04 20:34:56,912 - INFO -   Global Recall (Wgtd Avg): 0.6703
2025-08-04 20:34:56,912 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:34:56,912 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0100) - ResourceCost(0.2400) = -0.2498
2025-08-04 20:34:56,912 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 61.
2025-08-04 20:34:56,912 - INFO -   Final Global Reward for action: -0.2498. Client states at selection: {'5975185251685626785': (7, 2, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '6587436948557123441': (7, 2, 1, 7, 7)}
2025-08-04 20:34:56,912 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0100, Resource Cost: 0.2400
2025-08-04 20:34:56,912 - INFO -   Next round's global F1 (for next state Q-val): 0.7832
2025-08-04 20:34:56,913 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:34:56,913 - INFO -       State(s): (7, 2, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:34:56,913 - INFO -       Q(s) updated from 0.0000 to -0.0025 (TotalReward: -0.2498, NextMaxQ: 0.0000)
2025-08-04 20:34:56,913 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:34:56,914 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:34:56,914 - INFO -       Q(s) updated from -0.0080 to -0.0105 (TotalReward: -0.2498, NextMaxQ: -0.0080)
2025-08-04 20:34:56,914 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:34:56,914 - INFO -       State(s): (7, 2, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:34:56,914 - INFO -       Q(s) updated from -0.0025 to -0.0050 (TotalReward: -0.2498, NextMaxQ: 0.0000)
2025-08-04 20:34:56,915 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:34:56,915 - INFO - 
2025-08-04 20:34:56,915 - INFO - [ROUND 62]
2025-08-04 20:34:56,916 - INFO - [RLAgent choose_actions_softmax] Round 62. Temperature: 0.7440
2025-08-04 20:34:56,916 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:34:56,916 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': 0.0, '8560019474512340676': -0.010475784448828004, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.008243549791500009, '2395859185497387824': -0.008243549791500009, '10913316872057236365': -0.016802462182555808, '6587436948557123441': 0.0, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:34:56,916 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09923229684106699), '5975185251685626785': np.float64(0.1014989079623855), '8560019474512340676': np.float64(0.10007974725412164), '12043264814094380418': np.float64(0.09923229684106699), '4296149388320225194': np.float64(0.09923229684106699), '15388649110162717160': np.float64(0.10038047630788617), '2395859185497387824': np.float64(0.10038047630788617), '10913316872057236365': np.float64(0.09923229684106699), '6587436948557123441': np.float64(0.1014989079623855), '17456602372862189643': np.float64(0.09923229684106699)}
2025-08-04 20:34:56,916 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:34:56,917 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:34:56,917 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:34:56,920 - INFO -   New temperature for next round: 0.7403
2025-08-04 20:34:56,920 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 3, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7), '6587436948557123441': (7, 3, 1, 7, 7)}
2025-08-04 20:34:56,921 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:35:05,949 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:35:05,949 - INFO - [Round 62, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:35:05,956 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:35:05,957 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:35:05,957 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.8610 from 5 clients (1608 examples)
2025-08-04 20:35:05,957 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.39s across 5 clients
2025-08-04 20:35:05,957 - INFO - Fit phase aggregation: Summary
2025-08-04 20:35:05,957 - INFO -   fit_clients_total_received: 5
2025-08-04 20:35:05,957 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:35:05,957 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:35:05,958 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:35:05,958 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:35:05,958 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:35:05,958 - INFO -   aggregated_d_loss: 0.8610
2025-08-04 20:35:05,958 - INFO -   fit_time_avg_seconds_all_reporting: 0.3855
2025-08-04 20:35:05,959 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:35:12,003 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:35:12,004 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.3956400275230408, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8004509582863585, 'avg_anomaly_score': 0.36359364621100887, 'recall': 0.6893203883495146, 'eval_time_seconds': 0.017755508422851562, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.714516129032258, 'precision': 0.9543010752688172}
2025-08-04 20:35:12,004 - INFO - [Round 62, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:35:12,005 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 62.
2025-08-04 20:35:12,005 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 62.
2025-08-04 20:35:12,005 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 62.
2025-08-04 20:35:12,005 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 62.
2025-08-04 20:35:12,005 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 62.
2025-08-04 20:35:12,006 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 62.
2025-08-04 20:35:12,006 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 62.
2025-08-04 20:35:12,006 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 62.
2025-08-04 20:35:12,006 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 62.
2025-08-04 20:35:12,006 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 62.
2025-08-04 20:35:12,009 - INFO - [Round 62, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:35:12,013 - INFO - ==================================================
2025-08-04 20:35:12,013 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:35:12,013 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:35:12,013 - INFO - ==================================================
2025-08-04 20:35:12,013 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:35:12,014 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3674
2025-08-04 20:35:12,014 - INFO -   Global Accuracy (Wgtd Avg): 0.6872
2025-08-04 20:35:12,014 - INFO -   Global F1 Score (Wgtd Avg): 0.7832
2025-08-04 20:35:12,014 - INFO -   Global Precision (Wgtd Avg): 0.9419
2025-08-04 20:35:12,014 - INFO -   Global Recall (Wgtd Avg): 0.6703
2025-08-04 20:35:12,014 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:35:12,014 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0500) - ResourceCost(0.5000) = -0.5500
2025-08-04 20:35:12,014 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 62.
2025-08-04 20:35:12,015 - INFO -   Final Global Reward for action: -0.5500. Client states at selection: {'5975185251685626785': (7, 3, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '15388649110162717160': (8, 3, 2, 7, 7), '2395859185497387824': (8, 3, 2, 7, 7), '6587436948557123441': (7, 3, 1, 7, 7)}
2025-08-04 20:35:12,015 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0500, Resource Cost: 0.5000
2025-08-04 20:35:12,015 - INFO -   Next round's global F1 (for next state Q-val): 0.7832
2025-08-04 20:35:12,015 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:35:12,015 - INFO -       State(s): (7, 3, 1, 7, 7) -> NextState(s'): (7, 4, 1, 7, 7)
2025-08-04 20:35:12,015 - INFO -       Q(s) updated from 0.0000 to -0.0055 (TotalReward: -0.5500, NextMaxQ: 0.0000)
2025-08-04 20:35:12,016 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:35:12,016 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 4, 2, 7, 7)
2025-08-04 20:35:12,016 - INFO -       Q(s) updated from -0.0105 to -0.0160 (TotalReward: -0.5500, NextMaxQ: -0.0174)
2025-08-04 20:35:12,016 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:35:12,016 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:35:12,017 - INFO -       Q(s) updated from -0.0082 to -0.0137 (TotalReward: -0.5500, NextMaxQ: -0.0082)
2025-08-04 20:35:12,017 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:35:12,017 - INFO -       State(s): (8, 3, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:35:12,017 - INFO -       Q(s) updated from -0.0137 to -0.0192 (TotalReward: -0.5500, NextMaxQ: -0.0137)
2025-08-04 20:35:12,018 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:35:12,018 - INFO -       State(s): (7, 3, 1, 7, 7) -> NextState(s'): (7, 4, 1, 7, 7)
2025-08-04 20:35:12,018 - INFO -       Q(s) updated from -0.0055 to -0.0109 (TotalReward: -0.5500, NextMaxQ: 0.0000)
2025-08-04 20:35:12,019 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:35:12,019 - INFO - 
2025-08-04 20:35:12,019 - INFO - [ROUND 63]
2025-08-04 20:35:12,019 - INFO - [RLAgent choose_actions_softmax] Round 63. Temperature: 0.7403
2025-08-04 20:35:12,020 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:35:12,020 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': 0.0, '8560019474512340676': -0.01743446681158278, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.0192215709354668, '2395859185497387824': -0.0192215709354668, '10913316872057236365': -0.016802462182555808, '6587436948557123441': 0.0, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:35:12,020 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09961611371716349), '5975185251685626785': np.float64(0.1019030560820497), '8560019474512340676': np.float64(0.09953110194990616), '12043264814094380418': np.float64(0.09961611371716349), '4296149388320225194': np.float64(0.09961611371716349), '15388649110162717160': np.float64(0.09929110865008849), '2395859185497387824': np.float64(0.09929110865008849), '10913316872057236365': np.float64(0.09961611371716349), '6587436948557123441': np.float64(0.1019030560820497), '17456602372862189643': np.float64(0.09961611371716349)}
2025-08-04 20:35:12,020 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:35:12,021 - INFO -     Selected 2 CIDs with this factor: ['5975185251685626785', '6587436948557123441']
2025-08-04 20:35:12,021 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441']
2025-08-04 20:35:12,025 - INFO -   New temperature for next round: 0.7366
2025-08-04 20:35:12,025 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 4, 1, 7, 7), '6587436948557123441': (7, 4, 1, 7, 7)}
2025-08-04 20:35:12,025 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:35:18,041 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:35:18,041 - INFO - [Round 63, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:35:18,044 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:35:18,045 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:35:18,045 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0832, Aggregated D_Loss=0.8505 from 2 clients (224 examples)
2025-08-04 20:35:18,045 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 2 clients
2025-08-04 20:35:18,045 - INFO - Fit phase aggregation: Summary
2025-08-04 20:35:18,045 - INFO -   fit_clients_total_received: 2
2025-08-04 20:35:18,045 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:35:18,046 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:35:18,046 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:35:18,046 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:35:18,046 - INFO -   aggregated_g_loss: 2.0832
2025-08-04 20:35:18,046 - INFO -   aggregated_d_loss: 0.8505
2025-08-04 20:35:18,046 - INFO -   fit_time_avg_seconds_all_reporting: 0.2316
2025-08-04 20:35:18,047 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:35:24,088 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:35:24,089 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.411808443069458, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8004509582863585, 'avg_anomaly_score': 0.37982908525774556, 'recall': 0.6893203883495146, 'eval_time_seconds': 0.01696300506591797, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.714516129032258, 'precision': 0.9543010752688172}
2025-08-04 20:35:24,089 - INFO - [Round 63, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:35:24,089 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 63.
2025-08-04 20:35:24,089 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 63.
2025-08-04 20:35:24,089 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 63.
2025-08-04 20:35:24,089 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 63.
2025-08-04 20:35:24,090 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 63.
2025-08-04 20:35:24,090 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 63.
2025-08-04 20:35:24,090 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 63.
2025-08-04 20:35:24,090 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 63.
2025-08-04 20:35:24,090 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 63.
2025-08-04 20:35:24,090 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 63.
2025-08-04 20:35:24,094 - INFO - [Round 63, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:35:24,097 - INFO - ==================================================
2025-08-04 20:35:24,097 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:35:24,097 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:35:24,097 - INFO - ==================================================
2025-08-04 20:35:24,098 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:35:24,098 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3838
2025-08-04 20:35:24,098 - INFO -   Global Accuracy (Wgtd Avg): 0.6872
2025-08-04 20:35:24,098 - INFO -   Global F1 Score (Wgtd Avg): 0.7832
2025-08-04 20:35:24,098 - INFO -   Global Precision (Wgtd Avg): 0.9419
2025-08-04 20:35:24,098 - INFO -   Global Recall (Wgtd Avg): 0.6703
2025-08-04 20:35:24,099 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:35:24,099 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0400) - ResourceCost(0.1400) = -0.1800
2025-08-04 20:35:24,099 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 63.
2025-08-04 20:35:24,099 - INFO -   Final Global Reward for action: -0.1800. Client states at selection: {'5975185251685626785': (7, 4, 1, 7, 7), '6587436948557123441': (7, 4, 1, 7, 7)}
2025-08-04 20:35:24,099 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0400, Resource Cost: 0.1400
2025-08-04 20:35:24,099 - INFO -   Next round's global F1 (for next state Q-val): 0.7832
2025-08-04 20:35:24,099 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:35:24,099 - INFO -       State(s): (7, 4, 1, 7, 7) -> NextState(s'): (7, 5, 1, 7, 7)
2025-08-04 20:35:24,099 - INFO -       Q(s) updated from 0.0000 to -0.0018 (TotalReward: -0.1800, NextMaxQ: 0.0000)
2025-08-04 20:35:24,100 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:35:24,100 - INFO -       State(s): (7, 4, 1, 7, 7) -> NextState(s'): (7, 5, 1, 7, 7)
2025-08-04 20:35:24,100 - INFO -       Q(s) updated from -0.0018 to -0.0036 (TotalReward: -0.1800, NextMaxQ: 0.0000)
2025-08-04 20:35:24,101 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:35:24,101 - INFO - 
2025-08-04 20:35:24,101 - INFO - [ROUND 64]
2025-08-04 20:35:24,101 - INFO - [RLAgent choose_actions_softmax] Round 64. Temperature: 0.7366
2025-08-04 20:35:24,101 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:35:24,102 - INFO -   Optimistic init for new high-core state (8, 2, 2, 7, 7) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:35:24,102 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': 0.0, '8560019474512340676': -0.016027936805643968, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': -0.016802462182555808, '6587436948557123441': 0.0, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:35:24,102 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09768419251437907), '5975185251685626785': np.float64(0.09993818100385292), '8560019474512340676': np.float64(0.09778696569262132), '12043264814094380418': np.float64(0.09768419251437907), '4296149388320225194': np.float64(0.09768419251437907), '15388649110162717160': np.float64(0.10695785486388877), '2395859185497387824': np.float64(0.10695785486388877), '10913316872057236365': np.float64(0.09768419251437907), '6587436948557123441': np.float64(0.09993818100385292), '17456602372862189643': np.float64(0.09768419251437907)}
2025-08-04 20:35:24,102 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:35:24,102 - INFO -     Selected 2 CIDs with this factor: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:35:24,103 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824']
2025-08-04 20:35:24,106 - INFO -   New temperature for next round: 0.7329
2025-08-04 20:35:24,106 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824']. Corresponding states: {'15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:35:24,106 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:35:30,121 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:35:30,121 - INFO - [Round 64, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:35:30,125 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:35:30,125 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:35:30,125 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.8651 from 2 clients (1429 examples)
2025-08-04 20:35:30,126 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.62s across 2 clients
2025-08-04 20:35:30,126 - INFO - Fit phase aggregation: Summary
2025-08-04 20:35:30,126 - INFO -   fit_clients_total_received: 2
2025-08-04 20:35:30,126 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:35:30,126 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:35:30,126 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:35:30,126 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:35:30,126 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:35:30,126 - INFO -   aggregated_d_loss: 0.8651
2025-08-04 20:35:30,126 - INFO -   fit_time_avg_seconds_all_reporting: 0.6226
2025-08-04 20:35:30,127 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:35:36,168 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:35:36,168 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.39010292291641235, 'profile_name': 'Low-End IoT', 'f1_score': 0.7916666666666666, 'avg_anomaly_score': 0.3546048538251357, 'recall': 0.672566371681416, 'eval_time_seconds': 0.009182214736938477, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.696969696969697, 'precision': 0.9620253164556962}
2025-08-04 20:35:36,168 - INFO - [Round 64, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:35:36,168 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 64.
2025-08-04 20:35:36,168 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 64.
2025-08-04 20:35:36,168 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 64.
2025-08-04 20:35:36,168 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 64.
2025-08-04 20:35:36,169 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 64.
2025-08-04 20:35:36,169 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 64.
2025-08-04 20:35:36,169 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 64.
2025-08-04 20:35:36,169 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 64.
2025-08-04 20:35:36,169 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 64.
2025-08-04 20:35:36,169 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 64.
2025-08-04 20:35:36,173 - INFO - [Round 64, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:35:36,177 - INFO - ==================================================
2025-08-04 20:35:36,177 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:35:36,177 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:35:36,178 - INFO - ==================================================
2025-08-04 20:35:36,178 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:35:36,178 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3553
2025-08-04 20:35:36,178 - INFO -   Global Accuracy (Wgtd Avg): 0.6884
2025-08-04 20:35:36,178 - INFO -   Global F1 Score (Wgtd Avg): 0.7840
2025-08-04 20:35:36,178 - INFO -   Global Precision (Wgtd Avg): 0.9429
2025-08-04 20:35:36,178 - INFO -   Global Recall (Wgtd Avg): 0.6710
2025-08-04 20:35:36,179 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:35:36,179 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0008) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.2592
2025-08-04 20:35:36,179 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 64.
2025-08-04 20:35:36,179 - INFO -   Final Global Reward for action: -0.2592. Client states at selection: {'15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:35:36,179 - INFO -   Performance Reward: 0.0008, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 20:35:36,179 - INFO -   Next round's global F1 (for next state Q-val): 0.7840
2025-08-04 20:35:36,179 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:35:36,180 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 2, 2, 7, 7)
2025-08-04 20:35:36,180 - INFO -       Q(s) updated from 0.0500 to 0.0474 (TotalReward: -0.2592, NextMaxQ: 0.0500)
2025-08-04 20:35:36,180 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:35:36,180 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 2, 2, 7, 7)
2025-08-04 20:35:36,180 - INFO -       Q(s) updated from 0.0474 to 0.0447 (TotalReward: -0.2592, NextMaxQ: 0.0474)
2025-08-04 20:35:36,181 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:35:36,181 - INFO - 
2025-08-04 20:35:36,181 - INFO - [ROUND 65]
2025-08-04 20:35:36,181 - INFO - [RLAgent choose_actions_softmax] Round 65. Temperature: 0.7329
2025-08-04 20:35:36,182 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:35:36,182 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': -0.0035820000000000005, '8560019474512340676': 0.032993002848680675, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': 0.04471821901387964, '2395859185497387824': 0.04471821901387964, '10913316872057236365': -0.016802462182555808, '6587436948557123441': -0.0035820000000000005, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:35:36,182 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0972587800564657), '5975185251685626785': np.float64(0.09902916165958466), '8560019474512340676': np.float64(0.10409670989060578), '12043264814094380418': np.float64(0.0972587800564657), '4296149388320225194': np.float64(0.0972587800564657), '15388649110162717160': np.float64(0.10577553325394816), '2395859185497387824': np.float64(0.10577553325394816), '10913316872057236365': np.float64(0.0972587800564657), '6587436948557123441': np.float64(0.09902916165958466), '17456602372862189643': np.float64(0.0972587800564657)}
2025-08-04 20:35:36,182 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:35:36,183 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:35:36,183 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:35:36,186 - INFO -   New temperature for next round: 0.7292
2025-08-04 20:35:36,186 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:35:36,187 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:35:42,207 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:35:42,208 - INFO - [Round 65, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:35:42,212 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:35:42,212 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:35:42,212 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8642 from 3 clients (1469 examples)
2025-08-04 20:35:42,212 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.49s across 3 clients
2025-08-04 20:35:42,213 - INFO - Fit phase aggregation: Summary
2025-08-04 20:35:42,213 - INFO -   fit_clients_total_received: 3
2025-08-04 20:35:42,213 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:35:42,213 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:35:42,213 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:35:42,213 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:35:42,213 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:35:42,213 - INFO -   aggregated_d_loss: 0.8642
2025-08-04 20:35:42,213 - INFO -   fit_time_avg_seconds_all_reporting: 0.4927
2025-08-04 20:35:42,214 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:35:48,257 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:35:48,257 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.40942639112472534, 'profile_name': 'Low-End IoT', 'f1_score': 0.7916666666666666, 'avg_anomaly_score': 0.36899787097266223, 'recall': 0.672566371681416, 'eval_time_seconds': 0.011449337005615234, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.696969696969697, 'precision': 0.9620253164556962}
2025-08-04 20:35:48,257 - INFO - [Round 65, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:35:48,258 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 65.
2025-08-04 20:35:48,258 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 65.
2025-08-04 20:35:48,258 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 65.
2025-08-04 20:35:48,258 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 65.
2025-08-04 20:35:48,258 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 65.
2025-08-04 20:35:48,258 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 65.
2025-08-04 20:35:48,259 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 65.
2025-08-04 20:35:48,259 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 65.
2025-08-04 20:35:48,259 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 65.
2025-08-04 20:35:48,259 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 65.
2025-08-04 20:35:48,262 - INFO - [Round 65, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:35:48,266 - INFO - ==================================================
2025-08-04 20:35:48,266 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:35:48,267 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:35:48,267 - INFO - ==================================================
2025-08-04 20:35:48,267 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:35:48,267 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3696
2025-08-04 20:35:48,267 - INFO -   Global Accuracy (Wgtd Avg): 0.6889
2025-08-04 20:35:48,267 - INFO -   Global F1 Score (Wgtd Avg): 0.7844
2025-08-04 20:35:48,267 - INFO -   Global Precision (Wgtd Avg): 0.9433
2025-08-04 20:35:48,267 - INFO -   Global Recall (Wgtd Avg): 0.6713
2025-08-04 20:35:48,267 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:35:48,268 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3597
2025-08-04 20:35:48,268 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 65.
2025-08-04 20:35:48,268 - INFO -   Final Global Reward for action: -0.3597. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:35:48,268 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:35:48,268 - INFO -   Next round's global F1 (for next state Q-val): 0.7844
2025-08-04 20:35:48,268 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:35:48,268 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:35:48,268 - INFO -       Q(s) updated from 0.0330 to 0.0289 (TotalReward: -0.3597, NextMaxQ: -0.0160)
2025-08-04 20:35:48,269 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:35:48,269 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:35:48,269 - INFO -       Q(s) updated from 0.0447 to 0.0405 (TotalReward: -0.3597, NextMaxQ: -0.0192)
2025-08-04 20:35:48,270 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:35:48,270 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:35:48,270 - INFO -       Q(s) updated from 0.0405 to 0.0363 (TotalReward: -0.3597, NextMaxQ: -0.0192)
2025-08-04 20:35:48,270 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:35:48,271 - INFO - 
2025-08-04 20:35:48,271 - INFO - [ROUND 66]
2025-08-04 20:35:48,271 - INFO - [RLAgent choose_actions_softmax] Round 66. Temperature: 0.7292
2025-08-04 20:35:48,271 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:35:48,272 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': -0.010945000000000002, '8560019474512340676': -0.016027936805643968, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.0192215709354668, '2395859185497387824': -0.0192215709354668, '10913316872057236365': -0.016802462182555808, '6587436948557123441': -0.010945000000000002, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:35:48,272 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09989442460165844), '5975185251685626785': np.float64(0.10070006545281963), '8560019474512340676': np.float64(0.10000058263874997), '12043264814094380418': np.float64(0.09989442460165844), '4296149388320225194': np.float64(0.09989442460165844), '15388649110162717160': np.float64(0.0995635817236593), '2395859185497387824': np.float64(0.0995635817236593), '10913316872057236365': np.float64(0.09989442460165844), '6587436948557123441': np.float64(0.10070006545281963), '17456602372862189643': np.float64(0.09989442460165844)}
2025-08-04 20:35:48,272 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:35:48,272 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '6587436948557123441']
2025-08-04 20:35:48,272 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '6587436948557123441']
2025-08-04 20:35:48,275 - INFO -   New temperature for next round: 0.7256
2025-08-04 20:35:48,276 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '6587436948557123441']. Corresponding states: {'5975185251685626785': (7, 3, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '6587436948557123441': (7, 3, 1, 7, 7)}
2025-08-04 20:35:48,276 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:35:54,297 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:35:54,297 - INFO - [Round 66, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:35:54,302 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:35:54,302 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.00
2025-08-04 20:35:54,302 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0821, Aggregated D_Loss=0.8512 from 3 clients (246 examples)
2025-08-04 20:35:54,302 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.20s across 3 clients
2025-08-04 20:35:54,302 - INFO - Fit phase aggregation: Summary
2025-08-04 20:35:54,302 - INFO -   fit_clients_total_received: 3
2025-08-04 20:35:54,303 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:35:54,303 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:35:54,303 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:35:54,303 - INFO -   allocated_cores_avg_per_client: 4.0000
2025-08-04 20:35:54,303 - INFO -   aggregated_g_loss: 2.0821
2025-08-04 20:35:54,303 - INFO -   aggregated_d_loss: 0.8512
2025-08-04 20:35:54,303 - INFO -   fit_time_avg_seconds_all_reporting: 0.2033
2025-08-04 20:35:54,304 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:36:00,346 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:36:00,347 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4158409118652344, 'profile_name': 'Low-End IoT', 'f1_score': 0.7813620071684588, 'avg_anomaly_score': 0.3777325407318447, 'recall': 0.6646341463414634, 'eval_time_seconds': 0.014909505844116211, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6817391304347826, 'precision': 0.9478260869565217}
2025-08-04 20:36:00,347 - INFO - [Round 66, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:36:00,347 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 66.
2025-08-04 20:36:00,347 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 66.
2025-08-04 20:36:00,348 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 66.
2025-08-04 20:36:00,349 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 66.
2025-08-04 20:36:00,353 - INFO - [Round 66, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:36:00,358 - INFO - ==================================================
2025-08-04 20:36:00,358 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:36:00,358 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:36:00,358 - INFO - ==================================================
2025-08-04 20:36:00,358 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:36:00,358 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3809
2025-08-04 20:36:00,359 - INFO -   Global Accuracy (Wgtd Avg): 0.6884
2025-08-04 20:36:00,359 - INFO -   Global F1 Score (Wgtd Avg): 0.7840
2025-08-04 20:36:00,359 - INFO -   Global Precision (Wgtd Avg): 0.9429
2025-08-04 20:36:00,359 - INFO -   Global Recall (Wgtd Avg): 0.6710
2025-08-04 20:36:00,359 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:36:00,359 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0300) - ResourceCost(0.2400) = -0.2704
2025-08-04 20:36:00,359 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 66.
2025-08-04 20:36:00,359 - INFO -   Final Global Reward for action: -0.2704. Client states at selection: {'5975185251685626785': (7, 3, 1, 7, 7), '8560019474512340676': (7, 3, 2, 7, 7), '6587436948557123441': (7, 3, 1, 7, 7)}
2025-08-04 20:36:00,359 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0300, Resource Cost: 0.2400
2025-08-04 20:36:00,360 - INFO -   Next round's global F1 (for next state Q-val): 0.7840
2025-08-04 20:36:00,360 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:36:00,360 - INFO -       State(s): (7, 3, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:36:00,360 - INFO -       Q(s) updated from -0.0109 to -0.0136 (TotalReward: -0.2704, NextMaxQ: -0.0109)
2025-08-04 20:36:00,361 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:36:00,361 - INFO -       State(s): (7, 3, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:36:00,361 - INFO -       Q(s) updated from -0.0160 to -0.0187 (TotalReward: -0.2704, NextMaxQ: -0.0160)
2025-08-04 20:36:00,362 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:36:00,362 - INFO -       State(s): (7, 3, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:36:00,362 - INFO -       Q(s) updated from -0.0136 to -0.0163 (TotalReward: -0.2704, NextMaxQ: -0.0136)
2025-08-04 20:36:00,362 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:36:00,363 - INFO - 
2025-08-04 20:36:00,363 - INFO - [ROUND 67]
2025-08-04 20:36:00,364 - INFO - [RLAgent choose_actions_softmax] Round 67. Temperature: 0.7256
2025-08-04 20:36:00,364 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:36:00,364 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.016802462182555808, '5975185251685626785': -0.016329410604223066, '8560019474512340676': -0.018716405946988934, '12043264814094380418': -0.016802462182555808, '4296149388320225194': -0.016802462182555808, '15388649110162717160': -0.0192215709354668, '2395859185497387824': -0.0192215709354668, '10913316872057236365': -0.016802462182555808, '6587436948557123441': -0.016329410604223066, '17456602372862189643': -0.016802462182555808}
2025-08-04 20:36:00,365 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10007993472702033), '5975185251685626785': np.float64(0.10014520558555455), '8560019474512340676': np.float64(0.09981628596121027), '12043264814094380418': np.float64(0.10007993472702033), '4296149388320225194': np.float64(0.10007993472702033), '15388649110162717160': np.float64(0.09974681461628945), '2395859185497387824': np.float64(0.09974681461628945), '10913316872057236365': np.float64(0.10007993472702033), '6587436948557123441': np.float64(0.10014520558555455), '17456602372862189643': np.float64(0.10007993472702033)}
2025-08-04 20:36:00,365 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:36:00,365 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:36:00,365 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:36:00,366 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '1640189632563049314', '12043264814094380418', '4296149388320225194']
2025-08-04 20:36:00,369 - INFO -   New temperature for next round: 0.7219
2025-08-04 20:36:00,370 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '1640189632563049314', '12043264814094380418', '4296149388320225194']. Corresponding states: {'5975185251685626785': (7, 3, 1, 7, 7), '6587436948557123441': (7, 3, 1, 7, 7), '1640189632563049314': (7, 0, 0, 7, 7), '12043264814094380418': (7, 0, 0, 7, 7), '4296149388320225194': (7, 0, 0, 7, 7)}
2025-08-04 20:36:00,370 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:36:12,397 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:36:12,397 - INFO - [Round 67, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:36:12,404 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:36:12,404 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:36:12,404 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8674 from 5 clients (4966 examples)
2025-08-04 20:36:12,405 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.83s across 5 clients
2025-08-04 20:36:12,405 - INFO - Fit phase aggregation: Summary
2025-08-04 20:36:12,405 - INFO -   fit_clients_total_received: 5
2025-08-04 20:36:12,405 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:36:12,405 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:36:12,405 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:36:12,405 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:36:12,405 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:36:12,405 - INFO -   aggregated_d_loss: 0.8674
2025-08-04 20:36:12,406 - INFO -   fit_time_avg_seconds_all_reporting: 0.8290
2025-08-04 20:36:12,406 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:36:18,450 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:36:18,450 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.4007263779640198, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7839065541855937, 'avg_anomaly_score': 0.36574812112215893, 'recall': 0.6741071428571429, 'eval_time_seconds': 0.03861212730407715, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.6903765690376569, 'precision': 0.9364341085271318}
2025-08-04 20:36:18,450 - INFO - [Round 67, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:36:18,450 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 67.
2025-08-04 20:36:18,451 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 67.
2025-08-04 20:36:18,452 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 67.
2025-08-04 20:36:18,452 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 67.
2025-08-04 20:36:18,455 - INFO - [Round 67, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:36:18,459 - INFO - ==================================================
2025-08-04 20:36:18,459 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:36:18,459 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:36:18,459 - INFO - ==================================================
2025-08-04 20:36:18,459 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:36:18,460 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3652
2025-08-04 20:36:18,460 - INFO -   Global Accuracy (Wgtd Avg): 0.6923
2025-08-04 20:36:18,460 - INFO -   Global F1 Score (Wgtd Avg): 0.7868
2025-08-04 20:36:18,460 - INFO -   Global Precision (Wgtd Avg): 0.9462
2025-08-04 20:36:18,460 - INFO -   Global Recall (Wgtd Avg): 0.6733
2025-08-04 20:36:18,460 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:36:18,460 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0025) - FairPenalty(0.0200) - ResourceCost(0.2400) = -0.2575
2025-08-04 20:36:18,460 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 67.
2025-08-04 20:36:18,461 - INFO -   Final Global Reward for action: -0.2575. Client states at selection: {'5975185251685626785': (7, 3, 1, 7, 7), '6587436948557123441': (7, 3, 1, 7, 7), '1640189632563049314': (7, 0, 0, 7, 7), '12043264814094380418': (7, 0, 0, 7, 7), '4296149388320225194': (7, 0, 0, 7, 7)}
2025-08-04 20:36:18,461 - INFO -   Performance Reward: 0.0025, Fairness Penalty: 0.0200, Resource Cost: 0.2400
2025-08-04 20:36:18,461 - INFO -   Next round's global F1 (for next state Q-val): 0.7868
2025-08-04 20:36:18,461 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:36:18,461 - INFO -       State(s): (7, 3, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:36:18,461 - INFO -       Q(s) updated from -0.0163 to -0.0189 (TotalReward: -0.2575, NextMaxQ: -0.0163)
2025-08-04 20:36:18,462 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:36:18,462 - INFO -       State(s): (7, 3, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:36:18,462 - INFO -       Q(s) updated from -0.0189 to -0.0214 (TotalReward: -0.2575, NextMaxQ: -0.0189)
2025-08-04 20:36:18,462 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:36:18,462 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:36:18,462 - INFO -       Q(s) updated from -0.0168 to -0.0193 (TotalReward: -0.2575, NextMaxQ: -0.0087)
2025-08-04 20:36:18,463 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:36:18,463 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:36:18,463 - INFO -       Q(s) updated from -0.0193 to -0.0217 (TotalReward: -0.2575, NextMaxQ: -0.0087)
2025-08-04 20:36:18,464 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:36:18,464 - INFO -       State(s): (7, 0, 0, 7, 7) -> NextState(s'): (7, 1, 0, 7, 7)
2025-08-04 20:36:18,464 - INFO -       Q(s) updated from -0.0217 to -0.0242 (TotalReward: -0.2575, NextMaxQ: -0.0087)
2025-08-04 20:36:18,465 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:36:18,465 - INFO - 
2025-08-04 20:36:18,465 - INFO - [ROUND 68]
2025-08-04 20:36:18,465 - INFO - [RLAgent choose_actions_softmax] Round 68. Temperature: 0.7219
2025-08-04 20:36:18,466 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:36:18,466 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00868646583401429, '5975185251685626785': -0.021444236208939864, '8560019474512340676': 0.028921949810156247, '12043264814094380418': -0.00868646583401429, '4296149388320225194': -0.00868646583401429, '15388649110162717160': 0.036326293678263434, '2395859185497387824': 0.036326293678263434, '10913316872057236365': -0.024183680835329485, '6587436948557123441': -0.021444236208939864, '17456602372862189643': -0.024183680835329485}
2025-08-04 20:36:18,466 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09896447375649038), '5975185251685626785': np.float64(0.09723098280287347), '8560019474512340676': np.float64(0.10425653169151507), '12043264814094380418': np.float64(0.09896447375649038), '4296149388320225194': np.float64(0.09896447375649038), '15388649110162717160': np.float64(0.10533130781043731), '2395859185497387824': np.float64(0.10533130781043731), '10913316872057236365': np.float64(0.09686273290619607), '6587436948557123441': np.float64(0.09723098280287347), '17456602372862189643': np.float64(0.09686273290619607)}
2025-08-04 20:36:18,466 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:36:18,467 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:36:18,467 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:36:18,471 - INFO -   New temperature for next round: 0.7183
2025-08-04 20:36:18,471 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:36:18,471 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:36:24,492 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:36:24,492 - INFO - [Round 68, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:36:24,497 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:36:24,497 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:36:24,497 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0831, Aggregated D_Loss=0.8611 from 3 clients (1537 examples)
2025-08-04 20:36:24,497 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.50s across 3 clients
2025-08-04 20:36:24,497 - INFO - Fit phase aggregation: Summary
2025-08-04 20:36:24,497 - INFO -   fit_clients_total_received: 3
2025-08-04 20:36:24,497 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:36:24,497 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:36:24,498 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:36:24,498 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:36:24,498 - INFO -   aggregated_g_loss: 2.0831
2025-08-04 20:36:24,498 - INFO -   aggregated_d_loss: 0.8611
2025-08-04 20:36:24,498 - INFO -   fit_time_avg_seconds_all_reporting: 0.5008
2025-08-04 20:36:24,499 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:36:30,540 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:36:30,540 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.4193554401397705, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.7931623931623931, 'avg_anomaly_score': 0.37551345348949766, 'recall': 0.6763848396501457, 'eval_time_seconds': 0.012974262237548828, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.6997518610421837, 'precision': 0.9586776859504132}
2025-08-04 20:36:30,540 - INFO - [Round 68, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:36:30,541 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 68.
2025-08-04 20:36:30,541 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 68.
2025-08-04 20:36:30,541 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 68.
2025-08-04 20:36:30,541 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 68.
2025-08-04 20:36:30,541 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 68.
2025-08-04 20:36:30,542 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 68.
2025-08-04 20:36:30,542 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 68.
2025-08-04 20:36:30,542 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 68.
2025-08-04 20:36:30,542 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 68.
2025-08-04 20:36:30,542 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 68.
2025-08-04 20:36:30,545 - INFO - [Round 68, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:36:30,549 - INFO - ==================================================
2025-08-04 20:36:30,549 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:36:30,549 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:36:30,550 - INFO - ==================================================
2025-08-04 20:36:30,550 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:36:30,550 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3729
2025-08-04 20:36:30,550 - INFO -   Global Accuracy (Wgtd Avg): 0.6918
2025-08-04 20:36:30,550 - INFO -   Global F1 Score (Wgtd Avg): 0.7864
2025-08-04 20:36:30,550 - INFO -   Global Precision (Wgtd Avg): 0.9458
2025-08-04 20:36:30,550 - INFO -   Global Recall (Wgtd Avg): 0.6730
2025-08-04 20:36:30,550 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:36:30,551 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0005) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3605
2025-08-04 20:36:30,551 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 68.
2025-08-04 20:36:30,551 - INFO -   Final Global Reward for action: -0.3605. Client states at selection: {'8560019474512340676': (7, 2, 2, 7, 7), '15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:36:30,551 - INFO -   Performance Reward: -0.0005, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:36:30,551 - INFO -   Next round's global F1 (for next state Q-val): 0.7864
2025-08-04 20:36:30,551 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:36:30,551 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (7, 3, 2, 7, 7)
2025-08-04 20:36:30,551 - INFO -       Q(s) updated from 0.0289 to 0.0249 (TotalReward: -0.3605, NextMaxQ: -0.0187)
2025-08-04 20:36:30,552 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:36:30,552 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:36:30,552 - INFO -       Q(s) updated from 0.0363 to 0.0322 (TotalReward: -0.3605, NextMaxQ: -0.0192)
2025-08-04 20:36:30,553 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:36:30,553 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 3, 2, 7, 7)
2025-08-04 20:36:30,553 - INFO -       Q(s) updated from 0.0322 to 0.0281 (TotalReward: -0.3605, NextMaxQ: -0.0192)
2025-08-04 20:36:30,554 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:36:30,554 - INFO - 
2025-08-04 20:36:30,554 - INFO - [ROUND 69]
2025-08-04 20:36:30,555 - INFO - [RLAgent choose_actions_softmax] Round 69. Temperature: 0.7183
2025-08-04 20:36:30,555 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:36:30,555 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00868646583401429, '5975185251685626785': -0.004971874229592335, '8560019474512340676': -0.018716405946988934, '12043264814094380418': -0.00868646583401429, '4296149388320225194': -0.00868646583401429, '15388649110162717160': -0.0192215709354668, '2395859185497387824': -0.0192215709354668, '10913316872057236365': -0.024183680835329485, '6587436948557123441': -0.004971874229592335, '17456602372862189643': -0.024183680835329485}
2025-08-04 20:36:30,555 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10075872039245054), '5975185251685626785': np.float64(0.1012811083627354), '8560019474512340676': np.float64(0.09936161689186113), '12043264814094380418': np.float64(0.10075872039245054), '4296149388320225194': np.float64(0.10075872039245054), '15388649110162717160': np.float64(0.09929176546855516), '2395859185497387824': np.float64(0.09929176546855516), '10913316872057236365': np.float64(0.09860823713410312), '6587436948557123441': np.float64(0.1012811083627354), '17456602372862189643': np.float64(0.09860823713410312)}
2025-08-04 20:36:30,555 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:36:30,556 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '6587436948557123441']
2025-08-04 20:36:30,556 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '6587436948557123441']
2025-08-04 20:36:30,559 - INFO -   New temperature for next round: 0.7147
2025-08-04 20:36:30,559 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '6587436948557123441']. Corresponding states: {'1640189632563049314': (7, 1, 0, 7, 7), '5975185251685626785': (7, 2, 1, 7, 7), '12043264814094380418': (7, 1, 0, 7, 7), '4296149388320225194': (7, 1, 0, 7, 7), '6587436948557123441': (7, 2, 1, 7, 7)}
2025-08-04 20:36:30,560 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:36:42,580 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:36:42,580 - INFO - [Round 69, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:36:42,587 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:36:42,587 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:36:42,588 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0832, Aggregated D_Loss=0.8625 from 5 clients (5128 examples)
2025-08-04 20:36:42,588 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.85s across 5 clients
2025-08-04 20:36:42,588 - INFO - Fit phase aggregation: Summary
2025-08-04 20:36:42,588 - INFO -   fit_clients_total_received: 5
2025-08-04 20:36:42,588 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:36:42,588 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:36:42,588 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:36:42,588 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:36:42,588 - INFO -   aggregated_g_loss: 2.0832
2025-08-04 20:36:42,589 - INFO -   aggregated_d_loss: 0.8625
2025-08-04 20:36:42,589 - INFO -   fit_time_avg_seconds_all_reporting: 0.8483
2025-08-04 20:36:42,589 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:36:48,634 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:36:48,634 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4358099579811096, 'profile_name': 'Low-End IoT', 'f1_score': 0.7861409796893668, 'avg_anomaly_score': 0.3886409880803979, 'recall': 0.6686991869918699, 'eval_time_seconds': 0.013853073120117188, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.688695652173913, 'precision': 0.9536231884057971}
2025-08-04 20:36:48,634 - INFO - [Round 69, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:36:48,634 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 69.
2025-08-04 20:36:48,635 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 69.
2025-08-04 20:36:48,635 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 69.
2025-08-04 20:36:48,635 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 69.
2025-08-04 20:36:48,635 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 69.
2025-08-04 20:36:48,635 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 69.
2025-08-04 20:36:48,635 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 69.
2025-08-04 20:36:48,636 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 69.
2025-08-04 20:36:48,636 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 69.
2025-08-04 20:36:48,636 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 69.
2025-08-04 20:36:48,639 - INFO - [Round 69, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:36:48,643 - INFO - ==================================================
2025-08-04 20:36:48,643 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:36:48,643 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:36:48,643 - INFO - ==================================================
2025-08-04 20:36:48,643 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:36:48,643 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3914
2025-08-04 20:36:48,644 - INFO -   Global Accuracy (Wgtd Avg): 0.6944
2025-08-04 20:36:48,644 - INFO -   Global F1 Score (Wgtd Avg): 0.7882
2025-08-04 20:36:48,644 - INFO -   Global Precision (Wgtd Avg): 0.9480
2025-08-04 20:36:48,644 - INFO -   Global Recall (Wgtd Avg): 0.6745
2025-08-04 20:36:48,644 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:36:48,644 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0824) - FairPenalty(0.0000) - ResourceCost(0.2400) = -0.1576
2025-08-04 20:36:48,644 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 69.
2025-08-04 20:36:48,644 - INFO -   Final Global Reward for action: -0.1576. Client states at selection: {'1640189632563049314': (7, 1, 0, 7, 7), '5975185251685626785': (7, 2, 1, 7, 7), '12043264814094380418': (7, 1, 0, 7, 7), '4296149388320225194': (7, 1, 0, 7, 7), '6587436948557123441': (7, 2, 1, 7, 7)}
2025-08-04 20:36:48,644 - INFO -   Performance Reward: 0.0824, Fairness Penalty: 0.0000, Resource Cost: 0.2400
2025-08-04 20:36:48,645 - INFO -   Next round's global F1 (for next state Q-val): 0.7882
2025-08-04 20:36:48,645 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:36:48,645 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:36:48,645 - INFO -       Q(s) updated from -0.0087 to -0.0102 (TotalReward: -0.1576, NextMaxQ: 0.0000)
2025-08-04 20:36:48,645 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:36:48,646 - INFO -       State(s): (7, 2, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:36:48,646 - INFO -       Q(s) updated from -0.0050 to -0.0067 (TotalReward: -0.1576, NextMaxQ: -0.0214)
2025-08-04 20:36:48,646 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:36:48,646 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:36:48,646 - INFO -       Q(s) updated from -0.0102 to -0.0116 (TotalReward: -0.1576, NextMaxQ: 0.0000)
2025-08-04 20:36:48,647 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:36:48,647 - INFO -       State(s): (7, 1, 0, 7, 7) -> NextState(s'): (7, 2, 0, 7, 7)
2025-08-04 20:36:48,647 - INFO -       Q(s) updated from -0.0116 to -0.0131 (TotalReward: -0.1576, NextMaxQ: 0.0000)
2025-08-04 20:36:48,647 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:36:48,648 - INFO -       State(s): (7, 2, 1, 7, 7) -> NextState(s'): (7, 3, 1, 7, 7)
2025-08-04 20:36:48,648 - INFO -       Q(s) updated from -0.0067 to -0.0084 (TotalReward: -0.1576, NextMaxQ: -0.0214)
2025-08-04 20:36:48,648 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:36:48,648 - INFO - 
2025-08-04 20:36:48,649 - INFO - [ROUND 70]
2025-08-04 20:36:48,649 - INFO - [RLAgent choose_actions_softmax] Round 70. Temperature: 0.7147
2025-08-04 20:36:48,649 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:36:48,649 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.021444236208939864, '8560019474512340676': -0.018716405946988934, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.024859765792778297, '2395859185497387824': 0.028086153535762343, '10913316872057236365': -0.024183680835329485, '6587436948557123441': -0.021444236208939864, '17456602372862189643': -0.024183680835329485}
2025-08-04 20:36:48,649 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1007661134187576), '5975185251685626785': np.float64(0.09778773888427841), '8560019474512340676': np.float64(0.098161663232496), '12043264814094380418': np.float64(0.1007661134187576), '4296149388320225194': np.float64(0.1007661134187576), '15388649110162717160': np.float64(0.10433258814549512), '2395859185497387824': np.float64(0.10480461870050195), '10913316872057236365': np.float64(0.09741365594833867), '6587436948557123441': np.float64(0.09778773888427841), '17456602372862189643': np.float64(0.09741365594833867)}
2025-08-04 20:36:48,650 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:36:48,650 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824']
2025-08-04 20:36:48,650 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824']
2025-08-04 20:36:48,653 - INFO -   New temperature for next round: 0.7112
2025-08-04 20:36:48,654 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824']. Corresponding states: {'1640189632563049314': (7, 2, 0, 7, 7), '12043264814094380418': (7, 2, 0, 7, 7), '4296149388320225194': (7, 2, 0, 7, 7), '15388649110162717160': (7, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:36:48,658 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:36:57,691 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:36:57,692 - INFO - [Round 70, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:36:57,699 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:36:57,699 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.60
2025-08-04 20:36:57,699 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0831, Aggregated D_Loss=0.8616 from 5 clients (6521 examples)
2025-08-04 20:36:57,699 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.08s across 5 clients
2025-08-04 20:36:57,699 - INFO - Fit phase aggregation: Summary
2025-08-04 20:36:57,699 - INFO -   fit_clients_total_received: 5
2025-08-04 20:36:57,700 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:36:57,700 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:36:57,700 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:36:57,700 - INFO -   allocated_cores_avg_per_client: 3.6000
2025-08-04 20:36:57,700 - INFO -   aggregated_g_loss: 2.0831
2025-08-04 20:36:57,700 - INFO -   aggregated_d_loss: 0.8616
2025-08-04 20:36:57,700 - INFO -   fit_time_avg_seconds_all_reporting: 1.0844
2025-08-04 20:36:57,701 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:37:03,744 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:37:03,744 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.43064295053482055, 'profile_name': 'Low-End IoT', 'f1_score': 0.7885304659498208, 'avg_anomaly_score': 0.37681405305862425, 'recall': 0.6707317073170732, 'eval_time_seconds': 0.013324975967407227, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.6921739130434783, 'precision': 0.9565217391304348}
2025-08-04 20:37:03,744 - INFO - [Round 70, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:37:03,744 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 70.
2025-08-04 20:37:03,745 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 70.
2025-08-04 20:37:03,745 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 70.
2025-08-04 20:37:03,745 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 70.
2025-08-04 20:37:03,745 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 70.
2025-08-04 20:37:03,745 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 70.
2025-08-04 20:37:03,745 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 70.
2025-08-04 20:37:03,746 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 70.
2025-08-04 20:37:03,746 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 70.
2025-08-04 20:37:03,746 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 70.
2025-08-04 20:37:03,749 - INFO - [Round 70, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:37:03,753 - INFO - ==================================================
2025-08-04 20:37:03,753 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:37:03,753 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:37:03,753 - INFO - ==================================================
2025-08-04 20:37:03,753 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:37:03,753 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3797
2025-08-04 20:37:03,753 - INFO -   Global Accuracy (Wgtd Avg): 0.7029
2025-08-04 20:37:03,754 - INFO -   Global F1 Score (Wgtd Avg): 0.7941
2025-08-04 20:37:03,754 - INFO -   Global Precision (Wgtd Avg): 0.9550
2025-08-04 20:37:03,754 - INFO -   Global Recall (Wgtd Avg): 0.6796
2025-08-04 20:37:03,754 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:37:03,754 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0925) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.2675
2025-08-04 20:37:03,754 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 70.
2025-08-04 20:37:03,754 - INFO -   Final Global Reward for action: -0.2675. Client states at selection: {'1640189632563049314': (7, 2, 0, 7, 7), '12043264814094380418': (7, 2, 0, 7, 7), '4296149388320225194': (7, 2, 0, 7, 7), '15388649110162717160': (7, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7)}
2025-08-04 20:37:03,754 - INFO -   Performance Reward: 0.0925, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:37:03,755 - INFO -   Next round's global F1 (for next state Q-val): 0.7941
2025-08-04 20:37:03,755 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:37:03,755 - INFO -       State(s): (7, 2, 0, 7, 7) -> NextState(s'): (7, 3, 0, 7, 7)
2025-08-04 20:37:03,755 - INFO -       Q(s) updated from 0.0000 to -0.0027 (TotalReward: -0.2675, NextMaxQ: 0.0000)
2025-08-04 20:37:03,755 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:37:03,755 - INFO -       State(s): (7, 2, 0, 7, 7) -> NextState(s'): (7, 3, 0, 7, 7)
2025-08-04 20:37:03,755 - INFO -       Q(s) updated from -0.0027 to -0.0053 (TotalReward: -0.2675, NextMaxQ: 0.0000)
2025-08-04 20:37:03,756 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:37:03,756 - INFO -       State(s): (7, 2, 0, 7, 7) -> NextState(s'): (7, 3, 0, 7, 7)
2025-08-04 20:37:03,756 - INFO -       Q(s) updated from -0.0053 to -0.0079 (TotalReward: -0.2675, NextMaxQ: 0.0000)
2025-08-04 20:37:03,757 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:37:03,757 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (8, 2, 2, 7, 7)
2025-08-04 20:37:03,757 - INFO -       Q(s) updated from 0.0249 to 0.0222 (TotalReward: -0.2675, NextMaxQ: 0.0281)
2025-08-04 20:37:03,757 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:37:03,758 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 2, 2, 7, 7)
2025-08-04 20:37:03,758 - INFO -       Q(s) updated from 0.0281 to 0.0254 (TotalReward: -0.2675, NextMaxQ: 0.0281)
2025-08-04 20:37:03,758 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:37:03,759 - INFO - 
2025-08-04 20:37:03,759 - INFO - [ROUND 71]
2025-08-04 20:37:03,759 - INFO - [RLAgent choose_actions_softmax] Round 71. Temperature: 0.7112
2025-08-04 20:37:03,759 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:37:03,760 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.021444236208939864, '8560019474512340676': 0.022188794629837024, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.02538291849539123, '2395859185497387824': 0.02538291849539123, '10913316872057236365': -0.024183680835329485, '6587436948557123441': -0.021444236208939864, '17456602372862189643': -0.024183680835329485}
2025-08-04 20:37:03,760 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1002195761522386), '5975185251685626785': np.float64(0.09724269356982493), '8560019474512340676': np.float64(0.10339578404751905), '12043264814094380418': np.float64(0.1002195761522386), '4296149388320225194': np.float64(0.1002195761522386), '15388649110162717160': np.float64(0.1038612202313732), '2395859185497387824': np.float64(0.1038612202313732), '10913316872057236365': np.float64(0.09686882994668447), '6587436948557123441': np.float64(0.09724269356982493), '17456602372862189643': np.float64(0.09686882994668447)}
2025-08-04 20:37:03,760 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:37:03,760 - INFO -     Selected 6 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:03,760 - INFO -   Selection by factor 1.00 yielded 6 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:37:03,761 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824', '8560019474512340676', '1640189632563049314', '12043264814094380418']
2025-08-04 20:37:03,764 - INFO -   New temperature for next round: 0.7076
2025-08-04 20:37:03,764 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824', '8560019474512340676', '1640189632563049314', '12043264814094380418']. Corresponding states: {'15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7), '8560019474512340676': (7, 2, 2, 7, 7), '1640189632563049314': (7, 3, 0, 7, 7), '12043264814094380418': (7, 3, 0, 7, 7)}
2025-08-04 20:37:03,764 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:37:12,793 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:37:12,793 - INFO - [Round 71, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:37:12,800 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:37:12,800 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.20
2025-08-04 20:37:12,800 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0832, Aggregated D_Loss=0.8608 from 5 clients (6475 examples)
2025-08-04 20:37:12,800 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.06s across 5 clients
2025-08-04 20:37:12,801 - INFO - Fit phase aggregation: Summary
2025-08-04 20:37:12,801 - INFO -   fit_clients_total_received: 5
2025-08-04 20:37:12,801 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:37:12,801 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:37:12,801 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:37:12,801 - INFO -   allocated_cores_avg_per_client: 4.2000
2025-08-04 20:37:12,801 - INFO -   aggregated_g_loss: 2.0832
2025-08-04 20:37:12,801 - INFO -   aggregated_d_loss: 0.8608
2025-08-04 20:37:12,802 - INFO -   fit_time_avg_seconds_all_reporting: 1.0624
2025-08-04 20:37:12,802 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:37:18,845 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:37:18,846 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.4404623627662659, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.7996336157545225, 'avg_anomaly_score': 0.3836142744071599, 'recall': 0.6830985915492958, 'eval_time_seconds': 0.04351472854614258, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7100728959575878, 'precision': 0.9641082274986196}
2025-08-04 20:37:18,846 - INFO - [Round 71, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:37:18,846 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 71.
2025-08-04 20:37:18,846 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 71.
2025-08-04 20:37:18,847 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 71.
2025-08-04 20:37:18,851 - INFO - [Round 71, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:37:18,854 - INFO - ==================================================
2025-08-04 20:37:18,854 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:37:18,855 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:37:18,855 - INFO - ==================================================
2025-08-04 20:37:18,855 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:37:18,855 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3842
2025-08-04 20:37:18,855 - INFO -   Global Accuracy (Wgtd Avg): 0.7118
2025-08-04 20:37:18,855 - INFO -   Global F1 Score (Wgtd Avg): 0.8002
2025-08-04 20:37:18,855 - INFO -   Global Precision (Wgtd Avg): 0.9624
2025-08-04 20:37:18,855 - INFO -   Global Recall (Wgtd Avg): 0.6849
2025-08-04 20:37:18,856 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:37:18,856 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0930) - FairPenalty(0.0200) - ResourceCost(0.4200) = -0.3470
2025-08-04 20:37:18,856 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 71.
2025-08-04 20:37:18,856 - INFO -   Final Global Reward for action: -0.3470. Client states at selection: {'15388649110162717160': (8, 2, 2, 7, 7), '2395859185497387824': (8, 2, 2, 7, 7), '8560019474512340676': (7, 2, 2, 7, 7), '1640189632563049314': (7, 3, 0, 7, 7), '12043264814094380418': (7, 3, 0, 7, 7)}
2025-08-04 20:37:18,856 - INFO -   Performance Reward: 0.0930, Fairness Penalty: 0.0200, Resource Cost: 0.4200
2025-08-04 20:37:18,856 - INFO -   Next round's global F1 (for next state Q-val): 0.8002
2025-08-04 20:37:18,856 - INFO -   Optimistic init for new high-core state (8, 3, 2, 8, 8) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:37:18,856 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:37:18,856 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:37:18,857 - INFO -       Q(s) updated from 0.0254 to 0.0221 (TotalReward: -0.3470, NextMaxQ: 0.0500)
2025-08-04 20:37:18,857 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:37:18,857 - INFO -       State(s): (8, 2, 2, 7, 7) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:37:18,857 - INFO -       Q(s) updated from 0.0221 to 0.0189 (TotalReward: -0.3470, NextMaxQ: 0.0500)
2025-08-04 20:37:18,858 - INFO -   Optimistic init for new high-core state (8, 2, 2, 8, 8) (CID 8560019474512340676): Q set to 0.05
2025-08-04 20:37:18,858 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:37:18,858 - INFO -       State(s): (7, 2, 2, 7, 7) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:37:18,858 - INFO -       Q(s) updated from 0.0222 to 0.0189 (TotalReward: -0.3470, NextMaxQ: 0.0500)
2025-08-04 20:37:18,859 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:37:18,859 - INFO -       State(s): (7, 3, 0, 7, 7) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:37:18,859 - INFO -       Q(s) updated from 0.0000 to -0.0035 (TotalReward: -0.3470, NextMaxQ: 0.0000)
2025-08-04 20:37:18,859 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:37:18,859 - INFO -       State(s): (7, 3, 0, 7, 7) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:37:18,859 - INFO -       Q(s) updated from -0.0035 to -0.0069 (TotalReward: -0.3470, NextMaxQ: 0.0000)
2025-08-04 20:37:18,860 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:37:18,860 - INFO - 
2025-08-04 20:37:18,861 - INFO - [ROUND 72]
2025-08-04 20:37:18,861 - INFO - [RLAgent choose_actions_softmax] Round 72. Temperature: 0.7076
2025-08-04 20:37:18,861 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:37:18,861 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.05, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:37:18,862 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09785070457840243), '5975185251685626785': np.float64(0.09785070457840243), '8560019474512340676': np.float64(0.10501502265039428), '12043264814094380418': np.float64(0.09785070457840243), '4296149388320225194': np.float64(0.09785070457840243), '15388649110162717160': np.float64(0.10501502265039428), '2395859185497387824': np.float64(0.10501502265039428), '10913316872057236365': np.float64(0.09785070457840243), '6587436948557123441': np.float64(0.09785070457840243), '17456602372862189643': np.float64(0.09785070457840243)}
2025-08-04 20:37:18,862 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:37:18,862 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:18,862 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:18,866 - INFO -   New temperature for next round: 0.7041
2025-08-04 20:37:18,866 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8)}
2025-08-04 20:37:18,866 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:37:24,887 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:37:24,888 - INFO - [Round 72, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:37:24,892 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:37:24,892 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:37:24,892 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0832, Aggregated D_Loss=0.8553 from 3 clients (1636 examples)
2025-08-04 20:37:24,892 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.53s across 3 clients
2025-08-04 20:37:24,892 - INFO - Fit phase aggregation: Summary
2025-08-04 20:37:24,893 - INFO -   fit_clients_total_received: 3
2025-08-04 20:37:24,893 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:37:24,893 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:37:24,893 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:37:24,893 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:37:24,893 - INFO -   aggregated_g_loss: 2.0832
2025-08-04 20:37:24,893 - INFO -   aggregated_d_loss: 0.8553
2025-08-04 20:37:24,893 - INFO -   fit_time_avg_seconds_all_reporting: 0.5315
2025-08-04 20:37:24,894 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:37:30,940 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:37:30,941 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.41446093320846555, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8117249154453213, 'avg_anomaly_score': 0.3563857099702281, 'recall': 0.6990291262135923, 'eval_time_seconds': 0.016977548599243164, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7306451612903225, 'precision': 0.967741935483871}
2025-08-04 20:37:30,941 - INFO - [Round 72, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:37:30,941 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 72.
2025-08-04 20:37:30,941 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 72.
2025-08-04 20:37:30,941 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 72.
2025-08-04 20:37:30,941 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 72.
2025-08-04 20:37:30,941 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 72.
2025-08-04 20:37:30,941 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 72.
2025-08-04 20:37:30,942 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 72.
2025-08-04 20:37:30,942 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 72.
2025-08-04 20:37:30,942 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 72.
2025-08-04 20:37:30,942 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 72.
2025-08-04 20:37:30,945 - INFO - [Round 72, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:37:30,949 - INFO - ==================================================
2025-08-04 20:37:30,949 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:37:30,949 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:37:30,950 - INFO - ==================================================
2025-08-04 20:37:30,950 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:37:30,950 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3600
2025-08-04 20:37:30,950 - INFO -   Global Accuracy (Wgtd Avg): 0.7140
2025-08-04 20:37:30,950 - INFO -   Global F1 Score (Wgtd Avg): 0.8018
2025-08-04 20:37:30,950 - INFO -   Global Precision (Wgtd Avg): 0.9643
2025-08-04 20:37:30,950 - INFO -   Global Recall (Wgtd Avg): 0.6862
2025-08-04 20:37:30,950 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:37:30,951 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0832) - FairPenalty(0.0200) - ResourceCost(0.3600) = -0.2968
2025-08-04 20:37:30,951 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 72.
2025-08-04 20:37:30,951 - INFO -   Final Global Reward for action: -0.2968. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8)}
2025-08-04 20:37:30,951 - INFO -   Performance Reward: 0.0832, Fairness Penalty: 0.0200, Resource Cost: 0.3600
2025-08-04 20:37:30,951 - INFO -   Next round's global F1 (for next state Q-val): 0.8018
2025-08-04 20:37:30,951 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:37:30,951 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:37:30,951 - INFO -       Q(s) updated from 0.0500 to 0.0470 (TotalReward: -0.2968, NextMaxQ: 0.0500)
2025-08-04 20:37:30,952 - INFO -   Optimistic init for new high-core state (8, 4, 2, 8, 8) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:37:30,952 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:37:30,952 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:37:30,952 - INFO -       Q(s) updated from 0.0500 to 0.0470 (TotalReward: -0.2968, NextMaxQ: 0.0500)
2025-08-04 20:37:30,953 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:37:30,953 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:37:30,953 - INFO -       Q(s) updated from 0.0470 to 0.0440 (TotalReward: -0.2968, NextMaxQ: 0.0500)
2025-08-04 20:37:30,953 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:37:30,954 - INFO - 
2025-08-04 20:37:30,954 - INFO - [ROUND 73]
2025-08-04 20:37:30,954 - INFO - [RLAgent choose_actions_softmax] Round 73. Temperature: 0.7041
2025-08-04 20:37:30,954 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:37:30,955 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.043995040397260175, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:37:30,955 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0979271158387567), '5975185251685626785': np.float64(0.0979271158387567), '8560019474512340676': np.float64(0.10424148369946598), '12043264814094380418': np.float64(0.0979271158387567), '4296149388320225194': np.float64(0.0979271158387567), '15388649110162717160': np.float64(0.10513435271461857), '2395859185497387824': np.float64(0.10513435271461857), '10913316872057236365': np.float64(0.0979271158387567), '6587436948557123441': np.float64(0.0979271158387567), '17456602372862189643': np.float64(0.0979271158387567)}
2025-08-04 20:37:30,956 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:37:30,956 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:30,956 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:30,960 - INFO -   New temperature for next round: 0.7005
2025-08-04 20:37:30,960 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:37:30,960 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:37:39,980 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:37:39,980 - INFO - [Round 73, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:37:39,985 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:37:39,985 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:37:39,985 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8543 from 3 clients (1661 examples)
2025-08-04 20:37:39,985 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.52s across 3 clients
2025-08-04 20:37:39,985 - INFO - Fit phase aggregation: Summary
2025-08-04 20:37:39,985 - INFO -   fit_clients_total_received: 3
2025-08-04 20:37:39,985 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:37:39,986 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:37:39,986 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:37:39,986 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:37:39,986 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:37:39,986 - INFO -   aggregated_d_loss: 0.8543
2025-08-04 20:37:39,986 - INFO -   fit_time_avg_seconds_all_reporting: 0.5178
2025-08-04 20:37:39,987 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:37:46,030 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:37:46,030 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.43635194301605223, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8083352415846119, 'avg_anomaly_score': 0.3748965456913922, 'recall': 0.6905320813771518, 'eval_time_seconds': 0.04568958282470703, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7226640159045725, 'precision': 0.9745996686913307}
2025-08-04 20:37:46,030 - INFO - [Round 73, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 73.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 73.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 73.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 73.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 73.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 73.
2025-08-04 20:37:46,031 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 73.
2025-08-04 20:37:46,032 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 73.
2025-08-04 20:37:46,032 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 73.
2025-08-04 20:37:46,032 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 73.
2025-08-04 20:37:46,036 - INFO - [Round 73, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:37:46,040 - INFO - ==================================================
2025-08-04 20:37:46,040 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:37:46,040 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:37:46,040 - INFO - ==================================================
2025-08-04 20:37:46,041 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:37:46,041 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3754
2025-08-04 20:37:46,041 - INFO -   Global Accuracy (Wgtd Avg): 0.7209
2025-08-04 20:37:46,041 - INFO -   Global F1 Score (Wgtd Avg): 0.8066
2025-08-04 20:37:46,041 - INFO -   Global Precision (Wgtd Avg): 0.9700
2025-08-04 20:37:46,041 - INFO -   Global Recall (Wgtd Avg): 0.6903
2025-08-04 20:37:46,041 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:37:46,041 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0901) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.3199
2025-08-04 20:37:46,042 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 73.
2025-08-04 20:37:46,042 - INFO -   Final Global Reward for action: -0.3199. Client states at selection: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:37:46,042 - INFO -   Performance Reward: 0.0901, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:37:46,042 - INFO -   Next round's global F1 (for next state Q-val): 0.8066
2025-08-04 20:37:46,042 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:37:46,042 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:37:46,042 - INFO -       Q(s) updated from 0.0440 to 0.0408 (TotalReward: -0.3199, NextMaxQ: 0.0440)
2025-08-04 20:37:46,043 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:37:46,043 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:37:46,043 - INFO -       Q(s) updated from 0.0500 to 0.0468 (TotalReward: -0.3199, NextMaxQ: 0.0500)
2025-08-04 20:37:46,044 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:37:46,044 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:37:46,044 - INFO -       Q(s) updated from 0.0468 to 0.0435 (TotalReward: -0.3199, NextMaxQ: 0.0468)
2025-08-04 20:37:46,044 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:37:46,045 - INFO - 
2025-08-04 20:37:46,045 - INFO - [ROUND 74]
2025-08-04 20:37:46,045 - INFO - [RLAgent choose_actions_softmax] Round 74. Temperature: 0.7005
2025-08-04 20:37:46,045 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:37:46,046 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04075207425378681, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.043505306764950874, '2395859185497387824': 0.043505306764950874, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:37:46,046 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09815432864880684), '5975185251685626785': np.float64(0.09815432864880684), '8560019474512340676': np.float64(0.10403345561251273), '12043264814094380418': np.float64(0.09815432864880684), '4296149388320225194': np.float64(0.09815432864880684), '15388649110162717160': np.float64(0.10444312192291974), '2395859185497387824': np.float64(0.10444312192291974), '10913316872057236365': np.float64(0.09815432864880684), '6587436948557123441': np.float64(0.09815432864880684), '17456602372862189643': np.float64(0.09815432864880684)}
2025-08-04 20:37:46,046 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:37:46,046 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:46,046 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:46,050 - INFO -   New temperature for next round: 0.6970
2025-08-04 20:37:46,051 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:37:46,051 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:37:52,072 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:37:52,073 - INFO - [Round 74, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:37:52,077 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:37:52,077 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:37:52,077 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0834, Aggregated D_Loss=0.8537 from 3 clients (1677 examples)
2025-08-04 20:37:52,078 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.53s across 3 clients
2025-08-04 20:37:52,078 - INFO - Fit phase aggregation: Summary
2025-08-04 20:37:52,078 - INFO -   fit_clients_total_received: 3
2025-08-04 20:37:52,078 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:37:52,078 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:37:52,078 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:37:52,078 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:37:52,078 - INFO -   aggregated_g_loss: 2.0834
2025-08-04 20:37:52,079 - INFO -   aggregated_d_loss: 0.8537
2025-08-04 20:37:52,079 - INFO -   fit_time_avg_seconds_all_reporting: 0.5287
2025-08-04 20:37:52,079 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:37:58,121 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:37:58,121 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4402366280555725, 'profile_name': 'Low-End IoT', 'f1_score': 0.8100358422939068, 'avg_anomaly_score': 0.3772939940120863, 'recall': 0.6890243902439024, 'eval_time_seconds': 0.01482534408569336, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7234782608695652, 'precision': 0.9826086956521739}
2025-08-04 20:37:58,121 - INFO - [Round 74, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:37:58,121 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 74.
2025-08-04 20:37:58,122 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 74.
2025-08-04 20:37:58,122 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 74.
2025-08-04 20:37:58,122 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 74.
2025-08-04 20:37:58,122 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 74.
2025-08-04 20:37:58,122 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 74.
2025-08-04 20:37:58,123 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 74.
2025-08-04 20:37:58,123 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 74.
2025-08-04 20:37:58,123 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 74.
2025-08-04 20:37:58,123 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 74.
2025-08-04 20:37:58,127 - INFO - [Round 74, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:37:58,130 - INFO - ==================================================
2025-08-04 20:37:58,130 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:37:58,131 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:37:58,131 - INFO - ==================================================
2025-08-04 20:37:58,131 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:37:58,131 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3809
2025-08-04 20:37:58,131 - INFO -   Global Accuracy (Wgtd Avg): 0.7221
2025-08-04 20:37:58,131 - INFO -   Global F1 Score (Wgtd Avg): 0.8074
2025-08-04 20:37:58,131 - INFO -   Global Precision (Wgtd Avg): 0.9710
2025-08-04 20:37:58,131 - INFO -   Global Recall (Wgtd Avg): 0.6910
2025-08-04 20:37:58,132 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:37:58,132 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0818) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.3282
2025-08-04 20:37:58,132 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 74.
2025-08-04 20:37:58,132 - INFO -   Final Global Reward for action: -0.3282. Client states at selection: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:37:58,132 - INFO -   Performance Reward: 0.0818, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:37:58,132 - INFO -   Next round's global F1 (for next state Q-val): 0.8074
2025-08-04 20:37:58,132 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:37:58,133 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:37:58,133 - INFO -       Q(s) updated from 0.0408 to 0.0375 (TotalReward: -0.3282, NextMaxQ: 0.0435)
2025-08-04 20:37:58,133 - INFO -   Optimistic init for new high-core state (8, 5, 2, 8, 8) (CID 15388649110162717160): Q set to 0.05
2025-08-04 20:37:58,133 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:37:58,134 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:37:58,134 - INFO -       Q(s) updated from 0.0435 to 0.0402 (TotalReward: -0.3282, NextMaxQ: 0.0500)
2025-08-04 20:37:58,134 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:37:58,134 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:37:58,134 - INFO -       Q(s) updated from 0.0402 to 0.0370 (TotalReward: -0.3282, NextMaxQ: 0.0500)
2025-08-04 20:37:58,135 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:37:58,136 - INFO - 
2025-08-04 20:37:58,136 - INFO - [ROUND 75]
2025-08-04 20:37:58,136 - INFO - [RLAgent choose_actions_softmax] Round 75. Temperature: 0.6970
2025-08-04 20:37:58,136 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:37:58,137 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.03700392335071187, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.05, '2395859185497387824': 0.05, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:37:58,137 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09800795056533151), '5975185251685626785': np.float64(0.09800795056533151), '8560019474512340676': np.float64(0.10335144374554878), '12043264814094380418': np.float64(0.09800795056533151), '4296149388320225194': np.float64(0.09800795056533151), '15388649110162717160': np.float64(0.10529645114856533), '2395859185497387824': np.float64(0.10529645114856533), '10913316872057236365': np.float64(0.09800795056533151), '6587436948557123441': np.float64(0.09800795056533151), '17456602372862189643': np.float64(0.09800795056533151)}
2025-08-04 20:37:58,137 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:37:58,137 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:58,137 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:37:58,141 - INFO -   New temperature for next round: 0.6936
2025-08-04 20:37:58,141 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:37:58,141 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:38:04,162 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:38:04,162 - INFO - [Round 75, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:38:04,167 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:38:04,167 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:38:04,167 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0832, Aggregated D_Loss=0.8518 from 3 clients (1698 examples)
2025-08-04 20:38:04,167 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.56s across 3 clients
2025-08-04 20:38:04,167 - INFO - Fit phase aggregation: Summary
2025-08-04 20:38:04,167 - INFO -   fit_clients_total_received: 3
2025-08-04 20:38:04,168 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:38:04,168 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:38:04,168 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:38:04,168 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:38:04,168 - INFO -   aggregated_g_loss: 2.0832
2025-08-04 20:38:04,168 - INFO -   aggregated_d_loss: 0.8518
2025-08-04 20:38:04,168 - INFO -   fit_time_avg_seconds_all_reporting: 0.5591
2025-08-04 20:38:04,169 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:38:10,213 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:38:10,213 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4488782048225403, 'profile_name': 'Low-End IoT', 'f1_score': 0.8100358422939068, 'avg_anomaly_score': 0.37793085191560827, 'recall': 0.6890243902439024, 'eval_time_seconds': 0.015775442123413086, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7234782608695652, 'precision': 0.9826086956521739}
2025-08-04 20:38:10,213 - INFO - [Round 75, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:38:10,213 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 75.
2025-08-04 20:38:10,213 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 75.
2025-08-04 20:38:10,214 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 75.
2025-08-04 20:38:10,215 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 75.
2025-08-04 20:38:10,219 - INFO - [Round 75, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:38:10,223 - INFO - ==================================================
2025-08-04 20:38:10,223 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:38:10,223 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:38:10,223 - INFO - ==================================================
2025-08-04 20:38:10,224 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:38:10,224 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3817
2025-08-04 20:38:10,224 - INFO -   Global Accuracy (Wgtd Avg): 0.7246
2025-08-04 20:38:10,224 - INFO -   Global F1 Score (Wgtd Avg): 0.8091
2025-08-04 20:38:10,224 - INFO -   Global Precision (Wgtd Avg): 0.9731
2025-08-04 20:38:10,224 - INFO -   Global Recall (Wgtd Avg): 0.6925
2025-08-04 20:38:10,224 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:38:10,224 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0836) - FairPenalty(0.0800) - ResourceCost(0.3600) = -0.3564
2025-08-04 20:38:10,224 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 75.
2025-08-04 20:38:10,225 - INFO -   Final Global Reward for action: -0.3564. Client states at selection: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:10,225 - INFO -   Performance Reward: 0.0836, Fairness Penalty: 0.0800, Resource Cost: 0.3600
2025-08-04 20:38:10,225 - INFO -   Next round's global F1 (for next state Q-val): 0.8091
2025-08-04 20:38:10,225 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:38:10,225 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:10,225 - INFO -       Q(s) updated from 0.0370 to 0.0335 (TotalReward: -0.3564, NextMaxQ: 0.0500)
2025-08-04 20:38:10,226 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:38:10,226 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:10,226 - INFO -       Q(s) updated from 0.0500 to 0.0464 (TotalReward: -0.3564, NextMaxQ: 0.0500)
2025-08-04 20:38:10,226 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:38:10,226 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:10,227 - INFO -       Q(s) updated from 0.0464 to 0.0428 (TotalReward: -0.3564, NextMaxQ: 0.0464)
2025-08-04 20:38:10,227 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:38:10,227 - INFO - 
2025-08-04 20:38:10,228 - INFO - [ROUND 76]
2025-08-04 20:38:10,228 - INFO - [RLAgent choose_actions_softmax] Round 76. Temperature: 0.6936
2025-08-04 20:38:10,228 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:38:10,228 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.04277604436193401, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.04277604436193401, '2395859185497387824': 0.04277604436193401, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:38:10,229 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0981272172103687), '5975185251685626785': np.float64(0.0981272172103687), '8560019474512340676': np.float64(0.10436982650913969), '12043264814094380418': np.float64(0.0981272172103687), '4296149388320225194': np.float64(0.0981272172103687), '15388649110162717160': np.float64(0.10436982650913969), '2395859185497387824': np.float64(0.10436982650913969), '10913316872057236365': np.float64(0.0981272172103687), '6587436948557123441': np.float64(0.0981272172103687), '17456602372862189643': np.float64(0.0981272172103687)}
2025-08-04 20:38:10,229 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:38:10,229 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:10,229 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:10,232 - INFO -   New temperature for next round: 0.6901
2025-08-04 20:38:10,233 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:10,233 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:38:19,253 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:38:19,253 - INFO - [Round 76, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:38:19,258 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:38:19,258 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:38:19,259 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0834, Aggregated D_Loss=0.8511 from 3 clients (1725 examples)
2025-08-04 20:38:19,259 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.54s across 3 clients
2025-08-04 20:38:19,259 - INFO - Fit phase aggregation: Summary
2025-08-04 20:38:19,259 - INFO -   fit_clients_total_received: 3
2025-08-04 20:38:19,259 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:38:19,259 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:38:19,259 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:38:19,259 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:38:19,260 - INFO -   aggregated_g_loss: 2.0834
2025-08-04 20:38:19,260 - INFO -   aggregated_d_loss: 0.8511
2025-08-04 20:38:19,260 - INFO -   fit_time_avg_seconds_all_reporting: 0.5362
2025-08-04 20:38:19,260 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:38:25,305 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:38:25,305 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.4544242978096008, 'profile_name': 'Low-End IoT', 'f1_score': 0.7843137254901961, 'avg_anomaly_score': 0.4000747067587716, 'recall': 0.6666666666666666, 'eval_time_seconds': 0.00851750373840332, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6857142857142857, 'precision': 0.9523809523809523}
2025-08-04 20:38:25,305 - INFO - [Round 76, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:38:25,305 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 76.
2025-08-04 20:38:25,306 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 76.
2025-08-04 20:38:25,307 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 76.
2025-08-04 20:38:25,307 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 76.
2025-08-04 20:38:25,310 - INFO - [Round 76, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:38:25,314 - INFO - ==================================================
2025-08-04 20:38:25,314 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:38:25,314 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:38:25,315 - INFO - ==================================================
2025-08-04 20:38:25,315 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:38:25,315 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3792
2025-08-04 20:38:25,315 - INFO -   Global Accuracy (Wgtd Avg): 0.7248
2025-08-04 20:38:25,315 - INFO -   Global F1 Score (Wgtd Avg): 0.8093
2025-08-04 20:38:25,315 - INFO -   Global Precision (Wgtd Avg): 0.9733
2025-08-04 20:38:25,316 - INFO -   Global Recall (Wgtd Avg): 0.6926
2025-08-04 20:38:25,316 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:38:25,316 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.3696
2025-08-04 20:38:25,316 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 76.
2025-08-04 20:38:25,316 - INFO -   Final Global Reward for action: -0.3696. Client states at selection: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:25,316 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:38:25,316 - INFO -   Next round's global F1 (for next state Q-val): 0.8093
2025-08-04 20:38:25,317 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:38:25,317 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:25,317 - INFO -       Q(s) updated from 0.0428 to 0.0390 (TotalReward: -0.3696, NextMaxQ: 0.0428)
2025-08-04 20:38:25,317 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:38:25,317 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:25,317 - INFO -       Q(s) updated from 0.0390 to 0.0353 (TotalReward: -0.3696, NextMaxQ: 0.0390)
2025-08-04 20:38:25,318 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:38:25,318 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:25,318 - INFO -       Q(s) updated from 0.0353 to 0.0316 (TotalReward: -0.3696, NextMaxQ: 0.0353)
2025-08-04 20:38:25,319 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:38:25,319 - INFO - 
2025-08-04 20:38:25,319 - INFO - [ROUND 77]
2025-08-04 20:38:25,320 - INFO - [RLAgent choose_actions_softmax] Round 77. Temperature: 0.6901
2025-08-04 20:38:25,320 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:38:25,320 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.031569831378877304, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.031569831378877304, '2395859185497387824': 0.031569831378877304, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:38:25,320 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09861515771954409), '5975185251685626785': np.float64(0.09861515771954409), '8560019474512340676': np.float64(0.10323129865439715), '12043264814094380418': np.float64(0.09861515771954409), '4296149388320225194': np.float64(0.09861515771954409), '15388649110162717160': np.float64(0.10323129865439715), '2395859185497387824': np.float64(0.10323129865439715), '10913316872057236365': np.float64(0.09861515771954409), '6587436948557123441': np.float64(0.09861515771954409), '17456602372862189643': np.float64(0.09861515771954409)}
2025-08-04 20:38:25,320 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:38:25,321 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:25,321 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:25,324 - INFO -   New temperature for next round: 0.6866
2025-08-04 20:38:25,324 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:25,324 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:38:31,347 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:38:31,347 - INFO - [Round 77, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:38:31,353 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:38:31,353 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:38:31,353 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8482 from 3 clients (1746 examples)
2025-08-04 20:38:31,353 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.54s across 3 clients
2025-08-04 20:38:31,353 - INFO - Fit phase aggregation: Summary
2025-08-04 20:38:31,354 - INFO -   fit_clients_total_received: 3
2025-08-04 20:38:31,354 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:38:31,354 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:38:31,354 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:38:31,354 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:38:31,354 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:38:31,355 - INFO -   aggregated_d_loss: 0.8482
2025-08-04 20:38:31,355 - INFO -   fit_time_avg_seconds_all_reporting: 0.5392
2025-08-04 20:38:31,355 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:38:37,399 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:38:37,399 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4502162218093872, 'profile_name': 'Low-End IoT', 'f1_score': 0.8100358422939068, 'avg_anomaly_score': 0.37402816637702613, 'recall': 0.6890243902439024, 'eval_time_seconds': 0.014791250228881836, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7234782608695652, 'precision': 0.9826086956521739}
2025-08-04 20:38:37,399 - INFO - [Round 77, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:38:37,399 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 77.
2025-08-04 20:38:37,399 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 77.
2025-08-04 20:38:37,400 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 77.
2025-08-04 20:38:37,400 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 77.
2025-08-04 20:38:37,400 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 77.
2025-08-04 20:38:37,400 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 77.
2025-08-04 20:38:37,400 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 77.
2025-08-04 20:38:37,400 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 77.
2025-08-04 20:38:37,401 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 77.
2025-08-04 20:38:37,401 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 77.
2025-08-04 20:38:37,405 - INFO - [Round 77, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:38:37,408 - INFO - ==================================================
2025-08-04 20:38:37,408 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:38:37,408 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:38:37,409 - INFO - ==================================================
2025-08-04 20:38:37,409 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:38:37,409 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3781
2025-08-04 20:38:37,409 - INFO -   Global Accuracy (Wgtd Avg): 0.7256
2025-08-04 20:38:37,409 - INFO -   Global F1 Score (Wgtd Avg): 0.8098
2025-08-04 20:38:37,409 - INFO -   Global Precision (Wgtd Avg): 0.9739
2025-08-04 20:38:37,410 - INFO -   Global Recall (Wgtd Avg): 0.6931
2025-08-04 20:38:37,410 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:38:37,410 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0811) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.3689
2025-08-04 20:38:37,410 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 77.
2025-08-04 20:38:37,410 - INFO -   Final Global Reward for action: -0.3689. Client states at selection: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:37,410 - INFO -   Performance Reward: 0.0811, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:38:37,410 - INFO -   Next round's global F1 (for next state Q-val): 0.8098
2025-08-04 20:38:37,411 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:38:37,411 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:37,411 - INFO -       Q(s) updated from 0.0316 to 0.0278 (TotalReward: -0.3689, NextMaxQ: 0.0316)
2025-08-04 20:38:37,411 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:38:37,412 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:37,412 - INFO -       Q(s) updated from 0.0278 to 0.0241 (TotalReward: -0.3689, NextMaxQ: 0.0278)
2025-08-04 20:38:37,412 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:38:37,412 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:37,412 - INFO -       Q(s) updated from 0.0241 to 0.0204 (TotalReward: -0.3689, NextMaxQ: 0.0241)
2025-08-04 20:38:37,413 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:38:37,413 - INFO - 
2025-08-04 20:38:37,414 - INFO - [ROUND 78]
2025-08-04 20:38:37,414 - INFO - [RLAgent choose_actions_softmax] Round 78. Temperature: 0.6866
2025-08-04 20:38:37,414 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:38:37,414 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.020418884907471783, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.020418884907471783, '2395859185497387824': 0.020418884907471783, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:38:37,415 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09910261243515336), '5975185251685626785': np.float64(0.09910261243515336), '8560019474512340676': np.float64(0.1020939043179755), '12043264814094380418': np.float64(0.09910261243515336), '4296149388320225194': np.float64(0.09910261243515336), '15388649110162717160': np.float64(0.1020939043179755), '2395859185497387824': np.float64(0.1020939043179755), '10913316872057236365': np.float64(0.09910261243515336), '6587436948557123441': np.float64(0.09910261243515336), '17456602372862189643': np.float64(0.09910261243515336)}
2025-08-04 20:38:37,415 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:38:37,415 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:37,415 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:37,419 - INFO -   New temperature for next round: 0.6832
2025-08-04 20:38:37,419 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:37,419 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:38:43,441 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:38:43,441 - INFO - [Round 78, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:38:43,446 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:38:43,446 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:38:43,446 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.8515 from 3 clients (1764 examples)
2025-08-04 20:38:43,446 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.58s across 3 clients
2025-08-04 20:38:43,446 - INFO - Fit phase aggregation: Summary
2025-08-04 20:38:43,446 - INFO -   fit_clients_total_received: 3
2025-08-04 20:38:43,447 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:38:43,447 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:38:43,447 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:38:43,447 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:38:43,447 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:38:43,447 - INFO -   aggregated_d_loss: 0.8515
2025-08-04 20:38:43,447 - INFO -   fit_time_avg_seconds_all_reporting: 0.5830
2025-08-04 20:38:43,448 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:38:49,492 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:38:49,493 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.453014612197876, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8102564102564103, 'avg_anomaly_score': 0.3836945716855544, 'recall': 0.6909620991253644, 'eval_time_seconds': 0.01323246955871582, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7245657568238213, 'precision': 0.9793388429752066}
2025-08-04 20:38:49,493 - INFO - [Round 78, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:38:49,493 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 78.
2025-08-04 20:38:49,493 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 78.
2025-08-04 20:38:49,493 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 78.
2025-08-04 20:38:49,493 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 78.
2025-08-04 20:38:49,494 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 78.
2025-08-04 20:38:49,494 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 78.
2025-08-04 20:38:49,494 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 78.
2025-08-04 20:38:49,494 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 78.
2025-08-04 20:38:49,494 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 78.
2025-08-04 20:38:49,494 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 78.
2025-08-04 20:38:49,498 - INFO - [Round 78, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:38:49,502 - INFO - ==================================================
2025-08-04 20:38:49,502 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:38:49,502 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:38:49,503 - INFO - ==================================================
2025-08-04 20:38:49,503 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:38:49,503 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3785
2025-08-04 20:38:49,503 - INFO -   Global Accuracy (Wgtd Avg): 0.7248
2025-08-04 20:38:49,503 - INFO -   Global F1 Score (Wgtd Avg): 0.8093
2025-08-04 20:38:49,503 - INFO -   Global Precision (Wgtd Avg): 0.9733
2025-08-04 20:38:49,503 - INFO -   Global Recall (Wgtd Avg): 0.6926
2025-08-04 20:38:49,504 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:38:49,504 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0007) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.4507
2025-08-04 20:38:49,504 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 78.
2025-08-04 20:38:49,504 - INFO -   Final Global Reward for action: -0.4507. Client states at selection: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:49,504 - INFO -   Performance Reward: -0.0007, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:38:49,504 - INFO -   Next round's global F1 (for next state Q-val): 0.8093
2025-08-04 20:38:49,504 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:38:49,504 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:49,504 - INFO -       Q(s) updated from 0.0204 to 0.0159 (TotalReward: -0.4507, NextMaxQ: 0.0204)
2025-08-04 20:38:49,505 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:38:49,505 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:49,505 - INFO -       Q(s) updated from 0.0159 to 0.0114 (TotalReward: -0.4507, NextMaxQ: 0.0159)
2025-08-04 20:38:49,506 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:38:49,506 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:38:49,506 - INFO -       Q(s) updated from 0.0114 to 0.0069 (TotalReward: -0.4507, NextMaxQ: 0.0114)
2025-08-04 20:38:49,506 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:38:49,507 - INFO - 
2025-08-04 20:38:49,507 - INFO - [ROUND 79]
2025-08-04 20:38:49,508 - INFO - [RLAgent choose_actions_softmax] Round 79. Temperature: 0.6832
2025-08-04 20:38:49,508 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:38:49,508 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.006850839144167023, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.006850839144167023, '2395859185497387824': 0.006850839144167023, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:38:49,508 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09969857556789079), '5975185251685626785': np.float64(0.09969857556789079), '8560019474512340676': np.float64(0.10070332367492148), '12043264814094380418': np.float64(0.09969857556789079), '4296149388320225194': np.float64(0.09969857556789079), '15388649110162717160': np.float64(0.10070332367492148), '2395859185497387824': np.float64(0.10070332367492148), '10913316872057236365': np.float64(0.09969857556789079), '6587436948557123441': np.float64(0.09969857556789079), '17456602372862189643': np.float64(0.09969857556789079)}
2025-08-04 20:38:49,508 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:38:49,509 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:49,509 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:38:49,512 - INFO -   New temperature for next round: 0.6798
2025-08-04 20:38:49,512 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:38:49,512 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:38:58,533 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:38:58,534 - INFO - [Round 79, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:38:58,538 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:38:58,539 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:38:58,539 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0834, Aggregated D_Loss=0.8498 from 3 clients (1781 examples)
2025-08-04 20:38:58,539 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.55s across 3 clients
2025-08-04 20:38:58,539 - INFO - Fit phase aggregation: Summary
2025-08-04 20:38:58,539 - INFO -   fit_clients_total_received: 3
2025-08-04 20:38:58,539 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:38:58,539 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:38:58,539 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:38:58,539 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:38:58,540 - INFO -   aggregated_g_loss: 2.0834
2025-08-04 20:38:58,540 - INFO -   aggregated_d_loss: 0.8498
2025-08-04 20:38:58,540 - INFO -   fit_time_avg_seconds_all_reporting: 0.5472
2025-08-04 20:38:58,541 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:39:04,585 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:39:04,585 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4393731117248535, 'profile_name': 'Low-End IoT', 'f1_score': 0.8148148148148148, 'avg_anomaly_score': 0.37006589588911637, 'recall': 0.693089430894309, 'eval_time_seconds': 0.013799190521240234, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7304347826086957, 'precision': 0.9884057971014493}
2025-08-04 20:39:04,585 - INFO - [Round 79, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:39:04,585 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 79.
2025-08-04 20:39:04,585 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 79.
2025-08-04 20:39:04,586 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 79.
2025-08-04 20:39:04,592 - INFO - [Round 79, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:39:04,596 - INFO - ==================================================
2025-08-04 20:39:04,596 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:39:04,596 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:39:04,596 - INFO - ==================================================
2025-08-04 20:39:04,596 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:39:04,596 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3739
2025-08-04 20:39:04,596 - INFO -   Global Accuracy (Wgtd Avg): 0.7263
2025-08-04 20:39:04,597 - INFO -   Global F1 Score (Wgtd Avg): 0.8103
2025-08-04 20:39:04,597 - INFO -   Global Precision (Wgtd Avg): 0.9745
2025-08-04 20:39:04,597 - INFO -   Global Recall (Wgtd Avg): 0.6935
2025-08-04 20:39:04,597 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:39:04,597 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0813) - FairPenalty(0.0900) - ResourceCost(0.3600) = -0.3687
2025-08-04 20:39:04,597 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 79.
2025-08-04 20:39:04,597 - INFO -   Final Global Reward for action: -0.3687. Client states at selection: {'8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '2395859185497387824': (8, 5, 2, 8, 8)}
2025-08-04 20:39:04,597 - INFO -   Performance Reward: 0.0813, Fairness Penalty: 0.0900, Resource Cost: 0.3600
2025-08-04 20:39:04,597 - INFO -   Next round's global F1 (for next state Q-val): 0.8103
2025-08-04 20:39:04,598 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:39:04,598 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:39:04,598 - INFO -       Q(s) updated from 0.0069 to 0.0032 (TotalReward: -0.3687, NextMaxQ: 0.0069)
2025-08-04 20:39:04,598 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:39:04,598 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:39:04,598 - INFO -       Q(s) updated from 0.0032 to -0.0005 (TotalReward: -0.3687, NextMaxQ: 0.0032)
2025-08-04 20:39:04,599 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:39:04,599 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:39:04,599 - INFO -       Q(s) updated from -0.0005 to -0.0042 (TotalReward: -0.3687, NextMaxQ: -0.0005)
2025-08-04 20:39:04,600 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:39:04,600 - INFO - 
2025-08-04 20:39:04,600 - INFO - [ROUND 80]
2025-08-04 20:39:04,601 - INFO - [RLAgent choose_actions_softmax] Round 80. Temperature: 0.6798
2025-08-04 20:39:04,601 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:39:04,601 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': -0.0042186456066824855, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': -0.0042186456066824855, '2395859185497387824': -0.0042186456066824855, '10913316872057236365': 0.0, '6587436948557123441': 0.0, '17456602372862189643': 0.0}
2025-08-04 20:39:04,602 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10018594151206048), '5975185251685626785': np.float64(0.10018594151206048), '8560019474512340676': np.float64(0.0995661364718589), '12043264814094380418': np.float64(0.10018594151206048), '4296149388320225194': np.float64(0.10018594151206048), '15388649110162717160': np.float64(0.0995661364718589), '2395859185497387824': np.float64(0.0995661364718589), '10913316872057236365': np.float64(0.10018594151206048), '6587436948557123441': np.float64(0.10018594151206048), '17456602372862189643': np.float64(0.10018594151206048)}
2025-08-04 20:39:04,602 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:39:04,602 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:39:04,602 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:39:04,602 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:39:04,606 - INFO -   New temperature for next round: 0.6764
2025-08-04 20:39:04,606 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'1640189632563049314': (8, 0, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8)}
2025-08-04 20:39:04,606 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:39:13,626 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:39:13,626 - INFO - [Round 80, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:39:13,633 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:39:13,633 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.00
2025-08-04 20:39:13,633 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0836, Aggregated D_Loss=0.8475 from 5 clients (8303 examples)
2025-08-04 20:39:13,633 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.33s across 5 clients
2025-08-04 20:39:13,633 - INFO - Fit phase aggregation: Summary
2025-08-04 20:39:13,634 - INFO -   fit_clients_total_received: 5
2025-08-04 20:39:13,634 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:39:13,634 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:39:13,634 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:39:13,634 - INFO -   allocated_cores_avg_per_client: 2.0000
2025-08-04 20:39:13,635 - INFO -   aggregated_g_loss: 2.0836
2025-08-04 20:39:13,635 - INFO -   aggregated_d_loss: 0.8475
2025-08-04 20:39:13,635 - INFO -   fit_time_avg_seconds_all_reporting: 1.3346
2025-08-04 20:39:13,635 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:39:19,678 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:39:19,679 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.46999359130859375, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8102564102564103, 'avg_anomaly_score': 0.4056537525529601, 'recall': 0.6909620991253644, 'eval_time_seconds': 0.04814648628234863, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7245657568238213, 'precision': 0.9793388429752066}
2025-08-04 20:39:19,679 - INFO - [Round 80, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:39:19,679 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 80.
2025-08-04 20:39:19,679 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 80.
2025-08-04 20:39:19,679 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 80.
2025-08-04 20:39:19,680 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 80.
2025-08-04 20:39:19,684 - INFO - [Round 80, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:39:19,688 - INFO - ==================================================
2025-08-04 20:39:19,688 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:39:19,688 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:39:19,688 - INFO - ==================================================
2025-08-04 20:39:19,689 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:39:19,689 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3994
2025-08-04 20:39:19,689 - INFO -   Global Accuracy (Wgtd Avg): 0.7248
2025-08-04 20:39:19,689 - INFO -   Global F1 Score (Wgtd Avg): 0.8093
2025-08-04 20:39:19,689 - INFO -   Global Precision (Wgtd Avg): 0.9733
2025-08-04 20:39:19,689 - INFO -   Global Recall (Wgtd Avg): 0.6926
2025-08-04 20:39:19,689 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:39:19,689 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0013) - FairPenalty(0.0000) - ResourceCost(0.2000) = -0.2013
2025-08-04 20:39:19,689 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 80.
2025-08-04 20:39:19,690 - INFO -   Final Global Reward for action: -0.2013. Client states at selection: {'1640189632563049314': (8, 0, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8)}
2025-08-04 20:39:19,690 - INFO -   Performance Reward: -0.0013, Fairness Penalty: 0.0000, Resource Cost: 0.2000
2025-08-04 20:39:19,690 - INFO -   Next round's global F1 (for next state Q-val): 0.8093
2025-08-04 20:39:19,690 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:39:19,690 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:39:19,690 - INFO -       Q(s) updated from 0.0000 to -0.0020 (TotalReward: -0.2013, NextMaxQ: 0.0000)
2025-08-04 20:39:19,691 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:39:19,691 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:39:19,691 - INFO -       Q(s) updated from 0.0000 to -0.0020 (TotalReward: -0.2013, NextMaxQ: 0.0000)
2025-08-04 20:39:19,691 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:39:19,691 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:39:19,691 - INFO -       Q(s) updated from -0.0020 to -0.0040 (TotalReward: -0.2013, NextMaxQ: 0.0000)
2025-08-04 20:39:19,692 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:39:19,692 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:39:19,692 - INFO -       Q(s) updated from -0.0040 to -0.0060 (TotalReward: -0.2013, NextMaxQ: 0.0000)
2025-08-04 20:39:19,693 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:39:19,693 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:39:19,693 - INFO -       Q(s) updated from -0.0060 to -0.0079 (TotalReward: -0.2013, NextMaxQ: 0.0000)
2025-08-04 20:39:19,694 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:39:19,694 - INFO - 
2025-08-04 20:39:19,694 - INFO - [ROUND 81]
2025-08-04 20:39:19,694 - INFO - [RLAgent choose_actions_softmax] Round 81. Temperature: 0.6764
2025-08-04 20:39:19,695 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:39:19,695 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.03352009940581606, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03352009940581606, '2395859185497387824': 0.03352009940581606, '10913316872057236365': 0.0, '6587436948557123441': -0.002013411217667994, '17456602372862189643': 0.0}
2025-08-04 20:39:19,695 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09852756490133258), '5975185251685626785': np.float64(0.09852756490133258), '8560019474512340676': np.float64(0.10353329807987653), '12043264814094380418': np.float64(0.09852756490133258), '4296149388320225194': np.float64(0.09852756490133258), '15388649110162717160': np.float64(0.10353329807987653), '2395859185497387824': np.float64(0.10353329807987653), '10913316872057236365': np.float64(0.09852756490133258), '6587436948557123441': np.float64(0.09823471635237499), '17456602372862189643': np.float64(0.09852756490133258)}
2025-08-04 20:39:19,695 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:39:19,696 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:39:19,696 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:39:19,699 - INFO -   New temperature for next round: 0.6730
2025-08-04 20:39:19,700 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:39:19,700 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:39:25,721 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:39:25,721 - INFO - [Round 81, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:39:25,726 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:39:25,726 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:39:25,726 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8456 from 3 clients (1814 examples)
2025-08-04 20:39:25,726 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.58s across 3 clients
2025-08-04 20:39:25,726 - INFO - Fit phase aggregation: Summary
2025-08-04 20:39:25,726 - INFO -   fit_clients_total_received: 3
2025-08-04 20:39:25,727 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:39:25,727 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:39:25,727 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:39:25,727 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:39:25,727 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:39:25,727 - INFO -   aggregated_d_loss: 0.8456
2025-08-04 20:39:25,727 - INFO -   fit_time_avg_seconds_all_reporting: 0.5778
2025-08-04 20:39:25,728 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:39:31,774 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:39:31,774 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.4475160837173462, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8053212199870214, 'avg_anomaly_score': 0.3883042996675677, 'recall': 0.6925223214285714, 'eval_time_seconds': 0.03360128402709961, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7210599721059973, 'precision': 0.962015503875969}
2025-08-04 20:39:31,774 - INFO - [Round 81, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:39:31,774 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 81.
2025-08-04 20:39:31,774 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 81.
2025-08-04 20:39:31,775 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 81.
2025-08-04 20:39:31,776 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 81.
2025-08-04 20:39:31,780 - INFO - [Round 81, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:39:31,783 - INFO - ==================================================
2025-08-04 20:39:31,783 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:39:31,783 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:39:31,783 - INFO - ==================================================
2025-08-04 20:39:31,783 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:39:31,783 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3877
2025-08-04 20:39:31,783 - INFO -   Global Accuracy (Wgtd Avg): 0.7256
2025-08-04 20:39:31,784 - INFO -   Global F1 Score (Wgtd Avg): 0.8098
2025-08-04 20:39:31,784 - INFO -   Global Precision (Wgtd Avg): 0.9739
2025-08-04 20:39:31,784 - INFO -   Global Recall (Wgtd Avg): 0.6930
2025-08-04 20:39:31,784 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:39:31,784 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0005) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.4195
2025-08-04 20:39:31,784 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 81.
2025-08-04 20:39:31,784 - INFO -   Final Global Reward for action: -0.4195. Client states at selection: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:39:31,784 - INFO -   Performance Reward: 0.0005, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:39:31,784 - INFO -   Next round's global F1 (for next state Q-val): 0.8098
2025-08-04 20:39:31,785 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:39:31,785 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:31,785 - INFO -       Q(s) updated from 0.0335 to 0.0293 (TotalReward: -0.4195, NextMaxQ: 0.0335)
2025-08-04 20:39:31,785 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:39:31,785 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:31,785 - INFO -       Q(s) updated from 0.0293 to 0.0251 (TotalReward: -0.4195, NextMaxQ: 0.0293)
2025-08-04 20:39:31,786 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:39:31,786 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:31,786 - INFO -       Q(s) updated from 0.0251 to 0.0208 (TotalReward: -0.4195, NextMaxQ: 0.0251)
2025-08-04 20:39:31,786 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:39:31,787 - INFO - 
2025-08-04 20:39:31,787 - INFO - [ROUND 82]
2025-08-04 20:39:31,787 - INFO - [RLAgent choose_actions_softmax] Round 82. Temperature: 0.6730
2025-08-04 20:39:31,788 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:39:31,788 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.020846223561116366, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.020846223561116366, '2395859185497387824': 0.020846223561116366, '10913316872057236365': 0.0, '6587436948557123441': -0.002013411217667994, '17456602372862189643': 0.0}
2025-08-04 20:39:31,788 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09909437420003572), '5975185251685626785': np.float64(0.09909437420003572), '8560019474512340676': np.float64(0.102211797233063), '12043264814094380418': np.float64(0.09909437420003572), '4296149388320225194': np.float64(0.09909437420003572), '15388649110162717160': np.float64(0.102211797233063), '2395859185497387824': np.float64(0.102211797233063), '10913316872057236365': np.float64(0.09909437420003572), '6587436948557123441': np.float64(0.0987983631005966), '17456602372862189643': np.float64(0.09909437420003572)}
2025-08-04 20:39:31,788 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:39:31,789 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:39:31,789 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:39:31,792 - INFO -   New temperature for next round: 0.6696
2025-08-04 20:39:31,792 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:39:31,792 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:39:37,814 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:39:37,814 - INFO - [Round 82, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:39:37,819 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:39:37,819 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:39:37,819 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.8442 from 3 clients (1839 examples)
2025-08-04 20:39:37,819 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.61s across 3 clients
2025-08-04 20:39:37,819 - INFO - Fit phase aggregation: Summary
2025-08-04 20:39:37,819 - INFO -   fit_clients_total_received: 3
2025-08-04 20:39:37,820 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:39:37,820 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:39:37,820 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:39:37,820 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:39:37,820 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:39:37,820 - INFO -   aggregated_d_loss: 0.8442
2025-08-04 20:39:37,820 - INFO -   fit_time_avg_seconds_all_reporting: 0.6097
2025-08-04 20:39:37,821 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:39:43,865 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:39:43,866 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.43120579719543456, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.3762720940691052, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.009699583053588867, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:39:43,866 - INFO - [Round 82, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:39:43,866 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 82.
2025-08-04 20:39:43,866 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 82.
2025-08-04 20:39:43,866 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 82.
2025-08-04 20:39:43,866 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 82.
2025-08-04 20:39:43,867 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 82.
2025-08-04 20:39:43,867 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 82.
2025-08-04 20:39:43,867 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 82.
2025-08-04 20:39:43,867 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 82.
2025-08-04 20:39:43,867 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 82.
2025-08-04 20:39:43,867 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 82.
2025-08-04 20:39:43,872 - INFO - [Round 82, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:39:43,875 - INFO - ==================================================
2025-08-04 20:39:43,876 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:39:43,876 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:39:43,876 - INFO - ==================================================
2025-08-04 20:39:43,876 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:39:43,876 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3763
2025-08-04 20:39:43,876 - INFO -   Global Accuracy (Wgtd Avg): 0.7263
2025-08-04 20:39:43,876 - INFO -   Global F1 Score (Wgtd Avg): 0.8103
2025-08-04 20:39:43,876 - INFO -   Global Precision (Wgtd Avg): 0.9745
2025-08-04 20:39:43,877 - INFO -   Global Recall (Wgtd Avg): 0.6935
2025-08-04 20:39:43,877 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:39:43,877 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0803) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.3397
2025-08-04 20:39:43,877 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 82.
2025-08-04 20:39:43,877 - INFO -   Final Global Reward for action: -0.3397. Client states at selection: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:39:43,877 - INFO -   Performance Reward: 0.0803, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:39:43,877 - INFO -   Next round's global F1 (for next state Q-val): 0.8103
2025-08-04 20:39:43,877 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:39:43,877 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:43,878 - INFO -       Q(s) updated from 0.0208 to 0.0174 (TotalReward: -0.3397, NextMaxQ: 0.0208)
2025-08-04 20:39:43,878 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:39:43,878 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:43,878 - INFO -       Q(s) updated from 0.0174 to 0.0140 (TotalReward: -0.3397, NextMaxQ: 0.0174)
2025-08-04 20:39:43,879 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:39:43,879 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:43,879 - INFO -       Q(s) updated from 0.0140 to 0.0106 (TotalReward: -0.3397, NextMaxQ: 0.0140)
2025-08-04 20:39:43,879 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:39:43,880 - INFO - 
2025-08-04 20:39:43,880 - INFO - [ROUND 83]
2025-08-04 20:39:43,880 - INFO - [RLAgent choose_actions_softmax] Round 83. Temperature: 0.6696
2025-08-04 20:39:43,880 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:39:43,881 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.010602074500434062, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.010602074500434062, '2395859185497387824': 0.010602074500434062, '10913316872057236365': 0.0, '6587436948557123441': -0.002013411217667994, '17456602372862189643': 0.0}
2025-08-04 20:39:43,881 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09955327753195367), '5975185251685626785': np.float64(0.09955327753195367), '8560019474512340676': np.float64(0.101141977109635), '12043264814094380418': np.float64(0.09955327753195367), '4296149388320225194': np.float64(0.09955327753195367), '15388649110162717160': np.float64(0.101141977109635), '2395859185497387824': np.float64(0.101141977109635), '10913316872057236365': np.float64(0.09955327753195367), '6587436948557123441': np.float64(0.09925440347937291), '17456602372862189643': np.float64(0.09955327753195367)}
2025-08-04 20:39:43,881 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:39:43,881 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:39:43,881 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:39:43,884 - INFO -   New temperature for next round: 0.6663
2025-08-04 20:39:43,885 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:39:43,885 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:39:52,901 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:39:52,901 - INFO - [Round 83, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:39:52,905 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:39:52,905 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:39:52,905 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.8444 from 3 clients (1858 examples)
2025-08-04 20:39:52,905 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.56s across 3 clients
2025-08-04 20:39:52,906 - INFO - Fit phase aggregation: Summary
2025-08-04 20:39:52,906 - INFO -   fit_clients_total_received: 3
2025-08-04 20:39:52,906 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:39:52,906 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:39:52,906 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:39:52,906 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:39:52,906 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:39:52,906 - INFO -   aggregated_d_loss: 0.8444
2025-08-04 20:39:52,906 - INFO -   fit_time_avg_seconds_all_reporting: 0.5612
2025-08-04 20:39:52,907 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:39:58,951 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:39:58,952 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.46731277704238894, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8087932218914586, 'avg_anomaly_score': 0.4067984476952145, 'recall': 0.690923317683881, 'eval_time_seconds': 0.04766249656677246, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.723326706428098, 'precision': 0.9751518498067366}
2025-08-04 20:39:58,952 - INFO - [Round 83, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:39:58,952 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 83.
2025-08-04 20:39:58,952 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 83.
2025-08-04 20:39:58,952 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 83.
2025-08-04 20:39:58,953 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 83.
2025-08-04 20:39:58,957 - INFO - [Round 83, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:39:58,961 - INFO - ==================================================
2025-08-04 20:39:58,961 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:39:58,961 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:39:58,961 - INFO - ==================================================
2025-08-04 20:39:58,961 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:39:58,961 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4072
2025-08-04 20:39:58,962 - INFO -   Global Accuracy (Wgtd Avg): 0.7258
2025-08-04 20:39:58,962 - INFO -   Global F1 Score (Wgtd Avg): 0.8100
2025-08-04 20:39:58,962 - INFO -   Global Precision (Wgtd Avg): 0.9741
2025-08-04 20:39:58,962 - INFO -   Global Recall (Wgtd Avg): 0.6932
2025-08-04 20:39:58,962 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:39:58,962 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0600) - ResourceCost(0.3600) = -0.4204
2025-08-04 20:39:58,962 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 83.
2025-08-04 20:39:58,962 - INFO -   Final Global Reward for action: -0.4204. Client states at selection: {'8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '2395859185497387824': (8, 4, 2, 8, 8)}
2025-08-04 20:39:58,962 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0600, Resource Cost: 0.3600
2025-08-04 20:39:58,963 - INFO -   Next round's global F1 (for next state Q-val): 0.8100
2025-08-04 20:39:58,963 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:39:58,963 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:58,963 - INFO -       Q(s) updated from 0.0106 to 0.0064 (TotalReward: -0.4204, NextMaxQ: 0.0106)
2025-08-04 20:39:58,963 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:39:58,964 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:58,964 - INFO -       Q(s) updated from 0.0064 to 0.0022 (TotalReward: -0.4204, NextMaxQ: 0.0064)
2025-08-04 20:39:58,964 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:39:58,964 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:39:58,964 - INFO -       Q(s) updated from 0.0022 to -0.0020 (TotalReward: -0.4204, NextMaxQ: 0.0022)
2025-08-04 20:39:58,965 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:39:58,965 - INFO - 
2025-08-04 20:39:58,965 - INFO - [ROUND 84]
2025-08-04 20:39:58,966 - INFO - [RLAgent choose_actions_softmax] Round 84. Temperature: 0.6663
2025-08-04 20:39:58,966 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:39:58,966 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': -0.002030522571694655, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': -0.002030522571694655, '2395859185497387824': -0.002030522571694655, '10913316872057236365': 0.0, '6587436948557123441': -0.002013411217667994, '17456602372862189643': 0.0}
2025-08-04 20:39:58,967 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1001216044041905), '5975185251685626785': np.float64(0.1001216044041905), '8560019474512340676': np.float64(0.09981695253237012), '12043264814094380418': np.float64(0.1001216044041905), '4296149388320225194': np.float64(0.1001216044041905), '15388649110162717160': np.float64(0.09981695253237012), '2395859185497387824': np.float64(0.09981695253237012), '10913316872057236365': np.float64(0.1001216044041905), '6587436948557123441': np.float64(0.09981951597774646), '17456602372862189643': np.float64(0.1001216044041905)}
2025-08-04 20:39:58,967 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:39:58,967 - INFO -     Selected 6 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:39:58,967 - INFO -   Selection by factor 1.00 yielded 6 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:39:58,967 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:39:58,971 - INFO -   New temperature for next round: 0.6630
2025-08-04 20:39:58,971 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'1640189632563049314': (8, 1, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '4296149388320225194': (8, 1, 0, 8, 8), '10913316872057236365': (8, 1, 0, 8, 8)}
2025-08-04 20:39:58,972 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:40:07,998 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:40:07,998 - INFO - [Round 84, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:40:08,006 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:40:08,006 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.00
2025-08-04 20:40:08,006 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.8406 from 5 clients (8731 examples)
2025-08-04 20:40:08,006 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.39s across 5 clients
2025-08-04 20:40:08,007 - INFO - Fit phase aggregation: Summary
2025-08-04 20:40:08,007 - INFO -   fit_clients_total_received: 5
2025-08-04 20:40:08,007 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:40:08,007 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:40:08,007 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:40:08,007 - INFO -   allocated_cores_avg_per_client: 2.0000
2025-08-04 20:40:08,007 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:40:08,007 - INFO -   aggregated_d_loss: 0.8406
2025-08-04 20:40:08,007 - INFO -   fit_time_avg_seconds_all_reporting: 1.3925
2025-08-04 20:40:08,008 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:40:14,049 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:40:14,050 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.47028082609176636, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8053212199870214, 'avg_anomaly_score': 0.41069285110893056, 'recall': 0.6925223214285714, 'eval_time_seconds': 0.03418684005737305, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7210599721059973, 'precision': 0.962015503875969}
2025-08-04 20:40:14,050 - INFO - [Round 84, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:40:14,050 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 84.
2025-08-04 20:40:14,050 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 84.
2025-08-04 20:40:14,050 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 84.
2025-08-04 20:40:14,051 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 84.
2025-08-04 20:40:14,051 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 84.
2025-08-04 20:40:14,051 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 84.
2025-08-04 20:40:14,051 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 84.
2025-08-04 20:40:14,051 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 84.
2025-08-04 20:40:14,051 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 84.
2025-08-04 20:40:14,052 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 84.
2025-08-04 20:40:14,055 - INFO - [Round 84, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:40:14,059 - INFO - ==================================================
2025-08-04 20:40:14,059 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:40:14,059 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:40:14,059 - INFO - ==================================================
2025-08-04 20:40:14,059 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:40:14,059 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4102
2025-08-04 20:40:14,059 - INFO -   Global Accuracy (Wgtd Avg): 0.7248
2025-08-04 20:40:14,060 - INFO -   Global F1 Score (Wgtd Avg): 0.8093
2025-08-04 20:40:14,060 - INFO -   Global Precision (Wgtd Avg): 0.9733
2025-08-04 20:40:14,060 - INFO -   Global Recall (Wgtd Avg): 0.6926
2025-08-04 20:40:14,060 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:40:14,060 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0009) - FairPenalty(0.0000) - ResourceCost(0.2000) = -0.2009
2025-08-04 20:40:14,060 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 84.
2025-08-04 20:40:14,061 - INFO -   Final Global Reward for action: -0.2009. Client states at selection: {'1640189632563049314': (8, 1, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '4296149388320225194': (8, 1, 0, 8, 8), '10913316872057236365': (8, 1, 0, 8, 8)}
2025-08-04 20:40:14,061 - INFO -   Performance Reward: -0.0009, Fairness Penalty: 0.0000, Resource Cost: 0.2000
2025-08-04 20:40:14,061 - INFO -   Next round's global F1 (for next state Q-val): 0.8093
2025-08-04 20:40:14,061 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:40:14,061 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:40:14,062 - INFO -       Q(s) updated from 0.0000 to -0.0020 (TotalReward: -0.2009, NextMaxQ: 0.0000)
2025-08-04 20:40:14,062 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:40:14,062 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:40:14,062 - INFO -       Q(s) updated from 0.0000 to -0.0020 (TotalReward: -0.2009, NextMaxQ: 0.0000)
2025-08-04 20:40:14,063 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:40:14,063 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:40:14,063 - INFO -       Q(s) updated from -0.0020 to -0.0040 (TotalReward: -0.2009, NextMaxQ: 0.0000)
2025-08-04 20:40:14,064 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:40:14,064 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:40:14,064 - INFO -       Q(s) updated from -0.0040 to -0.0060 (TotalReward: -0.2009, NextMaxQ: 0.0000)
2025-08-04 20:40:14,064 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:40:14,064 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:40:14,064 - INFO -       Q(s) updated from -0.0060 to -0.0079 (TotalReward: -0.2009, NextMaxQ: 0.0000)
2025-08-04 20:40:14,065 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:40:14,065 - INFO - 
2025-08-04 20:40:14,065 - INFO - [ROUND 85]
2025-08-04 20:40:14,066 - INFO - [RLAgent choose_actions_softmax] Round 85. Temperature: 0.6630
2025-08-04 20:40:14,066 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:40:14,066 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': 0.0, '8560019474512340676': 0.03745412749845688, '12043264814094380418': 0.0, '4296149388320225194': 0.0, '15388649110162717160': 0.03745412749845688, '2395859185497387824': 0.03745412749845688, '10913316872057236365': 0.0, '6587436948557123441': -0.002013411217667994, '17456602372862189643': 0.0}
2025-08-04 20:40:14,066 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.098315558262126), '5975185251685626785': np.float64(0.098315558262126), '8560019474512340676': np.float64(0.10402973991543597), '12043264814094380418': np.float64(0.098315558262126), '4296149388320225194': np.float64(0.098315558262126), '15388649110162717160': np.float64(0.10402973991543597), '2395859185497387824': np.float64(0.10402973991543597), '10913316872057236365': np.float64(0.098315558262126), '6587436948557123441': np.float64(0.09801743068093619), '17456602372862189643': np.float64(0.098315558262126)}
2025-08-04 20:40:14,067 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:40:14,067 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:40:14,067 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:40:14,070 - INFO -   New temperature for next round: 0.6597
2025-08-04 20:40:14,070 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8)}
2025-08-04 20:40:14,071 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:40:20,094 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:40:20,094 - INFO - [Round 85, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:40:20,100 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:40:20,100 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:40:20,100 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.8376 from 3 clients (1904 examples)
2025-08-04 20:40:20,100 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.60s across 3 clients
2025-08-04 20:40:20,100 - INFO - Fit phase aggregation: Summary
2025-08-04 20:40:20,100 - INFO -   fit_clients_total_received: 3
2025-08-04 20:40:20,100 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:40:20,101 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:40:20,101 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:40:20,101 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:40:20,101 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:40:20,101 - INFO -   aggregated_d_loss: 0.8376
2025-08-04 20:40:20,101 - INFO -   fit_time_avg_seconds_all_reporting: 0.5963
2025-08-04 20:40:20,102 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:40:26,147 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:40:26,147 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.4375916361808777, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.818489289740699, 'avg_anomaly_score': 0.3845297673056203, 'recall': 0.7048543689320388, 'eval_time_seconds': 0.01676630973815918, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7403225806451613, 'precision': 0.9758064516129032}
2025-08-04 20:40:26,148 - INFO - [Round 85, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:40:26,148 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 85.
2025-08-04 20:40:26,148 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 85.
2025-08-04 20:40:26,148 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 85.
2025-08-04 20:40:26,148 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 85.
2025-08-04 20:40:26,148 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 85.
2025-08-04 20:40:26,148 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 85.
2025-08-04 20:40:26,149 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 85.
2025-08-04 20:40:26,149 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 85.
2025-08-04 20:40:26,149 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 85.
2025-08-04 20:40:26,149 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 85.
2025-08-04 20:40:26,153 - INFO - [Round 85, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:40:26,156 - INFO - ==================================================
2025-08-04 20:40:26,156 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:40:26,157 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:40:26,157 - INFO - ==================================================
2025-08-04 20:40:26,157 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:40:26,157 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3877
2025-08-04 20:40:26,157 - INFO -   Global Accuracy (Wgtd Avg): 0.7251
2025-08-04 20:40:26,157 - INFO -   Global F1 Score (Wgtd Avg): 0.8095
2025-08-04 20:40:26,157 - INFO -   Global Precision (Wgtd Avg): 0.9735
2025-08-04 20:40:26,158 - INFO -   Global Recall (Wgtd Avg): 0.6928
2025-08-04 20:40:26,158 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:40:26,158 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0300) - ResourceCost(0.3600) = -0.3898
2025-08-04 20:40:26,158 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 85.
2025-08-04 20:40:26,158 - INFO -   Final Global Reward for action: -0.3898. Client states at selection: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8)}
2025-08-04 20:40:26,158 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0300, Resource Cost: 0.3600
2025-08-04 20:40:26,158 - INFO -   Next round's global F1 (for next state Q-val): 0.8095
2025-08-04 20:40:26,158 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:40:26,159 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:40:26,159 - INFO -       Q(s) updated from 0.0375 to 0.0332 (TotalReward: -0.3898, NextMaxQ: -0.0020)
2025-08-04 20:40:26,159 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:40:26,159 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:40:26,159 - INFO -       Q(s) updated from 0.0332 to 0.0289 (TotalReward: -0.3898, NextMaxQ: -0.0020)
2025-08-04 20:40:26,160 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:40:26,160 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:40:26,160 - INFO -       Q(s) updated from 0.0289 to 0.0247 (TotalReward: -0.3898, NextMaxQ: -0.0020)
2025-08-04 20:40:26,161 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:40:26,161 - INFO - 
2025-08-04 20:40:26,161 - INFO - [ROUND 86]
2025-08-04 20:40:26,161 - INFO - [RLAgent choose_actions_softmax] Round 86. Temperature: 0.6597
2025-08-04 20:40:26,162 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:40:26,162 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007916158662910126, '5975185251685626785': -0.0020089738787645935, '8560019474512340676': -0.002030522571694655, '12043264814094380418': -0.007916158662910126, '4296149388320225194': -0.007916158662910126, '15388649110162717160': -0.002030522571694655, '2395859185497387824': -0.002030522571694655, '10913316872057236365': -0.007916158662910126, '6587436948557123441': -0.002013411217667994, '17456602372862189643': 0.0}
2025-08-04 20:40:26,162 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09943379386190367), '5975185251685626785': np.float64(0.10032821942814318), '8560019474512340676': np.float64(0.10032494209504912), '12043264814094380418': np.float64(0.09943379386190367), '4296149388320225194': np.float64(0.09943379386190367), '15388649110162717160': np.float64(0.10032494209504912), '2395859185497387824': np.float64(0.10032494209504912), '10913316872057236365': np.float64(0.09943379386190367), '6587436948557123441': np.float64(0.1003275445460841), '17456602372862189643': np.float64(0.10063423429301067)}
2025-08-04 20:40:26,162 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:40:26,163 - INFO -     Selected 6 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441', '17456602372862189643']
2025-08-04 20:40:26,163 - INFO -   Selection by factor 1.00 yielded 6 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:40:26,163 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643', '5975185251685626785', '6587436948557123441', '8560019474512340676', '15388649110162717160']
2025-08-04 20:40:26,168 - INFO -   New temperature for next round: 0.6564
2025-08-04 20:40:26,168 - INFO -   Final selected CIDs to return: ['17456602372862189643', '5975185251685626785', '6587436948557123441', '8560019474512340676', '15388649110162717160']. Corresponding states: {'17456602372862189643': (7, 0, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8)}
2025-08-04 20:40:26,169 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:40:35,195 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:40:35,195 - INFO - [Round 86, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:40:35,203 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:40:35,203 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.40
2025-08-04 20:40:35,203 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0833, Aggregated D_Loss=0.8410 from 5 clients (354 examples)
2025-08-04 20:40:35,203 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.70s across 5 clients
2025-08-04 20:40:35,203 - INFO - Fit phase aggregation: Summary
2025-08-04 20:40:35,203 - INFO -   fit_clients_total_received: 5
2025-08-04 20:40:35,203 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:40:35,204 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:40:35,204 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:40:35,204 - INFO -   allocated_cores_avg_per_client: 4.4000
2025-08-04 20:40:35,204 - INFO -   aggregated_g_loss: 2.0833
2025-08-04 20:40:35,204 - INFO -   aggregated_d_loss: 0.8410
2025-08-04 20:40:35,204 - INFO -   fit_time_avg_seconds_all_reporting: 0.6997
2025-08-04 20:40:35,205 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:40:41,247 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:40:41,247 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.4846789836883545, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8053212199870214, 'avg_anomaly_score': 0.4200059575903754, 'recall': 0.6925223214285714, 'eval_time_seconds': 0.03590059280395508, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7210599721059973, 'precision': 0.962015503875969}
2025-08-04 20:40:41,247 - INFO - [Round 86, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:40:41,248 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 86.
2025-08-04 20:40:41,248 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 86.
2025-08-04 20:40:41,248 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 86.
2025-08-04 20:40:41,248 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 86.
2025-08-04 20:40:41,248 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 86.
2025-08-04 20:40:41,248 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 86.
2025-08-04 20:40:41,249 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 86.
2025-08-04 20:40:41,249 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 86.
2025-08-04 20:40:41,249 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 86.
2025-08-04 20:40:41,249 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 86.
2025-08-04 20:40:41,254 - INFO - [Round 86, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:40:41,257 - INFO - ==================================================
2025-08-04 20:40:41,257 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:40:41,257 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:40:41,257 - INFO - ==================================================
2025-08-04 20:40:41,258 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:40:41,258 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4197
2025-08-04 20:40:41,258 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:40:41,258 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:40:41,258 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:40:41,258 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:40:41,258 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:40:41,258 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0400) - ResourceCost(0.4400) = -0.4798
2025-08-04 20:40:41,258 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 86.
2025-08-04 20:40:41,259 - INFO -   Final Global Reward for action: -0.4798. Client states at selection: {'17456602372862189643': (7, 0, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8)}
2025-08-04 20:40:41,259 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.4400
2025-08-04 20:40:41,259 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:40:41,259 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:40:41,259 - INFO -       State(s): (7, 0, 0, 8, 8) -> NextState(s'): (7, 1, 0, 8, 8)
2025-08-04 20:40:41,259 - INFO -       Q(s) updated from 0.0000 to -0.0048 (TotalReward: -0.4798, NextMaxQ: 0.0000)
2025-08-04 20:40:41,260 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:40:41,260 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:40:41,260 - INFO -       Q(s) updated from -0.0020 to -0.0068 (TotalReward: -0.4798, NextMaxQ: 0.0000)
2025-08-04 20:40:41,260 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:40:41,261 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:40:41,261 - INFO -       Q(s) updated from -0.0020 to -0.0069 (TotalReward: -0.4798, NextMaxQ: -0.0068)
2025-08-04 20:40:41,261 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:40:41,261 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:40:41,261 - INFO -       Q(s) updated from -0.0020 to -0.0068 (TotalReward: -0.4798, NextMaxQ: -0.0020)
2025-08-04 20:40:41,262 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:40:41,262 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:40:41,262 - INFO -       Q(s) updated from -0.0068 to -0.0116 (TotalReward: -0.4798, NextMaxQ: -0.0068)
2025-08-04 20:40:41,263 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:40:41,263 - INFO - 
2025-08-04 20:40:41,263 - INFO - [ROUND 87]
2025-08-04 20:40:41,263 - INFO - [RLAgent choose_actions_softmax] Round 87. Temperature: 0.6564
2025-08-04 20:40:41,264 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:40:41,264 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007916158662910126, '5975185251685626785': 0.0, '8560019474512340676': -0.01161859992006791, '12043264814094380418': -0.007916158662910126, '4296149388320225194': -0.007916158662910126, '15388649110162717160': -0.01161859992006791, '2395859185497387824': 0.024708700013415415, '10913316872057236365': -0.007916158662910126, '6587436948557123441': -0.006787351555181585, '17456602372862189643': 0.0}
2025-08-04 20:40:41,264 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09934727900360568), '5975185251685626785': np.float64(0.10055273848688555), '8560019474512340676': np.float64(0.0987884481470202), '12043264814094380418': np.float64(0.09934727900360568), '4296149388320225194': np.float64(0.09934727900360568), '15388649110162717160': np.float64(0.0987884481470202), '2395859185497387824': np.float64(0.10441022633443572), '10913316872057236365': np.float64(0.09934727900360568), '6587436948557123441': np.float64(0.09951828438332999), '17456602372862189643': np.float64(0.10055273848688555)}
2025-08-04 20:40:41,265 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:40:41,265 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '2395859185497387824', '17456602372862189643']
2025-08-04 20:40:41,265 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '2395859185497387824', '17456602372862189643']
2025-08-04 20:40:41,268 - INFO -   New temperature for next round: 0.6531
2025-08-04 20:40:41,268 - INFO -   Final selected CIDs to return: ['5975185251685626785', '2395859185497387824', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 2, 1, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 20:40:41,268 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:40:50,288 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:40:50,288 - INFO - [Round 87, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:40:50,293 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:40:50,293 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.67
2025-08-04 20:40:50,293 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0842, Aggregated D_Loss=0.8348 from 3 clients (2079 examples)
2025-08-04 20:40:50,293 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.64s across 3 clients
2025-08-04 20:40:50,293 - INFO - Fit phase aggregation: Summary
2025-08-04 20:40:50,294 - INFO -   fit_clients_total_received: 3
2025-08-04 20:40:50,294 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:40:50,294 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:40:50,294 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:40:50,294 - INFO -   allocated_cores_avg_per_client: 3.6667
2025-08-04 20:40:50,294 - INFO -   aggregated_g_loss: 2.0842
2025-08-04 20:40:50,294 - INFO -   aggregated_d_loss: 0.8348
2025-08-04 20:40:50,294 - INFO -   fit_time_avg_seconds_all_reporting: 0.6391
2025-08-04 20:40:50,295 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:40:56,335 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:40:56,335 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.48121424913406374, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8087932218914586, 'avg_anomaly_score': 0.4235159417427953, 'recall': 0.690923317683881, 'eval_time_seconds': 0.04793834686279297, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.723326706428098, 'precision': 0.9751518498067366}
2025-08-04 20:40:56,335 - INFO - [Round 87, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:40:56,335 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 87.
2025-08-04 20:40:56,335 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 87.
2025-08-04 20:40:56,336 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 87.
2025-08-04 20:40:56,336 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 87.
2025-08-04 20:40:56,336 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 87.
2025-08-04 20:40:56,336 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 87.
2025-08-04 20:40:56,336 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 87.
2025-08-04 20:40:56,337 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 87.
2025-08-04 20:40:56,337 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 87.
2025-08-04 20:40:56,337 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 87.
2025-08-04 20:40:56,341 - INFO - [Round 87, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:40:56,345 - INFO - ==================================================
2025-08-04 20:40:56,346 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:40:56,346 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:40:56,346 - INFO - ==================================================
2025-08-04 20:40:56,346 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:40:56,346 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4237
2025-08-04 20:40:56,347 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:40:56,347 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:40:56,347 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:40:56,347 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:40:56,347 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:40:56,347 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0100) - ResourceCost(0.2200) = -0.2300
2025-08-04 20:40:56,347 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 87.
2025-08-04 20:40:56,347 - INFO -   Final Global Reward for action: -0.2300. Client states at selection: {'5975185251685626785': (8, 2, 1, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 20:40:56,348 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0100, Resource Cost: 0.2200
2025-08-04 20:40:56,348 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:40:56,348 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:40:56,348 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:40:56,348 - INFO -       Q(s) updated from 0.0000 to -0.0023 (TotalReward: -0.2300, NextMaxQ: 0.0000)
2025-08-04 20:40:56,348 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:40:56,349 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:40:56,349 - INFO -       Q(s) updated from 0.0247 to 0.0224 (TotalReward: -0.2300, NextMaxQ: 0.0247)
2025-08-04 20:40:56,349 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:40:56,349 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 20:40:56,349 - INFO -       Q(s) updated from 0.0000 to -0.0023 (TotalReward: -0.2300, NextMaxQ: 0.0000)
2025-08-04 20:40:56,350 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:40:56,350 - INFO - 
2025-08-04 20:40:56,350 - INFO - [ROUND 88]
2025-08-04 20:40:56,350 - INFO - [RLAgent choose_actions_softmax] Round 88. Temperature: 0.6531
2025-08-04 20:40:56,351 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:40:56,351 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007916158662910126, '5975185251685626785': 0.0, '8560019474512340676': 0.022384029467504965, '12043264814094380418': -0.007916158662910126, '4296149388320225194': -0.007916158662910126, '15388649110162717160': 0.022384029467504965, '2395859185497387824': 0.022384029467504965, '10913316872057236365': -0.007916158662910126, '6587436948557123441': -0.006787351555181585, '17456602372862189643': 0.0}
2025-08-04 20:40:56,351 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09834206697681008), '5975185251685626785': np.float64(0.09954136212369097), '8560019474512340676': np.float64(0.10301227146215837), '12043264814094380418': np.float64(0.09834206697681008), '4296149388320225194': np.float64(0.09834206697681008), '15388649110162717160': np.float64(0.10301227146215837), '2395859185497387824': np.float64(0.10301227146215837), '10913316872057236365': np.float64(0.09834206697681008), '6587436948557123441': np.float64(0.09851219345890265), '17456602372862189643': np.float64(0.09954136212369097)}
2025-08-04 20:40:56,351 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:40:56,352 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:40:56,352 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:40:56,355 - INFO -   New temperature for next round: 0.6498
2025-08-04 20:40:56,355 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8)}
2025-08-04 20:40:56,355 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:41:05,377 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:41:05,378 - INFO - [Round 88, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:41:05,382 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:41:05,382 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:41:05,382 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0842, Aggregated D_Loss=0.8339 from 3 clients (1972 examples)
2025-08-04 20:41:05,383 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.60s across 3 clients
2025-08-04 20:41:05,383 - INFO - Fit phase aggregation: Summary
2025-08-04 20:41:05,383 - INFO -   fit_clients_total_received: 3
2025-08-04 20:41:05,383 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:41:05,383 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:41:05,383 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:41:05,383 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:41:05,383 - INFO -   aggregated_g_loss: 2.0842
2025-08-04 20:41:05,384 - INFO -   aggregated_d_loss: 0.8339
2025-08-04 20:41:05,384 - INFO -   fit_time_avg_seconds_all_reporting: 0.5982
2025-08-04 20:41:05,384 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:41:11,430 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:41:11,430 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.4368744492530823, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8066190785204412, 'avg_anomaly_score': 0.3928280718267823, 'recall': 0.6936383928571429, 'eval_time_seconds': 0.03202509880065918, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7229195722919572, 'precision': 0.9635658914728682}
2025-08-04 20:41:11,430 - INFO - [Round 88, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:41:11,430 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 88.
2025-08-04 20:41:11,431 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 88.
2025-08-04 20:41:11,436 - INFO - [Round 88, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:41:11,440 - INFO - ==================================================
2025-08-04 20:41:11,440 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:41:11,440 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:41:11,440 - INFO - ==================================================
2025-08-04 20:41:11,440 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:41:11,440 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3925
2025-08-04 20:41:11,440 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:41:11,441 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:41:11,441 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:41:11,441 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:41:11,441 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:41:11,441 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0300) - ResourceCost(0.3600) = -0.3900
2025-08-04 20:41:11,441 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 88.
2025-08-04 20:41:11,441 - INFO -   Final Global Reward for action: -0.3900. Client states at selection: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8)}
2025-08-04 20:41:11,442 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0300, Resource Cost: 0.3600
2025-08-04 20:41:11,442 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:41:11,442 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:41:11,442 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:41:11,442 - INFO -       Q(s) updated from 0.0224 to 0.0185 (TotalReward: -0.3900, NextMaxQ: 0.0224)
2025-08-04 20:41:11,443 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:41:11,443 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:41:11,443 - INFO -       Q(s) updated from 0.0185 to 0.0145 (TotalReward: -0.3900, NextMaxQ: 0.0185)
2025-08-04 20:41:11,443 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:41:11,444 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:41:11,444 - INFO -       Q(s) updated from 0.0145 to 0.0106 (TotalReward: -0.3900, NextMaxQ: 0.0145)
2025-08-04 20:41:11,444 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:41:11,445 - INFO - 
2025-08-04 20:41:11,445 - INFO - [ROUND 89]
2025-08-04 20:41:11,445 - INFO - [RLAgent choose_actions_softmax] Round 89. Temperature: 0.6498
2025-08-04 20:41:11,446 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:11,446 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007916158662910126, '5975185251685626785': 0.0, '8560019474512340676': 0.01062864060880682, '12043264814094380418': -0.007916158662910126, '4296149388320225194': -0.007916158662910126, '15388649110162717160': 0.01062864060880682, '2395859185497387824': 0.01062864060880682, '10913316872057236365': -0.007916158662910126, '6587436948557123441': -0.006787351555181585, '17456602372862189643': 0.0}
2025-08-04 20:41:11,446 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09888162702482522), '5975185251685626785': np.float64(0.10009359883176804), '8560019474512340676': np.float64(0.10174424899248241), '12043264814094380418': np.float64(0.09888162702482522), '4296149388320225194': np.float64(0.09888162702482522), '15388649110162717160': np.float64(0.10174424899248241), '2395859185497387824': np.float64(0.10174424899248241), '10913316872057236365': np.float64(0.09888162702482522), '6587436948557123441': np.float64(0.0990535472597157), '17456602372862189643': np.float64(0.10009359883176804)}
2025-08-04 20:41:11,447 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:41:11,447 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:41:11,447 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:41:11,451 - INFO -   New temperature for next round: 0.6466
2025-08-04 20:41:11,451 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 3, 1, 8, 8), '8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:41:11,451 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:41:17,485 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:41:17,485 - INFO - [Round 89, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:41:17,492 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:41:17,492 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.80
2025-08-04 20:41:17,492 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0845, Aggregated D_Loss=0.8366 from 5 clients (2171 examples)
2025-08-04 20:41:17,493 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.47s across 5 clients
2025-08-04 20:41:17,493 - INFO - Fit phase aggregation: Summary
2025-08-04 20:41:17,493 - INFO -   fit_clients_total_received: 5
2025-08-04 20:41:17,493 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:41:17,493 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:41:17,493 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:41:17,494 - INFO -   allocated_cores_avg_per_client: 4.8000
2025-08-04 20:41:17,494 - INFO -   aggregated_g_loss: 2.0845
2025-08-04 20:41:17,494 - INFO -   aggregated_d_loss: 0.8366
2025-08-04 20:41:17,494 - INFO -   fit_time_avg_seconds_all_reporting: 0.4687
2025-08-04 20:41:17,495 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:41:23,538 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:41:23,538 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.43275314569473267, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8066190785204412, 'avg_anomaly_score': 0.397033272178602, 'recall': 0.6936383928571429, 'eval_time_seconds': 0.031217336654663086, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7229195722919572, 'precision': 0.9635658914728682}
2025-08-04 20:41:23,538 - INFO - [Round 89, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:41:23,538 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 89.
2025-08-04 20:41:23,538 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 89.
2025-08-04 20:41:23,539 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 89.
2025-08-04 20:41:23,539 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 89.
2025-08-04 20:41:23,539 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 89.
2025-08-04 20:41:23,539 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 89.
2025-08-04 20:41:23,539 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 89.
2025-08-04 20:41:23,540 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 89.
2025-08-04 20:41:23,540 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 89.
2025-08-04 20:41:23,540 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 89.
2025-08-04 20:41:23,544 - INFO - [Round 89, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:41:23,548 - INFO - ==================================================
2025-08-04 20:41:23,548 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:41:23,548 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:41:23,548 - INFO - ==================================================
2025-08-04 20:41:23,548 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:41:23,548 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3967
2025-08-04 20:41:23,549 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:41:23,549 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:41:23,549 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:41:23,549 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:41:23,549 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:41:23,549 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0400) - ResourceCost(0.4800) = -0.5200
2025-08-04 20:41:23,549 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 89.
2025-08-04 20:41:23,549 - INFO -   Final Global Reward for action: -0.5200. Client states at selection: {'5975185251685626785': (8, 3, 1, 8, 8), '8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:41:23,550 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0400, Resource Cost: 0.4800
2025-08-04 20:41:23,550 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:41:23,550 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:41:23,550 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:41:23,550 - INFO -       Q(s) updated from 0.0000 to -0.0052 (TotalReward: -0.5200, NextMaxQ: 0.0000)
2025-08-04 20:41:23,551 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:41:23,551 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:41:23,551 - INFO -       Q(s) updated from 0.0106 to 0.0052 (TotalReward: -0.5200, NextMaxQ: -0.0116)
2025-08-04 20:41:23,551 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:41:23,551 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:41:23,552 - INFO -       Q(s) updated from 0.0052 to -0.0001 (TotalReward: -0.5200, NextMaxQ: -0.0116)
2025-08-04 20:41:23,552 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:41:23,552 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:41:23,552 - INFO -       Q(s) updated from -0.0001 to -0.0054 (TotalReward: -0.5200, NextMaxQ: -0.0116)
2025-08-04 20:41:23,553 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:41:23,553 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:41:23,553 - INFO -       Q(s) updated from 0.0000 to -0.0052 (TotalReward: -0.5200, NextMaxQ: 0.0000)
2025-08-04 20:41:23,554 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:41:23,554 - INFO - 
2025-08-04 20:41:23,554 - INFO - [ROUND 90]
2025-08-04 20:41:23,555 - INFO - [RLAgent choose_actions_softmax] Round 90. Temperature: 0.6466
2025-08-04 20:41:23,555 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:23,555 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.005200000000000001, '8560019474512340676': -0.01161859992006791, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': -0.01161859992006791, '2395859185497387824': -0.01161859992006791, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.006787351555181585, '17456602372862189643': 0.0}
2025-08-04 20:41:23,566 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09998691968145552), '5975185251685626785': np.float64(0.10041055757044806), '8560019474512340676': np.float64(0.09941868225158319), '12043264814094380418': np.float64(0.09998691968145552), '4296149388320225194': np.float64(0.09998691968145552), '15388649110162717160': np.float64(0.09941868225158319), '2395859185497387824': np.float64(0.09941868225158319), '10913316872057236365': np.float64(0.09998691968145552), '6587436948557123441': np.float64(0.10016434467205498), '17456602372862189643': np.float64(0.10122137227692529)}
2025-08-04 20:41:23,566 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:41:23,567 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:23,567 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:23,570 - INFO -   New temperature for next round: 0.6433
2025-08-04 20:41:23,570 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 3, 1, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:41:23,570 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:41:29,593 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:41:29,593 - INFO - [Round 90, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:41:29,606 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:41:29,606 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 20:41:29,606 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0821, Aggregated D_Loss=0.8336 from 3 clients (341 examples)
2025-08-04 20:41:29,607 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.22s across 3 clients
2025-08-04 20:41:29,607 - INFO - Fit phase aggregation: Summary
2025-08-04 20:41:29,607 - INFO -   fit_clients_total_received: 3
2025-08-04 20:41:29,607 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:41:29,607 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:41:29,607 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:41:29,607 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 20:41:29,607 - INFO -   aggregated_g_loss: 2.0821
2025-08-04 20:41:29,607 - INFO -   aggregated_d_loss: 0.8336
2025-08-04 20:41:29,608 - INFO -   fit_time_avg_seconds_all_reporting: 0.2239
2025-08-04 20:41:29,608 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:41:35,654 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:41:35,654 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.5005820989608765, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.818489289740699, 'avg_anomaly_score': 0.43652056657498883, 'recall': 0.7048543689320388, 'eval_time_seconds': 0.028262615203857422, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7403225806451613, 'precision': 0.9758064516129032}
2025-08-04 20:41:35,655 - INFO - [Round 90, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:41:35,655 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 90.
2025-08-04 20:41:35,655 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 90.
2025-08-04 20:41:35,655 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 90.
2025-08-04 20:41:35,655 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 90.
2025-08-04 20:41:35,656 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 90.
2025-08-04 20:41:35,656 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 90.
2025-08-04 20:41:35,656 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 90.
2025-08-04 20:41:35,656 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 90.
2025-08-04 20:41:35,656 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 90.
2025-08-04 20:41:35,656 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 90.
2025-08-04 20:41:35,661 - INFO - [Round 90, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:41:35,665 - INFO - ==================================================
2025-08-04 20:41:35,665 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:41:35,665 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:41:35,665 - INFO - ==================================================
2025-08-04 20:41:35,666 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:41:35,666 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4402
2025-08-04 20:41:35,666 - INFO -   Global Accuracy (Wgtd Avg): 0.7246
2025-08-04 20:41:35,666 - INFO -   Global F1 Score (Wgtd Avg): 0.8091
2025-08-04 20:41:35,666 - INFO -   Global Precision (Wgtd Avg): 0.9731
2025-08-04 20:41:35,666 - INFO -   Global Recall (Wgtd Avg): 0.6925
2025-08-04 20:41:35,666 - INFO -   Avg Eval Time per Client: 0.03s
2025-08-04 20:41:35,666 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0007) - FairPenalty(0.0200) - ResourceCost(0.1800) = -0.2007
2025-08-04 20:41:35,667 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 90.
2025-08-04 20:41:35,667 - INFO -   Final Global Reward for action: -0.2007. Client states at selection: {'5975185251685626785': (8, 3, 1, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:41:35,667 - INFO -   Performance Reward: -0.0007, Fairness Penalty: 0.0200, Resource Cost: 0.1800
2025-08-04 20:41:35,667 - INFO -   Next round's global F1 (for next state Q-val): 0.8091
2025-08-04 20:41:35,667 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:41:35,667 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:41:35,667 - INFO -       Q(s) updated from -0.0052 to -0.0072 (TotalReward: -0.2007, NextMaxQ: 0.0000)
2025-08-04 20:41:35,668 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:41:35,668 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:41:35,668 - INFO -       Q(s) updated from -0.0068 to -0.0087 (TotalReward: -0.2007, NextMaxQ: -0.0023)
2025-08-04 20:41:35,668 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:41:35,668 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:41:35,668 - INFO -       Q(s) updated from 0.0000 to -0.0020 (TotalReward: -0.2007, NextMaxQ: 0.0000)
2025-08-04 20:41:35,669 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:41:35,669 - INFO - 
2025-08-04 20:41:35,670 - INFO - [ROUND 91]
2025-08-04 20:41:35,670 - INFO - [RLAgent choose_actions_softmax] Round 91. Temperature: 0.6433
2025-08-04 20:41:35,670 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:35,670 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': 0.0, '8560019474512340676': -0.005442136278518694, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': -0.005442136278518694, '2395859185497387824': -0.005442136278518694, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.002299961845897036, '17456602372862189643': 0.0}
2025-08-04 20:41:35,674 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09954950108173931), '5975185251685626785': np.float64(0.10078476753882933), '8560019474512340676': np.float64(0.09993578863554316), '12043264814094380418': np.float64(0.09954950108173931), '4296149388320225194': np.float64(0.09954950108173931), '15388649110162717160': np.float64(0.09993578863554316), '2395859185497387824': np.float64(0.09993578863554316), '10913316872057236365': np.float64(0.09954950108173931), '6587436948557123441': np.float64(0.1004250946887546), '17456602372862189643': np.float64(0.10078476753882933)}
2025-08-04 20:41:35,674 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:41:35,674 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:35,675 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:35,678 - INFO -   New temperature for next round: 0.6401
2025-08-04 20:41:35,678 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 4, 1, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:41:35,678 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:41:44,698 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:41:44,698 - INFO - [Round 91, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:41:44,702 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:41:44,703 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 20:41:44,703 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0832, Aggregated D_Loss=0.8280 from 3 clients (344 examples)
2025-08-04 20:41:44,703 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.24s across 3 clients
2025-08-04 20:41:44,703 - INFO - Fit phase aggregation: Summary
2025-08-04 20:41:44,703 - INFO -   fit_clients_total_received: 3
2025-08-04 20:41:44,703 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:41:44,703 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:41:44,703 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:41:44,704 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 20:41:44,704 - INFO -   aggregated_g_loss: 2.0832
2025-08-04 20:41:44,704 - INFO -   aggregated_d_loss: 0.8280
2025-08-04 20:41:44,704 - INFO -   fit_time_avg_seconds_all_reporting: 0.2372
2025-08-04 20:41:44,704 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:41:53,746 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:41:53,746 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.49527754783630373, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8092512021983055, 'avg_anomaly_score': 0.4300188591260638, 'recall': 0.6913145539906104, 'eval_time_seconds': 0.04575991630554199, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7239893969516236, 'precision': 0.9757040309221424}
2025-08-04 20:41:53,747 - INFO - [Round 91, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:41:53,747 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 91.
2025-08-04 20:41:53,747 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 91.
2025-08-04 20:41:53,747 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 91.
2025-08-04 20:41:53,747 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 91.
2025-08-04 20:41:53,747 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 91.
2025-08-04 20:41:53,748 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 91.
2025-08-04 20:41:53,748 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 91.
2025-08-04 20:41:53,748 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 91.
2025-08-04 20:41:53,748 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 91.
2025-08-04 20:41:53,748 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 91.
2025-08-04 20:41:53,753 - INFO - [Round 91, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:41:53,758 - INFO - ==================================================
2025-08-04 20:41:53,758 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:41:53,758 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:41:53,758 - INFO - ==================================================
2025-08-04 20:41:53,758 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:41:53,758 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4302
2025-08-04 20:41:53,758 - INFO -   Global Accuracy (Wgtd Avg): 0.7251
2025-08-04 20:41:53,759 - INFO -   Global F1 Score (Wgtd Avg): 0.8095
2025-08-04 20:41:53,759 - INFO -   Global Precision (Wgtd Avg): 0.9735
2025-08-04 20:41:53,759 - INFO -   Global Recall (Wgtd Avg): 0.6928
2025-08-04 20:41:53,759 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:41:53,759 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0400) - ResourceCost(0.1800) = -0.2197
2025-08-04 20:41:53,759 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 91.
2025-08-04 20:41:53,759 - INFO -   Final Global Reward for action: -0.2197. Client states at selection: {'5975185251685626785': (8, 4, 1, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:41:53,759 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0400, Resource Cost: 0.1800
2025-08-04 20:41:53,759 - INFO -   Next round's global F1 (for next state Q-val): 0.8095
2025-08-04 20:41:53,760 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:41:53,760 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:41:53,760 - INFO -       Q(s) updated from 0.0000 to -0.0022 (TotalReward: -0.2197, NextMaxQ: 0.0000)
2025-08-04 20:41:53,760 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:41:53,761 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:41:53,761 - INFO -       Q(s) updated from -0.0023 to -0.0045 (TotalReward: -0.2197, NextMaxQ: -0.0023)
2025-08-04 20:41:53,761 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:41:53,762 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:41:53,762 - INFO -       Q(s) updated from 0.0000 to -0.0022 (TotalReward: -0.2197, NextMaxQ: 0.0000)
2025-08-04 20:41:53,763 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:41:53,763 - INFO - 
2025-08-04 20:41:53,763 - INFO - [ROUND 92]
2025-08-04 20:41:53,764 - INFO - [RLAgent choose_actions_softmax] Round 92. Temperature: 0.6401
2025-08-04 20:41:53,764 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:41:53,764 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.002196858218403961, '8560019474512340676': 0.04698243236043225, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': 0.04698243236043225, '2395859185497387824': -0.005442136278518694, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.0044945201024551, '17456602372862189643': -0.002196858218403961}
2025-08-04 20:41:53,765 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09797725568776781), '5975185251685626785': np.float64(0.09885929221643595), '8560019474512340676': np.float64(0.10675398057042629), '12043264814094380418': np.float64(0.09797725568776781), '4296149388320225194': np.float64(0.09797725568776781), '15388649110162717160': np.float64(0.10675398057042629), '2395859185497387824': np.float64(0.09835935657230338), '10913316872057236365': np.float64(0.09797725568776781), '6587436948557123441': np.float64(0.09850507510290084), '17456602372862189643': np.float64(0.09885929221643595)}
2025-08-04 20:41:53,765 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:41:53,765 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:41:53,765 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:41:53,768 - INFO -   New temperature for next round: 0.6369
2025-08-04 20:41:53,768 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8)}
2025-08-04 20:41:53,769 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:41:59,786 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:41:59,786 - INFO - [Round 92, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:41:59,790 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:41:59,790 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:41:59,790 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0852, Aggregated D_Loss=0.8619 from 2 clients (40 examples)
2025-08-04 20:41:59,790 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.14s across 2 clients
2025-08-04 20:41:59,790 - INFO - Fit phase aggregation: Summary
2025-08-04 20:41:59,791 - INFO -   fit_clients_total_received: 2
2025-08-04 20:41:59,791 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:41:59,791 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:41:59,791 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:41:59,791 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:41:59,791 - INFO -   aggregated_g_loss: 2.0852
2025-08-04 20:41:59,791 - INFO -   aggregated_d_loss: 0.8619
2025-08-04 20:41:59,792 - INFO -   fit_time_avg_seconds_all_reporting: 0.1427
2025-08-04 20:41:59,792 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:42:08,849 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:42:08,849 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.44557857513427734, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8053212199870214, 'avg_anomaly_score': 0.3945774118438093, 'recall': 0.6925223214285714, 'eval_time_seconds': 0.034028053283691406, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7210599721059973, 'precision': 0.962015503875969}
2025-08-04 20:42:08,850 - INFO - [Round 92, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:42:08,850 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 92.
2025-08-04 20:42:08,850 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 92.
2025-08-04 20:42:08,850 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 92.
2025-08-04 20:42:08,850 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 92.
2025-08-04 20:42:08,850 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 92.
2025-08-04 20:42:08,850 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 92.
2025-08-04 20:42:08,851 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 92.
2025-08-04 20:42:08,851 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 92.
2025-08-04 20:42:08,851 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 92.
2025-08-04 20:42:08,851 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 92.
2025-08-04 20:42:08,856 - INFO - [Round 92, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:42:08,859 - INFO - ==================================================
2025-08-04 20:42:08,859 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:42:08,859 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:42:08,859 - INFO - ==================================================
2025-08-04 20:42:08,859 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:42:08,859 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3946
2025-08-04 20:42:08,860 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:42:08,860 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:42:08,860 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:42:08,860 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:42:08,860 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:42:08,860 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.2598
2025-08-04 20:42:08,860 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 92.
2025-08-04 20:42:08,860 - INFO -   Final Global Reward for action: -0.2598. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8)}
2025-08-04 20:42:08,860 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 20:42:08,861 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:42:08,861 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:42:08,861 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:42:08,861 - INFO -       Q(s) updated from 0.0470 to 0.0439 (TotalReward: -0.2598, NextMaxQ: -0.0054)
2025-08-04 20:42:08,861 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:42:08,861 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:42:08,861 - INFO -       Q(s) updated from 0.0439 to 0.0408 (TotalReward: -0.2598, NextMaxQ: -0.0054)
2025-08-04 20:42:08,862 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:42:08,862 - INFO - 
2025-08-04 20:42:08,862 - INFO - [ROUND 93]
2025-08-04 20:42:08,862 - INFO - [RLAgent choose_actions_softmax] Round 93. Temperature: 0.6369
2025-08-04 20:42:08,863 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:42:08,863 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.0071547437473192255, '8560019474512340676': -0.005442136278518694, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': -0.005442136278518694, '2395859185497387824': 0.040779018587805006, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.0044945201024551, '17456602372862189643': -0.0020067437473192252}
2025-08-04 20:42:08,863 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09897746534759934), '5975185251685626785': np.float64(0.09909858247344906), '8560019474512340676': np.float64(0.09936541044339449), '12043264814094380418': np.float64(0.09897746534759934), '4296149388320225194': np.float64(0.09897746534759934), '15388649110162717160': np.float64(0.09936541044339449), '2395859185497387824': np.float64(0.1068445554620599), '10913316872057236365': np.float64(0.09897746534759934), '6587436948557123441': np.float64(0.09951335972699919), '17456602372862189643': np.float64(0.09990282006030547)}
2025-08-04 20:42:08,863 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:42:08,864 - INFO -     Selected 1 CIDs with this factor: ['2395859185497387824']
2025-08-04 20:42:08,864 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824']
2025-08-04 20:42:08,867 - INFO -   New temperature for next round: 0.6337
2025-08-04 20:42:08,868 - INFO -   Final selected CIDs to return: ['2395859185497387824']. Corresponding states: {'2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:42:08,868 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:42:17,881 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:42:17,882 - INFO - [Round 93, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:42:17,884 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:42:17,884 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:42:17,884 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0847, Aggregated D_Loss=0.8362 from 1 clients (2038 examples)
2025-08-04 20:42:17,885 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.57s across 1 clients
2025-08-04 20:42:17,885 - INFO - Fit phase aggregation: Summary
2025-08-04 20:42:17,885 - INFO -   fit_clients_total_received: 1
2025-08-04 20:42:17,885 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:42:17,885 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:42:17,885 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:42:17,885 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:42:17,885 - INFO -   aggregated_g_loss: 2.0847
2025-08-04 20:42:17,885 - INFO -   aggregated_d_loss: 0.8362
2025-08-04 20:42:17,885 - INFO -   fit_time_avg_seconds_all_reporting: 1.5724
2025-08-04 20:42:17,886 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:42:26,933 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:42:26,933 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.46275060176849364, 'profile_name': 'Low-End IoT', 'f1_score': 0.7843137254901961, 'avg_anomaly_score': 0.4292147818065825, 'recall': 0.6666666666666666, 'eval_time_seconds': 0.00855565071105957, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6857142857142857, 'precision': 0.9523809523809523}
2025-08-04 20:42:26,934 - INFO - [Round 93, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:42:26,934 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 93.
2025-08-04 20:42:26,934 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 93.
2025-08-04 20:42:26,934 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 93.
2025-08-04 20:42:26,934 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 93.
2025-08-04 20:42:26,934 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 93.
2025-08-04 20:42:26,934 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 93.
2025-08-04 20:42:26,935 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 93.
2025-08-04 20:42:26,935 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 93.
2025-08-04 20:42:26,935 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 93.
2025-08-04 20:42:26,935 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 93.
2025-08-04 20:42:26,940 - INFO - [Round 93, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:42:26,943 - INFO - ==================================================
2025-08-04 20:42:26,943 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:42:26,943 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:42:26,943 - INFO - ==================================================
2025-08-04 20:42:26,943 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:42:26,943 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4121
2025-08-04 20:42:26,943 - INFO -   Global Accuracy (Wgtd Avg): 0.7251
2025-08-04 20:42:26,944 - INFO -   Global F1 Score (Wgtd Avg): 0.8095
2025-08-04 20:42:26,944 - INFO -   Global Precision (Wgtd Avg): 0.9735
2025-08-04 20:42:26,944 - INFO -   Global Recall (Wgtd Avg): 0.6928
2025-08-04 20:42:26,944 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:42:26,944 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0000) - ResourceCost(0.1000) = -0.1002
2025-08-04 20:42:26,944 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 93.
2025-08-04 20:42:26,944 - INFO -   Final Global Reward for action: -0.1002. Client states at selection: {'2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:42:26,944 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0000, Resource Cost: 0.1000
2025-08-04 20:42:26,945 - INFO -   Next round's global F1 (for next state Q-val): 0.8095
2025-08-04 20:42:26,945 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:42:26,945 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:42:26,945 - INFO -       Q(s) updated from 0.0408 to 0.0397 (TotalReward: -0.1002, NextMaxQ: 0.0408)
2025-08-04 20:42:26,946 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:42:26,946 - INFO - 
2025-08-04 20:42:26,946 - INFO - [ROUND 94]
2025-08-04 20:42:26,947 - INFO - [RLAgent choose_actions_softmax] Round 94. Temperature: 0.6337
2025-08-04 20:42:26,947 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:42:26,947 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.0071547437473192255, '8560019474512340676': 0.03973604098908284, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': 0.03973604098908284, '2395859185497387824': 0.03973604098908284, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.0044945201024551, '17456602372862189643': -0.0020067437473192252}
2025-08-04 20:42:26,947 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09755682454367436), '5975185251685626785': np.float64(0.09767680351512141), '8560019474512340676': np.float64(0.10517823582156621), '12043264814094380418': np.float64(0.09755682454367436), '4296149388320225194': np.float64(0.09755682454367436), '15388649110162717160': np.float64(0.10517823582156621), '2395859185497387824': np.float64(0.10517823582156621), '10913316872057236365': np.float64(0.09755682454367436), '6587436948557123441': np.float64(0.09808768862660619), '17456602372862189643': np.float64(0.09847350221887634)}
2025-08-04 20:42:26,948 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:42:26,948 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:42:26,948 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:42:26,952 - INFO -   New temperature for next round: 0.6306
2025-08-04 20:42:26,952 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:42:26,952 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:42:32,973 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:42:32,974 - INFO - [Round 94, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:42:32,978 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:42:32,978 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:42:32,979 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0844, Aggregated D_Loss=0.8287 from 3 clients (2097 examples)
2025-08-04 20:42:32,979 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.64s across 3 clients
2025-08-04 20:42:32,979 - INFO - Fit phase aggregation: Summary
2025-08-04 20:42:32,979 - INFO -   fit_clients_total_received: 3
2025-08-04 20:42:32,979 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:42:32,979 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:42:32,979 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:42:32,980 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:42:32,980 - INFO -   aggregated_g_loss: 2.0844
2025-08-04 20:42:32,980 - INFO -   aggregated_d_loss: 0.8287
2025-08-04 20:42:32,980 - INFO -   fit_time_avg_seconds_all_reporting: 0.6433
2025-08-04 20:42:32,981 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:42:42,027 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:42:42,027 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.4179029226303101, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.38125090227752434, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.009874343872070312, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:42:42,027 - INFO - [Round 94, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:42:42,027 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 94.
2025-08-04 20:42:42,027 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 94.
2025-08-04 20:42:42,028 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 94.
2025-08-04 20:42:42,028 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 94.
2025-08-04 20:42:42,028 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 94.
2025-08-04 20:42:42,028 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 94.
2025-08-04 20:42:42,028 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 94.
2025-08-04 20:42:42,028 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 94.
2025-08-04 20:42:42,029 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 94.
2025-08-04 20:42:42,029 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 94.
2025-08-04 20:42:42,033 - INFO - [Round 94, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:42:42,037 - INFO - ==================================================
2025-08-04 20:42:42,037 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:42:42,037 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:42:42,037 - INFO - ==================================================
2025-08-04 20:42:42,038 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:42:42,038 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3892
2025-08-04 20:42:42,038 - INFO -   Global Accuracy (Wgtd Avg): 0.7251
2025-08-04 20:42:42,038 - INFO -   Global F1 Score (Wgtd Avg): 0.8095
2025-08-04 20:42:42,038 - INFO -   Global Precision (Wgtd Avg): 0.9735
2025-08-04 20:42:42,038 - INFO -   Global Recall (Wgtd Avg): 0.6928
2025-08-04 20:42:42,038 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:42:42,038 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3600
2025-08-04 20:42:42,039 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 94.
2025-08-04 20:42:42,039 - INFO -   Final Global Reward for action: -0.3600. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:42:42,039 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:42:42,039 - INFO -   Next round's global F1 (for next state Q-val): 0.8095
2025-08-04 20:42:42,039 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:42:42,039 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:42:42,039 - INFO -       Q(s) updated from 0.0397 to 0.0361 (TotalReward: -0.3600, NextMaxQ: 0.0397)
2025-08-04 20:42:42,040 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:42:42,040 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:42:42,040 - INFO -       Q(s) updated from 0.0361 to 0.0325 (TotalReward: -0.3600, NextMaxQ: 0.0361)
2025-08-04 20:42:42,040 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:42:42,041 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:42:42,041 - INFO -       Q(s) updated from 0.0325 to 0.0288 (TotalReward: -0.3600, NextMaxQ: 0.0325)
2025-08-04 20:42:42,041 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:42:42,042 - INFO - 
2025-08-04 20:42:42,042 - INFO - [ROUND 95]
2025-08-04 20:42:42,042 - INFO - [RLAgent choose_actions_softmax] Round 95. Temperature: 0.6306
2025-08-04 20:42:42,042 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:42:42,042 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.0044945201024551, '8560019474512340676': 0.028827748434502514, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': 0.028827748434502514, '2395859185497387824': 0.028827748434502514, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.0044945201024551, '17456602372862189643': -0.005200000000000001}
2025-08-04 20:42:42,043 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09808362952270394), '5975185251685626785': np.float64(0.09862004964205162), '8560019474512340676': np.float64(0.10397186981435239), '12043264814094380418': np.float64(0.09808362952270394), '4296149388320225194': np.float64(0.09808362952270394), '15388649110162717160': np.float64(0.10397186981435239), '2395859185497387824': np.float64(0.10397186981435239), '10913316872057236365': np.float64(0.09808362952270394), '6587436948557123441': np.float64(0.09862004964205162), '17456602372862189643': np.float64(0.09850977318202377)}
2025-08-04 20:42:42,043 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:42:42,043 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:42:42,043 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:42:42,047 - INFO -   New temperature for next round: 0.6274
2025-08-04 20:42:42,047 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:42:42,047 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:42:51,068 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:42:51,069 - INFO - [Round 95, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:42:51,073 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:42:51,073 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:42:51,073 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0847, Aggregated D_Loss=0.8305 from 3 clients (2115 examples)
2025-08-04 20:42:51,073 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.64s across 3 clients
2025-08-04 20:42:51,074 - INFO - Fit phase aggregation: Summary
2025-08-04 20:42:51,074 - INFO -   fit_clients_total_received: 3
2025-08-04 20:42:51,074 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:42:51,074 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:42:51,074 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:42:51,074 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:42:51,074 - INFO -   aggregated_g_loss: 2.0847
2025-08-04 20:42:51,074 - INFO -   aggregated_d_loss: 0.8305
2025-08-04 20:42:51,074 - INFO -   fit_time_avg_seconds_all_reporting: 0.6447
2025-08-04 20:42:51,075 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:43:00,133 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:43:00,133 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.4318118095397949, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8066190785204412, 'avg_anomaly_score': 0.40825437504654427, 'recall': 0.6936383928571429, 'eval_time_seconds': 0.04445290565490723, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7229195722919572, 'precision': 0.9635658914728682}
2025-08-04 20:43:00,133 - INFO - [Round 95, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:43:00,134 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 95.
2025-08-04 20:43:00,134 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 95.
2025-08-04 20:43:00,134 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 95.
2025-08-04 20:43:00,134 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 95.
2025-08-04 20:43:00,134 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 95.
2025-08-04 20:43:00,134 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 95.
2025-08-04 20:43:00,135 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 95.
2025-08-04 20:43:00,135 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 95.
2025-08-04 20:43:00,135 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 95.
2025-08-04 20:43:00,135 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 95.
2025-08-04 20:43:00,140 - INFO - [Round 95, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:43:00,143 - INFO - ==================================================
2025-08-04 20:43:00,143 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:43:00,143 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:43:00,143 - INFO - ==================================================
2025-08-04 20:43:00,143 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:43:00,144 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4082
2025-08-04 20:43:00,144 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:43:00,144 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:43:00,144 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:43:00,144 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:43:00,144 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:43:00,144 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3598
2025-08-04 20:43:00,144 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 95.
2025-08-04 20:43:00,145 - INFO -   Final Global Reward for action: -0.3598. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:43:00,145 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:43:00,145 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:43:00,145 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:43:00,145 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:43:00,145 - INFO -       Q(s) updated from 0.0288 to 0.0249 (TotalReward: -0.3598, NextMaxQ: -0.0054)
2025-08-04 20:43:00,146 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:43:00,146 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:43:00,146 - INFO -       Q(s) updated from 0.0249 to 0.0210 (TotalReward: -0.3598, NextMaxQ: -0.0054)
2025-08-04 20:43:00,146 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:43:00,146 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:43:00,147 - INFO -       Q(s) updated from 0.0210 to 0.0171 (TotalReward: -0.3598, NextMaxQ: -0.0054)
2025-08-04 20:43:00,147 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:43:00,147 - INFO - 
2025-08-04 20:43:00,148 - INFO - [ROUND 96]
2025-08-04 20:43:00,148 - INFO - [RLAgent choose_actions_softmax] Round 96. Temperature: 0.6274
2025-08-04 20:43:00,148 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:00,148 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.008746921443562067, '8560019474512340676': -0.005442136278518694, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': -0.005442136278518694, '2395859185497387824': -0.005442136278518694, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.008746921443562067, '17456602372862189643': -0.002299961845897036}
2025-08-04 20:43:00,149 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09981667618468264), '5975185251685626785': np.float64(0.09968737174933841), '8560019474512340676': np.float64(0.10021385005440879), '12043264814094380418': np.float64(0.09981667618468264), '4296149388320225194': np.float64(0.09981667618468264), '15388649110162717160': np.float64(0.10021385005440879), '2395859185497387824': np.float64(0.10021385005440879), '10913316872057236365': np.float64(0.09981667618468264), '6587436948557123441': np.float64(0.09968737174933841), '17456602372862189643': np.float64(0.10071700159936622)}
2025-08-04 20:43:00,149 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:43:00,149 - INFO -     Selected 4 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:43:00,149 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:43:00,153 - INFO -   New temperature for next round: 0.6243
2025-08-04 20:43:00,153 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']. Corresponding states: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 20:43:00,153 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:43:06,181 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:43:06,181 - INFO - [Round 96, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:43:06,188 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:43:06,188 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:43:06,188 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0846, Aggregated D_Loss=0.8262 from 4 clients (2157 examples)
2025-08-04 20:43:06,188 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.53s across 4 clients
2025-08-04 20:43:06,188 - INFO - Fit phase aggregation: Summary
2025-08-04 20:43:06,189 - INFO -   fit_clients_total_received: 4
2025-08-04 20:43:06,189 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:43:06,189 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:43:06,189 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:43:06,189 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:43:06,189 - INFO -   aggregated_g_loss: 2.0846
2025-08-04 20:43:06,189 - INFO -   aggregated_d_loss: 0.8262
2025-08-04 20:43:06,189 - INFO -   fit_time_avg_seconds_all_reporting: 0.5299
2025-08-04 20:43:06,190 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:43:12,237 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:43:12,238 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4711082220077515, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.4370461300145025, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.01411581039428711, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:43:12,238 - INFO - [Round 96, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:43:12,238 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 96.
2025-08-04 20:43:12,238 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 96.
2025-08-04 20:43:12,238 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 96.
2025-08-04 20:43:12,238 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 96.
2025-08-04 20:43:12,238 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 96.
2025-08-04 20:43:12,239 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 96.
2025-08-04 20:43:12,239 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 96.
2025-08-04 20:43:12,239 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 96.
2025-08-04 20:43:12,239 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 96.
2025-08-04 20:43:12,239 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 96.
2025-08-04 20:43:12,244 - INFO - [Round 96, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:43:12,248 - INFO - ==================================================
2025-08-04 20:43:12,248 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:43:12,248 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:43:12,248 - INFO - ==================================================
2025-08-04 20:43:12,248 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:43:12,249 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4422
2025-08-04 20:43:12,249 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:43:12,249 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:43:12,249 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:43:12,249 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:43:12,249 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:43:12,249 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0300) - ResourceCost(0.4000) = -0.4300
2025-08-04 20:43:12,249 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 96.
2025-08-04 20:43:12,249 - INFO -   Final Global Reward for action: -0.4300. Client states at selection: {'8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '2395859185497387824': (8, 3, 2, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 20:43:12,250 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0300, Resource Cost: 0.4000
2025-08-04 20:43:12,250 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:43:12,250 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:43:12,250 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:43:12,250 - INFO -       Q(s) updated from -0.0054 to -0.0098 (TotalReward: -0.4300, NextMaxQ: -0.0116)
2025-08-04 20:43:12,251 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:43:12,251 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:43:12,251 - INFO -       Q(s) updated from -0.0098 to -0.0141 (TotalReward: -0.4300, NextMaxQ: -0.0116)
2025-08-04 20:43:12,251 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:43:12,251 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:43:12,251 - INFO -       Q(s) updated from -0.0141 to -0.0184 (TotalReward: -0.4300, NextMaxQ: -0.0116)
2025-08-04 20:43:12,252 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:43:12,252 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 1, 0, 8, 8)
2025-08-04 20:43:12,252 - INFO -       Q(s) updated from -0.0023 to -0.0066 (TotalReward: -0.4300, NextMaxQ: -0.0023)
2025-08-04 20:43:12,253 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:43:12,253 - INFO - 
2025-08-04 20:43:12,253 - INFO - [ROUND 97]
2025-08-04 20:43:12,254 - INFO - [RLAgent choose_actions_softmax] Round 97. Temperature: 0.6243
2025-08-04 20:43:12,254 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:12,254 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007933643548687745, '5975185251685626785': -0.006852830684692586, '8560019474512340676': -0.01161859992006791, '12043264814094380418': -0.007933643548687745, '4296149388320225194': -0.007933643548687745, '15388649110162717160': -0.01161859992006791, '2395859185497387824': -0.01161859992006791, '10913316872057236365': -0.007933643548687745, '6587436948557123441': -0.006852830684692586, '17456602372862189643': -0.006597661884051139}
2025-08-04 20:43:12,255 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10012062899150653), '5975185251685626785': np.float64(0.10029412112859055), '8560019474512340676': np.float64(0.09953137236396532), '12043264814094380418': np.float64(0.10012062899150653), '4296149388320225194': np.float64(0.10012062899150653), '15388649110162717160': np.float64(0.09953137236396532), '2395859185497387824': np.float64(0.09953137236396532), '10913316872057236365': np.float64(0.10012062899150653), '6587436948557123441': np.float64(0.10029412112859055), '17456602372862189643': np.float64(0.10033512468489678)}
2025-08-04 20:43:12,255 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:43:12,255 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:12,255 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:43:12,255 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643', '5975185251685626785', '6587436948557123441', '1640189632563049314', '12043264814094380418']
2025-08-04 20:43:12,259 - INFO -   New temperature for next round: 0.6211
2025-08-04 20:43:12,259 - INFO -   Final selected CIDs to return: ['17456602372862189643', '5975185251685626785', '6587436948557123441', '1640189632563049314', '12043264814094380418']. Corresponding states: {'17456602372862189643': (7, 1, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '1640189632563049314': (8, 0, 0, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8)}
2025-08-04 20:43:12,259 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:43:21,292 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:43:21,293 - INFO - [Round 97, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:43:21,301 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:43:21,301 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:43:21,301 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0847, Aggregated D_Loss=0.8270 from 5 clients (7014 examples)
2025-08-04 20:43:21,301 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.14s across 5 clients
2025-08-04 20:43:21,302 - INFO - Fit phase aggregation: Summary
2025-08-04 20:43:21,302 - INFO -   fit_clients_total_received: 5
2025-08-04 20:43:21,302 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:43:21,302 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:43:21,302 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:43:21,302 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:43:21,303 - INFO -   aggregated_g_loss: 2.0847
2025-08-04 20:43:21,303 - INFO -   aggregated_d_loss: 0.8270
2025-08-04 20:43:21,303 - INFO -   fit_time_avg_seconds_all_reporting: 1.1396
2025-08-04 20:43:21,304 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:43:27,349 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:43:27,349 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.44918696880340575, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.42427815796423785, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.013431787490844727, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:43:27,349 - INFO - [Round 97, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:43:27,349 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 97.
2025-08-04 20:43:27,349 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 97.
2025-08-04 20:43:27,350 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 97.
2025-08-04 20:43:27,350 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 97.
2025-08-04 20:43:27,350 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 97.
2025-08-04 20:43:27,350 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 97.
2025-08-04 20:43:27,350 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 97.
2025-08-04 20:43:27,351 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 97.
2025-08-04 20:43:27,351 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 97.
2025-08-04 20:43:27,351 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 97.
2025-08-04 20:43:27,356 - INFO - [Round 97, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:43:27,359 - INFO - ==================================================
2025-08-04 20:43:27,359 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:43:27,360 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:43:27,360 - INFO - ==================================================
2025-08-04 20:43:27,360 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:43:27,360 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4145
2025-08-04 20:43:27,360 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:43:27,360 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:43:27,360 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:43:27,361 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:43:27,361 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:43:27,361 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0000) - ResourceCost(0.2400) = -0.2400
2025-08-04 20:43:27,361 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 97.
2025-08-04 20:43:27,361 - INFO -   Final Global Reward for action: -0.2400. Client states at selection: {'17456602372862189643': (7, 1, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '1640189632563049314': (8, 0, 0, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8)}
2025-08-04 20:43:27,362 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0000, Resource Cost: 0.2400
2025-08-04 20:43:27,362 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:43:27,362 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:43:27,362 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 20:43:27,362 - INFO -       Q(s) updated from -0.0066 to -0.0090 (TotalReward: -0.2400, NextMaxQ: -0.0052)
2025-08-04 20:43:27,363 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:43:27,363 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:43:27,363 - INFO -       Q(s) updated from -0.0069 to -0.0093 (TotalReward: -0.2400, NextMaxQ: -0.0087)
2025-08-04 20:43:27,363 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:43:27,363 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:43:27,364 - INFO -       Q(s) updated from -0.0093 to -0.0116 (TotalReward: -0.2400, NextMaxQ: -0.0087)
2025-08-04 20:43:27,364 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:43:27,364 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:43:27,364 - INFO -       Q(s) updated from -0.0079 to -0.0103 (TotalReward: -0.2400, NextMaxQ: -0.0079)
2025-08-04 20:43:27,365 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:43:27,365 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:43:27,365 - INFO -       Q(s) updated from -0.0103 to -0.0127 (TotalReward: -0.2400, NextMaxQ: -0.0079)
2025-08-04 20:43:27,366 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:43:27,367 - INFO - 
2025-08-04 20:43:27,367 - INFO - [ROUND 98]
2025-08-04 20:43:27,367 - INFO - [RLAgent choose_actions_softmax] Round 98. Temperature: 0.6211
2025-08-04 20:43:27,367 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:27,367 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.007916158662910126, '5975185251685626785': -0.008746921443562067, '8560019474512340676': -0.018362505021513754, '12043264814094380418': -0.007916158662910126, '4296149388320225194': -0.012693542443721582, '15388649110162717160': -0.018362505021513754, '2395859185497387824': -0.01161859992006791, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.008746921443562067, '17456602372862189643': -0.005200000000000001}
2025-08-04 20:43:27,368 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10053193116485082), '5975185251685626785': np.float64(0.10039756271987506), '8560019474512340676': np.float64(0.09885533588189713), '12043264814094380418': np.float64(0.10053193116485082), '4296149388320225194': np.float64(0.09976168113584424), '15388649110162717160': np.float64(0.09885533588189713), '2395859185497387824': np.float64(0.0999344762575831), '10913316872057236365': np.float64(0.09976168113584424), '6587436948557123441': np.float64(0.10039756271987506), '17456602372862189643': np.float64(0.10097250193748247)}
2025-08-04 20:43:27,368 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:43:27,368 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:27,368 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:27,372 - INFO -   New temperature for next round: 0.6180
2025-08-04 20:43:27,373 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 1, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:43:27,373 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:43:39,399 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:43:39,399 - INFO - [Round 98, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:43:39,406 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:43:39,406 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:43:39,407 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0850, Aggregated D_Loss=0.8214 from 5 clients (7082 examples)
2025-08-04 20:43:39,407 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.15s across 5 clients
2025-08-04 20:43:39,407 - INFO - Fit phase aggregation: Summary
2025-08-04 20:43:39,407 - INFO -   fit_clients_total_received: 5
2025-08-04 20:43:39,407 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:43:39,407 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:43:39,407 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:43:39,407 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:43:39,407 - INFO -   aggregated_g_loss: 2.0850
2025-08-04 20:43:39,408 - INFO -   aggregated_d_loss: 0.8214
2025-08-04 20:43:39,408 - INFO -   fit_time_avg_seconds_all_reporting: 1.1488
2025-08-04 20:43:39,409 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:43:45,452 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:43:45,453 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.4849915862083435, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.4617717674293234, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.013125419616699219, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:43:45,453 - INFO - [Round 98, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:43:45,453 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 98.
2025-08-04 20:43:45,453 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 98.
2025-08-04 20:43:45,453 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 98.
2025-08-04 20:43:45,454 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 98.
2025-08-04 20:43:45,459 - INFO - [Round 98, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:43:45,463 - INFO - ==================================================
2025-08-04 20:43:45,463 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:43:45,463 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:43:45,463 - INFO - ==================================================
2025-08-04 20:43:45,463 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:43:45,463 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4512
2025-08-04 20:43:45,464 - INFO -   Global Accuracy (Wgtd Avg): 0.7251
2025-08-04 20:43:45,464 - INFO -   Global F1 Score (Wgtd Avg): 0.8095
2025-08-04 20:43:45,464 - INFO -   Global Precision (Wgtd Avg): 0.9735
2025-08-04 20:43:45,464 - INFO -   Global Recall (Wgtd Avg): 0.6928
2025-08-04 20:43:45,464 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:43:45,464 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0000) - ResourceCost(0.2400) = -0.2402
2025-08-04 20:43:45,464 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 98.
2025-08-04 20:43:45,464 - INFO -   Final Global Reward for action: -0.2402. Client states at selection: {'1640189632563049314': (8, 1, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:43:45,464 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0000, Resource Cost: 0.2400
2025-08-04 20:43:45,465 - INFO -   Next round's global F1 (for next state Q-val): 0.8095
2025-08-04 20:43:45,465 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:43:45,465 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:43:45,465 - INFO -       Q(s) updated from -0.0079 to -0.0102 (TotalReward: -0.2402, NextMaxQ: 0.0000)
2025-08-04 20:43:45,465 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:43:45,466 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:43:45,466 - INFO -       Q(s) updated from -0.0087 to -0.0111 (TotalReward: -0.2402, NextMaxQ: -0.0045)
2025-08-04 20:43:45,466 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:43:45,466 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:43:45,466 - INFO -       Q(s) updated from -0.0102 to -0.0125 (TotalReward: -0.2402, NextMaxQ: 0.0000)
2025-08-04 20:43:45,467 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:43:45,467 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:43:45,467 - INFO -       Q(s) updated from -0.0111 to -0.0134 (TotalReward: -0.2402, NextMaxQ: -0.0045)
2025-08-04 20:43:45,468 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:43:45,468 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:43:45,468 - INFO -       Q(s) updated from -0.0052 to -0.0076 (TotalReward: -0.2402, NextMaxQ: -0.0020)
2025-08-04 20:43:45,468 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:43:45,469 - INFO - 
2025-08-04 20:43:45,469 - INFO - [ROUND 99]
2025-08-04 20:43:45,469 - INFO - [RLAgent choose_actions_softmax] Round 99. Temperature: 0.6180
2025-08-04 20:43:45,470 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:45,470 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.0044945201024551, '8560019474512340676': -0.018362505021513754, '12043264814094380418': 0.0, '4296149388320225194': -0.012693542443721582, '15388649110162717160': -0.018362505021513754, '2395859185497387824': -0.018362505021513754, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.0044945201024551, '17456602372862189643': -0.0020067437473192252}
2025-08-04 20:43:45,470 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10148382269574949), '5975185251685626785': np.float64(0.10074848724189539), '8560019474512340676': np.float64(0.09851300070722196), '12043264814094380418': np.float64(0.10148382269574949), '4296149388320225194': np.float64(0.0994207668622644), '15388649110162717160': np.float64(0.09851300070722196), '2395859185497387824': np.float64(0.09851300070722196), '10913316872057236365': np.float64(0.0994207668622644), '6587436948557123441': np.float64(0.10074848724189539), '17456602372862189643': np.float64(0.10115484427851545)}
2025-08-04 20:43:45,470 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:43:45,471 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:45,471 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 20:43:45,475 - INFO -   New temperature for next round: 0.6149
2025-08-04 20:43:45,475 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 2, 0, 8, 8), '5975185251685626785': (8, 2, 1, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:43:45,476 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:43:54,493 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:43:54,494 - INFO - [Round 99, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:43:54,501 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:43:54,501 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:43:54,501 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0851, Aggregated D_Loss=0.8194 from 5 clients (7157 examples)
2025-08-04 20:43:54,501 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.14s across 5 clients
2025-08-04 20:43:54,502 - INFO - Fit phase aggregation: Summary
2025-08-04 20:43:54,502 - INFO -   fit_clients_total_received: 5
2025-08-04 20:43:54,502 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:43:54,502 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:43:54,502 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:43:54,502 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:43:54,502 - INFO -   aggregated_g_loss: 2.0851
2025-08-04 20:43:54,502 - INFO -   aggregated_d_loss: 0.8194
2025-08-04 20:43:54,502 - INFO -   fit_time_avg_seconds_all_reporting: 1.1405
2025-08-04 20:43:54,503 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:44:00,546 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:44:00,546 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.4011315703392029, 'profile_name': 'Low-End IoT', 'f1_score': 0.8110709987966306, 'avg_anomaly_score': 0.3885857866456111, 'recall': 0.6934156378600823, 'eval_time_seconds': 0.013946771621704102, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7274305555555556, 'precision': 0.9768115942028985}
2025-08-04 20:44:00,546 - INFO - [Round 99, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:44:00,546 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 99.
2025-08-04 20:44:00,547 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 99.
2025-08-04 20:44:00,547 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 99.
2025-08-04 20:44:00,547 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 99.
2025-08-04 20:44:00,547 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 99.
2025-08-04 20:44:00,547 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 99.
2025-08-04 20:44:00,547 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 99.
2025-08-04 20:44:00,548 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 99.
2025-08-04 20:44:00,548 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 99.
2025-08-04 20:44:00,548 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 99.
2025-08-04 20:44:00,553 - INFO - [Round 99, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:44:00,557 - INFO - ==================================================
2025-08-04 20:44:00,557 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:44:00,557 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:44:00,558 - INFO - ==================================================
2025-08-04 20:44:00,558 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:44:00,558 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.3890
2025-08-04 20:44:00,558 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:44:00,558 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:44:00,558 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:44:00,559 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:44:00,559 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:44:00,559 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0100) - ResourceCost(0.2400) = -0.2498
2025-08-04 20:44:00,559 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 99.
2025-08-04 20:44:00,559 - INFO -   Final Global Reward for action: -0.2498. Client states at selection: {'1640189632563049314': (8, 2, 0, 8, 8), '5975185251685626785': (8, 2, 1, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:44:00,559 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0100, Resource Cost: 0.2400
2025-08-04 20:44:00,559 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:44:00,560 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:44:00,560 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 20:44:00,560 - INFO -       Q(s) updated from 0.0000 to -0.0025 (TotalReward: -0.2498, NextMaxQ: 0.0000)
2025-08-04 20:44:00,560 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:44:00,560 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:44:00,561 - INFO -       Q(s) updated from -0.0045 to -0.0070 (TotalReward: -0.2498, NextMaxQ: -0.0072)
2025-08-04 20:44:00,561 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:44:00,561 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 20:44:00,561 - INFO -       Q(s) updated from -0.0025 to -0.0050 (TotalReward: -0.2498, NextMaxQ: 0.0000)
2025-08-04 20:44:00,562 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:44:00,562 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:44:00,562 - INFO -       Q(s) updated from -0.0070 to -0.0095 (TotalReward: -0.2498, NextMaxQ: -0.0072)
2025-08-04 20:44:00,563 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:44:00,563 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:44:00,563 - INFO -       Q(s) updated from -0.0020 to -0.0045 (TotalReward: -0.2498, NextMaxQ: -0.0022)
2025-08-04 20:44:00,563 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:44:00,564 - INFO - 
2025-08-04 20:44:00,564 - INFO - [ROUND 100]
2025-08-04 20:44:00,564 - INFO - [RLAgent choose_actions_softmax] Round 100. Temperature: 0.6149
2025-08-04 20:44:00,564 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:44:00,565 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.0071547437473192255, '8560019474512340676': 0.017138367529203814, '12043264814094380418': 0.0, '4296149388320225194': -0.012693542443721582, '15388649110162717160': 0.017138367529203814, '2395859185497387824': 0.017138367529203814, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.0071547437473192255, '17456602372862189643': -0.002196858218403961}
2025-08-04 20:44:00,565 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09982805612287891), '5975185251685626785': np.float64(0.09867331888804838), '8560019474512340676': np.float64(0.1026493503366736), '12043264814094380418': np.float64(0.09982805612287891), '4296149388320225194': np.float64(0.09778856715888885), '15388649110162717160': np.float64(0.1026493503366736), '2395859185497387824': np.float64(0.1026493503366736), '10913316872057236365': np.float64(0.09778856715888885), '6587436948557123441': np.float64(0.09867331888804838), '17456602372862189643': np.float64(0.099472064650347)}
2025-08-04 20:44:00,566 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:44:00,566 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:44:00,566 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:44:00,570 - INFO -   New temperature for next round: 0.6119
2025-08-04 20:44:00,570 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:44:00,570 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:44:06,592 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:44:06,592 - INFO - [Round 100, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:44:06,597 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:44:06,597 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:44:06,597 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0856, Aggregated D_Loss=0.8087 from 3 clients (2228 examples)
2025-08-04 20:44:06,597 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.68s across 3 clients
2025-08-04 20:44:06,597 - INFO - Fit phase aggregation: Summary
2025-08-04 20:44:06,597 - INFO -   fit_clients_total_received: 3
2025-08-04 20:44:06,598 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:44:06,598 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:44:06,598 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:44:06,598 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:44:06,598 - INFO -   aggregated_g_loss: 2.0856
2025-08-04 20:44:06,598 - INFO -   aggregated_d_loss: 0.8087
2025-08-04 20:44:06,598 - INFO -   fit_time_avg_seconds_all_reporting: 0.6819
2025-08-04 20:44:06,599 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:44:15,643 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:44:15,643 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.4151317119598389, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8118811881188119, 'avg_anomaly_score': 0.4094597072624188, 'recall': 0.6910112359550562, 'eval_time_seconds': 0.013893604278564453, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7266187050359713, 'precision': 0.984}
2025-08-04 20:44:15,643 - INFO - [Round 100, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:44:15,643 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 100.
2025-08-04 20:44:15,644 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 100.
2025-08-04 20:44:15,645 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 100.
2025-08-04 20:44:15,645 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 100.
2025-08-04 20:44:15,650 - INFO - [Round 100, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:44:15,655 - INFO - ==================================================
2025-08-04 20:44:15,655 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:44:15,655 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:44:15,655 - INFO - ==================================================
2025-08-04 20:44:15,655 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:44:15,656 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4114
2025-08-04 20:44:15,656 - INFO -   Global Accuracy (Wgtd Avg): 0.7253
2025-08-04 20:44:15,656 - INFO -   Global F1 Score (Wgtd Avg): 0.8096
2025-08-04 20:44:15,656 - INFO -   Global Precision (Wgtd Avg): 0.9737
2025-08-04 20:44:15,656 - INFO -   Global Recall (Wgtd Avg): 0.6929
2025-08-04 20:44:15,656 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:44:15,656 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3600
2025-08-04 20:44:15,656 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 100.
2025-08-04 20:44:15,657 - INFO -   Final Global Reward for action: -0.3600. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8)}
2025-08-04 20:44:15,657 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:44:15,657 - INFO -   Next round's global F1 (for next state Q-val): 0.8096
2025-08-04 20:44:15,657 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:44:15,657 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:44:15,657 - INFO -       Q(s) updated from 0.0171 to 0.0135 (TotalReward: -0.3600, NextMaxQ: 0.0171)
2025-08-04 20:44:15,658 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:44:15,658 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:44:15,658 - INFO -       Q(s) updated from 0.0135 to 0.0099 (TotalReward: -0.3600, NextMaxQ: 0.0135)
2025-08-04 20:44:15,658 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:44:15,658 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:44:15,659 - INFO -       Q(s) updated from 0.0099 to 0.0063 (TotalReward: -0.3600, NextMaxQ: 0.0099)
2025-08-04 20:44:15,659 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:44:15,660 - INFO - 
2025-08-04 20:44:15,660 - INFO - [ROUND 101]
2025-08-04 20:44:15,660 - INFO - [RLAgent choose_actions_softmax] Round 101. Temperature: 0.6119
2025-08-04 20:44:15,660 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:44:15,661 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.0071547437473192255, '8560019474512340676': 0.006297800224580424, '12043264814094380418': 0.0, '4296149388320225194': -0.012693542443721582, '15388649110162717160': 0.006297800224580424, '2395859185497387824': 0.006297800224580424, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.0071547437473192255, '17456602372862189643': -0.002196858218403961}
2025-08-04 20:44:15,661 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10036996303760652), '5975185251685626785': np.float64(0.09920315727744604), '8560019474512340676': np.float64(0.1014083684763217), '12043264814094380418': np.float64(0.10036996303760652), '4296149388320225194': np.float64(0.09830920511196586), '15388649110162717160': np.float64(0.1014083684763217), '2395859185497387824': np.float64(0.1014083684763217), '10913316872057236365': np.float64(0.09830920511196586), '6587436948557123441': np.float64(0.09920315727744604), '17456602372862189643': np.float64(0.10001024371699795)}
2025-08-04 20:44:15,662 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:44:15,662 - INFO -     Selected 6 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:44:15,662 - INFO -   Selection by factor 1.00 yielded 6 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:44:15,662 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '1640189632563049314', '12043264814094380418']
2025-08-04 20:44:15,666 - INFO -   New temperature for next round: 0.6088
2025-08-04 20:44:15,666 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '1640189632563049314', '12043264814094380418']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8), '1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8)}
2025-08-04 20:44:15,667 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:44:27,698 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:44:27,698 - INFO - [Round 101, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:44:27,706 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:44:27,706 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.20
2025-08-04 20:44:27,706 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0855, Aggregated D_Loss=0.8125 from 5 clients (9175 examples)
2025-08-04 20:44:27,706 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.46s across 5 clients
2025-08-04 20:44:27,706 - INFO - Fit phase aggregation: Summary
2025-08-04 20:44:27,706 - INFO -   fit_clients_total_received: 5
2025-08-04 20:44:27,706 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:44:27,707 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:44:27,707 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:44:27,707 - INFO -   allocated_cores_avg_per_client: 4.2000
2025-08-04 20:44:27,707 - INFO -   aggregated_g_loss: 2.0855
2025-08-04 20:44:27,707 - INFO -   aggregated_d_loss: 0.8125
2025-08-04 20:44:27,707 - INFO -   fit_time_avg_seconds_all_reporting: 1.4576
2025-08-04 20:44:27,708 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:44:33,752 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:44:33,753 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4229346036911011, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.4184788229154504, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.015451192855834961, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:44:33,753 - INFO - [Round 101, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:44:33,753 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 101.
2025-08-04 20:44:33,753 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 101.
2025-08-04 20:44:33,754 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 101.
2025-08-04 20:44:33,759 - INFO - [Round 101, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:44:33,762 - INFO - ==================================================
2025-08-04 20:44:33,763 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:44:33,763 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:44:33,763 - INFO - ==================================================
2025-08-04 20:44:33,763 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:44:33,763 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4225
2025-08-04 20:44:33,763 - INFO -   Global Accuracy (Wgtd Avg): 0.7256
2025-08-04 20:44:33,763 - INFO -   Global F1 Score (Wgtd Avg): 0.8098
2025-08-04 20:44:33,763 - INFO -   Global Precision (Wgtd Avg): 0.9739
2025-08-04 20:44:33,763 - INFO -   Global Recall (Wgtd Avg): 0.6931
2025-08-04 20:44:33,764 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:44:33,764 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0200) - ResourceCost(0.4200) = -0.4398
2025-08-04 20:44:33,764 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 101.
2025-08-04 20:44:33,764 - INFO -   Final Global Reward for action: -0.4398. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8), '1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8)}
2025-08-04 20:44:33,764 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0200, Resource Cost: 0.4200
2025-08-04 20:44:33,764 - INFO -   Next round's global F1 (for next state Q-val): 0.8098
2025-08-04 20:44:33,764 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:44:33,764 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:44:33,765 - INFO -       Q(s) updated from 0.0063 to 0.0019 (TotalReward: -0.4398, NextMaxQ: 0.0063)
2025-08-04 20:44:33,765 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:44:33,765 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:44:33,765 - INFO -       Q(s) updated from 0.0019 to -0.0025 (TotalReward: -0.4398, NextMaxQ: 0.0019)
2025-08-04 20:44:33,766 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:44:33,766 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:44:33,766 - INFO -       Q(s) updated from -0.0025 to -0.0069 (TotalReward: -0.4398, NextMaxQ: -0.0025)
2025-08-04 20:44:33,766 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:44:33,767 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:44:33,767 - INFO -       Q(s) updated from 0.0000 to -0.0044 (TotalReward: -0.4398, NextMaxQ: 0.0000)
2025-08-04 20:44:33,767 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:44:33,767 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:44:33,767 - INFO -       Q(s) updated from -0.0044 to -0.0088 (TotalReward: -0.4398, NextMaxQ: 0.0000)
2025-08-04 20:44:33,768 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:44:33,769 - INFO - 
2025-08-04 20:44:33,769 - INFO - [ROUND 102]
2025-08-04 20:44:33,769 - INFO - [RLAgent choose_actions_softmax] Round 102. Temperature: 0.6088
2025-08-04 20:44:33,769 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:44:33,770 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.0071547437473192255, '8560019474512340676': -0.006903237368603624, '12043264814094380418': 0.0, '4296149388320225194': -0.012693542443721582, '15388649110162717160': -0.006903237368603624, '2395859185497387824': -0.006903237368603624, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.0071547437473192255, '17456602372862189643': -0.004504877294913343}
2025-08-04 20:44:33,770 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10106962050779991), '5975185251685626785': np.float64(0.09988881161172505), '8560019474512340676': np.float64(0.09993008497419584), '12043264814094380418': np.float64(0.10106962050779991), '4296149388320225194': np.float64(0.0989841780714851), '15388649110162717160': np.float64(0.09993008497419584), '2395859185497387824': np.float64(0.09993008497419584), '10913316872057236365': np.float64(0.0989841780714851), '6587436948557123441': np.float64(0.09988881161172505), '17456602372862189643': np.float64(0.10032452469539238)}
2025-08-04 20:44:33,770 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:44:33,770 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:44:33,771 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:44:33,774 - INFO -   New temperature for next round: 0.6058
2025-08-04 20:44:33,774 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:44:33,775 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:44:45,789 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:44:45,789 - INFO - [Round 102, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:44:45,794 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:44:45,794 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:44:45,794 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0854, Aggregated D_Loss=0.8090 from 3 clients (7006 examples)
2025-08-04 20:44:45,794 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.77s across 3 clients
2025-08-04 20:44:45,794 - INFO - Fit phase aggregation: Summary
2025-08-04 20:44:45,794 - INFO -   fit_clients_total_received: 3
2025-08-04 20:44:45,794 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:44:45,794 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:44:45,794 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:44:45,795 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:44:45,795 - INFO -   aggregated_g_loss: 2.0854
2025-08-04 20:44:45,795 - INFO -   aggregated_d_loss: 0.8090
2025-08-04 20:44:45,795 - INFO -   fit_time_avg_seconds_all_reporting: 1.7737
2025-08-04 20:44:45,796 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:44:54,836 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:44:54,836 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.4568888425827026, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.818489289740699, 'avg_anomaly_score': 0.44108261908254315, 'recall': 0.7048543689320388, 'eval_time_seconds': 0.02035379409790039, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7403225806451613, 'precision': 0.9758064516129032}
2025-08-04 20:44:54,836 - INFO - [Round 102, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:44:54,837 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 102.
2025-08-04 20:44:54,837 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 102.
2025-08-04 20:44:54,837 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 102.
2025-08-04 20:44:54,837 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 102.
2025-08-04 20:44:54,838 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 102.
2025-08-04 20:44:54,838 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 102.
2025-08-04 20:44:54,838 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 102.
2025-08-04 20:44:54,838 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 102.
2025-08-04 20:44:54,838 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 102.
2025-08-04 20:44:54,838 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 102.
2025-08-04 20:44:54,843 - INFO - [Round 102, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:44:54,846 - INFO - ==================================================
2025-08-04 20:44:54,847 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:44:54,847 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:44:54,847 - INFO - ==================================================
2025-08-04 20:44:54,847 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:44:54,847 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4441
2025-08-04 20:44:54,847 - INFO -   Global Accuracy (Wgtd Avg): 0.7261
2025-08-04 20:44:54,847 - INFO -   Global F1 Score (Wgtd Avg): 0.8101
2025-08-04 20:44:54,848 - INFO -   Global Precision (Wgtd Avg): 0.9743
2025-08-04 20:44:54,848 - INFO -   Global Recall (Wgtd Avg): 0.6933
2025-08-04 20:44:54,848 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:44:54,848 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0500) - ResourceCost(0.1000) = -0.1497
2025-08-04 20:44:54,848 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 102.
2025-08-04 20:44:54,848 - INFO -   Final Global Reward for action: -0.1497. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:44:54,848 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0500, Resource Cost: 0.1000
2025-08-04 20:44:54,849 - INFO -   Next round's global F1 (for next state Q-val): 0.8101
2025-08-04 20:44:54,849 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:44:54,849 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:44:54,849 - INFO -       Q(s) updated from 0.0000 to -0.0015 (TotalReward: -0.1497, NextMaxQ: 0.0000)
2025-08-04 20:44:54,849 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:44:54,849 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:44:54,849 - INFO -       Q(s) updated from -0.0015 to -0.0030 (TotalReward: -0.1497, NextMaxQ: -0.0015)
2025-08-04 20:44:54,850 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:44:54,850 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:44:54,850 - INFO -       Q(s) updated from -0.0045 to -0.0060 (TotalReward: -0.1497, NextMaxQ: -0.0045)
2025-08-04 20:44:54,850 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:44:54,851 - INFO - 
2025-08-04 20:44:54,851 - INFO - [ROUND 103]
2025-08-04 20:44:54,851 - INFO - [RLAgent choose_actions_softmax] Round 103. Temperature: 0.6058
2025-08-04 20:44:54,851 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:44:54,852 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.00299226563520163, '5975185251685626785': -0.009505094842523062, '8560019474512340676': -0.006903237368603624, '12043264814094380418': -0.00299226563520163, '4296149388320225194': -0.012693542443721582, '15388649110162717160': -0.006903237368603624, '2395859185497387824': -0.006903237368603624, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.009505094842523062, '17456602372862189643': -0.005997253675848359}
2025-08-04 20:44:54,852 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10078020285821021), '5975185251685626785': np.float64(0.09970248866346151), '8560019474512340676': np.float64(0.10013164320832342), '12043264814094380418': np.float64(0.10078020285821021), '4296149388320225194': np.float64(0.09917908826463961), '15388649110162717160': np.float64(0.10013164320832342), '2395859185497387824': np.float64(0.10013164320832342), '10913316872057236365': np.float64(0.09917908826463961), '6587436948557123441': np.float64(0.09970248866346151), '17456602372862189643': np.float64(0.10028151080240702)}
2025-08-04 20:44:54,852 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:44:54,852 - INFO -     Selected 6 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:44:54,852 - INFO -   Selection by factor 1.00 yielded 6 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:44:54,853 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643', '8560019474512340676', '15388649110162717160']
2025-08-04 20:44:54,856 - INFO -   New temperature for next round: 0.6027
2025-08-04 20:44:54,856 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643', '8560019474512340676', '15388649110162717160']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8), '8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8)}
2025-08-04 20:44:54,856 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:45:06,883 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:45:06,883 - INFO - [Round 103, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:45:06,891 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:45:06,891 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.60
2025-08-04 20:45:06,891 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0850, Aggregated D_Loss=0.8038 from 5 clients (7134 examples)
2025-08-04 20:45:06,891 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.11s across 5 clients
2025-08-04 20:45:06,891 - INFO - Fit phase aggregation: Summary
2025-08-04 20:45:06,891 - INFO -   fit_clients_total_received: 5
2025-08-04 20:45:06,892 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:45:06,892 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:45:06,892 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:45:06,892 - INFO -   allocated_cores_avg_per_client: 3.6000
2025-08-04 20:45:06,892 - INFO -   aggregated_g_loss: 2.0850
2025-08-04 20:45:06,892 - INFO -   aggregated_d_loss: 0.8038
2025-08-04 20:45:06,892 - INFO -   fit_time_avg_seconds_all_reporting: 1.1104
2025-08-04 20:45:06,893 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:45:15,933 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:45:15,933 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.48605358600616455, 'profile_name': 'Low-End IoT', 'f1_score': 0.8110047846889952, 'avg_anomaly_score': 0.4579924782462742, 'recall': 0.6890243902439024, 'eval_time_seconds': 0.014270305633544922, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7252173913043478, 'precision': 0.9854651162790697}
2025-08-04 20:45:15,933 - INFO - [Round 103, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:45:15,934 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 103.
2025-08-04 20:45:15,934 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 103.
2025-08-04 20:45:15,934 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 103.
2025-08-04 20:45:15,934 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 103.
2025-08-04 20:45:15,934 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 103.
2025-08-04 20:45:15,934 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 103.
2025-08-04 20:45:15,935 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 103.
2025-08-04 20:45:15,935 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 103.
2025-08-04 20:45:15,935 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 103.
2025-08-04 20:45:15,935 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 103.
2025-08-04 20:45:15,940 - INFO - [Round 103, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:45:15,944 - INFO - ==================================================
2025-08-04 20:45:15,944 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:45:15,944 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:45:15,944 - INFO - ==================================================
2025-08-04 20:45:15,944 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:45:15,944 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4618
2025-08-04 20:45:15,944 - INFO -   Global Accuracy (Wgtd Avg): 0.7290
2025-08-04 20:45:15,945 - INFO -   Global F1 Score (Wgtd Avg): 0.8122
2025-08-04 20:45:15,945 - INFO -   Global Precision (Wgtd Avg): 0.9770
2025-08-04 20:45:15,945 - INFO -   Global Recall (Wgtd Avg): 0.6950
2025-08-04 20:45:15,945 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:45:15,945 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0840) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.3260
2025-08-04 20:45:15,945 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 103.
2025-08-04 20:45:15,945 - INFO -   Final Global Reward for action: -0.3260. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8), '8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8)}
2025-08-04 20:45:15,945 - INFO -   Performance Reward: 0.0840, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:45:15,946 - INFO -   Next round's global F1 (for next state Q-val): 0.8122
2025-08-04 20:45:15,946 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:45:15,946 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:45:15,946 - INFO -       Q(s) updated from -0.0030 to -0.0062 (TotalReward: -0.3260, NextMaxQ: -0.0030)
2025-08-04 20:45:15,946 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:45:15,946 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:45:15,947 - INFO -       Q(s) updated from -0.0062 to -0.0095 (TotalReward: -0.3260, NextMaxQ: -0.0062)
2025-08-04 20:45:15,947 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:45:15,947 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:45:15,947 - INFO -       Q(s) updated from -0.0060 to -0.0093 (TotalReward: -0.3260, NextMaxQ: -0.0060)
2025-08-04 20:45:15,948 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:45:15,948 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:45:15,948 - INFO -       Q(s) updated from -0.0069 to -0.0103 (TotalReward: -0.3260, NextMaxQ: -0.0184)
2025-08-04 20:45:15,948 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:45:15,948 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:45:15,949 - INFO -       Q(s) updated from -0.0103 to -0.0136 (TotalReward: -0.3260, NextMaxQ: -0.0184)
2025-08-04 20:45:15,949 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:45:15,950 - INFO - 
2025-08-04 20:45:15,950 - INFO - [ROUND 104]
2025-08-04 20:45:15,950 - INFO - [RLAgent choose_actions_softmax] Round 104. Temperature: 0.6027
2025-08-04 20:45:15,950 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:45:15,950 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.009502302293705661, '5975185251685626785': -0.01343384884329487, '8560019474512340676': -0.018362505021513754, '12043264814094380418': -0.009502302293705661, '4296149388320225194': -0.012693542443721582, '15388649110162717160': -0.018362505021513754, '2395859185497387824': -0.013581416857148603, '10913316872057236365': -0.012693542443721582, '6587436948557123441': -0.01343384884329487, '17456602372862189643': -0.009250895340386017}
2025-08-04 20:45:15,951 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10059427371249334), '5975185251685626785': np.float64(0.09994025650386718), '8560019474512340676': np.float64(0.09912637216255844), '12043264814094380418': np.float64(0.10059427371249334), '4296149388320225194': np.float64(0.10006308151765796), '15388649110162717160': np.float64(0.09912637216255844), '2395859185497387824': np.float64(0.09991579136679092), '10913316872057236365': np.float64(0.10006308151765796), '6587436948557123441': np.float64(0.09994025650386718), '17456602372862189643': np.float64(0.1006362408400551)}
2025-08-04 20:45:15,951 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:45:15,951 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:45:15,951 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:45:15,954 - INFO -   New temperature for next round: 0.5997
2025-08-04 20:45:15,955 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:45:15,955 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:45:27,977 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:45:27,977 - INFO - [Round 104, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:45:27,984 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:45:27,984 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.60
2025-08-04 20:45:27,984 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0849, Aggregated D_Loss=0.8004 from 5 clients (10648 examples)
2025-08-04 20:45:27,984 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.64s across 5 clients
2025-08-04 20:45:27,984 - INFO - Fit phase aggregation: Summary
2025-08-04 20:45:27,984 - INFO -   fit_clients_total_received: 5
2025-08-04 20:45:27,985 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:45:27,985 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:45:27,985 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:45:27,985 - INFO -   allocated_cores_avg_per_client: 1.6000
2025-08-04 20:45:27,985 - INFO -   aggregated_g_loss: 2.0849
2025-08-04 20:45:27,985 - INFO -   aggregated_d_loss: 0.8004
2025-08-04 20:45:27,985 - INFO -   fit_time_avg_seconds_all_reporting: 1.6370
2025-08-04 20:45:27,986 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:45:34,025 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:45:34,025 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5208204746246338, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8118811881188119, 'avg_anomaly_score': 0.49449671158115927, 'recall': 0.6910112359550562, 'eval_time_seconds': 0.011850833892822266, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7266187050359713, 'precision': 0.984}
2025-08-04 20:45:34,025 - INFO - [Round 104, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:45:34,025 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 104.
2025-08-04 20:45:34,025 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 104.
2025-08-04 20:45:34,026 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 104.
2025-08-04 20:45:34,026 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 104.
2025-08-04 20:45:34,026 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 104.
2025-08-04 20:45:34,026 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 104.
2025-08-04 20:45:34,026 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 104.
2025-08-04 20:45:34,026 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 104.
2025-08-04 20:45:34,027 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 104.
2025-08-04 20:45:34,027 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 104.
2025-08-04 20:45:34,032 - INFO - [Round 104, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:45:34,036 - INFO - ==================================================
2025-08-04 20:45:34,036 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:45:34,036 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:45:34,036 - INFO - ==================================================
2025-08-04 20:45:34,037 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:45:34,037 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4944
2025-08-04 20:45:34,037 - INFO -   Global Accuracy (Wgtd Avg): 0.7258
2025-08-04 20:45:34,037 - INFO -   Global F1 Score (Wgtd Avg): 0.8100
2025-08-04 20:45:34,037 - INFO -   Global Precision (Wgtd Avg): 0.9741
2025-08-04 20:45:34,037 - INFO -   Global Recall (Wgtd Avg): 0.6932
2025-08-04 20:45:34,037 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:45:34,038 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0029) - FairPenalty(0.0500) - ResourceCost(0.1600) = -0.2129
2025-08-04 20:45:34,038 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 104.
2025-08-04 20:45:34,038 - INFO -   Final Global Reward for action: -0.2129. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:45:34,038 - INFO -   Performance Reward: -0.0029, Fairness Penalty: 0.0500, Resource Cost: 0.1600
2025-08-04 20:45:34,038 - INFO -   Next round's global F1 (for next state Q-val): 0.8100
2025-08-04 20:45:34,039 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:45:34,039 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:45:34,039 - INFO -       Q(s) updated from -0.0095 to -0.0116 (TotalReward: -0.2129, NextMaxQ: -0.0095)
2025-08-04 20:45:34,039 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:45:34,039 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:45:34,039 - INFO -       Q(s) updated from -0.0116 to -0.0137 (TotalReward: -0.2129, NextMaxQ: -0.0116)
2025-08-04 20:45:34,040 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:45:34,040 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:45:34,040 - INFO -       Q(s) updated from -0.0127 to -0.0148 (TotalReward: -0.2129, NextMaxQ: -0.0125)
2025-08-04 20:45:34,041 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:45:34,041 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:45:34,041 - INFO -       Q(s) updated from -0.0148 to -0.0169 (TotalReward: -0.2129, NextMaxQ: -0.0125)
2025-08-04 20:45:34,041 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:45:34,042 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:45:34,042 - INFO -       Q(s) updated from -0.0093 to -0.0114 (TotalReward: -0.2129, NextMaxQ: -0.0093)
2025-08-04 20:45:34,042 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:45:34,043 - INFO - 
2025-08-04 20:45:34,043 - INFO - [ROUND 105]
2025-08-04 20:45:34,043 - INFO - [RLAgent choose_actions_softmax] Round 105. Temperature: 0.5997
2025-08-04 20:45:34,043 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:45:34,043 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.013739439002386375, '5975185251685626785': -0.011649116717121403, '8560019474512340676': -0.018362505021513754, '12043264814094380418': -0.013739439002386375, '4296149388320225194': -0.012539121386942933, '15388649110162717160': -0.018362505021513754, '2395859185497387824': -0.013581416857148603, '10913316872057236365': -0.012539121386942933, '6587436948557123441': -0.011649116717121403, '17456602372862189643': -0.011370774915763906}
2025-08-04 20:45:34,044 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1000014709755739), '5975185251685626785': np.float64(0.10035062877965073), '8560019474512340676': np.float64(0.09923356384740939), '12043264814094380418': np.float64(0.1000014709755739), '4296149388320225194': np.float64(0.10020181771835497), '15388649110162717160': np.float64(0.09923356384740939), '2395859185497387824': np.float64(0.1000278237654153), '10913316872057236365': np.float64(0.10020181771835497), '6587436948557123441': np.float64(0.10035062877965073), '17456602372862189643': np.float64(0.1003972135926067)}
2025-08-04 20:45:34,044 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:45:34,044 - INFO -     Selected 8 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:45:34,044 - INFO -   Selection by factor 1.00 yielded 8 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:45:34,044 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643', '5975185251685626785', '6587436948557123441', '4296149388320225194', '10913316872057236365']
2025-08-04 20:45:34,047 - INFO -   New temperature for next round: 0.5967
2025-08-04 20:45:34,048 - INFO -   Final selected CIDs to return: ['17456602372862189643', '5975185251685626785', '6587436948557123441', '4296149388320225194', '10913316872057236365']. Corresponding states: {'17456602372862189643': (7, 3, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '4296149388320225194': (8, 1, 0, 8, 8), '10913316872057236365': (8, 1, 0, 8, 8)}
2025-08-04 20:45:34,048 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:45:43,080 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:45:43,081 - INFO - [Round 105, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:45:43,088 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:45:43,088 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:45:43,088 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0848, Aggregated D_Loss=0.7932 from 5 clients (3940 examples)
2025-08-04 20:45:43,088 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.71s across 5 clients
2025-08-04 20:45:43,089 - INFO - Fit phase aggregation: Summary
2025-08-04 20:45:43,089 - INFO -   fit_clients_total_received: 5
2025-08-04 20:45:43,089 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:45:43,089 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:45:43,089 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:45:43,089 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:45:43,089 - INFO -   aggregated_g_loss: 2.0848
2025-08-04 20:45:43,089 - INFO -   aggregated_d_loss: 0.7932
2025-08-04 20:45:43,089 - INFO -   fit_time_avg_seconds_all_reporting: 0.7053
2025-08-04 20:45:43,090 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:45:49,142 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:45:49,142 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.5620866775512695, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.49231786952644097, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.009263753890991211, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:45:49,142 - INFO - [Round 105, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:45:49,142 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 105.
2025-08-04 20:45:49,142 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 105.
2025-08-04 20:45:49,142 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 105.
2025-08-04 20:45:49,143 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 105.
2025-08-04 20:45:49,148 - INFO - [Round 105, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:45:49,152 - INFO - ==================================================
2025-08-04 20:45:49,152 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:45:49,152 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:45:49,152 - INFO - ==================================================
2025-08-04 20:45:49,153 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:45:49,153 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5071
2025-08-04 20:45:49,153 - INFO -   Global Accuracy (Wgtd Avg): 0.7248
2025-08-04 20:45:49,153 - INFO -   Global F1 Score (Wgtd Avg): 0.8093
2025-08-04 20:45:49,153 - INFO -   Global Precision (Wgtd Avg): 0.9733
2025-08-04 20:45:49,153 - INFO -   Global Recall (Wgtd Avg): 0.6926
2025-08-04 20:45:49,153 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:45:49,154 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0009) - FairPenalty(0.0100) - ResourceCost(0.2400) = -0.2509
2025-08-04 20:45:49,154 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 105.
2025-08-04 20:45:49,154 - INFO -   Final Global Reward for action: -0.2509. Client states at selection: {'17456602372862189643': (7, 3, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '4296149388320225194': (8, 1, 0, 8, 8), '10913316872057236365': (8, 1, 0, 8, 8)}
2025-08-04 20:45:49,154 - INFO -   Performance Reward: -0.0009, Fairness Penalty: 0.0100, Resource Cost: 0.2400
2025-08-04 20:45:49,154 - INFO -   Next round's global F1 (for next state Q-val): 0.8093
2025-08-04 20:45:49,154 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:45:49,154 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:45:49,154 - INFO -       Q(s) updated from -0.0114 to -0.0138 (TotalReward: -0.2509, NextMaxQ: -0.0022)
2025-08-04 20:45:49,155 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:45:49,155 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:45:49,155 - INFO -       Q(s) updated from -0.0116 to -0.0142 (TotalReward: -0.2509, NextMaxQ: -0.0134)
2025-08-04 20:45:49,156 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:45:49,156 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:45:49,156 - INFO -       Q(s) updated from -0.0142 to -0.0167 (TotalReward: -0.2509, NextMaxQ: -0.0134)
2025-08-04 20:45:49,156 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:45:49,157 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:45:49,157 - INFO -       Q(s) updated from -0.0125 to -0.0150 (TotalReward: -0.2509, NextMaxQ: -0.0050)
2025-08-04 20:45:49,157 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:45:49,157 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:45:49,158 - INFO -       Q(s) updated from -0.0150 to -0.0174 (TotalReward: -0.2509, NextMaxQ: -0.0050)
2025-08-04 20:45:49,158 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:45:49,159 - INFO - 
2025-08-04 20:45:49,159 - INFO - [ROUND 106]
2025-08-04 20:45:49,159 - INFO - [RLAgent choose_actions_softmax] Round 106. Temperature: 0.5967
2025-08-04 20:45:49,159 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:45:49,159 - INFO -   Optimistic init for new high-core state (8, 1, 2, 8, 8) (CID 2395859185497387824): Q set to 0.05
2025-08-04 20:45:49,160 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.013739439002386375, '5975185251685626785': -0.01343384884329487, '8560019474512340676': -0.013581416857148603, '12043264814094380418': -0.013739439002386375, '4296149388320225194': -0.0049718742295923315, '15388649110162717160': -0.013581416857148603, '2395859185497387824': 0.05, '10913316872057236365': -0.0049718742295923315, '6587436948557123441': -0.01343384884329487, '17456602372862189643': -0.002196858218403961}
2025-08-04 20:45:49,160 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09839211909221511), '5975185251685626785': np.float64(0.09844251935973516), '8560019474512340676': np.float64(0.098418178091119), '12043264814094380418': np.float64(0.09839211909221511), '4296149388320225194': np.float64(0.09984843513356656), '15388649110162717160': np.float64(0.098418178091119), '2395859185497387824': np.float64(0.10948364807618888), '10913316872057236365': np.float64(0.09984843513356656), '6587436948557123441': np.float64(0.09844251935973516), '17456602372862189643': np.float64(0.10031384857053956)}
2025-08-04 20:45:49,160 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:45:49,160 - INFO -     Selected 2 CIDs with this factor: ['2395859185497387824', '17456602372862189643']
2025-08-04 20:45:49,160 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824', '17456602372862189643']
2025-08-04 20:45:49,164 - INFO -   New temperature for next round: 0.5937
2025-08-04 20:45:49,164 - INFO -   Final selected CIDs to return: ['2395859185497387824', '17456602372862189643']. Corresponding states: {'2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:45:49,164 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:45:55,180 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:45:55,180 - INFO - [Round 106, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:45:55,184 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:45:55,184 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:45:55,184 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0847, Aggregated D_Loss=0.7920 from 2 clients (2336 examples)
2025-08-04 20:45:55,184 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.96s across 2 clients
2025-08-04 20:45:55,185 - INFO - Fit phase aggregation: Summary
2025-08-04 20:45:55,185 - INFO -   fit_clients_total_received: 2
2025-08-04 20:45:55,185 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:45:55,185 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:45:55,185 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:45:55,185 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:45:55,185 - INFO -   aggregated_g_loss: 2.0847
2025-08-04 20:45:55,185 - INFO -   aggregated_d_loss: 0.7920
2025-08-04 20:45:55,185 - INFO -   fit_time_avg_seconds_all_reporting: 0.9571
2025-08-04 20:45:55,186 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:46:01,230 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:46:01,230 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.5014775037765503, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.473644562897552, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.012444496154785156, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:46:01,230 - INFO - [Round 106, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 106.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 106.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 106.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 106.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 106.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 106.
2025-08-04 20:46:01,231 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 106.
2025-08-04 20:46:01,232 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 106.
2025-08-04 20:46:01,232 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 106.
2025-08-04 20:46:01,232 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 106.
2025-08-04 20:46:01,237 - INFO - [Round 106, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:46:01,241 - INFO - ==================================================
2025-08-04 20:46:01,241 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:46:01,241 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:46:01,241 - INFO - ==================================================
2025-08-04 20:46:01,241 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:46:01,242 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4625
2025-08-04 20:46:01,242 - INFO -   Global Accuracy (Wgtd Avg): 0.7312
2025-08-04 20:46:01,242 - INFO -   Global F1 Score (Wgtd Avg): 0.8137
2025-08-04 20:46:01,242 - INFO -   Global Precision (Wgtd Avg): 0.9786
2025-08-04 20:46:01,242 - INFO -   Global Recall (Wgtd Avg): 0.6964
2025-08-04 20:46:01,242 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:46:01,242 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0848) - FairPenalty(0.0200) - ResourceCost(0.1400) = -0.0752
2025-08-04 20:46:01,242 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 106.
2025-08-04 20:46:01,242 - INFO -   Final Global Reward for action: -0.0752. Client states at selection: {'2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:46:01,242 - INFO -   Performance Reward: 0.0848, Fairness Penalty: 0.0200, Resource Cost: 0.1400
2025-08-04 20:46:01,243 - INFO -   Next round's global F1 (for next state Q-val): 0.8137
2025-08-04 20:46:01,243 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:46:01,243 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:46:01,243 - INFO -       Q(s) updated from 0.0500 to 0.0492 (TotalReward: -0.0752, NextMaxQ: 0.0500)
2025-08-04 20:46:01,243 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:46:01,244 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:46:01,244 - INFO -       Q(s) updated from -0.0022 to -0.0029 (TotalReward: -0.0752, NextMaxQ: 0.0000)
2025-08-04 20:46:01,244 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:46:01,244 - INFO - 
2025-08-04 20:46:01,245 - INFO - [ROUND 107]
2025-08-04 20:46:01,245 - INFO - [RLAgent choose_actions_softmax] Round 107. Temperature: 0.5937
2025-08-04 20:46:01,245 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:46:01,245 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.008752918176680696, '5975185251685626785': -0.01343384884329487, '8560019474512340676': 0.049198067599904784, '12043264814094380418': -0.008752918176680696, '4296149388320225194': -0.0049718742295923315, '15388649110162717160': 0.049198067599904784, '2395859185497387824': 0.049198067599904784, '10913316872057236365': -0.0049718742295923315, '6587436948557123441': -0.01343384884329487, '17456602372862189643': 0.0}
2025-08-04 20:46:01,246 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09690396800768623), '5975185251685626785': np.float64(0.09614300799231101), '8560019474512340676': np.float64(0.10683896365636249), '12043264814094380418': np.float64(0.09690396800768623), '4296149388320225194': np.float64(0.09752303223430059), '15388649110162717160': np.float64(0.10683896365636249), '2395859185497387824': np.float64(0.10683896365636249), '10913316872057236365': np.float64(0.09752303223430059), '6587436948557123441': np.float64(0.09614300799231101), '17456602372862189643': np.float64(0.09834309256231683)}
2025-08-04 20:46:01,246 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:46:01,246 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:46:01,246 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:46:01,250 - INFO -   New temperature for next round: 0.5908
2025-08-04 20:46:01,250 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8)}
2025-08-04 20:46:01,250 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:46:10,270 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:46:10,270 - INFO - [Round 107, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:46:10,275 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:46:10,276 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.00
2025-08-04 20:46:10,276 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0846, Aggregated D_Loss=0.7920 from 3 clients (2393 examples)
2025-08-04 20:46:10,276 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.73s across 3 clients
2025-08-04 20:46:10,276 - INFO - Fit phase aggregation: Summary
2025-08-04 20:46:10,276 - INFO -   fit_clients_total_received: 3
2025-08-04 20:46:10,276 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:46:10,277 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:46:10,277 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:46:10,277 - INFO -   allocated_cores_avg_per_client: 6.0000
2025-08-04 20:46:10,277 - INFO -   aggregated_g_loss: 2.0846
2025-08-04 20:46:10,277 - INFO -   aggregated_d_loss: 0.7920
2025-08-04 20:46:10,277 - INFO -   fit_time_avg_seconds_all_reporting: 0.7343
2025-08-04 20:46:10,278 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:46:16,321 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:46:16,322 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.5080609321594238, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.4800804974719253, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.01242828369140625, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:46:16,322 - INFO - [Round 107, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:46:16,322 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 107.
2025-08-04 20:46:16,322 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 107.
2025-08-04 20:46:16,322 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 107.
2025-08-04 20:46:16,323 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 107.
2025-08-04 20:46:16,323 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 107.
2025-08-04 20:46:16,323 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 107.
2025-08-04 20:46:16,323 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 107.
2025-08-04 20:46:16,323 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 107.
2025-08-04 20:46:16,324 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 107.
2025-08-04 20:46:16,324 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 107.
2025-08-04 20:46:16,330 - INFO - [Round 107, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:46:16,335 - INFO - ==================================================
2025-08-04 20:46:16,335 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:46:16,335 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:46:16,336 - INFO - ==================================================
2025-08-04 20:46:16,336 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:46:16,336 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4685
2025-08-04 20:46:16,336 - INFO -   Global Accuracy (Wgtd Avg): 0.7310
2025-08-04 20:46:16,336 - INFO -   Global F1 Score (Wgtd Avg): 0.8136
2025-08-04 20:46:16,336 - INFO -   Global Precision (Wgtd Avg): 0.9784
2025-08-04 20:46:16,337 - INFO -   Global Recall (Wgtd Avg): 0.6963
2025-08-04 20:46:16,337 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:46:16,337 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0000) - ResourceCost(0.3600) = -0.3602
2025-08-04 20:46:16,337 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 107.
2025-08-04 20:46:16,337 - INFO -   Final Global Reward for action: -0.3602. Client states at selection: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8)}
2025-08-04 20:46:16,337 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0000, Resource Cost: 0.3600
2025-08-04 20:46:16,337 - INFO -   Next round's global F1 (for next state Q-val): 0.8136
2025-08-04 20:46:16,338 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:46:16,338 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:46:16,338 - INFO -       Q(s) updated from 0.0492 to 0.0450 (TotalReward: -0.3602, NextMaxQ: -0.0136)
2025-08-04 20:46:16,339 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:46:16,339 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:46:16,339 - INFO -       Q(s) updated from 0.0450 to 0.0408 (TotalReward: -0.3602, NextMaxQ: -0.0136)
2025-08-04 20:46:16,340 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:46:16,340 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:46:16,340 - INFO -       Q(s) updated from 0.0408 to 0.0367 (TotalReward: -0.3602, NextMaxQ: -0.0136)
2025-08-04 20:46:16,340 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:46:16,341 - INFO - 
2025-08-04 20:46:16,342 - INFO - [ROUND 108]
2025-08-04 20:46:16,342 - INFO - [RLAgent choose_actions_softmax] Round 108. Temperature: 0.5908
2025-08-04 20:46:16,342 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:46:16,342 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0049718742295923315, '5975185251685626785': -0.01343384884329487, '8560019474512340676': -0.013581416857148603, '12043264814094380418': -0.0049718742295923315, '4296149388320225194': -0.0049718742295923315, '15388649110162717160': -0.013581416857148603, '2395859185497387824': -0.013581416857148603, '10913316872057236365': -0.0049718742295923315, '6587436948557123441': -0.01343384884329487, '17456602372862189643': -0.0029268220363151388}
2025-08-04 20:46:16,343 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10068848520413361), '5975185251685626785': np.float64(0.09925655870004656), '8560019474512340676': np.float64(0.0992317689017432), '12043264814094380418': np.float64(0.10068848520413361), '4296149388320225194': np.float64(0.10068848520413361), '15388649110162717160': np.float64(0.0992317689017432), '2395859185497387824': np.float64(0.0992317689017432), '10913316872057236365': np.float64(0.10068848520413361), '6587436948557123441': np.float64(0.09925655870004656), '17456602372862189643': np.float64(0.10103763507814283)}
2025-08-04 20:46:16,343 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:46:16,343 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:46:16,343 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:46:16,347 - INFO -   New temperature for next round: 0.5878
2025-08-04 20:46:16,347 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 2, 0, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '4296149388320225194': (8, 2, 0, 8, 8), '10913316872057236365': (8, 2, 0, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:46:16,347 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:46:25,379 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:46:25,379 - INFO - [Round 108, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:46:25,387 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:46:25,387 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.60
2025-08-04 20:46:25,387 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0845, Aggregated D_Loss=0.7951 from 5 clients (11066 examples)
2025-08-04 20:46:25,387 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.70s across 5 clients
2025-08-04 20:46:25,387 - INFO - Fit phase aggregation: Summary
2025-08-04 20:46:25,387 - INFO -   fit_clients_total_received: 5
2025-08-04 20:46:25,387 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:46:25,388 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:46:25,388 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:46:25,388 - INFO -   allocated_cores_avg_per_client: 1.6000
2025-08-04 20:46:25,388 - INFO -   aggregated_g_loss: 2.0845
2025-08-04 20:46:25,388 - INFO -   aggregated_d_loss: 0.7951
2025-08-04 20:46:25,388 - INFO -   fit_time_avg_seconds_all_reporting: 1.6996
2025-08-04 20:46:25,389 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:46:34,431 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:46:34,431 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.5347684860229492, 'profile_name': 'Low-End IoT', 'f1_score': 0.7843137254901961, 'avg_anomaly_score': 0.5034117397807893, 'recall': 0.6666666666666666, 'eval_time_seconds': 0.009005308151245117, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.6857142857142857, 'precision': 0.9523809523809523}
2025-08-04 20:46:34,431 - INFO - [Round 108, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:46:34,431 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 108.
2025-08-04 20:46:34,431 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 108.
2025-08-04 20:46:34,432 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 108.
2025-08-04 20:46:34,432 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 108.
2025-08-04 20:46:34,432 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 108.
2025-08-04 20:46:34,432 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 108.
2025-08-04 20:46:34,432 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 108.
2025-08-04 20:46:34,433 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 108.
2025-08-04 20:46:34,433 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 108.
2025-08-04 20:46:34,433 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 108.
2025-08-04 20:46:34,438 - INFO - [Round 108, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:46:34,442 - INFO - ==================================================
2025-08-04 20:46:34,442 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:46:34,442 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:46:34,442 - INFO - ==================================================
2025-08-04 20:46:34,443 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:46:34,443 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4886
2025-08-04 20:46:34,443 - INFO -   Global Accuracy (Wgtd Avg): 0.7293
2025-08-04 20:46:34,443 - INFO -   Global F1 Score (Wgtd Avg): 0.8123
2025-08-04 20:46:34,443 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:46:34,443 - INFO -   Global Recall (Wgtd Avg): 0.6948
2025-08-04 20:46:34,444 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:46:34,444 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0016) - FairPenalty(0.0200) - ResourceCost(0.1600) = -0.1816
2025-08-04 20:46:34,444 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 108.
2025-08-04 20:46:34,444 - INFO -   Final Global Reward for action: -0.1816. Client states at selection: {'1640189632563049314': (8, 2, 0, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '4296149388320225194': (8, 2, 0, 8, 8), '10913316872057236365': (8, 2, 0, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:46:34,444 - INFO -   Performance Reward: -0.0016, Fairness Penalty: 0.0200, Resource Cost: 0.1600
2025-08-04 20:46:34,444 - INFO -   Next round's global F1 (for next state Q-val): 0.8123
2025-08-04 20:46:34,444 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:46:34,444 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:46:34,444 - INFO -       Q(s) updated from -0.0050 to -0.0068 (TotalReward: -0.1816, NextMaxQ: -0.0050)
2025-08-04 20:46:34,445 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:46:34,445 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:46:34,445 - INFO -       Q(s) updated from -0.0068 to -0.0086 (TotalReward: -0.1816, NextMaxQ: -0.0068)
2025-08-04 20:46:34,446 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:46:34,446 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 20:46:34,446 - INFO -       Q(s) updated from -0.0086 to -0.0104 (TotalReward: -0.1816, NextMaxQ: -0.0088)
2025-08-04 20:46:34,446 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:46:34,446 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 20:46:34,447 - INFO -       Q(s) updated from -0.0104 to -0.0122 (TotalReward: -0.1816, NextMaxQ: -0.0088)
2025-08-04 20:46:34,447 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:46:34,447 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:46:34,447 - INFO -       Q(s) updated from -0.0029 to -0.0047 (TotalReward: -0.1816, NextMaxQ: -0.0029)
2025-08-04 20:46:34,447 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:46:34,448 - INFO - 
2025-08-04 20:46:34,448 - INFO - [ROUND 109]
2025-08-04 20:46:34,448 - INFO - [RLAgent choose_actions_softmax] Round 109. Temperature: 0.5878
2025-08-04 20:46:34,448 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:46:34,449 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.012192119443497088, '5975185251685626785': -0.01343384884329487, '8560019474512340676': 0.03667470566220991, '12043264814094380418': -0.012192119443497088, '4296149388320225194': -0.008752918176680696, '15388649110162717160': 0.03667470566220991, '2395859185497387824': -0.013581416857148603, '10913316872057236365': -0.008752918176680696, '6587436948557123441': -0.01343384884329487, '17456602372862189643': -0.004739991031445198}
2025-08-04 20:46:34,449 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09812307431993861), '5975185251685626785': np.float64(0.09791601623740345), '8560019474512340676': np.float64(0.1066288680787059), '12043264814094380418': np.float64(0.09812307431993861), '4296149388320225194': np.float64(0.09869884895795367), '15388649110162717160': np.float64(0.1066288680787059), '2395859185497387824': np.float64(0.0978914383721946), '10913316872057236365': np.float64(0.09869884895795367), '6587436948557123441': np.float64(0.09791601623740345), '17456602372862189643': np.float64(0.0993749464398021)}
2025-08-04 20:46:34,449 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:46:34,449 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:46:34,450 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:46:34,453 - INFO -   New temperature for next round: 0.5849
2025-08-04 20:46:34,453 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160']. Corresponding states: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8)}
2025-08-04 20:46:34,453 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:46:40,476 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:46:40,476 - INFO - [Round 109, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:46:40,480 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:46:40,480 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:46:40,480 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0852, Aggregated D_Loss=0.8179 from 2 clients (52 examples)
2025-08-04 20:46:40,480 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.15s across 2 clients
2025-08-04 20:46:40,480 - INFO - Fit phase aggregation: Summary
2025-08-04 20:46:40,480 - INFO -   fit_clients_total_received: 2
2025-08-04 20:46:40,481 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:46:40,481 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:46:40,481 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:46:40,481 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:46:40,481 - INFO -   aggregated_g_loss: 2.0852
2025-08-04 20:46:40,481 - INFO -   aggregated_d_loss: 0.8179
2025-08-04 20:46:40,481 - INFO -   fit_time_avg_seconds_all_reporting: 0.1456
2025-08-04 20:46:40,482 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:46:46,526 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:46:46,526 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.5099915027618408, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8133730249599267, 'avg_anomaly_score': 0.47267168240882135, 'recall': 0.6948356807511737, 'eval_time_seconds': 0.04909944534301758, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7299536116633533, 'precision': 0.9806736609607951}
2025-08-04 20:46:46,527 - INFO - [Round 109, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:46:46,527 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 109.
2025-08-04 20:46:46,527 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 109.
2025-08-04 20:46:46,527 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 109.
2025-08-04 20:46:46,527 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 109.
2025-08-04 20:46:46,527 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 109.
2025-08-04 20:46:46,527 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 109.
2025-08-04 20:46:46,528 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 109.
2025-08-04 20:46:46,528 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 109.
2025-08-04 20:46:46,528 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 109.
2025-08-04 20:46:46,528 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 109.
2025-08-04 20:46:46,534 - INFO - [Round 109, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:46:46,537 - INFO - ==================================================
2025-08-04 20:46:46,538 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:46:46,538 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:46:46,538 - INFO - ==================================================
2025-08-04 20:46:46,538 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:46:46,538 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4717
2025-08-04 20:46:46,538 - INFO -   Global Accuracy (Wgtd Avg): 0.7310
2025-08-04 20:46:46,538 - INFO -   Global F1 Score (Wgtd Avg): 0.8136
2025-08-04 20:46:46,538 - INFO -   Global Precision (Wgtd Avg): 0.9784
2025-08-04 20:46:46,538 - INFO -   Global Recall (Wgtd Avg): 0.6963
2025-08-04 20:46:46,539 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:46:46,539 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0011) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.2589
2025-08-04 20:46:46,539 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 109.
2025-08-04 20:46:46,539 - INFO -   Final Global Reward for action: -0.2589. Client states at selection: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8)}
2025-08-04 20:46:46,539 - INFO -   Performance Reward: 0.0011, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 20:46:46,539 - INFO -   Next round's global F1 (for next state Q-val): 0.8136
2025-08-04 20:46:46,539 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:46:46,539 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:46:46,540 - INFO -       Q(s) updated from 0.0367 to 0.0336 (TotalReward: -0.2589, NextMaxQ: -0.0136)
2025-08-04 20:46:46,540 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:46:46,540 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:46:46,541 - INFO -       Q(s) updated from 0.0336 to 0.0305 (TotalReward: -0.2589, NextMaxQ: -0.0136)
2025-08-04 20:46:46,541 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:46:46,542 - INFO - 
2025-08-04 20:46:46,542 - INFO - [ROUND 110]
2025-08-04 20:46:46,542 - INFO - [RLAgent choose_actions_softmax] Round 110. Temperature: 0.5849
2025-08-04 20:46:46,542 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:46:46,542 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.017371414999142347, '5975185251685626785': -0.01343384884329487, '8560019474512340676': -0.013581416857148603, '12043264814094380418': -0.017371414999142347, '4296149388320225194': -0.012192119443497088, '15388649110162717160': -0.013581416857148603, '2395859185497387824': -0.013581416857148603, '10913316872057236365': -0.012192119443497088, '6587436948557123441': -0.01343384884329487, '17456602372862189643': -0.01378577148371139}
2025-08-04 20:46:46,543 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09943371365444446), '5975185251685626785': np.float64(0.10010538039163004), '8560019474512340676': np.float64(0.10008012672260393), '12043264814094380418': np.float64(0.09943371365444446), '4296149388320225194': np.float64(0.10031813309827121), '15388649110162717160': np.float64(0.10008012672260393), '2395859185497387824': np.float64(0.10008012672260393), '10913316872057236365': np.float64(0.10031813309827121), '6587436948557123441': np.float64(0.10010538039163004), '17456602372862189643': np.float64(0.10004516554349685)}
2025-08-04 20:46:46,543 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:46:46,543 - INFO -     Selected 8 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:46:46,543 - INFO -   Selection by factor 1.00 yielded 8 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:46:46,543 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['4296149388320225194', '10913316872057236365', '5975185251685626785', '6587436948557123441', '8560019474512340676']
2025-08-04 20:46:46,547 - INFO -   New temperature for next round: 0.5820
2025-08-04 20:46:46,547 - INFO -   Final selected CIDs to return: ['4296149388320225194', '10913316872057236365', '5975185251685626785', '6587436948557123441', '8560019474512340676']. Corresponding states: {'4296149388320225194': (8, 2, 0, 8, 8), '10913316872057236365': (8, 2, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '8560019474512340676': (8, 2, 2, 8, 8)}
2025-08-04 20:46:46,547 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:46:55,578 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:46:55,578 - INFO - [Round 110, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:46:55,585 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:46:55,586 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 20:46:55,586 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0844, Aggregated D_Loss=0.7884 from 5 clients (4114 examples)
2025-08-04 20:46:55,586 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.70s across 5 clients
2025-08-04 20:46:55,586 - INFO - Fit phase aggregation: Summary
2025-08-04 20:46:55,586 - INFO -   fit_clients_total_received: 5
2025-08-04 20:46:55,586 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:46:55,586 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:46:55,586 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:46:55,587 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 20:46:55,587 - INFO -   aggregated_g_loss: 2.0844
2025-08-04 20:46:55,587 - INFO -   aggregated_d_loss: 0.7884
2025-08-04 20:46:55,587 - INFO -   fit_time_avg_seconds_all_reporting: 0.7041
2025-08-04 20:46:55,587 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:47:01,630 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:47:01,630 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5561930775642395, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8052805280528053, 'avg_anomaly_score': 0.511442126558839, 'recall': 0.6853932584269663, 'eval_time_seconds': 0.01375889778137207, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7170263788968825, 'precision': 0.976}
2025-08-04 20:47:01,630 - INFO - [Round 110, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:47:01,630 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 110.
2025-08-04 20:47:01,630 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 110.
2025-08-04 20:47:01,630 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 110.
2025-08-04 20:47:01,631 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 110.
2025-08-04 20:47:01,631 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 110.
2025-08-04 20:47:01,631 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 110.
2025-08-04 20:47:01,631 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 110.
2025-08-04 20:47:01,631 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 110.
2025-08-04 20:47:01,631 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 110.
2025-08-04 20:47:01,632 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 110.
2025-08-04 20:47:01,637 - INFO - [Round 110, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:47:01,640 - INFO - ==================================================
2025-08-04 20:47:01,641 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:47:01,641 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:47:01,641 - INFO - ==================================================
2025-08-04 20:47:01,641 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:47:01,641 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5106
2025-08-04 20:47:01,641 - INFO -   Global Accuracy (Wgtd Avg): 0.7251
2025-08-04 20:47:01,641 - INFO -   Global F1 Score (Wgtd Avg): 0.8095
2025-08-04 20:47:01,641 - INFO -   Global Precision (Wgtd Avg): 0.9735
2025-08-04 20:47:01,641 - INFO -   Global Recall (Wgtd Avg): 0.6928
2025-08-04 20:47:01,642 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:47:01,642 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0054) - FairPenalty(0.0000) - ResourceCost(0.3000) = -0.3054
2025-08-04 20:47:01,642 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 110.
2025-08-04 20:47:01,642 - INFO -   Final Global Reward for action: -0.3054. Client states at selection: {'4296149388320225194': (8, 2, 0, 8, 8), '10913316872057236365': (8, 2, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '8560019474512340676': (8, 2, 2, 8, 8)}
2025-08-04 20:47:01,642 - INFO -   Performance Reward: -0.0054, Fairness Penalty: 0.0000, Resource Cost: 0.3000
2025-08-04 20:47:01,642 - INFO -   Next round's global F1 (for next state Q-val): 0.8095
2025-08-04 20:47:01,642 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:47:01,643 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:47:01,643 - INFO -       Q(s) updated from -0.0122 to -0.0152 (TotalReward: -0.3054, NextMaxQ: -0.0122)
2025-08-04 20:47:01,643 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:47:01,643 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:47:01,644 - INFO -       Q(s) updated from -0.0152 to -0.0183 (TotalReward: -0.3054, NextMaxQ: -0.0152)
2025-08-04 20:47:01,644 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:47:01,644 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:47:01,644 - INFO -       Q(s) updated from -0.0134 to -0.0165 (TotalReward: -0.3054, NextMaxQ: -0.0134)
2025-08-04 20:47:01,645 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:47:01,645 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:47:01,645 - INFO -       Q(s) updated from -0.0165 to -0.0195 (TotalReward: -0.3054, NextMaxQ: -0.0165)
2025-08-04 20:47:01,645 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:47:01,646 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:47:01,646 - INFO -       Q(s) updated from -0.0136 to -0.0167 (TotalReward: -0.3054, NextMaxQ: -0.0184)
2025-08-04 20:47:01,646 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:47:01,647 - INFO - 
2025-08-04 20:47:01,647 - INFO - [ROUND 111]
2025-08-04 20:47:01,647 - INFO - [RLAgent choose_actions_softmax] Round 111. Temperature: 0.5820
2025-08-04 20:47:01,647 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:47:01,648 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.017371414999142347, '5975185251685626785': -0.01951180669064416, '8560019474512340676': -0.018362505021513754, '12043264814094380418': -0.017371414999142347, '4296149388320225194': -0.01827255950791657, '15388649110162717160': -0.01666479825587531, '2395859185497387824': -0.01666479825587531, '10913316872057236365': -0.01827255950791657, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.007568319126602616}
2025-08-04 20:47:01,648 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0999272617835536), '5975185251685626785': np.float64(0.0995604144423031), '8560019474512340676': np.float64(0.09975722852780321), '12043264814094380418': np.float64(0.0999272617835536), '4296149388320225194': np.float64(0.09977264780358339), '15388649110162717160': np.float64(0.10004866721900661), '2395859185497387824': np.float64(0.10004866721900661), '10913316872057236365': np.float64(0.09977264780358339), '6587436948557123441': np.float64(0.0995604144423031), '17456602372862189643': np.float64(0.10162478897530335)}
2025-08-04 20:47:01,648 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:47:01,648 - INFO -     Selected 3 CIDs with this factor: ['15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:47:01,648 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:47:01,652 - INFO -   New temperature for next round: 0.5790
2025-08-04 20:47:01,652 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824', '17456602372862189643']. Corresponding states: {'15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:47:01,652 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:47:10,670 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:47:10,670 - INFO - [Round 111, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:47:10,675 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:47:10,675 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:47:10,675 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0848, Aggregated D_Loss=0.7878 from 3 clients (2483 examples)
2025-08-04 20:47:10,675 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.72s across 3 clients
2025-08-04 20:47:10,676 - INFO - Fit phase aggregation: Summary
2025-08-04 20:47:10,676 - INFO -   fit_clients_total_received: 3
2025-08-04 20:47:10,676 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:47:10,676 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:47:10,676 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:47:10,676 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:47:10,676 - INFO -   aggregated_g_loss: 2.0848
2025-08-04 20:47:10,676 - INFO -   aggregated_d_loss: 0.7878
2025-08-04 20:47:10,676 - INFO -   fit_time_avg_seconds_all_reporting: 0.7250
2025-08-04 20:47:10,677 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:47:16,726 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:47:16,726 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.5260157346725464, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.4932857609860063, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.012362480163574219, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:47:16,727 - INFO - [Round 111, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:47:16,727 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 111.
2025-08-04 20:47:16,727 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 111.
2025-08-04 20:47:16,727 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 111.
2025-08-04 20:47:16,727 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 111.
2025-08-04 20:47:16,728 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 111.
2025-08-04 20:47:16,728 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 111.
2025-08-04 20:47:16,728 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 111.
2025-08-04 20:47:16,728 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 111.
2025-08-04 20:47:16,728 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 111.
2025-08-04 20:47:16,728 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 111.
2025-08-04 20:47:16,741 - INFO - [Round 111, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:47:16,745 - INFO - ==================================================
2025-08-04 20:47:16,745 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:47:16,745 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:47:16,745 - INFO - ==================================================
2025-08-04 20:47:16,745 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:47:16,746 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4810
2025-08-04 20:47:16,746 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 20:47:16,746 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 20:47:16,746 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 20:47:16,746 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 20:47:16,746 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:47:16,747 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0036) - FairPenalty(0.0000) - ResourceCost(0.3000) = -0.2964
2025-08-04 20:47:16,747 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 111.
2025-08-04 20:47:16,747 - INFO -   Final Global Reward for action: -0.2964. Client states at selection: {'15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:47:16,747 - INFO -   Performance Reward: 0.0036, Fairness Penalty: 0.0000, Resource Cost: 0.3000
2025-08-04 20:47:16,747 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 20:47:16,747 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:47:16,747 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:47:16,747 - INFO -       Q(s) updated from -0.0167 to -0.0196 (TotalReward: -0.2964, NextMaxQ: -0.0184)
2025-08-04 20:47:16,748 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:47:16,748 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:47:16,748 - INFO -       Q(s) updated from -0.0196 to -0.0226 (TotalReward: -0.2964, NextMaxQ: -0.0196)
2025-08-04 20:47:16,749 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:47:16,749 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 20:47:16,749 - INFO -       Q(s) updated from -0.0076 to -0.0105 (TotalReward: -0.2964, NextMaxQ: -0.0076)
2025-08-04 20:47:16,749 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:47:16,750 - INFO - 
2025-08-04 20:47:16,750 - INFO - [ROUND 112]
2025-08-04 20:47:16,750 - INFO - [RLAgent choose_actions_softmax] Round 112. Temperature: 0.5790
2025-08-04 20:47:16,750 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:47:16,751 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.017371414999142347, '5975185251685626785': -0.01951180669064416, '8560019474512340676': -0.018362505021513754, '12043264814094380418': -0.017371414999142347, '4296149388320225194': -0.01827255950791657, '15388649110162717160': -0.018362505021513754, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.01827255950791657, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.010524787845280933}
2025-08-04 20:47:16,751 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10010968141493735), '5975185251685626785': np.float64(0.09974032098009748), '8560019474512340676': np.float64(0.09993848249492077), '12043264814094380418': np.float64(0.10010968141493735), '4296149388320225194': np.float64(0.09995400741724206), '15388649110162717160': np.float64(0.09993848249492077), '2395859185497387824': np.float64(0.09921462326164573), '10913316872057236365': np.float64(0.09995400741724206), '6587436948557123441': np.float64(0.09974032098009748), '17456602372862189643': np.float64(0.10130039212395898)}
2025-08-04 20:47:16,751 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:47:16,751 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:47:16,751 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:47:16,755 - INFO -   New temperature for next round: 0.5762
2025-08-04 20:47:16,755 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 1, 0, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:47:16,755 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:47:28,770 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:47:28,771 - INFO - [Round 112, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:47:28,775 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:47:28,775 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:47:28,776 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.7927 from 3 clients (7699 examples)
2025-08-04 20:47:28,776 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.90s across 3 clients
2025-08-04 20:47:28,776 - INFO - Fit phase aggregation: Summary
2025-08-04 20:47:28,776 - INFO -   fit_clients_total_received: 3
2025-08-04 20:47:28,776 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:47:28,776 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:47:28,776 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:47:28,776 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:47:28,776 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:47:28,777 - INFO -   aggregated_d_loss: 0.7927
2025-08-04 20:47:28,777 - INFO -   fit_time_avg_seconds_all_reporting: 1.9032
2025-08-04 20:47:28,777 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:47:34,819 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:47:34,819 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.48012379407882694, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.43557678871467465, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.011821508407592773, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:47:34,819 - INFO - [Round 112, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:47:34,819 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 112.
2025-08-04 20:47:34,820 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 112.
2025-08-04 20:47:34,826 - INFO - [Round 112, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:47:34,830 - INFO - ==================================================
2025-08-04 20:47:34,830 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:47:34,830 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:47:34,830 - INFO - ==================================================
2025-08-04 20:47:34,831 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:47:34,831 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4500
2025-08-04 20:47:34,831 - INFO -   Global Accuracy (Wgtd Avg): 0.7312
2025-08-04 20:47:34,831 - INFO -   Global F1 Score (Wgtd Avg): 0.8137
2025-08-04 20:47:34,831 - INFO -   Global Precision (Wgtd Avg): 0.9786
2025-08-04 20:47:34,831 - INFO -   Global Recall (Wgtd Avg): 0.6964
2025-08-04 20:47:34,832 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:47:34,832 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0000) - ResourceCost(0.1000) = -0.0997
2025-08-04 20:47:34,832 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 112.
2025-08-04 20:47:34,832 - INFO -   Final Global Reward for action: -0.0997. Client states at selection: {'1640189632563049314': (8, 1, 0, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:47:34,832 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0000, Resource Cost: 0.1000
2025-08-04 20:47:34,832 - INFO -   Next round's global F1 (for next state Q-val): 0.8137
2025-08-04 20:47:34,832 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:47:34,832 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:47:34,832 - INFO -       Q(s) updated from -0.0174 to -0.0184 (TotalReward: -0.0997, NextMaxQ: -0.0183)
2025-08-04 20:47:34,833 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:47:34,833 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:47:34,833 - INFO -       Q(s) updated from -0.0184 to -0.0193 (TotalReward: -0.0997, NextMaxQ: -0.0183)
2025-08-04 20:47:34,834 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:47:34,834 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:47:34,834 - INFO -       Q(s) updated from -0.0105 to -0.0115 (TotalReward: -0.0997, NextMaxQ: -0.0138)
2025-08-04 20:47:34,834 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:47:34,835 - INFO - 
2025-08-04 20:47:34,835 - INFO - [ROUND 113]
2025-08-04 20:47:34,835 - INFO - [RLAgent choose_actions_softmax] Round 113. Temperature: 0.5762
2025-08-04 20:47:34,835 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:47:34,836 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01827255950791657, '5975185251685626785': -0.01951180669064416, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.01827255950791657, '4296149388320225194': -0.01827255950791657, '15388649110162717160': -0.022571859444263702, '2395859185497387824': 0.030549383904927868, '10913316872057236365': -0.01827255950791657, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.01378577148371139}
2025-08-04 20:47:34,836 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09923506220677322), '5975185251685626785': np.float64(0.09902184783528398), '8560019474512340676': np.float64(0.09849732124263462), '12043264814094380418': np.float64(0.09923506220677322), '4296149388320225194': np.float64(0.09923506220677322), '15388649110162717160': np.float64(0.09849732124263462), '2395859185497387824': np.float64(0.1080105447181069), '10913316872057236365': np.float64(0.09923506220677322), '6587436948557123441': np.float64(0.09902184783528398), '17456602372862189643': np.float64(0.10001086829896282)}
2025-08-04 20:47:34,836 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:47:34,836 - INFO -     Selected 2 CIDs with this factor: ['2395859185497387824', '17456602372862189643']
2025-08-04 20:47:34,837 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824', '17456602372862189643']
2025-08-04 20:47:34,840 - INFO -   New temperature for next round: 0.5733
2025-08-04 20:47:34,840 - INFO -   Final selected CIDs to return: ['2395859185497387824', '17456602372862189643']. Corresponding states: {'2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:47:34,840 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:47:40,856 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:47:40,856 - INFO - [Round 113, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:47:40,859 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:47:40,860 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:47:40,860 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.7848 from 2 clients (2498 examples)
2025-08-04 20:47:40,860 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.03s across 2 clients
2025-08-04 20:47:40,860 - INFO - Fit phase aggregation: Summary
2025-08-04 20:47:40,860 - INFO -   fit_clients_total_received: 2
2025-08-04 20:47:40,860 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:47:40,860 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:47:40,860 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:47:40,860 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:47:40,861 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:47:40,861 - INFO -   aggregated_d_loss: 0.7848
2025-08-04 20:47:40,861 - INFO -   fit_time_avg_seconds_all_reporting: 1.0297
2025-08-04 20:47:40,861 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:47:46,907 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:47:46,907 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.5499801635742188, 'profile_name': 'Low-End IoT', 'f1_score': 0.8158844765342961, 'avg_anomaly_score': 0.49322082236823106, 'recall': 0.6975308641975309, 'eval_time_seconds': 0.014726877212524414, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.734375, 'precision': 0.9826086956521739}
2025-08-04 20:47:46,907 - INFO - [Round 113, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:47:46,907 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 113.
2025-08-04 20:47:46,907 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 113.
2025-08-04 20:47:46,908 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 113.
2025-08-04 20:47:46,908 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 113.
2025-08-04 20:47:46,908 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 113.
2025-08-04 20:47:46,908 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 113.
2025-08-04 20:47:46,908 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 113.
2025-08-04 20:47:46,908 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 113.
2025-08-04 20:47:46,909 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 113.
2025-08-04 20:47:46,909 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 113.
2025-08-04 20:47:46,914 - INFO - [Round 113, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:47:46,918 - INFO - ==================================================
2025-08-04 20:47:46,918 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:47:46,918 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:47:46,919 - INFO - ==================================================
2025-08-04 20:47:46,919 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:47:46,919 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4932
2025-08-04 20:47:46,919 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:47:46,919 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:47:46,919 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:47:46,919 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:47:46,919 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:47:46,919 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0007) - FairPenalty(0.0100) - ResourceCost(0.1400) = -0.1507
2025-08-04 20:47:46,920 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 113.
2025-08-04 20:47:46,920 - INFO -   Final Global Reward for action: -0.1507. Client states at selection: {'2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:47:46,920 - INFO -   Performance Reward: -0.0007, Fairness Penalty: 0.0100, Resource Cost: 0.1400
2025-08-04 20:47:46,920 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:47:46,920 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:47:46,920 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:47:46,920 - INFO -       Q(s) updated from 0.0305 to 0.0285 (TotalReward: -0.1507, NextMaxQ: -0.0226)
2025-08-04 20:47:46,921 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:47:46,921 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:47:46,921 - INFO -       Q(s) updated from -0.0138 to -0.0153 (TotalReward: -0.1507, NextMaxQ: -0.0138)
2025-08-04 20:47:46,921 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:47:46,922 - INFO - 
2025-08-04 20:47:46,922 - INFO - [ROUND 114]
2025-08-04 20:47:46,922 - INFO - [RLAgent choose_actions_softmax] Round 114. Temperature: 0.5733
2025-08-04 20:47:46,923 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:47:46,923 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.019336759823231985, '5975185251685626785': -0.01951180669064416, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.019336759823231985, '4296149388320225194': -0.019336759823231985, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.019336759823231985, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.01527872143565215}
2025-08-04 20:47:46,923 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10010399491293234), '5975185251685626785': np.float64(0.10007343326776799), '8560019474512340676': np.float64(0.09954067964769002), '12043264814094380418': np.float64(0.10010399491293234), '4296149388320225194': np.float64(0.10010399491293234), '15388649110162717160': np.float64(0.09954067964769002), '2395859185497387824': np.float64(0.09954067964769002), '10913316872057236365': np.float64(0.10010399491293234), '6587436948557123441': np.float64(0.10007343326776799), '17456602372862189643': np.float64(0.10081511486966456)}
2025-08-04 20:47:46,923 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:47:46,924 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '4296149388320225194', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:47:46,924 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:47:46,924 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643', '1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365']
2025-08-04 20:47:46,927 - INFO -   New temperature for next round: 0.5704
2025-08-04 20:47:46,927 - INFO -   Final selected CIDs to return: ['17456602372862189643', '1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365']. Corresponding states: {'17456602372862189643': (7, 3, 0, 8, 8), '1640189632563049314': (8, 1, 0, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '4296149388320225194': (8, 1, 0, 8, 8), '10913316872057236365': (8, 1, 0, 8, 8)}
2025-08-04 20:47:46,927 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:47:58,959 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:47:58,960 - INFO - [Round 114, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:47:58,967 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:47:58,967 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.60
2025-08-04 20:47:58,967 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.7887 from 5 clients (11670 examples)
2025-08-04 20:47:58,967 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.79s across 5 clients
2025-08-04 20:47:58,967 - INFO - Fit phase aggregation: Summary
2025-08-04 20:47:58,967 - INFO -   fit_clients_total_received: 5
2025-08-04 20:47:58,967 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:47:58,967 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:47:58,967 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:47:58,968 - INFO -   allocated_cores_avg_per_client: 1.6000
2025-08-04 20:47:58,968 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:47:58,968 - INFO -   aggregated_d_loss: 0.7887
2025-08-04 20:47:58,968 - INFO -   fit_time_avg_seconds_all_reporting: 1.7868
2025-08-04 20:47:58,968 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:48:05,013 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:48:05,013 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.582024073600769, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8229988726042841, 'avg_anomaly_score': 0.5201827659722298, 'recall': 0.7087378640776699, 'eval_time_seconds': 0.017643213272094727, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7467741935483871, 'precision': 0.9811827956989247}
2025-08-04 20:48:05,014 - INFO - [Round 114, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:48:05,014 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 114.
2025-08-04 20:48:05,014 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 114.
2025-08-04 20:48:05,014 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 114.
2025-08-04 20:48:05,014 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 114.
2025-08-04 20:48:05,014 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 114.
2025-08-04 20:48:05,015 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 114.
2025-08-04 20:48:05,015 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 114.
2025-08-04 20:48:05,015 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 114.
2025-08-04 20:48:05,015 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 114.
2025-08-04 20:48:05,015 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 114.
2025-08-04 20:48:05,021 - INFO - [Round 114, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:48:05,025 - INFO - ==================================================
2025-08-04 20:48:05,025 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:48:05,025 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:48:05,025 - INFO - ==================================================
2025-08-04 20:48:05,025 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:48:05,025 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5257
2025-08-04 20:48:05,025 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 20:48:05,026 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 20:48:05,026 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 20:48:05,026 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 20:48:05,026 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:48:05,026 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0100) - ResourceCost(0.1600) = -0.1702
2025-08-04 20:48:05,026 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 114.
2025-08-04 20:48:05,026 - INFO -   Final Global Reward for action: -0.1702. Client states at selection: {'17456602372862189643': (7, 3, 0, 8, 8), '1640189632563049314': (8, 1, 0, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '4296149388320225194': (8, 1, 0, 8, 8), '10913316872057236365': (8, 1, 0, 8, 8)}
2025-08-04 20:48:05,026 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0100, Resource Cost: 0.1600
2025-08-04 20:48:05,027 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 20:48:05,027 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:48:05,027 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:48:05,027 - INFO -       Q(s) updated from -0.0153 to -0.0169 (TotalReward: -0.1702, NextMaxQ: -0.0047)
2025-08-04 20:48:05,027 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:48:05,028 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:48:05,028 - INFO -       Q(s) updated from -0.0193 to -0.0210 (TotalReward: -0.1702, NextMaxQ: -0.0183)
2025-08-04 20:48:05,028 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:48:05,028 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:48:05,028 - INFO -       Q(s) updated from -0.0210 to -0.0227 (TotalReward: -0.1702, NextMaxQ: -0.0183)
2025-08-04 20:48:05,029 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:48:05,029 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:48:05,029 - INFO -       Q(s) updated from -0.0227 to -0.0243 (TotalReward: -0.1702, NextMaxQ: -0.0183)
2025-08-04 20:48:05,030 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:48:05,030 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:48:05,030 - INFO -       Q(s) updated from -0.0243 to -0.0259 (TotalReward: -0.1702, NextMaxQ: -0.0183)
2025-08-04 20:48:05,031 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:48:05,031 - INFO - 
2025-08-04 20:48:05,031 - INFO - [ROUND 115]
2025-08-04 20:48:05,031 - INFO - [RLAgent choose_actions_softmax] Round 115. Temperature: 0.5704
2025-08-04 20:48:05,032 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:05,032 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01827255950791657, '5975185251685626785': -0.01951180669064416, '8560019474512340676': 0.028534007607455742, '12043264814094380418': -0.01827255950791657, '4296149388320225194': -0.01827255950791657, '15388649110162717160': 0.028534007607455742, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.01827255950791657, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.004739991031445198}
2025-08-04 20:48:05,032 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.098200994404224), '5975185251685626785': np.float64(0.09798787826470819), '8560019474512340676': np.float64(0.10659902363324139), '12043264814094380418': np.float64(0.098200994404224), '4296149388320225194': np.float64(0.098200994404224), '15388649110162717160': np.float64(0.10659902363324139), '2395859185497387824': np.float64(0.09746361302963238), '10913316872057236365': np.float64(0.098200994404224), '6587436948557123441': np.float64(0.09798787826470819), '17456602372862189643': np.float64(0.10055860555757244)}
2025-08-04 20:48:05,032 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:48:05,033 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '17456602372862189643']
2025-08-04 20:48:05,033 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '17456602372862189643']
2025-08-04 20:48:05,036 - INFO -   New temperature for next round: 0.5676
2025-08-04 20:48:05,036 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '17456602372862189643']. Corresponding states: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:48:05,036 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:48:11,056 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:48:11,056 - INFO - [Round 115, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:48:11,061 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:48:11,061 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:48:11,061 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0817, Aggregated D_Loss=0.7976 from 3 clients (79 examples)
2025-08-04 20:48:11,061 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.15s across 3 clients
2025-08-04 20:48:11,061 - INFO - Fit phase aggregation: Summary
2025-08-04 20:48:11,062 - INFO -   fit_clients_total_received: 3
2025-08-04 20:48:11,062 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:48:11,062 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:48:11,062 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:48:11,062 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:48:11,062 - INFO -   aggregated_g_loss: 2.0817
2025-08-04 20:48:11,062 - INFO -   aggregated_d_loss: 0.7976
2025-08-04 20:48:11,063 - INFO -   fit_time_avg_seconds_all_reporting: 0.1513
2025-08-04 20:48:11,063 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:48:17,107 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:48:17,107 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.6219761967658997, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8102564102564103, 'avg_anomaly_score': 0.5713730708836917, 'recall': 0.6909620991253644, 'eval_time_seconds': 0.011932611465454102, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7245657568238213, 'precision': 0.9793388429752066}
2025-08-04 20:48:17,107 - INFO - [Round 115, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:48:17,107 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 115.
2025-08-04 20:48:17,108 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 115.
2025-08-04 20:48:17,108 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 115.
2025-08-04 20:48:17,108 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 115.
2025-08-04 20:48:17,108 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 115.
2025-08-04 20:48:17,108 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 115.
2025-08-04 20:48:17,108 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 115.
2025-08-04 20:48:17,109 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 115.
2025-08-04 20:48:17,109 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 115.
2025-08-04 20:48:17,109 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 115.
2025-08-04 20:48:17,114 - INFO - [Round 115, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:48:17,118 - INFO - ==================================================
2025-08-04 20:48:17,118 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:48:17,118 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:48:17,118 - INFO - ==================================================
2025-08-04 20:48:17,118 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:48:17,118 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5592
2025-08-04 20:48:17,119 - INFO -   Global Accuracy (Wgtd Avg): 0.7263
2025-08-04 20:48:17,119 - INFO -   Global F1 Score (Wgtd Avg): 0.8103
2025-08-04 20:48:17,119 - INFO -   Global Precision (Wgtd Avg): 0.9745
2025-08-04 20:48:17,119 - INFO -   Global Recall (Wgtd Avg): 0.6935
2025-08-04 20:48:17,119 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:48:17,119 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0036) - FairPenalty(0.0200) - ResourceCost(0.3000) = -0.3236
2025-08-04 20:48:17,119 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 115.
2025-08-04 20:48:17,119 - INFO -   Final Global Reward for action: -0.3236. Client states at selection: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:48:17,119 - INFO -   Performance Reward: -0.0036, Fairness Penalty: 0.0200, Resource Cost: 0.3000
2025-08-04 20:48:17,119 - INFO -   Next round's global F1 (for next state Q-val): 0.8103
2025-08-04 20:48:17,120 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:48:17,120 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:48:17,120 - INFO -       Q(s) updated from 0.0285 to 0.0253 (TotalReward: -0.3236, NextMaxQ: 0.0285)
2025-08-04 20:48:17,120 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:48:17,121 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:48:17,121 - INFO -       Q(s) updated from 0.0253 to 0.0216 (TotalReward: -0.3236, NextMaxQ: -0.0226)
2025-08-04 20:48:17,121 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:48:17,121 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:48:17,121 - INFO -       Q(s) updated from -0.0047 to -0.0079 (TotalReward: -0.3236, NextMaxQ: 0.0000)
2025-08-04 20:48:17,122 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:48:17,122 - INFO - 
2025-08-04 20:48:17,122 - INFO - [ROUND 116]
2025-08-04 20:48:17,122 - INFO - [RLAgent choose_actions_softmax] Round 116. Temperature: 0.5676
2025-08-04 20:48:17,123 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:17,123 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01827255950791657, '5975185251685626785': -0.01665067538758168, '8560019474512340676': 0.021577716092541277, '12043264814094380418': -0.01827255950791657, '4296149388320225194': -0.025930349392434476, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.01665067538758168, '17456602372862189643': 0.0}
2025-08-04 20:48:17,123 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09931193566465923), '5975185251685626785': np.float64(0.0995961415455283), '8560019474512340676': np.float64(0.10653563772579772), '12043264814094380418': np.float64(0.09931193566465923), '4296149388320225194': np.float64(0.09798096211778899), '15388649110162717160': np.float64(0.09856247917255825), '2395859185497387824': np.float64(0.09856247917255825), '10913316872057236365': np.float64(0.09798096211778899), '6587436948557123441': np.float64(0.0995961415455283), '17456602372862189643': np.float64(0.10256132527313287)}
2025-08-04 20:48:17,123 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:48:17,124 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '17456602372862189643']
2025-08-04 20:48:17,124 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '17456602372862189643']
2025-08-04 20:48:17,127 - INFO -   New temperature for next round: 0.5647
2025-08-04 20:48:17,127 - INFO -   Final selected CIDs to return: ['8560019474512340676', '17456602372862189643']. Corresponding states: {'8560019474512340676': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:17,127 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:48:23,144 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:48:23,145 - INFO - [Round 116, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:48:23,148 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:48:23,148 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:48:23,148 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0734, Aggregated D_Loss=0.7795 from 2 clients (46 examples)
2025-08-04 20:48:23,149 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.14s across 2 clients
2025-08-04 20:48:23,149 - INFO - Fit phase aggregation: Summary
2025-08-04 20:48:23,149 - INFO -   fit_clients_total_received: 2
2025-08-04 20:48:23,149 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:48:23,149 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:48:23,149 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:48:23,149 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:48:23,149 - INFO -   aggregated_g_loss: 2.0734
2025-08-04 20:48:23,149 - INFO -   aggregated_d_loss: 0.7795
2025-08-04 20:48:23,149 - INFO -   fit_time_avg_seconds_all_reporting: 0.1369
2025-08-04 20:48:23,150 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:48:29,192 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:48:29,192 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.5130656480789184, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8229988726042841, 'avg_anomaly_score': 0.46357450696729846, 'recall': 0.7087378640776699, 'eval_time_seconds': 0.02085590362548828, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7467741935483871, 'precision': 0.9811827956989247}
2025-08-04 20:48:29,192 - INFO - [Round 116, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:48:29,192 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 116.
2025-08-04 20:48:29,193 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 116.
2025-08-04 20:48:29,194 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 116.
2025-08-04 20:48:29,199 - INFO - [Round 116, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:48:29,203 - INFO - ==================================================
2025-08-04 20:48:29,203 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:48:29,203 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:48:29,203 - INFO - ==================================================
2025-08-04 20:48:29,203 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:48:29,203 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4680
2025-08-04 20:48:29,204 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:48:29,204 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:48:29,204 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:48:29,204 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:48:29,204 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:48:29,204 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0027) - FairPenalty(0.0300) - ResourceCost(0.1400) = -0.1673
2025-08-04 20:48:29,204 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 116.
2025-08-04 20:48:29,204 - INFO -   Final Global Reward for action: -0.1673. Client states at selection: {'8560019474512340676': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:29,204 - INFO -   Performance Reward: 0.0027, Fairness Penalty: 0.0300, Resource Cost: 0.1400
2025-08-04 20:48:29,204 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:48:29,205 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:48:29,205 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:48:29,205 - INFO -       Q(s) updated from 0.0216 to 0.0195 (TotalReward: -0.1673, NextMaxQ: -0.0226)
2025-08-04 20:48:29,205 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:48:29,205 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:48:29,206 - INFO -       Q(s) updated from 0.0000 to -0.0017 (TotalReward: -0.1673, NextMaxQ: 0.0000)
2025-08-04 20:48:29,206 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:48:29,207 - INFO - 
2025-08-04 20:48:29,207 - INFO - [ROUND 117]
2025-08-04 20:48:29,207 - INFO - [RLAgent choose_actions_softmax] Round 117. Temperature: 0.5647
2025-08-04 20:48:29,207 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:29,208 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01827255950791657, '5975185251685626785': -0.01665067538758168, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.01827255950791657, '4296149388320225194': -0.025930349392434476, '15388649110162717160': 0.019485365258371322, '2395859185497387824': 0.019485365258371322, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.01665067538758168, '17456602372862189643': -0.0016734269382461685}
2025-08-04 20:48:29,208 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09862560247456657), '5975185251685626785': np.float64(0.09890926457727918), '8560019474512340676': np.float64(0.0978775995283111), '12043264814094380418': np.float64(0.09862560247456657), '4296149388320225194': np.float64(0.09729722998726499), '15388649110162717160': np.float64(0.10544530601383627), '2395859185497387824': np.float64(0.10544530601383627), '10913316872057236365': np.float64(0.09729722998726499), '6587436948557123441': np.float64(0.09890926457727918), '17456602372862189643': np.float64(0.10156759436579495)}
2025-08-04 20:48:29,208 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:48:29,208 - INFO -     Selected 3 CIDs with this factor: ['15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:48:29,209 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:48:29,212 - INFO -   New temperature for next round: 0.5619
2025-08-04 20:48:29,212 - INFO -   Final selected CIDs to return: ['15388649110162717160', '2395859185497387824', '17456602372862189643']. Corresponding states: {'15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:29,212 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:48:38,233 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:48:38,233 - INFO - [Round 117, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:48:38,238 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:48:38,238 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:48:38,238 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0845, Aggregated D_Loss=0.7845 from 3 clients (2622 examples)
2025-08-04 20:48:38,238 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.77s across 3 clients
2025-08-04 20:48:38,238 - INFO - Fit phase aggregation: Summary
2025-08-04 20:48:38,238 - INFO -   fit_clients_total_received: 3
2025-08-04 20:48:38,238 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:48:38,238 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:48:38,238 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:48:38,238 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:48:38,238 - INFO -   aggregated_g_loss: 2.0845
2025-08-04 20:48:38,239 - INFO -   aggregated_d_loss: 0.7845
2025-08-04 20:48:38,239 - INFO -   fit_time_avg_seconds_all_reporting: 0.7676
2025-08-04 20:48:38,239 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:48:44,286 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:48:44,287 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.5370603322982789, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.4733461693662112, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.010932683944702148, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:48:44,287 - INFO - [Round 117, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:48:44,287 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 117.
2025-08-04 20:48:44,287 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 117.
2025-08-04 20:48:44,287 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 117.
2025-08-04 20:48:44,288 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 117.
2025-08-04 20:48:44,294 - INFO - [Round 117, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:48:44,298 - INFO - ==================================================
2025-08-04 20:48:44,298 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:48:44,298 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:48:44,298 - INFO - ==================================================
2025-08-04 20:48:44,299 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:48:44,299 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4888
2025-08-04 20:48:44,299 - INFO -   Global Accuracy (Wgtd Avg): 0.7312
2025-08-04 20:48:44,299 - INFO -   Global F1 Score (Wgtd Avg): 0.8137
2025-08-04 20:48:44,300 - INFO -   Global Precision (Wgtd Avg): 0.9786
2025-08-04 20:48:44,300 - INFO -   Global Recall (Wgtd Avg): 0.6964
2025-08-04 20:48:44,300 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:48:44,300 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0803) - FairPenalty(0.0300) - ResourceCost(0.3000) = -0.2497
2025-08-04 20:48:44,300 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 117.
2025-08-04 20:48:44,300 - INFO -   Final Global Reward for action: -0.2497. Client states at selection: {'15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:44,300 - INFO -   Performance Reward: 0.0803, Fairness Penalty: 0.0300, Resource Cost: 0.3000
2025-08-04 20:48:44,300 - INFO -   Next round's global F1 (for next state Q-val): 0.8137
2025-08-04 20:48:44,300 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:48:44,301 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:48:44,301 - INFO -       Q(s) updated from 0.0195 to 0.0166 (TotalReward: -0.2497, NextMaxQ: -0.0226)
2025-08-04 20:48:44,301 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:48:44,301 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:48:44,301 - INFO -       Q(s) updated from 0.0166 to 0.0137 (TotalReward: -0.2497, NextMaxQ: -0.0226)
2025-08-04 20:48:44,302 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:48:44,302 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:48:44,302 - INFO -       Q(s) updated from -0.0017 to -0.0042 (TotalReward: -0.2497, NextMaxQ: -0.0017)
2025-08-04 20:48:44,302 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:48:44,303 - INFO - 
2025-08-04 20:48:44,303 - INFO - [ROUND 118]
2025-08-04 20:48:44,303 - INFO - [RLAgent choose_actions_softmax] Round 118. Temperature: 0.5619
2025-08-04 20:48:44,304 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:44,304 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.01665067538758168, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.01665067538758168, '17456602372862189643': -0.004169089537463379}
2025-08-04 20:48:44,304 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09910039455722668), '5975185251685626785': np.float64(0.10075062334578672), '8560019474512340676': np.float64(0.09969449917827401), '12043264814094380418': np.float64(0.09910039455722668), '4296149388320225194': np.float64(0.09910039455722668), '15388649110162717160': np.float64(0.09969449917827401), '2395859185497387824': np.float64(0.09969449917827401), '10913316872057236365': np.float64(0.09910039455722668), '6587436948557123441': np.float64(0.10075062334578672), '17456602372862189643': np.float64(0.10301367754469772)}
2025-08-04 20:48:44,304 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:48:44,305 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:44,305 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:44,308 - INFO -   New temperature for next round: 0.5591
2025-08-04 20:48:44,308 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 0, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:44,308 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:48:50,329 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:48:50,330 - INFO - [Round 118, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:48:50,334 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:48:50,334 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 20:48:50,334 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0823, Aggregated D_Loss=0.7883 from 3 clients (456 examples)
2025-08-04 20:48:50,334 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.25s across 3 clients
2025-08-04 20:48:50,334 - INFO - Fit phase aggregation: Summary
2025-08-04 20:48:50,335 - INFO -   fit_clients_total_received: 3
2025-08-04 20:48:50,335 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:48:50,335 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:48:50,335 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:48:50,335 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 20:48:50,335 - INFO -   aggregated_g_loss: 2.0823
2025-08-04 20:48:50,335 - INFO -   aggregated_d_loss: 0.7883
2025-08-04 20:48:50,335 - INFO -   fit_time_avg_seconds_all_reporting: 0.2538
2025-08-04 20:48:50,336 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:48:56,381 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:48:56,382 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5710520267486572, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8118811881188119, 'avg_anomaly_score': 0.5201594861005422, 'recall': 0.6910112359550562, 'eval_time_seconds': 0.013580083847045898, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7266187050359713, 'precision': 0.984}
2025-08-04 20:48:56,382 - INFO - [Round 118, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:48:56,382 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 118.
2025-08-04 20:48:56,382 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 118.
2025-08-04 20:48:56,383 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 118.
2025-08-04 20:48:56,383 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 118.
2025-08-04 20:48:56,383 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 118.
2025-08-04 20:48:56,383 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 118.
2025-08-04 20:48:56,383 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 118.
2025-08-04 20:48:56,384 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 118.
2025-08-04 20:48:56,384 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 118.
2025-08-04 20:48:56,384 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 118.
2025-08-04 20:48:56,391 - INFO - [Round 118, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:48:56,396 - INFO - ==================================================
2025-08-04 20:48:56,396 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:48:56,396 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:48:56,396 - INFO - ==================================================
2025-08-04 20:48:56,396 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:48:56,397 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5184
2025-08-04 20:48:56,397 - INFO -   Global Accuracy (Wgtd Avg): 0.7280
2025-08-04 20:48:56,397 - INFO -   Global F1 Score (Wgtd Avg): 0.8115
2025-08-04 20:48:56,397 - INFO -   Global Precision (Wgtd Avg): 0.9762
2025-08-04 20:48:56,397 - INFO -   Global Recall (Wgtd Avg): 0.6944
2025-08-04 20:48:56,397 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:48:56,397 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0029) - FairPenalty(0.0300) - ResourceCost(0.1800) = -0.2129
2025-08-04 20:48:56,397 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 118.
2025-08-04 20:48:56,398 - INFO -   Final Global Reward for action: -0.2129. Client states at selection: {'5975185251685626785': (8, 0, 1, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:56,398 - INFO -   Performance Reward: -0.0029, Fairness Penalty: 0.0300, Resource Cost: 0.1800
2025-08-04 20:48:56,398 - INFO -   Next round's global F1 (for next state Q-val): 0.8115
2025-08-04 20:48:56,398 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:48:56,398 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:48:56,398 - INFO -       Q(s) updated from -0.0167 to -0.0188 (TotalReward: -0.2129, NextMaxQ: -0.0195)
2025-08-04 20:48:56,399 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:48:56,399 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:48:56,399 - INFO -       Q(s) updated from -0.0188 to -0.0209 (TotalReward: -0.2129, NextMaxQ: -0.0195)
2025-08-04 20:48:56,399 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:48:56,399 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:48:56,400 - INFO -       Q(s) updated from -0.0042 to -0.0063 (TotalReward: -0.2129, NextMaxQ: -0.0042)
2025-08-04 20:48:56,400 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:48:56,401 - INFO - 
2025-08-04 20:48:56,401 - INFO - [ROUND 119]
2025-08-04 20:48:56,401 - INFO - [RLAgent choose_actions_softmax] Round 119. Temperature: 0.5591
2025-08-04 20:48:56,401 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:48:56,401 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.01951180669064416, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': -0.022571859444263702, '2395859185497387824': 0.013723645795033611, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.006294333389848573}
2025-08-04 20:48:56,402 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09857663563406804), '5975185251685626785': np.float64(0.09971485930439555), '8560019474512340676': np.float64(0.09917057892730938), '12043264814094380418': np.float64(0.09857663563406804), '4296149388320225194': np.float64(0.09857663563406804), '15388649110162717160': np.float64(0.09917057892730938), '2395859185497387824': np.float64(0.10582225189112769), '10913316872057236365': np.float64(0.09857663563406804), '6587436948557123441': np.float64(0.09971485930439555), '17456602372862189643': np.float64(0.10210032910919023)}
2025-08-04 20:48:56,402 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:48:56,402 - INFO -     Selected 2 CIDs with this factor: ['2395859185497387824', '17456602372862189643']
2025-08-04 20:48:56,402 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824', '17456602372862189643']
2025-08-04 20:48:56,410 - INFO -   New temperature for next round: 0.5563
2025-08-04 20:48:56,410 - INFO -   Final selected CIDs to return: ['2395859185497387824', '17456602372862189643']. Corresponding states: {'2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:48:56,410 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:49:02,427 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:49:02,427 - INFO - [Round 119, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:49:02,430 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:49:02,430 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:49:02,430 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0842, Aggregated D_Loss=0.7809 from 2 clients (2637 examples)
2025-08-04 20:49:02,431 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.06s across 2 clients
2025-08-04 20:49:02,431 - INFO - Fit phase aggregation: Summary
2025-08-04 20:49:02,431 - INFO -   fit_clients_total_received: 2
2025-08-04 20:49:02,431 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:49:02,431 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:49:02,431 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:49:02,432 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:49:02,432 - INFO -   aggregated_g_loss: 2.0842
2025-08-04 20:49:02,432 - INFO -   aggregated_d_loss: 0.7809
2025-08-04 20:49:02,432 - INFO -   fit_time_avg_seconds_all_reporting: 1.0633
2025-08-04 20:49:02,433 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:49:08,476 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:49:08,476 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5521157741546631, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.49225982030232746, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.010570287704467773, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:49:08,476 - INFO - [Round 119, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:49:08,477 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 119.
2025-08-04 20:49:08,477 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 119.
2025-08-04 20:49:08,477 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 119.
2025-08-04 20:49:08,477 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 119.
2025-08-04 20:49:08,477 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 119.
2025-08-04 20:49:08,478 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 119.
2025-08-04 20:49:08,478 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 119.
2025-08-04 20:49:08,478 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 119.
2025-08-04 20:49:08,478 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 119.
2025-08-04 20:49:08,478 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 119.
2025-08-04 20:49:08,492 - INFO - [Round 119, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:49:08,495 - INFO - ==================================================
2025-08-04 20:49:08,496 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:49:08,496 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:49:08,496 - INFO - ==================================================
2025-08-04 20:49:08,496 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:49:08,496 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4984
2025-08-04 20:49:08,496 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 20:49:08,496 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 20:49:08,496 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 20:49:08,497 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 20:49:08,497 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:49:08,497 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0017) - FairPenalty(0.0300) - ResourceCost(0.1400) = -0.1683
2025-08-04 20:49:08,497 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 119.
2025-08-04 20:49:08,497 - INFO -   Final Global Reward for action: -0.1683. Client states at selection: {'2395859185497387824': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:08,497 - INFO -   Performance Reward: 0.0017, Fairness Penalty: 0.0300, Resource Cost: 0.1400
2025-08-04 20:49:08,497 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 20:49:08,497 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:49:08,497 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:49:08,498 - INFO -       Q(s) updated from 0.0137 to 0.0117 (TotalReward: -0.1683, NextMaxQ: -0.0226)
2025-08-04 20:49:08,498 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:49:08,498 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:49:08,498 - INFO -       Q(s) updated from -0.0063 to -0.0080 (TotalReward: -0.1683, NextMaxQ: -0.0063)
2025-08-04 20:49:08,499 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:49:08,499 - INFO - 
2025-08-04 20:49:08,500 - INFO - [ROUND 120]
2025-08-04 20:49:08,500 - INFO - [RLAgent choose_actions_softmax] Round 120. Temperature: 0.5563
2025-08-04 20:49:08,500 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:49:08,500 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01690248624986104, '5975185251685626785': -0.01951180669064416, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.01690248624986104, '4296149388320225194': -0.01690248624986104, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.01690248624986104, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.007970797405870632}
2025-08-04 20:49:08,501 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10023648504980376), '5975185251685626785': np.float64(0.0997674191410606), '8560019474512340676': np.float64(0.0992201228786441), '12043264814094380418': np.float64(0.10023648504980376), '4296149388320225194': np.float64(0.10023648504980376), '15388649110162717160': np.float64(0.0992201228786441), '2395859185497387824': np.float64(0.0992201228786441), '10913316872057236365': np.float64(0.10023648504980376), '6587436948557123441': np.float64(0.0997674191410606), '17456602372862189643': np.float64(0.10185885288273151)}
2025-08-04 20:49:08,501 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:49:08,501 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:49:08,501 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:49:08,505 - INFO -   New temperature for next round: 0.5535
2025-08-04 20:49:08,505 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 0, 0, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:08,505 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:49:20,526 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:49:20,526 - INFO - [Round 120, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:49:20,533 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:49:20,534 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.60
2025-08-04 20:49:20,534 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0841, Aggregated D_Loss=0.7952 from 5 clients (12300 examples)
2025-08-04 20:49:20,534 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.88s across 5 clients
2025-08-04 20:49:20,534 - INFO - Fit phase aggregation: Summary
2025-08-04 20:49:20,534 - INFO -   fit_clients_total_received: 5
2025-08-04 20:49:20,534 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:49:20,534 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:49:20,534 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:49:20,535 - INFO -   allocated_cores_avg_per_client: 1.6000
2025-08-04 20:49:20,535 - INFO -   aggregated_g_loss: 2.0841
2025-08-04 20:49:20,535 - INFO -   aggregated_d_loss: 0.7952
2025-08-04 20:49:20,535 - INFO -   fit_time_avg_seconds_all_reporting: 1.8752
2025-08-04 20:49:20,535 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:49:26,575 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:49:26,576 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.5678102254867554, 'profile_name': 'Low-End IoT', 'f1_score': 0.7973856209150327, 'avg_anomaly_score': 0.5301594013259524, 'recall': 0.6777777777777778, 'eval_time_seconds': 0.008814811706542969, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7047619047619048, 'precision': 0.9682539682539683}
2025-08-04 20:49:26,576 - INFO - [Round 120, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:49:26,576 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 120.
2025-08-04 20:49:26,576 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 120.
2025-08-04 20:49:26,576 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 120.
2025-08-04 20:49:26,577 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 120.
2025-08-04 20:49:26,577 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 120.
2025-08-04 20:49:26,577 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 120.
2025-08-04 20:49:26,577 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 120.
2025-08-04 20:49:26,577 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 120.
2025-08-04 20:49:26,577 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 120.
2025-08-04 20:49:26,578 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 120.
2025-08-04 20:49:26,583 - INFO - [Round 120, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:49:26,587 - INFO - ==================================================
2025-08-04 20:49:26,587 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:49:26,587 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:49:26,587 - INFO - ==================================================
2025-08-04 20:49:26,588 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:49:26,588 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5168
2025-08-04 20:49:26,588 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:49:26,588 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:49:26,588 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:49:26,588 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:49:26,588 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:49:26,588 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0300) - ResourceCost(0.1600) = -0.1902
2025-08-04 20:49:26,588 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 120.
2025-08-04 20:49:26,589 - INFO -   Final Global Reward for action: -0.1902. Client states at selection: {'1640189632563049314': (8, 0, 0, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:26,589 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0300, Resource Cost: 0.1600
2025-08-04 20:49:26,589 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:49:26,589 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:49:26,589 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:49:26,589 - INFO -       Q(s) updated from -0.0169 to -0.0189 (TotalReward: -0.1902, NextMaxQ: -0.0259)
2025-08-04 20:49:26,590 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:49:26,590 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:49:26,590 - INFO -       Q(s) updated from -0.0189 to -0.0208 (TotalReward: -0.1902, NextMaxQ: -0.0259)
2025-08-04 20:49:26,590 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:49:26,590 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:49:26,590 - INFO -       Q(s) updated from -0.0208 to -0.0227 (TotalReward: -0.1902, NextMaxQ: -0.0259)
2025-08-04 20:49:26,591 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:49:26,591 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:49:26,591 - INFO -       Q(s) updated from -0.0227 to -0.0247 (TotalReward: -0.1902, NextMaxQ: -0.0259)
2025-08-04 20:49:26,592 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:49:26,592 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:49:26,592 - INFO -       Q(s) updated from -0.0080 to -0.0099 (TotalReward: -0.1902, NextMaxQ: -0.0080)
2025-08-04 20:49:26,593 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:49:26,593 - INFO - 
2025-08-04 20:49:26,594 - INFO - [ROUND 121]
2025-08-04 20:49:26,594 - INFO - [RLAgent choose_actions_softmax] Round 121. Temperature: 0.5535
2025-08-04 20:49:26,594 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:49:26,594 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.01951180669064416, '8560019474512340676': 0.011700504252672994, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': 0.011700504252672994, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.009865091392830051}
2025-08-04 20:49:26,595 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09804340902562587), '5975185251685626785': np.float64(0.09918694813229036), '8560019474512340676': np.float64(0.10494079896281655), '12043264814094380418': np.float64(0.09804340902562587), '4296149388320225194': np.float64(0.09804340902562587), '15388649110162717160': np.float64(0.10494079896281655), '2395859185497387824': np.float64(0.098640109497109), '10913316872057236365': np.float64(0.09804340902562587), '6587436948557123441': np.float64(0.09918694813229036), '17456602372862189643': np.float64(0.10093076021017383)}
2025-08-04 20:49:26,595 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:49:26,595 - INFO -     Selected 3 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '17456602372862189643']
2025-08-04 20:49:26,595 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '17456602372862189643']
2025-08-04 20:49:26,598 - INFO -   New temperature for next round: 0.5507
2025-08-04 20:49:26,599 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '17456602372862189643']. Corresponding states: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:26,599 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:49:32,619 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:49:32,619 - INFO - [Round 121, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:49:32,624 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:49:32,624 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:49:32,624 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0788, Aggregated D_Loss=0.7873 from 3 clients (85 examples)
2025-08-04 20:49:32,624 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.15s across 3 clients
2025-08-04 20:49:32,624 - INFO - Fit phase aggregation: Summary
2025-08-04 20:49:32,624 - INFO -   fit_clients_total_received: 3
2025-08-04 20:49:32,624 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:49:32,625 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:49:32,625 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:49:32,625 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:49:32,625 - INFO -   aggregated_g_loss: 2.0788
2025-08-04 20:49:32,625 - INFO -   aggregated_d_loss: 0.7873
2025-08-04 20:49:32,625 - INFO -   fit_time_avg_seconds_all_reporting: 0.1495
2025-08-04 20:49:32,626 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:49:38,675 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:49:38,675 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.48508572578430176, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.81291504465308, 'avg_anomaly_score': 0.4588692000640632, 'recall': 0.6944444444444444, 'eval_time_seconds': 0.04541516304016113, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7292909211398277, 'precision': 0.9801214798453893}
2025-08-04 20:49:38,675 - INFO - [Round 121, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:49:38,676 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 121.
2025-08-04 20:49:38,676 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 121.
2025-08-04 20:49:38,676 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 121.
2025-08-04 20:49:38,676 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 121.
2025-08-04 20:49:38,676 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 121.
2025-08-04 20:49:38,677 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 121.
2025-08-04 20:49:38,677 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 121.
2025-08-04 20:49:38,677 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 121.
2025-08-04 20:49:38,677 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 121.
2025-08-04 20:49:38,677 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 121.
2025-08-04 20:49:38,683 - INFO - [Round 121, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:49:38,687 - INFO - ==================================================
2025-08-04 20:49:38,687 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:49:38,687 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:49:38,687 - INFO - ==================================================
2025-08-04 20:49:38,687 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:49:38,688 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4576
2025-08-04 20:49:38,688 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 20:49:38,688 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 20:49:38,688 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 20:49:38,688 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 20:49:38,688 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:49:38,688 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0300) - ResourceCost(0.3000) = -0.3298
2025-08-04 20:49:38,688 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 121.
2025-08-04 20:49:38,689 - INFO -   Final Global Reward for action: -0.3298. Client states at selection: {'8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:38,689 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0300, Resource Cost: 0.3000
2025-08-04 20:49:38,689 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 20:49:38,689 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:49:38,689 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:49:38,689 - INFO -       Q(s) updated from 0.0117 to 0.0084 (TotalReward: -0.3298, NextMaxQ: 0.0117)
2025-08-04 20:49:38,689 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:49:38,690 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:49:38,690 - INFO -       Q(s) updated from 0.0084 to 0.0048 (TotalReward: -0.3298, NextMaxQ: -0.0226)
2025-08-04 20:49:38,690 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:49:38,690 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:49:38,690 - INFO -       Q(s) updated from -0.0099 to -0.0132 (TotalReward: -0.3298, NextMaxQ: -0.0099)
2025-08-04 20:49:38,691 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:49:38,691 - INFO - 
2025-08-04 20:49:38,692 - INFO - [ROUND 122]
2025-08-04 20:49:38,692 - INFO - [RLAgent choose_actions_softmax] Round 122. Temperature: 0.5507
2025-08-04 20:49:38,692 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:49:38,693 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.01951180669064416, '8560019474512340676': 0.0048048773864189445, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.01951180669064416, '17456602372862189643': -0.013153664286120035}
2025-08-04 20:49:38,693 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09884800033282444), '5975185251685626785': np.float64(0.10000675127192436), '8560019474512340676': np.float64(0.1045212463173101), '12043264814094380418': np.float64(0.09884800033282444), '4296149388320225194': np.float64(0.09884800033282444), '15388649110162717160': np.float64(0.09945262993845054), '2395859185497387824': np.float64(0.09945262993845054), '10913316872057236365': np.float64(0.09884800033282444), '6587436948557123441': np.float64(0.10000675127192436), '17456602372862189643': np.float64(0.10116798993064238)}
2025-08-04 20:49:38,693 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:49:38,693 - INFO -     Selected 4 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '6587436948557123441', '17456602372862189643']
2025-08-04 20:49:38,693 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '6587436948557123441', '17456602372862189643']
2025-08-04 20:49:38,697 - INFO -   New temperature for next round: 0.5480
2025-08-04 20:49:38,697 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 1, 1, 8, 8), '8560019474512340676': (8, 1, 2, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:38,697 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:49:44,722 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:49:44,722 - INFO - [Round 122, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:49:44,728 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:49:44,728 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:49:44,728 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0827, Aggregated D_Loss=0.7847 from 4 clients (498 examples)
2025-08-04 20:49:44,728 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 4 clients
2025-08-04 20:49:44,729 - INFO - Fit phase aggregation: Summary
2025-08-04 20:49:44,729 - INFO -   fit_clients_total_received: 4
2025-08-04 20:49:44,729 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:49:44,729 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:49:44,729 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:49:44,729 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:49:44,729 - INFO -   aggregated_g_loss: 2.0827
2025-08-04 20:49:44,729 - INFO -   aggregated_d_loss: 0.7847
2025-08-04 20:49:44,730 - INFO -   fit_time_avg_seconds_all_reporting: 0.2343
2025-08-04 20:49:44,730 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:49:50,772 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:49:50,773 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5934161424636841, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8052805280528053, 'avg_anomaly_score': 0.5300254077076626, 'recall': 0.6853932584269663, 'eval_time_seconds': 0.012171506881713867, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7170263788968825, 'precision': 0.976}
2025-08-04 20:49:50,773 - INFO - [Round 122, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:49:50,773 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 122.
2025-08-04 20:49:50,773 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 122.
2025-08-04 20:49:50,773 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 122.
2025-08-04 20:49:50,773 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 122.
2025-08-04 20:49:50,774 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 122.
2025-08-04 20:49:50,774 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 122.
2025-08-04 20:49:50,774 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 122.
2025-08-04 20:49:50,774 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 122.
2025-08-04 20:49:50,774 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 122.
2025-08-04 20:49:50,774 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 122.
2025-08-04 20:49:50,780 - INFO - [Round 122, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:49:50,784 - INFO - ==================================================
2025-08-04 20:49:50,784 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:49:50,784 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:49:50,784 - INFO - ==================================================
2025-08-04 20:49:50,784 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:49:50,784 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5275
2025-08-04 20:49:50,784 - INFO -   Global Accuracy (Wgtd Avg): 0.7246
2025-08-04 20:49:50,785 - INFO -   Global F1 Score (Wgtd Avg): 0.8091
2025-08-04 20:49:50,785 - INFO -   Global Precision (Wgtd Avg): 0.9731
2025-08-04 20:49:50,785 - INFO -   Global Recall (Wgtd Avg): 0.6925
2025-08-04 20:49:50,785 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:49:50,785 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0056) - FairPenalty(0.0300) - ResourceCost(0.2800) = -0.3156
2025-08-04 20:49:50,785 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 122.
2025-08-04 20:49:50,785 - INFO -   Final Global Reward for action: -0.3156. Client states at selection: {'5975185251685626785': (8, 1, 1, 8, 8), '8560019474512340676': (8, 1, 2, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 5, 0, 8, 8)}
2025-08-04 20:49:50,785 - INFO -   Performance Reward: -0.0056, Fairness Penalty: 0.0300, Resource Cost: 0.2800
2025-08-04 20:49:50,785 - INFO -   Next round's global F1 (for next state Q-val): 0.8091
2025-08-04 20:49:50,786 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:49:50,786 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:49:50,786 - INFO -       Q(s) updated from -0.0195 to -0.0226 (TotalReward: -0.3156, NextMaxQ: -0.0095)
2025-08-04 20:49:50,786 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:49:50,787 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:49:50,787 - INFO -       Q(s) updated from 0.0048 to 0.0014 (TotalReward: -0.3156, NextMaxQ: -0.0226)
2025-08-04 20:49:50,787 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:49:50,787 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:49:50,787 - INFO -       Q(s) updated from -0.0226 to -0.0256 (TotalReward: -0.3156, NextMaxQ: -0.0095)
2025-08-04 20:49:50,788 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:49:50,788 - INFO -       State(s): (7, 5, 0, 8, 8) -> NextState(s'): (7, 5, 0, 8, 8)
2025-08-04 20:49:50,788 - INFO -       Q(s) updated from -0.0132 to -0.0163 (TotalReward: -0.3156, NextMaxQ: -0.0132)
2025-08-04 20:49:50,789 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:49:50,789 - INFO - 
2025-08-04 20:49:50,789 - INFO - [ROUND 123]
2025-08-04 20:49:50,790 - INFO - [RLAgent choose_actions_softmax] Round 123. Temperature: 0.5480
2025-08-04 20:49:50,790 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:49:50,790 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.009505094842523062, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': 0.0013975269314328125, '2395859185497387824': 0.0013975269314328125, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.009505094842523062, '17456602372862189643': -0.016296665567957485}
2025-08-04 20:49:50,790 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09816426805642044), '5975185251685626785': np.float64(0.10115116365015471), '8560019474512340676': np.float64(0.09876774200876476), '12043264814094380418': np.float64(0.09816426805642044), '4296149388320225194': np.float64(0.09816426805642044), '15388649110162717160': np.float64(0.10318379593375335), '2395859185497387824': np.float64(0.10318379593375335), '10913316872057236365': np.float64(0.09816426805642044), '6587436948557123441': np.float64(0.10115116365015471), '17456602372862189643': np.float64(0.09990526659773724)}
2025-08-04 20:49:50,791 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:49:50,791 - INFO -     Selected 4 CIDs with this factor: ['5975185251685626785', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:49:50,791 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '15388649110162717160', '2395859185497387824', '6587436948557123441']
2025-08-04 20:49:50,795 - INFO -   New temperature for next round: 0.5452
2025-08-04 20:49:50,795 - INFO -   Final selected CIDs to return: ['5975185251685626785', '15388649110162717160', '2395859185497387824', '6587436948557123441']. Corresponding states: {'5975185251685626785': (8, 2, 1, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 20:49:50,795 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:49:59,812 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:49:59,812 - INFO - [Round 123, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:49:59,818 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:49:59,818 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:49:59,819 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0842, Aggregated D_Loss=0.7827 from 4 clients (3190 examples)
2025-08-04 20:49:59,819 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.85s across 4 clients
2025-08-04 20:49:59,819 - INFO - Fit phase aggregation: Summary
2025-08-04 20:49:59,819 - INFO -   fit_clients_total_received: 4
2025-08-04 20:49:59,819 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:49:59,819 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:49:59,819 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:49:59,819 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:49:59,819 - INFO -   aggregated_g_loss: 2.0842
2025-08-04 20:49:59,820 - INFO -   aggregated_d_loss: 0.7827
2025-08-04 20:49:59,820 - INFO -   fit_time_avg_seconds_all_reporting: 0.8468
2025-08-04 20:49:59,820 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:50:05,864 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:50:05,864 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.6146724462509155, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.527896796582175, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.0081634521484375, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:50:05,864 - INFO - [Round 123, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 123.
2025-08-04 20:50:05,865 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 123.
2025-08-04 20:50:05,866 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 123.
2025-08-04 20:50:05,872 - INFO - [Round 123, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:50:05,875 - INFO - ==================================================
2025-08-04 20:50:05,875 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:50:05,875 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:50:05,875 - INFO - ==================================================
2025-08-04 20:50:05,876 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:50:05,876 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5446
2025-08-04 20:50:05,876 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:50:05,876 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:50:05,876 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:50:05,876 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:50:05,876 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:50:05,876 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0034) - FairPenalty(0.0000) - ResourceCost(0.4000) = -0.3966
2025-08-04 20:50:05,876 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 123.
2025-08-04 20:50:05,877 - INFO -   Final Global Reward for action: -0.3966. Client states at selection: {'5975185251685626785': (8, 2, 1, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 20:50:05,877 - INFO -   Performance Reward: 0.0034, Fairness Penalty: 0.0000, Resource Cost: 0.4000
2025-08-04 20:50:05,877 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:50:05,877 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:50:05,877 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:50:05,877 - INFO -       Q(s) updated from -0.0095 to -0.0135 (TotalReward: -0.3966, NextMaxQ: -0.0095)
2025-08-04 20:50:05,878 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:50:05,878 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:50:05,878 - INFO -       Q(s) updated from 0.0014 to -0.0028 (TotalReward: -0.3966, NextMaxQ: -0.0226)
2025-08-04 20:50:05,878 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:50:05,879 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:50:05,879 - INFO -       Q(s) updated from -0.0028 to -0.0069 (TotalReward: -0.3966, NextMaxQ: -0.0226)
2025-08-04 20:50:05,879 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:50:05,879 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:50:05,879 - INFO -       Q(s) updated from -0.0135 to -0.0174 (TotalReward: -0.3966, NextMaxQ: -0.0135)
2025-08-04 20:50:05,880 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:50:05,880 - INFO - 
2025-08-04 20:50:05,881 - INFO - [ROUND 124]
2025-08-04 20:50:05,881 - INFO - [RLAgent choose_actions_softmax] Round 124. Temperature: 0.5452
2025-08-04 20:50:05,881 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:05,881 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.017413348509681455, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.017413348509681455, '17456602372862189643': -0.00792854892832178}
2025-08-04 20:50:05,882 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0991710411897334), '5975185251685626785': np.float64(0.10073229800812385), '8560019474512340676': np.float64(0.09978377744691655), '12043264814094380418': np.float64(0.0991710411897334), '4296149388320225194': np.float64(0.0991710411897334), '15388649110162717160': np.float64(0.09978377744691655), '2395859185497387824': np.float64(0.09978377744691655), '10913316872057236365': np.float64(0.0991710411897334), '6587436948557123441': np.float64(0.10073229800812385), '17456602372862189643': np.float64(0.10249990688406914)}
2025-08-04 20:50:05,882 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:50:05,882 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:05,882 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:05,885 - INFO -   New temperature for next round: 0.5425
2025-08-04 20:50:05,886 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 2, 1, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:05,886 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:50:14,901 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:50:14,901 - INFO - [Round 124, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:50:14,906 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:50:14,906 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 20:50:14,906 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0833, Aggregated D_Loss=0.7897 from 3 clients (484 examples)
2025-08-04 20:50:14,907 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.26s across 3 clients
2025-08-04 20:50:14,907 - INFO - Fit phase aggregation: Summary
2025-08-04 20:50:14,907 - INFO -   fit_clients_total_received: 3
2025-08-04 20:50:14,907 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:50:14,907 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:50:14,907 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:50:14,907 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 20:50:14,907 - INFO -   aggregated_g_loss: 2.0833
2025-08-04 20:50:14,907 - INFO -   aggregated_d_loss: 0.7897
2025-08-04 20:50:14,908 - INFO -   fit_time_avg_seconds_all_reporting: 0.2614
2025-08-04 20:50:14,908 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:50:23,940 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:50:23,941 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5910434246063232, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.515893695932446, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.009979009628295898, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:50:23,941 - INFO - [Round 124, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:50:23,941 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 124.
2025-08-04 20:50:23,941 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 124.
2025-08-04 20:50:23,941 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 124.
2025-08-04 20:50:23,941 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 124.
2025-08-04 20:50:23,942 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 124.
2025-08-04 20:50:23,942 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 124.
2025-08-04 20:50:23,942 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 124.
2025-08-04 20:50:23,942 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 124.
2025-08-04 20:50:23,942 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 124.
2025-08-04 20:50:23,942 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 124.
2025-08-04 20:50:23,948 - INFO - [Round 124, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:50:23,952 - INFO - ==================================================
2025-08-04 20:50:23,952 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:50:23,952 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:50:23,952 - INFO - ==================================================
2025-08-04 20:50:23,953 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:50:23,953 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5237
2025-08-04 20:50:23,953 - INFO -   Global Accuracy (Wgtd Avg): 0.7278
2025-08-04 20:50:23,953 - INFO -   Global F1 Score (Wgtd Avg): 0.8113
2025-08-04 20:50:23,953 - INFO -   Global Precision (Wgtd Avg): 0.9760
2025-08-04 20:50:23,953 - INFO -   Global Recall (Wgtd Avg): 0.6942
2025-08-04 20:50:23,953 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:50:23,954 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0020) - FairPenalty(0.0200) - ResourceCost(0.1800) = -0.2020
2025-08-04 20:50:23,954 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 124.
2025-08-04 20:50:23,954 - INFO -   Final Global Reward for action: -0.2020. Client states at selection: {'5975185251685626785': (8, 2, 1, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:23,954 - INFO -   Performance Reward: -0.0020, Fairness Penalty: 0.0200, Resource Cost: 0.1800
2025-08-04 20:50:23,954 - INFO -   Next round's global F1 (for next state Q-val): 0.8113
2025-08-04 20:50:23,954 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:50:23,954 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:50:23,954 - INFO -       Q(s) updated from -0.0174 to -0.0193 (TotalReward: -0.2020, NextMaxQ: -0.0072)
2025-08-04 20:50:23,955 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:50:23,955 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:50:23,955 - INFO -       Q(s) updated from -0.0193 to -0.0212 (TotalReward: -0.2020, NextMaxQ: -0.0072)
2025-08-04 20:50:23,955 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:50:23,956 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:50:23,956 - INFO -       Q(s) updated from -0.0079 to -0.0099 (TotalReward: -0.2020, NextMaxQ: -0.0079)
2025-08-04 20:50:23,956 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:50:23,957 - INFO - 
2025-08-04 20:50:23,957 - INFO - [ROUND 125]
2025-08-04 20:50:23,957 - INFO - [RLAgent choose_actions_softmax] Round 125. Temperature: 0.5425
2025-08-04 20:50:23,957 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:23,958 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.0071547437473192255, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.025930349392434476, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.006926109719070276, '10913316872057236365': -0.025930349392434476, '6587436948557123441': -0.0071547437473192255, '17456602372862189643': -0.009941015703047307}
2025-08-04 20:50:23,958 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09853761925853574), '5975185251685626785': np.float64(0.10200751229569312), '8560019474512340676': np.float64(0.09914951075128534), '12043264814094380418': np.float64(0.09853761925853574), '4296149388320225194': np.float64(0.09853761925853574), '15388649110162717160': np.float64(0.09914951075128534), '2395859185497387824': np.float64(0.10205051025935363), '10913316872057236365': np.float64(0.09853761925853574), '6587436948557123441': np.float64(0.10200751229569312), '17456602372862189643': np.float64(0.10148496661254654)}
2025-08-04 20:50:23,958 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:50:23,959 - INFO -     Selected 4 CIDs with this factor: ['5975185251685626785', '2395859185497387824', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:23,959 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '2395859185497387824', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:23,962 - INFO -   New temperature for next round: 0.5398
2025-08-04 20:50:23,962 - INFO -   Final selected CIDs to return: ['5975185251685626785', '2395859185497387824', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 3, 1, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:23,962 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:50:32,987 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:50:32,987 - INFO - [Round 125, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:50:32,993 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:50:32,993 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:50:32,993 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.7796 from 4 clients (3229 examples)
2025-08-04 20:50:32,993 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.76s across 4 clients
2025-08-04 20:50:32,993 - INFO - Fit phase aggregation: Summary
2025-08-04 20:50:32,993 - INFO -   fit_clients_total_received: 4
2025-08-04 20:50:32,993 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:50:32,994 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:50:32,994 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:50:32,994 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:50:32,994 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:50:32,994 - INFO -   aggregated_d_loss: 0.7796
2025-08-04 20:50:32,994 - INFO -   fit_time_avg_seconds_all_reporting: 0.7568
2025-08-04 20:50:32,995 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:50:39,044 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:50:39,044 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.5906665325164795, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8124594419208306, 'avg_anomaly_score': 0.5290854599020305, 'recall': 0.6986607142857143, 'eval_time_seconds': 0.035429954528808594, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7312877731287774, 'precision': 0.9705426356589147}
2025-08-04 20:50:39,044 - INFO - [Round 125, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:50:39,044 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 125.
2025-08-04 20:50:39,045 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 125.
2025-08-04 20:50:39,045 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 125.
2025-08-04 20:50:39,045 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 125.
2025-08-04 20:50:39,045 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 125.
2025-08-04 20:50:39,045 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 125.
2025-08-04 20:50:39,045 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 125.
2025-08-04 20:50:39,046 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 125.
2025-08-04 20:50:39,046 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 125.
2025-08-04 20:50:39,046 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 125.
2025-08-04 20:50:39,052 - INFO - [Round 125, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:50:39,056 - INFO - ==================================================
2025-08-04 20:50:39,056 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:50:39,056 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:50:39,056 - INFO - ==================================================
2025-08-04 20:50:39,056 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:50:39,056 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5303
2025-08-04 20:50:39,056 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 20:50:39,056 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 20:50:39,057 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 20:50:39,057 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 20:50:39,057 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:50:39,057 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0016) - FairPenalty(0.0400) - ResourceCost(0.2800) = -0.3184
2025-08-04 20:50:39,057 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 125.
2025-08-04 20:50:39,057 - INFO -   Final Global Reward for action: -0.3184. Client states at selection: {'5975185251685626785': (8, 3, 1, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:39,057 - INFO -   Performance Reward: 0.0016, Fairness Penalty: 0.0400, Resource Cost: 0.2800
2025-08-04 20:50:39,057 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 20:50:39,057 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:50:39,057 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:50:39,058 - INFO -       Q(s) updated from -0.0072 to -0.0103 (TotalReward: -0.3184, NextMaxQ: -0.0022)
2025-08-04 20:50:39,058 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:50:39,058 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:50:39,058 - INFO -       Q(s) updated from -0.0069 to -0.0102 (TotalReward: -0.3184, NextMaxQ: -0.0226)
2025-08-04 20:50:39,059 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:50:39,059 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:50:39,059 - INFO -       Q(s) updated from -0.0103 to -0.0134 (TotalReward: -0.3184, NextMaxQ: -0.0022)
2025-08-04 20:50:39,059 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:50:39,059 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:50:39,060 - INFO -       Q(s) updated from -0.0099 to -0.0131 (TotalReward: -0.3184, NextMaxQ: -0.0099)
2025-08-04 20:50:39,060 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:50:39,061 - INFO - 
2025-08-04 20:50:39,061 - INFO - [ROUND 126]
2025-08-04 20:50:39,061 - INFO - [RLAgent choose_actions_softmax] Round 126. Temperature: 0.5398
2025-08-04 20:50:39,061 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:39,061 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.002196858218403961, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.002196858218403961, '17456602372862189643': -0.013115413489191671}
2025-08-04 20:50:39,062 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09883246604415892), '5975185251685626785': np.float64(0.1030303900624679), '8560019474512340676': np.float64(0.09921399928679549), '12043264814094380418': np.float64(0.09883246604415892), '4296149388320225194': np.float64(0.09883246604415892), '15388649110162717160': np.float64(0.09921399928679549), '2395859185497387824': np.float64(0.09921399928679549), '10913316872057236365': np.float64(0.09883246604415892), '6587436948557123441': np.float64(0.1030303900624679), '17456602372862189643': np.float64(0.100967357838042)}
2025-08-04 20:50:39,062 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:50:39,062 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:39,062 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:39,066 - INFO -   New temperature for next round: 0.5371
2025-08-04 20:50:39,066 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 4, 1, 8, 8), '6587436948557123441': (8, 4, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:39,066 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:50:45,088 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:50:45,088 - INFO - [Round 126, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:50:45,093 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:50:45,093 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 20:50:45,093 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0822, Aggregated D_Loss=0.7780 from 3 clients (495 examples)
2025-08-04 20:50:45,093 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.26s across 3 clients
2025-08-04 20:50:45,093 - INFO - Fit phase aggregation: Summary
2025-08-04 20:50:45,093 - INFO -   fit_clients_total_received: 3
2025-08-04 20:50:45,093 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:50:45,094 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:50:45,094 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:50:45,094 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 20:50:45,094 - INFO -   aggregated_g_loss: 2.0822
2025-08-04 20:50:45,094 - INFO -   aggregated_d_loss: 0.7780
2025-08-04 20:50:45,094 - INFO -   fit_time_avg_seconds_all_reporting: 0.2586
2025-08-04 20:50:45,094 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:50:54,131 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:50:54,131 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.5882958173751831, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8124594419208306, 'avg_anomaly_score': 0.5198129660193169, 'recall': 0.6986607142857143, 'eval_time_seconds': 0.03585410118103027, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7312877731287774, 'precision': 0.9705426356589147}
2025-08-04 20:50:54,131 - INFO - [Round 126, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:50:54,132 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 126.
2025-08-04 20:50:54,132 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 126.
2025-08-04 20:50:54,132 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 126.
2025-08-04 20:50:54,132 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 126.
2025-08-04 20:50:54,133 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 126.
2025-08-04 20:50:54,133 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 126.
2025-08-04 20:50:54,133 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 126.
2025-08-04 20:50:54,133 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 126.
2025-08-04 20:50:54,133 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 126.
2025-08-04 20:50:54,133 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 126.
2025-08-04 20:50:54,139 - INFO - [Round 126, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:50:54,151 - INFO - ==================================================
2025-08-04 20:50:54,151 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:50:54,151 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:50:54,152 - INFO - ==================================================
2025-08-04 20:50:54,152 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:50:54,152 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5212
2025-08-04 20:50:54,152 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:50:54,152 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:50:54,152 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:50:54,152 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:50:54,152 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:50:54,153 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0600) - ResourceCost(0.1800) = -0.2402
2025-08-04 20:50:54,153 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 126.
2025-08-04 20:50:54,153 - INFO -   Final Global Reward for action: -0.2402. Client states at selection: {'5975185251685626785': (8, 4, 1, 8, 8), '6587436948557123441': (8, 4, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:54,153 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.1800
2025-08-04 20:50:54,153 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:50:54,153 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:50:54,154 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:50:54,154 - INFO -       Q(s) updated from -0.0022 to -0.0046 (TotalReward: -0.2402, NextMaxQ: 0.0000)
2025-08-04 20:50:54,154 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:50:54,155 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:50:54,155 - INFO -       Q(s) updated from -0.0046 to -0.0069 (TotalReward: -0.2402, NextMaxQ: 0.0000)
2025-08-04 20:50:54,155 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:50:54,155 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:50:54,155 - INFO -       Q(s) updated from -0.0131 to -0.0155 (TotalReward: -0.2402, NextMaxQ: -0.0131)
2025-08-04 20:50:54,156 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:50:54,156 - INFO - 
2025-08-04 20:50:54,156 - INFO - [ROUND 127]
2025-08-04 20:50:54,157 - INFO - [RLAgent choose_actions_softmax] Round 127. Temperature: 0.5371
2025-08-04 20:50:54,157 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:54,157 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': 0.0, '8560019474512340676': -0.010244334158725357, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.010244334158725357, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.02465172641008497, '6587436948557123441': 0.0, '17456602372862189643': -0.015504536720976346}
2025-08-04 20:50:54,158 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0983345746810514), '5975185251685626785': np.float64(0.10295301453506638), '8560019474512340676': np.float64(0.10100799083259603), '12043264814094380418': np.float64(0.0983345746810514), '4296149388320225194': np.float64(0.0983345746810514), '15388649110162717160': np.float64(0.10100799083259603), '2395859185497387824': np.float64(0.09871609714803196), '10913316872057236365': np.float64(0.0983345746810514), '6587436948557123441': np.float64(0.10295301453506638), '17456602372862189643': np.float64(0.10002359339243765)}
2025-08-04 20:50:54,158 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:50:54,158 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:54,158 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']
2025-08-04 20:50:54,162 - INFO -   New temperature for next round: 0.5344
2025-08-04 20:50:54,162 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 5, 1, 8, 8), '8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '6587436948557123441': (8, 5, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:50:54,162 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:51:03,195 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:51:03,196 - INFO - [Round 127, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:51:03,203 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:51:03,204 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.40
2025-08-04 20:51:03,204 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0845, Aggregated D_Loss=0.7848 from 5 clients (557 examples)
2025-08-04 20:51:03,204 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.22s across 5 clients
2025-08-04 20:51:03,204 - INFO - Fit phase aggregation: Summary
2025-08-04 20:51:03,204 - INFO -   fit_clients_total_received: 5
2025-08-04 20:51:03,204 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:51:03,204 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:51:03,205 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:51:03,205 - INFO -   allocated_cores_avg_per_client: 4.4000
2025-08-04 20:51:03,205 - INFO -   aggregated_g_loss: 2.0845
2025-08-04 20:51:03,205 - INFO -   aggregated_d_loss: 0.7848
2025-08-04 20:51:03,205 - INFO -   fit_time_avg_seconds_all_reporting: 0.2226
2025-08-04 20:51:03,205 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:51:12,259 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:51:12,259 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5919284462928772, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.5163015339410666, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.010490894317626953, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:51:12,260 - INFO - [Round 127, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:51:12,260 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 127.
2025-08-04 20:51:12,260 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 127.
2025-08-04 20:51:12,260 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 127.
2025-08-04 20:51:12,260 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 127.
2025-08-04 20:51:12,261 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 127.
2025-08-04 20:51:12,261 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 127.
2025-08-04 20:51:12,261 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 127.
2025-08-04 20:51:12,261 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 127.
2025-08-04 20:51:12,261 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 127.
2025-08-04 20:51:12,261 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 127.
2025-08-04 20:51:12,268 - INFO - [Round 127, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:51:12,272 - INFO - ==================================================
2025-08-04 20:51:12,272 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:51:12,272 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:51:12,272 - INFO - ==================================================
2025-08-04 20:51:12,273 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:51:12,273 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5236
2025-08-04 20:51:12,273 - INFO -   Global Accuracy (Wgtd Avg): 0.7298
2025-08-04 20:51:12,273 - INFO -   Global F1 Score (Wgtd Avg): 0.8127
2025-08-04 20:51:12,273 - INFO -   Global Precision (Wgtd Avg): 0.9774
2025-08-04 20:51:12,273 - INFO -   Global Recall (Wgtd Avg): 0.6956
2025-08-04 20:51:12,273 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:51:12,273 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0800) - ResourceCost(0.4400) = -0.5202
2025-08-04 20:51:12,274 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 127.
2025-08-04 20:51:12,274 - INFO -   Final Global Reward for action: -0.5202. Client states at selection: {'5975185251685626785': (8, 5, 1, 8, 8), '8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '6587436948557123441': (8, 5, 1, 8, 8), '17456602372862189643': (7, 4, 0, 8, 8)}
2025-08-04 20:51:12,274 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0800, Resource Cost: 0.4400
2025-08-04 20:51:12,274 - INFO -   Next round's global F1 (for next state Q-val): 0.8127
2025-08-04 20:51:12,274 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:51:12,274 - INFO -       State(s): (8, 5, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:51:12,274 - INFO -       Q(s) updated from 0.0000 to -0.0052 (TotalReward: -0.5202, NextMaxQ: 0.0000)
2025-08-04 20:51:12,275 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:51:12,275 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:51:12,275 - INFO -       Q(s) updated from -0.0102 to -0.0154 (TotalReward: -0.5202, NextMaxQ: -0.0102)
2025-08-04 20:51:12,275 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:51:12,275 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:51:12,275 - INFO -       Q(s) updated from -0.0154 to -0.0207 (TotalReward: -0.5202, NextMaxQ: -0.0226)
2025-08-04 20:51:12,276 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:51:12,276 - INFO -       State(s): (8, 5, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:51:12,276 - INFO -       Q(s) updated from -0.0052 to -0.0104 (TotalReward: -0.5202, NextMaxQ: -0.0052)
2025-08-04 20:51:12,277 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:51:12,277 - INFO -       State(s): (7, 4, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:51:12,277 - INFO -       Q(s) updated from -0.0155 to -0.0207 (TotalReward: -0.5202, NextMaxQ: -0.0155)
2025-08-04 20:51:12,278 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:51:12,278 - INFO - 
2025-08-04 20:51:12,278 - INFO - [ROUND 128]
2025-08-04 20:51:12,279 - INFO - [RLAgent choose_actions_softmax] Round 128. Temperature: 0.5344
2025-08-04 20:51:12,279 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:51:12,279 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.01039931460732061, '8560019474512340676': -0.020687389942744057, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.01039931460732061, '17456602372862189643': -0.020691290617132114}
2025-08-04 20:51:12,283 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09923846835842048), '5975185251685626785': np.float64(0.10192063910647864), '8560019474512340676': np.float64(0.09997735266089805), '12043264814094380418': np.float64(0.09923846835842048), '4296149388320225194': np.float64(0.09923846835842048), '15388649110162717160': np.float64(0.09962543637375859), '2395859185497387824': np.float64(0.09962543637375859), '10913316872057236365': np.float64(0.09923846835842048), '6587436948557123441': np.float64(0.10192063910647864), '17456602372862189643': np.float64(0.09997662294494537)}
2025-08-04 20:51:12,283 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:51:12,283 - INFO -     Selected 2 CIDs with this factor: ['5975185251685626785', '6587436948557123441']
2025-08-04 20:51:12,283 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441']
2025-08-04 20:51:12,287 - INFO -   New temperature for next round: 0.5318
2025-08-04 20:51:12,287 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441']. Corresponding states: {'5975185251685626785': (8, 5, 1, 8, 8), '6587436948557123441': (8, 5, 1, 8, 8)}
2025-08-04 20:51:12,287 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:51:18,304 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:51:18,304 - INFO - [Round 128, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:51:18,307 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:51:18,307 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 20:51:18,307 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.7856 from 2 clients (476 examples)
2025-08-04 20:51:18,308 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.34s across 2 clients
2025-08-04 20:51:18,308 - INFO - Fit phase aggregation: Summary
2025-08-04 20:51:18,308 - INFO -   fit_clients_total_received: 2
2025-08-04 20:51:18,308 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:51:18,308 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:51:18,308 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:51:18,308 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 20:51:18,308 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:51:18,309 - INFO -   aggregated_d_loss: 0.7856
2025-08-04 20:51:18,309 - INFO -   fit_time_avg_seconds_all_reporting: 0.3384
2025-08-04 20:51:18,309 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:51:27,345 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:51:27,345 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5783621549606324, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.5108229093479387, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.008646965026855469, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:51:27,346 - INFO - [Round 128, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:51:27,346 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 128.
2025-08-04 20:51:27,346 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 128.
2025-08-04 20:51:27,346 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 128.
2025-08-04 20:51:27,346 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 128.
2025-08-04 20:51:27,346 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 128.
2025-08-04 20:51:27,347 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 128.
2025-08-04 20:51:27,347 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 128.
2025-08-04 20:51:27,347 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 128.
2025-08-04 20:51:27,347 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 128.
2025-08-04 20:51:27,347 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 128.
2025-08-04 20:51:27,353 - INFO - [Round 128, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:51:27,357 - INFO - ==================================================
2025-08-04 20:51:27,357 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:51:27,357 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:51:27,357 - INFO - ==================================================
2025-08-04 20:51:27,357 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:51:27,357 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5179
2025-08-04 20:51:27,357 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:51:27,357 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:51:27,358 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:51:27,358 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:51:27,358 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:51:27,358 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0600) - ResourceCost(0.1400) = -0.1998
2025-08-04 20:51:27,358 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 128.
2025-08-04 20:51:27,358 - INFO -   Final Global Reward for action: -0.1998. Client states at selection: {'5975185251685626785': (8, 5, 1, 8, 8), '6587436948557123441': (8, 5, 1, 8, 8)}
2025-08-04 20:51:27,358 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.1400
2025-08-04 20:51:27,359 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:51:27,359 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:51:27,359 - INFO -       State(s): (8, 5, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:51:27,359 - INFO -       Q(s) updated from -0.0104 to -0.0124 (TotalReward: -0.1998, NextMaxQ: -0.0104)
2025-08-04 20:51:27,360 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:51:27,360 - INFO -       State(s): (8, 5, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:51:27,360 - INFO -       Q(s) updated from -0.0124 to -0.0144 (TotalReward: -0.1998, NextMaxQ: -0.0124)
2025-08-04 20:51:27,360 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:51:27,361 - INFO - 
2025-08-04 20:51:27,361 - INFO - [ROUND 129]
2025-08-04 20:51:27,361 - INFO - [RLAgent choose_actions_softmax] Round 129. Temperature: 0.5318
2025-08-04 20:51:27,361 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:51:27,362 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.014373386470362823, '8560019474512340676': -0.020687389942744057, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.020687389942744057, '2395859185497387824': -0.020687389942744057, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.014373386470362823, '17456602372862189643': -0.020691290617132114}
2025-08-04 20:51:27,362 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09931512837267122), '5975185251685626785': np.float64(0.10125348390935819), '8560019474512340676': np.float64(0.1000583131668326), '12043264814094380418': np.float64(0.09931512837267122), '4296149388320225194': np.float64(0.09931512837267122), '15388649110162717160': np.float64(0.1000583131668326), '2395859185497387824': np.float64(0.1000583131668326), '10913316872057236365': np.float64(0.09931512837267122), '6587436948557123441': np.float64(0.10125348390935819), '17456602372862189643': np.float64(0.10005757919010097)}
2025-08-04 20:51:27,362 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:51:27,362 - INFO -     Selected 6 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '2395859185497387824', '6587436948557123441', '17456602372862189643']
2025-08-04 20:51:27,363 - INFO -   Selection by factor 1.00 yielded 6 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:51:27,363 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '8560019474512340676', '15388649110162717160', '2395859185497387824']
2025-08-04 20:51:27,366 - INFO -   New temperature for next round: 0.5291
2025-08-04 20:51:27,367 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '8560019474512340676', '15388649110162717160', '2395859185497387824']. Corresponding states: {'5975185251685626785': (8, 5, 1, 8, 8), '6587436948557123441': (8, 5, 1, 8, 8), '8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8)}
2025-08-04 20:51:27,367 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:51:36,399 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:51:36,400 - INFO - [Round 129, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:51:36,407 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:51:36,408 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:51:36,408 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.7815 from 5 clients (3377 examples)
2025-08-04 20:51:36,409 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.64s across 5 clients
2025-08-04 20:51:36,409 - INFO - Fit phase aggregation: Summary
2025-08-04 20:51:36,409 - INFO -   fit_clients_total_received: 5
2025-08-04 20:51:36,409 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:51:36,409 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:51:36,410 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:51:36,410 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:51:36,410 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:51:36,410 - INFO -   aggregated_d_loss: 0.7815
2025-08-04 20:51:36,410 - INFO -   fit_time_avg_seconds_all_reporting: 0.6356
2025-08-04 20:51:36,410 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:51:42,465 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:51:42,466 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.5714066982269287, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.5151249426344167, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.01696467399597168, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:51:42,466 - INFO - [Round 129, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:51:42,466 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 129.
2025-08-04 20:51:42,466 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 129.
2025-08-04 20:51:42,466 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 129.
2025-08-04 20:51:42,466 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 129.
2025-08-04 20:51:42,466 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 129.
2025-08-04 20:51:42,467 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 129.
2025-08-04 20:51:42,467 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 129.
2025-08-04 20:51:42,467 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 129.
2025-08-04 20:51:42,467 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 129.
2025-08-04 20:51:42,467 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 129.
2025-08-04 20:51:42,473 - INFO - [Round 129, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:51:42,477 - INFO - ==================================================
2025-08-04 20:51:42,477 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:51:42,477 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:51:42,477 - INFO - ==================================================
2025-08-04 20:51:42,477 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:51:42,477 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5179
2025-08-04 20:51:42,478 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:51:42,478 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:51:42,478 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:51:42,478 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:51:42,478 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:51:42,478 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0600) - ResourceCost(0.5000) = -0.5600
2025-08-04 20:51:42,478 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 129.
2025-08-04 20:51:42,478 - INFO -   Final Global Reward for action: -0.5600. Client states at selection: {'5975185251685626785': (8, 5, 1, 8, 8), '6587436948557123441': (8, 5, 1, 8, 8), '8560019474512340676': (8, 1, 2, 8, 8), '15388649110162717160': (8, 1, 2, 8, 8), '2395859185497387824': (8, 1, 2, 8, 8)}
2025-08-04 20:51:42,479 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0600, Resource Cost: 0.5000
2025-08-04 20:51:42,479 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:51:42,479 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:51:42,479 - INFO -       State(s): (8, 5, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:51:42,479 - INFO -       Q(s) updated from -0.0144 to -0.0200 (TotalReward: -0.5600, NextMaxQ: -0.0144)
2025-08-04 20:51:42,480 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:51:42,480 - INFO -       State(s): (8, 5, 1, 8, 8) -> NextState(s'): (8, 5, 1, 8, 8)
2025-08-04 20:51:42,480 - INFO -       Q(s) updated from -0.0200 to -0.0255 (TotalReward: -0.5600, NextMaxQ: -0.0200)
2025-08-04 20:51:42,480 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:51:42,480 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:51:42,481 - INFO -       Q(s) updated from -0.0207 to -0.0263 (TotalReward: -0.5600, NextMaxQ: -0.0226)
2025-08-04 20:51:42,481 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:51:42,481 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:51:42,481 - INFO -       Q(s) updated from -0.0263 to -0.0318 (TotalReward: -0.5600, NextMaxQ: -0.0226)
2025-08-04 20:51:42,482 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:51:42,482 - INFO -       State(s): (8, 1, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:51:42,482 - INFO -       Q(s) updated from -0.0318 to -0.0373 (TotalReward: -0.5600, NextMaxQ: -0.0226)
2025-08-04 20:51:42,482 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:51:42,483 - INFO - 
2025-08-04 20:51:42,483 - INFO - [ROUND 130]
2025-08-04 20:51:42,483 - INFO - [RLAgent choose_actions_softmax] Round 130. Temperature: 0.5291
2025-08-04 20:51:42,483 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:51:42,484 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.02553905407080857, '8560019474512340676': -0.022571859444263702, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.022571859444263702, '2395859185497387824': -0.022571859444263702, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.02553905407080857, '17456602372862189643': -0.016870839137341047}
2025-08-04 20:51:42,484 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09976774430949259), '5975185251685626785': np.float64(0.09960056675160674), '8560019474512340676': np.float64(0.10016070356388425), '12043264814094380418': np.float64(0.09976774430949259), '4296149388320225194': np.float64(0.09976774430949259), '15388649110162717160': np.float64(0.10016070356388425), '2395859185497387824': np.float64(0.10016070356388425), '10913316872057236365': np.float64(0.09976774430949259), '6587436948557123441': np.float64(0.09960056675160674), '17456602372862189643': np.float64(0.1012457785671634)}
2025-08-04 20:51:42,484 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:51:42,484 - INFO -     Selected 4 CIDs with this factor: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:51:42,485 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']
2025-08-04 20:51:42,488 - INFO -   New temperature for next round: 0.5264
2025-08-04 20:51:42,488 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160', '2395859185497387824', '17456602372862189643']. Corresponding states: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:51:42,488 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:51:51,509 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:51:51,509 - INFO - [Round 130, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:51:51,515 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:51:51,515 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:51:51,515 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0843, Aggregated D_Loss=0.7833 from 4 clients (2944 examples)
2025-08-04 20:51:51,515 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.67s across 4 clients
2025-08-04 20:51:51,515 - INFO - Fit phase aggregation: Summary
2025-08-04 20:51:51,515 - INFO -   fit_clients_total_received: 4
2025-08-04 20:51:51,515 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:51:51,516 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:51:51,516 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:51:51,516 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:51:51,516 - INFO -   aggregated_g_loss: 2.0843
2025-08-04 20:51:51,516 - INFO -   aggregated_d_loss: 0.7833
2025-08-04 20:51:51,516 - INFO -   fit_time_avg_seconds_all_reporting: 0.6687
2025-08-04 20:51:51,517 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:51:57,561 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:51:57,562 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.5208802342414856, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.4870597616485927, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.015189886093139648, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:51:57,562 - INFO - [Round 130, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:51:57,562 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 130.
2025-08-04 20:51:57,562 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 130.
2025-08-04 20:51:57,562 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 130.
2025-08-04 20:51:57,563 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 130.
2025-08-04 20:51:57,569 - INFO - [Round 130, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:51:57,573 - INFO - ==================================================
2025-08-04 20:51:57,573 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:51:57,573 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:51:57,573 - INFO - ==================================================
2025-08-04 20:51:57,573 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:51:57,574 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4898
2025-08-04 20:51:57,574 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:51:57,574 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:51:57,574 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:51:57,574 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:51:57,574 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:51:57,574 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0100) - ResourceCost(0.4000) = -0.4097
2025-08-04 20:51:57,575 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 130.
2025-08-04 20:51:57,575 - INFO -   Final Global Reward for action: -0.4097. Client states at selection: {'8560019474512340676': (8, 2, 2, 8, 8), '15388649110162717160': (8, 2, 2, 8, 8), '2395859185497387824': (8, 2, 2, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:51:57,575 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0100, Resource Cost: 0.4000
2025-08-04 20:51:57,575 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:51:57,575 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:51:57,575 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:51:57,575 - INFO -       Q(s) updated from -0.0226 to -0.0266 (TotalReward: -0.4097, NextMaxQ: -0.0184)
2025-08-04 20:51:57,576 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:51:57,576 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:51:57,576 - INFO -       Q(s) updated from -0.0266 to -0.0306 (TotalReward: -0.4097, NextMaxQ: -0.0184)
2025-08-04 20:51:57,576 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:51:57,577 - INFO -       State(s): (8, 2, 2, 8, 8) -> NextState(s'): (8, 2, 2, 8, 8)
2025-08-04 20:51:57,577 - INFO -       Q(s) updated from -0.0306 to -0.0347 (TotalReward: -0.4097, NextMaxQ: -0.0306)
2025-08-04 20:51:57,577 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:51:57,577 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:51:57,577 - INFO -       Q(s) updated from -0.0169 to -0.0210 (TotalReward: -0.4097, NextMaxQ: -0.0169)
2025-08-04 20:51:57,578 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:51:57,579 - INFO - 
2025-08-04 20:51:57,579 - INFO - [ROUND 131]
2025-08-04 20:51:57,579 - INFO - [RLAgent choose_actions_softmax] Round 131. Temperature: 0.5264
2025-08-04 20:51:57,579 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:51:57,579 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.006933595643952717, '8560019474512340676': -0.018362505021513754, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.018362505021513754, '2395859185497387824': -0.03467061966663041, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.006933595643952717, '17456602372862189643': -0.02095084860057167}
2025-08-04 20:51:57,580 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09919948574258232), '5975185251685626785': np.float64(0.10259496414014069), '8560019474512340676': np.float64(0.10039168234917618), '12043264814094380418': np.float64(0.09919948574258232), '4296149388320225194': np.float64(0.09919948574258232), '15388649110162717160': np.float64(0.10039168234917618), '2395859185497387824': np.float64(0.09732945818596843), '10913316872057236365': np.float64(0.09919948574258232), '6587436948557123441': np.float64(0.10259496414014069), '17456602372862189643': np.float64(0.09989930586506846)}
2025-08-04 20:51:57,580 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:51:57,580 - INFO -     Selected 4 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441']
2025-08-04 20:51:57,580 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441']
2025-08-04 20:51:57,584 - INFO -   New temperature for next round: 0.5238
2025-08-04 20:51:57,584 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441']. Corresponding states: {'5975185251685626785': (8, 4, 1, 8, 8), '8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '6587436948557123441': (8, 4, 1, 8, 8)}
2025-08-04 20:51:57,584 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:52:03,610 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:52:03,610 - INFO - [Round 131, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:52:03,616 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:52:03,617 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:52:03,617 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0852, Aggregated D_Loss=0.7851 from 4 clients (553 examples)
2025-08-04 20:52:03,617 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.26s across 4 clients
2025-08-04 20:52:03,617 - INFO - Fit phase aggregation: Summary
2025-08-04 20:52:03,617 - INFO -   fit_clients_total_received: 4
2025-08-04 20:52:03,617 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:52:03,617 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:52:03,617 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:52:03,618 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:52:03,618 - INFO -   aggregated_g_loss: 2.0852
2025-08-04 20:52:03,618 - INFO -   aggregated_d_loss: 0.7851
2025-08-04 20:52:03,618 - INFO -   fit_time_avg_seconds_all_reporting: 0.2566
2025-08-04 20:52:03,618 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:52:09,662 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:52:09,663 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.5776573657989502, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.4994441984129734, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.010737180709838867, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:52:09,663 - INFO - [Round 131, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:52:09,663 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 131.
2025-08-04 20:52:09,663 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 131.
2025-08-04 20:52:09,664 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 131.
2025-08-04 20:52:09,664 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 131.
2025-08-04 20:52:09,664 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 131.
2025-08-04 20:52:09,664 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 131.
2025-08-04 20:52:09,664 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 131.
2025-08-04 20:52:09,664 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 131.
2025-08-04 20:52:09,665 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 131.
2025-08-04 20:52:09,665 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 131.
2025-08-04 20:52:09,670 - INFO - [Round 131, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:52:09,674 - INFO - ==================================================
2025-08-04 20:52:09,674 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:52:09,675 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:52:09,675 - INFO - ==================================================
2025-08-04 20:52:09,675 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:52:09,675 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5156
2025-08-04 20:52:09,675 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:52:09,675 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:52:09,675 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:52:09,675 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:52:09,676 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:52:09,676 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0600) - ResourceCost(0.4000) = -0.4604
2025-08-04 20:52:09,676 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 131.
2025-08-04 20:52:09,676 - INFO -   Final Global Reward for action: -0.4604. Client states at selection: {'5975185251685626785': (8, 4, 1, 8, 8), '8560019474512340676': (8, 3, 2, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '6587436948557123441': (8, 4, 1, 8, 8)}
2025-08-04 20:52:09,676 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0600, Resource Cost: 0.4000
2025-08-04 20:52:09,676 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:52:09,676 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:52:09,676 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:52:09,676 - INFO -       Q(s) updated from -0.0069 to -0.0115 (TotalReward: -0.4604, NextMaxQ: -0.0069)
2025-08-04 20:52:09,677 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:52:09,677 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:52:09,677 - INFO -       Q(s) updated from -0.0184 to -0.0229 (TotalReward: -0.4604, NextMaxQ: -0.0116)
2025-08-04 20:52:09,677 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:52:09,678 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:52:09,678 - INFO -       Q(s) updated from -0.0229 to -0.0274 (TotalReward: -0.4604, NextMaxQ: -0.0116)
2025-08-04 20:52:09,678 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:52:09,678 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:52:09,678 - INFO -       Q(s) updated from -0.0115 to -0.0161 (TotalReward: -0.4604, NextMaxQ: -0.0115)
2025-08-04 20:52:09,679 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:52:09,679 - INFO - 
2025-08-04 20:52:09,679 - INFO - [ROUND 132]
2025-08-04 20:52:09,680 - INFO - [RLAgent choose_actions_softmax] Round 132. Temperature: 0.5238
2025-08-04 20:52:09,680 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:09,680 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.01612409818669098, '8560019474512340676': -0.01161859992006791, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.01161859992006791, '2395859185497387824': -0.03467061966663041, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.01612409818669098, '17456602372862189643': -0.011540483488968353}
2025-08-04 20:52:09,680 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09911182100858762), '5975185251685626785': np.float64(0.10073855067123288), '8560019474512340676': np.float64(0.10160877129056538), '12043264814094380418': np.float64(0.09911182100858762), '4296149388320225194': np.float64(0.09911182100858762), '15388649110162717160': np.float64(0.10160877129056538), '2395859185497387824': np.float64(0.09723414673583979), '10913316872057236365': np.float64(0.09911182100858762), '6587436948557123441': np.float64(0.10073855067123288), '17456602372862189643': np.float64(0.10162392530621318)}
2025-08-04 20:52:09,681 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:52:09,681 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:09,681 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:09,685 - INFO -   New temperature for next round: 0.5212
2025-08-04 20:52:09,685 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 4, 1, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '6587436948557123441': (8, 4, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:52:09,685 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:52:15,716 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:52:15,717 - INFO - [Round 132, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:52:15,723 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:52:15,724 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.40
2025-08-04 20:52:15,724 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0836, Aggregated D_Loss=0.7887 from 5 clients (586 examples)
2025-08-04 20:52:15,724 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 5 clients
2025-08-04 20:52:15,724 - INFO - Fit phase aggregation: Summary
2025-08-04 20:52:15,724 - INFO -   fit_clients_total_received: 5
2025-08-04 20:52:15,724 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:52:15,724 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:52:15,724 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:52:15,724 - INFO -   allocated_cores_avg_per_client: 4.4000
2025-08-04 20:52:15,725 - INFO -   aggregated_g_loss: 2.0836
2025-08-04 20:52:15,725 - INFO -   aggregated_d_loss: 0.7887
2025-08-04 20:52:15,725 - INFO -   fit_time_avg_seconds_all_reporting: 0.2333
2025-08-04 20:52:15,725 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:52:21,771 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:52:21,771 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5991455674171448, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.5293318128043955, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.009935379028320312, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:52:21,771 - INFO - [Round 132, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:52:21,771 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 132.
2025-08-04 20:52:21,771 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 132.
2025-08-04 20:52:21,772 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 132.
2025-08-04 20:52:21,773 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 132.
2025-08-04 20:52:21,779 - INFO - [Round 132, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:52:21,783 - INFO - ==================================================
2025-08-04 20:52:21,783 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:52:21,783 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:52:21,783 - INFO - ==================================================
2025-08-04 20:52:21,783 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:52:21,783 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5357
2025-08-04 20:52:21,783 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:52:21,784 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:52:21,784 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:52:21,784 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:52:21,784 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:52:21,784 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0800) - ResourceCost(0.4400) = -0.5200
2025-08-04 20:52:21,784 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 132.
2025-08-04 20:52:21,784 - INFO -   Final Global Reward for action: -0.5200. Client states at selection: {'5975185251685626785': (8, 4, 1, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '6587436948557123441': (8, 4, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:52:21,784 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0800, Resource Cost: 0.4400
2025-08-04 20:52:21,784 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:52:21,785 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:52:21,785 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:52:21,785 - INFO -       Q(s) updated from -0.0161 to -0.0213 (TotalReward: -0.5200, NextMaxQ: -0.0161)
2025-08-04 20:52:21,785 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:52:21,785 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:52:21,786 - INFO -       Q(s) updated from -0.0116 to -0.0168 (TotalReward: -0.5200, NextMaxQ: -0.0116)
2025-08-04 20:52:21,786 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:52:21,786 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:52:21,786 - INFO -       Q(s) updated from -0.0168 to -0.0220 (TotalReward: -0.5200, NextMaxQ: -0.0168)
2025-08-04 20:52:21,787 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:52:21,787 - INFO -       State(s): (8, 4, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:52:21,787 - INFO -       Q(s) updated from -0.0213 to -0.0265 (TotalReward: -0.5200, NextMaxQ: -0.0213)
2025-08-04 20:52:21,787 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:52:21,788 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 20:52:21,788 - INFO -       Q(s) updated from -0.0115 to -0.0167 (TotalReward: -0.5200, NextMaxQ: -0.0115)
2025-08-04 20:52:21,788 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:52:21,789 - INFO - 
2025-08-04 20:52:21,789 - INFO - [ROUND 133]
2025-08-04 20:52:21,789 - INFO - [RLAgent choose_actions_softmax] Round 133. Temperature: 0.5212
2025-08-04 20:52:21,789 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:21,790 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02465172641008497, '5975185251685626785': -0.026486666114415785, '8560019474512340676': -0.021990174338827693, '12043264814094380418': -0.02465172641008497, '4296149388320225194': -0.02465172641008497, '15388649110162717160': -0.021990174338827693, '2395859185497387824': -0.03467061966663041, '10913316872057236365': -0.02465172641008497, '6587436948557123441': -0.026486666114415785, '17456602372862189643': -0.016728943005479384}
2025-08-04 20:52:21,790 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.100005115645888), '5975185251685626785': np.float64(0.09965365361578707), '8560019474512340676': np.float64(0.10051711004959867), '12043264814094380418': np.float64(0.100005115645888), '4296149388320225194': np.float64(0.100005115645888), '15388649110162717160': np.float64(0.10051711004959867), '2395859185497387824': np.float64(0.09810108853717844), '10913316872057236365': np.float64(0.100005115645888), '6587436948557123441': np.float64(0.09965365361578707), '17456602372862189643': np.float64(0.10153692154849812)}
2025-08-04 20:52:21,790 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:52:21,790 - INFO -     Selected 7 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '10913316872057236365', '17456602372862189643']
2025-08-04 20:52:21,790 - INFO -   Selection by factor 1.00 yielded 7 clients, which is > cap (5). Capping to top-5 by probability.
2025-08-04 20:52:21,790 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643', '8560019474512340676', '15388649110162717160', '1640189632563049314', '12043264814094380418']
2025-08-04 20:52:21,794 - INFO -   New temperature for next round: 0.5186
2025-08-04 20:52:21,795 - INFO -   Final selected CIDs to return: ['17456602372862189643', '8560019474512340676', '15388649110162717160', '1640189632563049314', '12043264814094380418']. Corresponding states: {'17456602372862189643': (7, 2, 0, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '1640189632563049314': (8, 0, 0, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8)}
2025-08-04 20:52:21,795 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:52:33,821 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:52:33,822 - INFO - [Round 133, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:52:33,829 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:52:33,829 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.60
2025-08-04 20:52:33,829 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.7869 from 5 clients (9205 examples)
2025-08-04 20:52:33,830 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.40s across 5 clients
2025-08-04 20:52:33,830 - INFO - Fit phase aggregation: Summary
2025-08-04 20:52:33,830 - INFO -   fit_clients_total_received: 5
2025-08-04 20:52:33,830 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:52:33,830 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:52:33,830 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:52:33,830 - INFO -   allocated_cores_avg_per_client: 3.6000
2025-08-04 20:52:33,830 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:52:33,830 - INFO -   aggregated_d_loss: 0.7869
2025-08-04 20:52:33,831 - INFO -   fit_time_avg_seconds_all_reporting: 1.4036
2025-08-04 20:52:33,831 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:52:39,874 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:52:39,874 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.64359450340271, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8124594419208306, 'avg_anomaly_score': 0.5725416635591337, 'recall': 0.6986607142857143, 'eval_time_seconds': 0.03620266914367676, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7312877731287774, 'precision': 0.9705426356589147}
2025-08-04 20:52:39,874 - INFO - [Round 133, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:52:39,874 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 133.
2025-08-04 20:52:39,875 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 133.
2025-08-04 20:52:39,875 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 133.
2025-08-04 20:52:39,875 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 133.
2025-08-04 20:52:39,875 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 133.
2025-08-04 20:52:39,875 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 133.
2025-08-04 20:52:39,875 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 133.
2025-08-04 20:52:39,876 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 133.
2025-08-04 20:52:39,876 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 133.
2025-08-04 20:52:39,876 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 133.
2025-08-04 20:52:39,882 - INFO - [Round 133, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:52:39,886 - INFO - ==================================================
2025-08-04 20:52:39,886 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:52:39,886 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:52:39,886 - INFO - ==================================================
2025-08-04 20:52:39,887 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:52:39,887 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5736
2025-08-04 20:52:39,887 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:52:39,887 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:52:39,887 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:52:39,887 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:52:39,887 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:52:39,887 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0400) - ResourceCost(0.3600) = -0.4000
2025-08-04 20:52:39,888 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 133.
2025-08-04 20:52:39,888 - INFO -   Final Global Reward for action: -0.4000. Client states at selection: {'17456602372862189643': (7, 2, 0, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '1640189632563049314': (8, 0, 0, 8, 8), '12043264814094380418': (8, 0, 0, 8, 8)}
2025-08-04 20:52:39,888 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0400, Resource Cost: 0.3600
2025-08-04 20:52:39,888 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:52:39,888 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:52:39,888 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:52:39,888 - INFO -       Q(s) updated from -0.0167 to -0.0208 (TotalReward: -0.4000, NextMaxQ: -0.0210)
2025-08-04 20:52:39,889 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:52:39,889 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:52:39,889 - INFO -       Q(s) updated from -0.0220 to -0.0258 (TotalReward: -0.4000, NextMaxQ: -0.0042)
2025-08-04 20:52:39,889 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:52:39,890 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:52:39,890 - INFO -       Q(s) updated from -0.0258 to -0.0296 (TotalReward: -0.4000, NextMaxQ: -0.0042)
2025-08-04 20:52:39,890 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:52:39,890 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:52:39,890 - INFO -       Q(s) updated from -0.0247 to -0.0286 (TotalReward: -0.4000, NextMaxQ: -0.0259)
2025-08-04 20:52:39,891 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:52:39,891 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:52:39,891 - INFO -       Q(s) updated from -0.0286 to -0.0326 (TotalReward: -0.4000, NextMaxQ: -0.0259)
2025-08-04 20:52:39,892 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:52:39,892 - INFO - 
2025-08-04 20:52:39,893 - INFO - [ROUND 134]
2025-08-04 20:52:39,893 - INFO - [RLAgent choose_actions_softmax] Round 134. Temperature: 0.5186
2025-08-04 20:52:39,893 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:39,893 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.013388544293115536, '8560019474512340676': -0.0042186456066824855, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.0042186456066824855, '2395859185497387824': -0.03467061966663041, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.013388544293115536, '17456602372862189643': -0.02095084860057167}
2025-08-04 20:52:39,894 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0989912539798453), '5975185251685626785': np.float64(0.10141448389328381), '8560019474512340676': np.float64(0.10322367914684834), '12043264814094380418': np.float64(0.0989912539798453), '4296149388320225194': np.float64(0.09772898732976992), '15388649110162717160': np.float64(0.10322367914684834), '2395859185497387824': np.float64(0.09733684592826974), '10913316872057236365': np.float64(0.09772898732976992), '6587436948557123441': np.float64(0.10141448389328381), '17456602372862189643': np.float64(0.09994634537223565)}
2025-08-04 20:52:39,894 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:52:39,894 - INFO -     Selected 4 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441']
2025-08-04 20:52:39,894 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441']
2025-08-04 20:52:39,897 - INFO -   New temperature for next round: 0.5160
2025-08-04 20:52:39,897 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441']. Corresponding states: {'5975185251685626785': (8, 3, 1, 8, 8), '8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8)}
2025-08-04 20:52:39,898 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:52:45,934 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:52:45,935 - INFO - [Round 134, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:52:45,940 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:52:45,941 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:52:45,941 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0851, Aggregated D_Loss=0.7849 from 4 clients (569 examples)
2025-08-04 20:52:45,941 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.25s across 4 clients
2025-08-04 20:52:45,941 - INFO - Fit phase aggregation: Summary
2025-08-04 20:52:45,941 - INFO -   fit_clients_total_received: 4
2025-08-04 20:52:45,941 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:52:45,941 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:52:45,942 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:52:45,942 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:52:45,942 - INFO -   aggregated_g_loss: 2.0851
2025-08-04 20:52:45,942 - INFO -   aggregated_d_loss: 0.7849
2025-08-04 20:52:45,942 - INFO -   fit_time_avg_seconds_all_reporting: 0.2534
2025-08-04 20:52:45,943 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:52:51,989 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:52:51,990 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5589377403259277, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5146004564756398, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.013557195663452148, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 20:52:51,990 - INFO - [Round 134, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:52:51,990 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 134.
2025-08-04 20:52:51,990 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 134.
2025-08-04 20:52:51,990 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 134.
2025-08-04 20:52:51,990 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 134.
2025-08-04 20:52:51,991 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 134.
2025-08-04 20:52:51,991 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 134.
2025-08-04 20:52:51,991 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 134.
2025-08-04 20:52:51,991 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 134.
2025-08-04 20:52:51,991 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 134.
2025-08-04 20:52:51,991 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 134.
2025-08-04 20:52:51,997 - INFO - [Round 134, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:52:52,001 - INFO - ==================================================
2025-08-04 20:52:52,002 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:52:52,002 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:52:52,002 - INFO - ==================================================
2025-08-04 20:52:52,002 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:52:52,002 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5116
2025-08-04 20:52:52,002 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:52:52,002 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:52:52,002 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:52:52,003 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:52:52,003 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:52:52,003 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0800) - ResourceCost(0.4000) = -0.4800
2025-08-04 20:52:52,003 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 134.
2025-08-04 20:52:52,003 - INFO -   Final Global Reward for action: -0.4800. Client states at selection: {'5975185251685626785': (8, 3, 1, 8, 8), '8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8)}
2025-08-04 20:52:52,003 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0800, Resource Cost: 0.4000
2025-08-04 20:52:52,003 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:52:52,003 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:52:52,003 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:52:52,004 - INFO -       Q(s) updated from -0.0134 to -0.0182 (TotalReward: -0.4800, NextMaxQ: -0.0134)
2025-08-04 20:52:52,004 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:52:52,004 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:52:52,004 - INFO -       Q(s) updated from -0.0042 to -0.0090 (TotalReward: -0.4800, NextMaxQ: -0.0042)
2025-08-04 20:52:52,005 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:52:52,005 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:52:52,005 - INFO -       Q(s) updated from -0.0090 to -0.0138 (TotalReward: -0.4800, NextMaxQ: -0.0090)
2025-08-04 20:52:52,006 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:52:52,006 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:52:52,006 - INFO -       Q(s) updated from -0.0182 to -0.0230 (TotalReward: -0.4800, NextMaxQ: -0.0182)
2025-08-04 20:52:52,006 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:52:52,007 - INFO - 
2025-08-04 20:52:52,007 - INFO - [ROUND 135]
2025-08-04 20:52:52,007 - INFO - [RLAgent choose_actions_softmax] Round 135. Temperature: 0.5160
2025-08-04 20:52:52,007 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:52,008 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.022956980593073602, '8560019474512340676': -0.013805412534114731, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.013805412534114731, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.022956980593073602, '17456602372862189643': -0.02095084860057167}
2025-08-04 20:52:52,008 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09978678050557928), '5975185251685626785': np.float64(0.10036344893334107), '8560019474512340676': np.float64(0.1021593422674163), '12043264814094380418': np.float64(0.09978678050557928), '4296149388320225194': np.float64(0.09850801699660006), '15388649110162717160': np.float64(0.1021593422674163), '2395859185497387824': np.float64(0.09761041386857207), '10913316872057236365': np.float64(0.09850801699660006), '6587436948557123441': np.float64(0.10036344893334107), '17456602372862189643': np.float64(0.1007544087255546)}
2025-08-04 20:52:52,008 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:52:52,008 - INFO -     Selected 5 CIDs with this factor: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:52,008 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']
2025-08-04 20:52:52,013 - INFO -   New temperature for next round: 0.5134
2025-08-04 20:52:52,013 - INFO -   Final selected CIDs to return: ['5975185251685626785', '8560019474512340676', '15388649110162717160', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 3, 1, 8, 8), '8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:52:52,013 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:52:58,045 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:52:58,045 - INFO - [Round 135, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:52:58,052 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:52:58,052 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.40
2025-08-04 20:52:58,052 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0840, Aggregated D_Loss=0.7786 from 5 clients (601 examples)
2025-08-04 20:52:58,052 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.23s across 5 clients
2025-08-04 20:52:58,052 - INFO - Fit phase aggregation: Summary
2025-08-04 20:52:58,053 - INFO -   fit_clients_total_received: 5
2025-08-04 20:52:58,053 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:52:58,053 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:52:58,053 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:52:58,053 - INFO -   allocated_cores_avg_per_client: 4.4000
2025-08-04 20:52:58,053 - INFO -   aggregated_g_loss: 2.0840
2025-08-04 20:52:58,053 - INFO -   aggregated_d_loss: 0.7786
2025-08-04 20:52:58,053 - INFO -   fit_time_avg_seconds_all_reporting: 0.2335
2025-08-04 20:52:58,054 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:53:04,097 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:53:04,097 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.5715605258941651, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.515196389944657, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.013935565948486328, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:53:04,097 - INFO - [Round 135, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:53:04,097 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 135.
2025-08-04 20:53:04,098 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 135.
2025-08-04 20:53:04,098 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 135.
2025-08-04 20:53:04,098 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 135.
2025-08-04 20:53:04,098 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 135.
2025-08-04 20:53:04,099 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 135.
2025-08-04 20:53:04,099 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 135.
2025-08-04 20:53:04,099 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 135.
2025-08-04 20:53:04,099 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 135.
2025-08-04 20:53:04,099 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 135.
2025-08-04 20:53:04,106 - INFO - [Round 135, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:53:04,110 - INFO - ==================================================
2025-08-04 20:53:04,110 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:53:04,110 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:53:04,110 - INFO - ==================================================
2025-08-04 20:53:04,110 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:53:04,110 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5179
2025-08-04 20:53:04,110 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:53:04,111 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:53:04,111 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:53:04,111 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:53:04,111 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:53:04,111 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0900) - ResourceCost(0.4400) = -0.5300
2025-08-04 20:53:04,111 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 135.
2025-08-04 20:53:04,111 - INFO -   Final Global Reward for action: -0.5300. Client states at selection: {'5975185251685626785': (8, 3, 1, 8, 8), '8560019474512340676': (8, 5, 2, 8, 8), '15388649110162717160': (8, 5, 2, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:53:04,111 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0900, Resource Cost: 0.4400
2025-08-04 20:53:04,111 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:53:04,111 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:53:04,112 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:53:04,112 - INFO -       Q(s) updated from -0.0230 to -0.0283 (TotalReward: -0.5300, NextMaxQ: -0.0265)
2025-08-04 20:53:04,112 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:53:04,112 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:53:04,112 - INFO -       Q(s) updated from -0.0138 to -0.0191 (TotalReward: -0.5300, NextMaxQ: -0.0138)
2025-08-04 20:53:04,113 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:53:04,113 - INFO -       State(s): (8, 5, 2, 8, 8) -> NextState(s'): (8, 5, 2, 8, 8)
2025-08-04 20:53:04,113 - INFO -       Q(s) updated from -0.0191 to -0.0244 (TotalReward: -0.5300, NextMaxQ: -0.0191)
2025-08-04 20:53:04,114 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:53:04,114 - INFO -       State(s): (8, 3, 1, 8, 8) -> NextState(s'): (8, 4, 1, 8, 8)
2025-08-04 20:53:04,114 - INFO -       Q(s) updated from -0.0283 to -0.0335 (TotalReward: -0.5300, NextMaxQ: -0.0265)
2025-08-04 20:53:04,114 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:53:04,114 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:53:04,115 - INFO -       Q(s) updated from -0.0210 to -0.0262 (TotalReward: -0.5300, NextMaxQ: -0.0210)
2025-08-04 20:53:04,115 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:53:04,116 - INFO - 
2025-08-04 20:53:04,116 - INFO - [ROUND 136]
2025-08-04 20:53:04,116 - INFO - [RLAgent choose_actions_softmax] Round 136. Temperature: 0.5134
2025-08-04 20:53:04,116 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:53:04,117 - INFO -   Optimistic init for new high-core state (8, 0, 2, 8, 8) (CID 2395859185497387824): Q set to 0.05
2025-08-04 20:53:04,117 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.026486666114415785, '8560019474512340676': -0.024372515514459035, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.024372515514459035, '2395859185497387824': 0.05, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.026486666114415785, '17456602372862189643': -0.0262298977519711}
2025-08-04 20:53:04,117 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09864892071323138), '5975185251685626785': np.float64(0.09854208693262945), '8560019474512340676': np.float64(0.09894870022061376), '12043264814094380418': np.float64(0.09864892071323138), '4296149388320225194': np.float64(0.09737842725460642), '15388649110162717160': np.float64(0.09894870022061376), '2395859185497387824': np.float64(0.1143723480051962), '10913316872057236365': np.float64(0.09737842725460642), '6587436948557123441': np.float64(0.09854208693262945), '17456602372862189643': np.float64(0.09859138175264184)}
2025-08-04 20:53:04,117 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:53:04,117 - INFO -     Selected 1 CIDs with this factor: ['2395859185497387824']
2025-08-04 20:53:04,117 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['2395859185497387824']
2025-08-04 20:53:04,121 - INFO -   New temperature for next round: 0.5108
2025-08-04 20:53:04,121 - INFO -   Final selected CIDs to return: ['2395859185497387824']. Corresponding states: {'2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:53:04,121 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:53:10,133 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:53:10,133 - INFO - [Round 136, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:53:10,136 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:53:10,136 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 5.00
2025-08-04 20:53:10,136 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7783 from 1 clients (2979 examples)
2025-08-04 20:53:10,136 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.26s across 1 clients
2025-08-04 20:53:10,136 - INFO - Fit phase aggregation: Summary
2025-08-04 20:53:10,136 - INFO -   fit_clients_total_received: 1
2025-08-04 20:53:10,136 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:53:10,136 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:53:10,137 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:53:10,137 - INFO -   allocated_cores_avg_per_client: 5.0000
2025-08-04 20:53:10,137 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:53:10,137 - INFO -   aggregated_d_loss: 0.7783
2025-08-04 20:53:10,137 - INFO -   fit_time_avg_seconds_all_reporting: 2.2619
2025-08-04 20:53:10,138 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:53:16,181 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:53:16,181 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.611875343322754, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.5601293370682312, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.01296091079711914, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:53:16,181 - INFO - [Round 136, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:53:16,181 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 136.
2025-08-04 20:53:16,182 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 136.
2025-08-04 20:53:16,182 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 136.
2025-08-04 20:53:16,182 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 136.
2025-08-04 20:53:16,182 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 136.
2025-08-04 20:53:16,182 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 136.
2025-08-04 20:53:16,182 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 136.
2025-08-04 20:53:16,183 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 136.
2025-08-04 20:53:16,183 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 136.
2025-08-04 20:53:16,183 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 136.
2025-08-04 20:53:16,189 - INFO - [Round 136, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:53:16,193 - INFO - ==================================================
2025-08-04 20:53:16,193 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:53:16,193 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:53:16,193 - INFO - ==================================================
2025-08-04 20:53:16,193 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:53:16,194 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5474
2025-08-04 20:53:16,194 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:53:16,194 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:53:16,194 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:53:16,194 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:53:16,194 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:53:16,194 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0000) - ResourceCost(0.1000) = -0.1000
2025-08-04 20:53:16,194 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 136.
2025-08-04 20:53:16,194 - INFO -   Final Global Reward for action: -0.1000. Client states at selection: {'2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:53:16,195 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0000, Resource Cost: 0.1000
2025-08-04 20:53:16,195 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:53:16,195 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:53:16,195 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:53:16,195 - INFO -       Q(s) updated from 0.0500 to 0.0482 (TotalReward: -0.1000, NextMaxQ: -0.0373)
2025-08-04 20:53:16,196 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:53:16,196 - INFO - 
2025-08-04 20:53:16,196 - INFO - [ROUND 137]
2025-08-04 20:53:16,197 - INFO - [RLAgent choose_actions_softmax] Round 137. Temperature: 0.5108
2025-08-04 20:53:16,197 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:53:16,197 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025930349392434476, '5975185251685626785': -0.033521512869380626, '8560019474512340676': -0.029588125812300702, '12043264814094380418': -0.025930349392434476, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.029588125812300702, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.033521512869380626, '17456602372862189643': -0.0262298977519711}
2025-08-04 20:53:16,197 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10093128635760752), '5975185251685626785': np.float64(0.09944255032174543), '8560019474512340676': np.float64(0.10021118204783803), '12043264814094380418': np.float64(0.10093128635760752), '4296149388320225194': np.float64(0.09962490881950481), '15388649110162717160': np.float64(0.10021118204783803), '2395859185497387824': np.float64(0.0987080244879338), '10913316872057236365': np.float64(0.09962490881950481), '6587436948557123441': np.float64(0.09944255032174543), '17456602372862189643': np.float64(0.10087212041867454)}
2025-08-04 20:53:16,197 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:53:16,198 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '17456602372862189643']
2025-08-04 20:53:16,198 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '17456602372862189643']
2025-08-04 20:53:16,202 - INFO -   New temperature for next round: 0.5083
2025-08-04 20:53:16,202 - INFO -   Final selected CIDs to return: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 1, 0, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:53:16,202 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:53:31,230 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:53:31,230 - INFO - [Round 137, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:53:31,237 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:53:31,237 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.60
2025-08-04 20:53:31,237 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.7851 from 5 clients (9509 examples)
2025-08-04 20:53:31,237 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.48s across 5 clients
2025-08-04 20:53:31,238 - INFO - Fit phase aggregation: Summary
2025-08-04 20:53:31,238 - INFO -   fit_clients_total_received: 5
2025-08-04 20:53:31,238 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:53:31,238 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:53:31,238 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:53:31,238 - INFO -   allocated_cores_avg_per_client: 3.6000
2025-08-04 20:53:31,238 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:53:31,238 - INFO -   aggregated_d_loss: 0.7851
2025-08-04 20:53:31,238 - INFO -   fit_time_avg_seconds_all_reporting: 1.4790
2025-08-04 20:53:31,239 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:53:37,284 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:53:37,284 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.6051268696784973, 'profile_name': 'Low-End IoT', 'f1_score': 0.7973856209150327, 'avg_anomaly_score': 0.5612135966618855, 'recall': 0.6777777777777778, 'eval_time_seconds': 0.011756658554077148, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7047619047619048, 'precision': 0.9682539682539683}
2025-08-04 20:53:37,284 - INFO - [Round 137, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:53:37,284 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 137.
2025-08-04 20:53:37,285 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 137.
2025-08-04 20:53:37,292 - INFO - [Round 137, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:53:37,296 - INFO - ==================================================
2025-08-04 20:53:37,296 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:53:37,296 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:53:37,296 - INFO - ==================================================
2025-08-04 20:53:37,296 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:53:37,296 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5463
2025-08-04 20:53:37,296 - INFO -   Global Accuracy (Wgtd Avg): 0.7295
2025-08-04 20:53:37,297 - INFO -   Global F1 Score (Wgtd Avg): 0.8126
2025-08-04 20:53:37,297 - INFO -   Global Precision (Wgtd Avg): 0.9772
2025-08-04 20:53:37,297 - INFO -   Global Recall (Wgtd Avg): 0.6954
2025-08-04 20:53:37,297 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:53:37,297 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0500) - ResourceCost(0.3600) = -0.4104
2025-08-04 20:53:37,297 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 137.
2025-08-04 20:53:37,297 - INFO -   Final Global Reward for action: -0.4104. Client states at selection: {'1640189632563049314': (8, 1, 0, 8, 8), '8560019474512340676': (8, 4, 2, 8, 8), '12043264814094380418': (8, 1, 0, 8, 8), '15388649110162717160': (8, 4, 2, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:53:37,298 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0500, Resource Cost: 0.3600
2025-08-04 20:53:37,298 - INFO -   Next round's global F1 (for next state Q-val): 0.8126
2025-08-04 20:53:37,298 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:53:37,298 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:53:37,298 - INFO -       Q(s) updated from -0.0259 to -0.0299 (TotalReward: -0.4104, NextMaxQ: -0.0183)
2025-08-04 20:53:37,299 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:53:37,299 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:53:37,299 - INFO -       Q(s) updated from -0.0296 to -0.0337 (TotalReward: -0.4104, NextMaxQ: -0.0296)
2025-08-04 20:53:37,299 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:53:37,299 - INFO -       State(s): (8, 1, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:53:37,300 - INFO -       Q(s) updated from -0.0299 to -0.0339 (TotalReward: -0.4104, NextMaxQ: -0.0183)
2025-08-04 20:53:37,300 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:53:37,301 - INFO -       State(s): (8, 4, 2, 8, 8) -> NextState(s'): (8, 4, 2, 8, 8)
2025-08-04 20:53:37,301 - INFO -       Q(s) updated from -0.0337 to -0.0377 (TotalReward: -0.4104, NextMaxQ: -0.0337)
2025-08-04 20:53:37,301 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:53:37,302 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:53:37,302 - INFO -       Q(s) updated from -0.0262 to -0.0303 (TotalReward: -0.4104, NextMaxQ: -0.0262)
2025-08-04 20:53:37,302 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:53:37,303 - INFO - 
2025-08-04 20:53:37,303 - INFO - [ROUND 138]
2025-08-04 20:53:37,303 - INFO - [RLAgent choose_actions_softmax] Round 138. Temperature: 0.5083
2025-08-04 20:53:37,303 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:53:37,304 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01827255950791657, '5975185251685626785': -0.021215551028924445, '8560019474512340676': -0.037733782221301734, '12043264814094380418': -0.01827255950791657, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.037733782221301734, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.021215551028924445, '17456602372862189643': -0.030308121617350605}
2025-08-04 20:53:37,304 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10206543885355145), '5975185251685626785': np.float64(0.10147619602527774), '8560019474512340676': np.float64(0.09823150473490692), '12043264814094380418': np.float64(0.10206543885355145), '4296149388320225194': np.float64(0.09923148567043427), '15388649110162717160': np.float64(0.09823150473490692), '2395859185497387824': np.float64(0.09831365419006971), '10913316872057236365': np.float64(0.09923148567043427), '6587436948557123441': np.float64(0.10147619602527774), '17456602372862189643': np.float64(0.09967709524158958)}
2025-08-04 20:53:37,304 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:53:37,304 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:53:37,304 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:53:37,308 - INFO -   New temperature for next round: 0.5058
2025-08-04 20:53:37,308 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']. Corresponding states: {'1640189632563049314': (8, 2, 0, 8, 8), '5975185251685626785': (8, 2, 1, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 20:53:37,308 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:53:52,331 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:53:52,331 - INFO - [Round 138, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:53:52,337 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:53:52,337 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.50
2025-08-04 20:53:52,337 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.7838 from 4 clients (9994 examples)
2025-08-04 20:53:52,337 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.90s across 4 clients
2025-08-04 20:53:52,338 - INFO - Fit phase aggregation: Summary
2025-08-04 20:53:52,338 - INFO -   fit_clients_total_received: 4
2025-08-04 20:53:52,338 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:53:52,338 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:53:52,338 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:53:52,338 - INFO -   allocated_cores_avg_per_client: 2.5000
2025-08-04 20:53:52,338 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:53:52,338 - INFO -   aggregated_d_loss: 0.7838
2025-08-04 20:53:52,339 - INFO -   fit_time_avg_seconds_all_reporting: 1.8959
2025-08-04 20:53:52,339 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:53:58,383 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:53:58,383 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.5880151271820069, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.5348382830619812, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.014723062515258789, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:53:58,383 - INFO - [Round 138, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:53:58,383 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 138.
2025-08-04 20:53:58,384 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 138.
2025-08-04 20:53:58,385 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 138.
2025-08-04 20:53:58,385 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 138.
2025-08-04 20:53:58,391 - INFO - [Round 138, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:53:58,395 - INFO - ==================================================
2025-08-04 20:53:58,395 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:53:58,395 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:53:58,395 - INFO - ==================================================
2025-08-04 20:53:58,395 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:53:58,395 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5374
2025-08-04 20:53:58,396 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 20:53:58,396 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 20:53:58,396 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 20:53:58,396 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 20:53:58,396 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:53:58,396 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0005) - FairPenalty(0.0000) - ResourceCost(0.2000) = -0.1995
2025-08-04 20:53:58,396 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 138.
2025-08-04 20:53:58,396 - INFO -   Final Global Reward for action: -0.1995. Client states at selection: {'1640189632563049314': (8, 2, 0, 8, 8), '5975185251685626785': (8, 2, 1, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 20:53:58,397 - INFO -   Performance Reward: 0.0005, Fairness Penalty: 0.0000, Resource Cost: 0.2000
2025-08-04 20:53:58,397 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 20:53:58,397 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:53:58,397 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:53:58,397 - INFO -       Q(s) updated from -0.0183 to -0.0202 (TotalReward: -0.1995, NextMaxQ: -0.0183)
2025-08-04 20:53:58,398 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:53:58,398 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:53:58,398 - INFO -       Q(s) updated from -0.0212 to -0.0233 (TotalReward: -0.1995, NextMaxQ: -0.0335)
2025-08-04 20:53:58,398 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:53:58,398 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 2, 0, 8, 8)
2025-08-04 20:53:58,399 - INFO -       Q(s) updated from -0.0202 to -0.0222 (TotalReward: -0.1995, NextMaxQ: -0.0202)
2025-08-04 20:53:58,399 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:53:58,399 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 20:53:58,399 - INFO -       Q(s) updated from -0.0233 to -0.0254 (TotalReward: -0.1995, NextMaxQ: -0.0335)
2025-08-04 20:53:58,400 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:53:58,400 - INFO - 
2025-08-04 20:53:58,400 - INFO - [ROUND 139]
2025-08-04 20:53:58,400 - INFO - [RLAgent choose_actions_softmax] Round 139. Temperature: 0.5058
2025-08-04 20:53:58,401 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:53:58,401 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.022224722061352783, '5975185251685626785': -0.033521512869380626, '8560019474512340676': -0.027368102743806244, '12043264814094380418': -0.022224722061352783, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.027368102743806244, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.033521512869380626, '17456602372862189643': -0.020750211212829734}
2025-08-04 20:53:58,401 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10133184616054798), '5975185251685626785': np.float64(0.09909353778855218), '8560019474512340676': np.float64(0.1003065523630899), '12043264814094380418': np.float64(0.10133184616054798), '4296149388320225194': np.float64(0.09927708886060468), '15388649110162717160': np.float64(0.1003065523630899), '2395859185497387824': np.float64(0.09835424276243128), '10913316872057236365': np.float64(0.09927708886060468), '6587436948557123441': np.float64(0.09909353778855218), '17456602372862189643': np.float64(0.10162770689197928)}
2025-08-04 20:53:58,401 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:53:58,402 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '17456602372862189643']
2025-08-04 20:53:58,402 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '17456602372862189643']
2025-08-04 20:53:58,405 - INFO -   New temperature for next round: 0.5032
2025-08-04 20:53:58,405 - INFO -   Final selected CIDs to return: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 2, 0, 8, 8), '8560019474512340676': (8, 3, 2, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:53:58,405 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:54:10,426 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:54:10,427 - INFO - [Round 139, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:54:10,434 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:54:10,434 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.60
2025-08-04 20:54:10,435 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.7830 from 5 clients (9657 examples)
2025-08-04 20:54:10,435 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.49s across 5 clients
2025-08-04 20:54:10,435 - INFO - Fit phase aggregation: Summary
2025-08-04 20:54:10,435 - INFO -   fit_clients_total_received: 5
2025-08-04 20:54:10,435 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:54:10,435 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:54:10,435 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:54:10,435 - INFO -   allocated_cores_avg_per_client: 3.6000
2025-08-04 20:54:10,435 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:54:10,436 - INFO -   aggregated_d_loss: 0.7830
2025-08-04 20:54:10,436 - INFO -   fit_time_avg_seconds_all_reporting: 1.4949
2025-08-04 20:54:10,436 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:54:16,496 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:54:16,496 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.6436273097991944, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5780818503823497, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.01786947250366211, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 20:54:16,496 - INFO - [Round 139, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:54:16,496 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 139.
2025-08-04 20:54:16,497 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 139.
2025-08-04 20:54:16,498 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 139.
2025-08-04 20:54:16,498 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 139.
2025-08-04 20:54:16,505 - INFO - [Round 139, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:54:16,509 - INFO - ==================================================
2025-08-04 20:54:16,509 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:54:16,509 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:54:16,509 - INFO - ==================================================
2025-08-04 20:54:16,510 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:54:16,510 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5737
2025-08-04 20:54:16,510 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 20:54:16,510 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 20:54:16,510 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 20:54:16,510 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 20:54:16,510 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:54:16,511 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0200) - ResourceCost(0.3600) = -0.3802
2025-08-04 20:54:16,511 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 139.
2025-08-04 20:54:16,511 - INFO -   Final Global Reward for action: -0.3802. Client states at selection: {'1640189632563049314': (8, 2, 0, 8, 8), '8560019474512340676': (8, 3, 2, 8, 8), '12043264814094380418': (8, 2, 0, 8, 8), '15388649110162717160': (8, 3, 2, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:54:16,511 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0200, Resource Cost: 0.3600
2025-08-04 20:54:16,511 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 20:54:16,512 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:54:16,512 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 20:54:16,512 - INFO -       Q(s) updated from -0.0222 to -0.0259 (TotalReward: -0.3802, NextMaxQ: -0.0088)
2025-08-04 20:54:16,512 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:54:16,512 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:54:16,513 - INFO -       Q(s) updated from -0.0274 to -0.0311 (TotalReward: -0.3802, NextMaxQ: -0.0274)
2025-08-04 20:54:16,513 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:54:16,513 - INFO -       State(s): (8, 2, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 20:54:16,513 - INFO -       Q(s) updated from -0.0259 to -0.0295 (TotalReward: -0.3802, NextMaxQ: -0.0088)
2025-08-04 20:54:16,514 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:54:16,514 - INFO -       State(s): (8, 3, 2, 8, 8) -> NextState(s'): (8, 3, 2, 8, 8)
2025-08-04 20:54:16,514 - INFO -       Q(s) updated from -0.0311 to -0.0349 (TotalReward: -0.3802, NextMaxQ: -0.0311)
2025-08-04 20:54:16,514 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:54:16,515 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:54:16,515 - INFO -       Q(s) updated from -0.0208 to -0.0246 (TotalReward: -0.3802, NextMaxQ: -0.0303)
2025-08-04 20:54:16,515 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:54:16,516 - INFO - 
2025-08-04 20:54:16,516 - INFO - [ROUND 140]
2025-08-04 20:54:16,516 - INFO - [RLAgent choose_actions_softmax] Round 140. Temperature: 0.5032
2025-08-04 20:54:16,516 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:54:16,516 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.008752918176680696, '5975185251685626785': -0.025364463177491806, '8560019474512340676': -0.034914068958323836, '12043264814094380418': -0.008752918176680696, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.034914068958323836, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.025364463177491806, '17456602372862189643': -0.030308121617350605}
2025-08-04 20:54:16,517 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10368998275734516), '5975185251685626785': np.float64(0.1003230412960519), '8560019474512340676': np.float64(0.09843718338016089), '12043264814094380418': np.float64(0.10368998275734516), '4296149388320225194': np.float64(0.09889372201214029), '15388649110162717160': np.float64(0.09843718338016089), '2395859185497387824': np.float64(0.09796984170674139), '10913316872057236365': np.float64(0.09889372201214029), '6587436948557123441': np.float64(0.1003230412960519), '17456602372862189643': np.float64(0.0993422994018621)}
2025-08-04 20:54:16,517 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:54:16,517 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:54:16,517 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:54:16,521 - INFO -   New temperature for next round: 0.5007
2025-08-04 20:54:16,521 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '5975185251685626785': (8, 2, 1, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 20:54:16,521 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:54:28,542 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:54:28,542 - INFO - [Round 140, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:54:28,548 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:54:28,549 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.50
2025-08-04 20:54:28,549 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.7828 from 4 clients (10153 examples)
2025-08-04 20:54:28,549 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.00s across 4 clients
2025-08-04 20:54:28,549 - INFO - Fit phase aggregation: Summary
2025-08-04 20:54:28,549 - INFO -   fit_clients_total_received: 4
2025-08-04 20:54:28,549 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:54:28,549 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:54:28,549 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:54:28,549 - INFO -   allocated_cores_avg_per_client: 2.5000
2025-08-04 20:54:28,550 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:54:28,550 - INFO -   aggregated_d_loss: 0.7828
2025-08-04 20:54:28,550 - INFO -   fit_time_avg_seconds_all_reporting: 1.9973
2025-08-04 20:54:28,550 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:54:34,603 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:54:34,603 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.5899109721183777, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.5436197742634908, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.03888368606567383, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:54:34,603 - INFO - [Round 140, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:54:34,603 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 140.
2025-08-04 20:54:34,604 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 140.
2025-08-04 20:54:34,604 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 140.
2025-08-04 20:54:34,604 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 140.
2025-08-04 20:54:34,604 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 140.
2025-08-04 20:54:34,604 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 140.
2025-08-04 20:54:34,605 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 140.
2025-08-04 20:54:34,605 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 140.
2025-08-04 20:54:34,605 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 140.
2025-08-04 20:54:34,605 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 140.
2025-08-04 20:54:34,612 - INFO - [Round 140, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:54:34,616 - INFO - ==================================================
2025-08-04 20:54:34,616 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:54:34,616 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:54:34,616 - INFO - ==================================================
2025-08-04 20:54:34,617 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:54:34,617 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5312
2025-08-04 20:54:34,617 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:54:34,617 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:54:34,617 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:54:34,617 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:54:34,617 - INFO -   Avg Eval Time per Client: 0.03s
2025-08-04 20:54:34,618 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0200) - ResourceCost(0.2000) = -0.2197
2025-08-04 20:54:34,618 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 140.
2025-08-04 20:54:34,618 - INFO -   Final Global Reward for action: -0.2197. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '5975185251685626785': (8, 2, 1, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 20:54:34,618 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0200, Resource Cost: 0.2000
2025-08-04 20:54:34,618 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:54:34,618 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:54:34,619 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:54:34,619 - INFO -       Q(s) updated from -0.0088 to -0.0110 (TotalReward: -0.2197, NextMaxQ: -0.0137)
2025-08-04 20:54:34,619 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:54:34,619 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:54:34,619 - INFO -       Q(s) updated from -0.0254 to -0.0275 (TotalReward: -0.2197, NextMaxQ: -0.0254)
2025-08-04 20:54:34,620 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:54:34,620 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:54:34,620 - INFO -       Q(s) updated from -0.0110 to -0.0132 (TotalReward: -0.2197, NextMaxQ: -0.0137)
2025-08-04 20:54:34,620 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:54:34,620 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:54:34,621 - INFO -       Q(s) updated from -0.0275 to -0.0297 (TotalReward: -0.2197, NextMaxQ: -0.0275)
2025-08-04 20:54:34,621 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:54:34,622 - INFO - 
2025-08-04 20:54:34,622 - INFO - [ROUND 141]
2025-08-04 20:54:34,622 - INFO - [RLAgent choose_actions_softmax] Round 141. Temperature: 0.5007
2025-08-04 20:54:34,622 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:54:34,623 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.013739439002386375, '5975185251685626785': -0.02970533200170523, '8560019474512340676': -0.03467061966663041, '12043264814094380418': -0.013739439002386375, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03467061966663041, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.02970533200170523, '17456602372862189643': -0.02461772084053146}
2025-08-04 20:54:34,626 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10294421544737632), '5975185251685626785': np.float64(0.09971346450489504), '8560019474512340676': np.float64(0.09872954255527781), '12043264814094380418': np.float64(0.10294421544737632), '4296149388320225194': np.float64(0.0991415282684322), '15388649110162717160': np.float64(0.09872954255527781), '2395859185497387824': np.float64(0.09821070059789073), '10913316872057236365': np.float64(0.0991415282684322), '6587436948557123441': np.float64(0.09971346450489504), '17456602372862189643': np.float64(0.1007317978501466)}
2025-08-04 20:54:34,626 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:54:34,626 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:54:34,626 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:54:34,630 - INFO -   New temperature for next round: 0.4982
2025-08-04 20:54:34,630 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:54:34,631 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:54:49,654 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:54:49,655 - INFO - [Round 141, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:54:49,660 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:54:49,660 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:54:49,660 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.7825 from 3 clients (9730 examples)
2025-08-04 20:54:49,660 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.40s across 3 clients
2025-08-04 20:54:49,660 - INFO - Fit phase aggregation: Summary
2025-08-04 20:54:49,661 - INFO -   fit_clients_total_received: 3
2025-08-04 20:54:49,661 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:54:49,661 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:54:49,661 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:54:49,661 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:54:49,661 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:54:49,661 - INFO -   aggregated_d_loss: 0.7825
2025-08-04 20:54:49,661 - INFO -   fit_time_avg_seconds_all_reporting: 2.4003
2025-08-04 20:54:49,662 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:54:58,703 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:54:58,703 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.6066484212875366, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.5595135172553685, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.016041994094848633, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:54:58,704 - INFO - [Round 141, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:54:58,704 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 141.
2025-08-04 20:54:58,704 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 141.
2025-08-04 20:54:58,704 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 141.
2025-08-04 20:54:58,704 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 141.
2025-08-04 20:54:58,705 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 141.
2025-08-04 20:54:58,705 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 141.
2025-08-04 20:54:58,705 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 141.
2025-08-04 20:54:58,705 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 141.
2025-08-04 20:54:58,705 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 141.
2025-08-04 20:54:58,705 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 141.
2025-08-04 20:54:58,712 - INFO - [Round 141, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:54:58,716 - INFO - ==================================================
2025-08-04 20:54:58,716 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:54:58,716 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:54:58,716 - INFO - ==================================================
2025-08-04 20:54:58,716 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:54:58,717 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5615
2025-08-04 20:54:58,717 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:54:58,717 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:54:58,717 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:54:58,717 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:54:58,717 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:54:58,717 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0400) - ResourceCost(0.1000) = -0.1400
2025-08-04 20:54:58,718 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 141.
2025-08-04 20:54:58,718 - INFO -   Final Global Reward for action: -0.1400. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:54:58,718 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0400, Resource Cost: 0.1000
2025-08-04 20:54:58,718 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:54:58,718 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:54:58,718 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:54:58,719 - INFO -       Q(s) updated from -0.0137 to -0.0150 (TotalReward: -0.1400, NextMaxQ: 0.0000)
2025-08-04 20:54:58,719 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:54:58,719 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:54:58,719 - INFO -       Q(s) updated from -0.0150 to -0.0163 (TotalReward: -0.1400, NextMaxQ: 0.0000)
2025-08-04 20:54:58,720 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:54:58,720 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:54:58,720 - INFO -       Q(s) updated from -0.0246 to -0.0260 (TotalReward: -0.1400, NextMaxQ: -0.0303)
2025-08-04 20:54:58,720 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:54:58,721 - INFO - 
2025-08-04 20:54:58,721 - INFO - [ROUND 142]
2025-08-04 20:54:58,721 - INFO - [RLAgent choose_actions_softmax] Round 142. Temperature: 0.4982
2025-08-04 20:54:58,721 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:54:58,722 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': 0.0, '5975185251685626785': -0.02970533200170523, '8560019474512340676': -0.03467061966663041, '12043264814094380418': 0.0, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03467061966663041, '2395859185497387824': 0.04816422008097494, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.02970533200170523, '17456602372862189643': -0.030308121617350605}
2025-08-04 20:54:58,722 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10345923025698706), '5975185251685626785': np.float64(0.09747081959051122), '8560019474512340676': np.float64(0.09650421784946842), '12043264814094380418': np.float64(0.10345923025698706), '4296149388320225194': np.float64(0.09690894541826472), '15388649110162717160': np.float64(0.09650421784946842), '2395859185497387824': np.float64(0.11396061476073188), '10913316872057236365': np.float64(0.09690894541826472), '6587436948557123441': np.float64(0.09747081959051122), '17456602372862189643': np.float64(0.09735295900880536)}
2025-08-04 20:54:58,722 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:54:58,722 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 20:54:58,723 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 20:54:58,726 - INFO -   New temperature for next round: 0.4957
2025-08-04 20:54:58,726 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '2395859185497387824']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:54:58,726 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:55:10,752 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:55:10,752 - INFO - [Round 142, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:55:10,756 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:55:10,757 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.67
2025-08-04 20:55:10,757 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.7811 from 3 clients (12880 examples)
2025-08-04 20:55:10,757 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=3.32s across 3 clients
2025-08-04 20:55:10,757 - INFO - Fit phase aggregation: Summary
2025-08-04 20:55:10,757 - INFO -   fit_clients_total_received: 3
2025-08-04 20:55:10,757 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:55:10,757 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:55:10,757 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:55:10,757 - INFO -   allocated_cores_avg_per_client: 2.6667
2025-08-04 20:55:10,758 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:55:10,758 - INFO -   aggregated_d_loss: 0.7811
2025-08-04 20:55:10,758 - INFO -   fit_time_avg_seconds_all_reporting: 3.3180
2025-08-04 20:55:10,758 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:55:19,814 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:55:19,814 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.5894795060157776, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.5438918626826742, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.015399456024169922, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:55:19,814 - INFO - [Round 142, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:55:19,814 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 142.
2025-08-04 20:55:19,815 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 142.
2025-08-04 20:55:19,823 - INFO - [Round 142, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:55:19,827 - INFO - ==================================================
2025-08-04 20:55:19,827 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:55:19,827 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:55:19,827 - INFO - ==================================================
2025-08-04 20:55:19,828 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:55:19,828 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5460
2025-08-04 20:55:19,828 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:55:19,828 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:55:19,828 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:55:19,828 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:55:19,828 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:55:19,828 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0000) - FairPenalty(0.0600) - ResourceCost(0.1600) = -0.2200
2025-08-04 20:55:19,829 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 142.
2025-08-04 20:55:19,829 - INFO -   Final Global Reward for action: -0.2200. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:55:19,829 - INFO -   Performance Reward: 0.0000, Fairness Penalty: 0.0600, Resource Cost: 0.1600
2025-08-04 20:55:19,829 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:55:19,829 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:55:19,829 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:55:19,829 - INFO -       Q(s) updated from 0.0000 to -0.0022 (TotalReward: -0.2200, NextMaxQ: 0.0000)
2025-08-04 20:55:19,830 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:55:19,830 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:55:19,830 - INFO -       Q(s) updated from -0.0022 to -0.0044 (TotalReward: -0.2200, NextMaxQ: -0.0022)
2025-08-04 20:55:19,831 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:55:19,831 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:55:19,831 - INFO -       Q(s) updated from 0.0482 to 0.0451 (TotalReward: -0.2200, NextMaxQ: -0.0373)
2025-08-04 20:55:19,831 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:55:19,832 - INFO - 
2025-08-04 20:55:19,832 - INFO - [ROUND 143]
2025-08-04 20:55:19,832 - INFO - [RLAgent choose_actions_softmax] Round 143. Temperature: 0.4957
2025-08-04 20:55:19,832 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:55:19,833 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.004397799999999999, '5975185251685626785': -0.02970533200170523, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.004397799999999999, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.02970533200170523, '17456602372862189643': -0.026044316726682303}
2025-08-04 20:55:19,835 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10466303595626017), '5975185251685626785': np.float64(0.09945382218236617), '8560019474512340676': np.float64(0.09793998517196027), '12043264814094380418': np.float64(0.10466303595626017), '4296149388320225194': np.float64(0.09887764435393454), '15388649110162717160': np.float64(0.09793998517196027), '2395859185497387824': np.float64(0.09793998517196027), '10913316872057236365': np.float64(0.09887764435393454), '6587436948557123441': np.float64(0.09945382218236617), '17456602372862189643': np.float64(0.10019103949899744)}
2025-08-04 20:55:19,835 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:55:19,835 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:55:19,835 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:55:19,839 - INFO -   New temperature for next round: 0.4932
2025-08-04 20:55:19,839 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:55:19,839 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:55:31,865 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:55:31,865 - INFO - [Round 143, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:55:31,869 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:55:31,870 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:55:31,870 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0839, Aggregated D_Loss=0.7832 from 3 clients (9875 examples)
2025-08-04 20:55:31,870 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.52s across 3 clients
2025-08-04 20:55:31,870 - INFO - Fit phase aggregation: Summary
2025-08-04 20:55:31,871 - INFO -   fit_clients_total_received: 3
2025-08-04 20:55:31,871 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:55:31,871 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:55:31,871 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:55:31,871 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:55:31,871 - INFO -   aggregated_g_loss: 2.0839
2025-08-04 20:55:31,871 - INFO -   aggregated_d_loss: 0.7832
2025-08-04 20:55:31,872 - INFO -   fit_time_avg_seconds_all_reporting: 2.5178
2025-08-04 20:55:31,872 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:55:37,918 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:55:37,918 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5126633644104004, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.47127801089575794, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.012389183044433594, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 20:55:37,919 - INFO - [Round 143, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:55:37,919 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 143.
2025-08-04 20:55:37,919 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 143.
2025-08-04 20:55:37,919 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 143.
2025-08-04 20:55:37,919 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 143.
2025-08-04 20:55:37,919 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 143.
2025-08-04 20:55:37,919 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 143.
2025-08-04 20:55:37,920 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 143.
2025-08-04 20:55:37,920 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 143.
2025-08-04 20:55:37,920 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 143.
2025-08-04 20:55:37,920 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 143.
2025-08-04 20:55:37,926 - INFO - [Round 143, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:55:37,931 - INFO - ==================================================
2025-08-04 20:55:37,931 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:55:37,931 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:55:37,931 - INFO - ==================================================
2025-08-04 20:55:37,932 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:55:37,932 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4798
2025-08-04 20:55:37,932 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:55:37,932 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:55:37,932 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:55:37,932 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:55:37,932 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:55:37,932 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0600) - ResourceCost(0.1000) = -0.1600
2025-08-04 20:55:37,932 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 143.
2025-08-04 20:55:37,933 - INFO -   Final Global Reward for action: -0.1600. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:55:37,933 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0600, Resource Cost: 0.1000
2025-08-04 20:55:37,933 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:55:37,933 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:55:37,933 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:55:37,933 - INFO -       Q(s) updated from -0.0044 to -0.0060 (TotalReward: -0.1600, NextMaxQ: -0.0044)
2025-08-04 20:55:37,934 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:55:37,934 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:55:37,934 - INFO -       Q(s) updated from -0.0060 to -0.0076 (TotalReward: -0.1600, NextMaxQ: -0.0060)
2025-08-04 20:55:37,934 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:55:37,934 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:55:37,935 - INFO -       Q(s) updated from -0.0260 to -0.0277 (TotalReward: -0.1600, NextMaxQ: -0.0303)
2025-08-04 20:55:37,935 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:55:37,935 - INFO - 
2025-08-04 20:55:37,936 - INFO - [ROUND 144]
2025-08-04 20:55:37,936 - INFO - [RLAgent choose_actions_softmax] Round 144. Temperature: 0.4932
2025-08-04 20:55:37,936 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:55:37,936 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0075874087978, '5975185251685626785': -0.02557450632891583, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.0075874087978, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.02557450632891583, '17456602372862189643': -0.030308121617350605}
2025-08-04 20:55:37,946 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10406817171862247), '5975185251685626785': np.float64(0.100341432536361), '8560019474512340676': np.float64(0.09798242608357446), '12043264814094380418': np.float64(0.10406817171862247), '4296149388320225194': np.float64(0.09892522808104354), '15388649110162717160': np.float64(0.09798242608357446), '2395859185497387824': np.float64(0.09798242608357446), '10913316872057236365': np.float64(0.09892522808104354), '6587436948557123441': np.float64(0.100341432536361), '17456602372862189643': np.float64(0.09938305707722264)}
2025-08-04 20:55:37,946 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:55:37,946 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:55:37,946 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:55:37,949 - INFO -   New temperature for next round: 0.4908
2025-08-04 20:55:37,950 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8)}
2025-08-04 20:55:37,950 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:55:52,976 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:55:52,976 - INFO - [Round 144, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:55:52,982 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:55:52,983 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.50
2025-08-04 20:55:52,983 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0838, Aggregated D_Loss=0.7807 from 4 clients (10441 examples)
2025-08-04 20:55:52,983 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.98s across 4 clients
2025-08-04 20:55:52,983 - INFO - Fit phase aggregation: Summary
2025-08-04 20:55:52,983 - INFO -   fit_clients_total_received: 4
2025-08-04 20:55:52,983 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:55:52,984 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:55:52,984 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:55:52,984 - INFO -   allocated_cores_avg_per_client: 2.5000
2025-08-04 20:55:52,984 - INFO -   aggregated_g_loss: 2.0838
2025-08-04 20:55:52,984 - INFO -   aggregated_d_loss: 0.7807
2025-08-04 20:55:52,984 - INFO -   fit_time_avg_seconds_all_reporting: 1.9841
2025-08-04 20:55:52,985 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:55:59,039 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:55:59,039 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.6483358979225159, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5860029007319352, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.013468503952026367, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 20:55:59,039 - INFO - [Round 144, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:55:59,039 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 144.
2025-08-04 20:55:59,039 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 144.
2025-08-04 20:55:59,039 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 144.
2025-08-04 20:55:59,040 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 144.
2025-08-04 20:55:59,047 - INFO - [Round 144, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:55:59,051 - INFO - ==================================================
2025-08-04 20:55:59,051 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:55:59,051 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:55:59,051 - INFO - ==================================================
2025-08-04 20:55:59,052 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:55:59,052 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5805
2025-08-04 20:55:59,052 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 20:55:59,052 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 20:55:59,052 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 20:55:59,052 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 20:55:59,052 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:55:59,052 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0600) - ResourceCost(0.2000) = -0.2602
2025-08-04 20:55:59,053 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 144.
2025-08-04 20:55:59,053 - INFO -   Final Global Reward for action: -0.2602. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8)}
2025-08-04 20:55:59,053 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.2000
2025-08-04 20:55:59,053 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 20:55:59,053 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:55:59,053 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:55:59,053 - INFO -       Q(s) updated from -0.0076 to -0.0102 (TotalReward: -0.2602, NextMaxQ: -0.0076)
2025-08-04 20:55:59,054 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:55:59,054 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:55:59,054 - INFO -       Q(s) updated from -0.0256 to -0.0282 (TotalReward: -0.2602, NextMaxQ: -0.0297)
2025-08-04 20:55:59,054 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:55:59,054 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:55:59,055 - INFO -       Q(s) updated from -0.0102 to -0.0128 (TotalReward: -0.2602, NextMaxQ: -0.0102)
2025-08-04 20:55:59,055 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:55:59,055 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 20:55:59,055 - INFO -       Q(s) updated from -0.0282 to -0.0308 (TotalReward: -0.2602, NextMaxQ: -0.0297)
2025-08-04 20:55:59,056 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:55:59,056 - INFO - 
2025-08-04 20:55:59,056 - INFO - [ROUND 145]
2025-08-04 20:55:59,057 - INFO - [RLAgent choose_actions_softmax] Round 145. Temperature: 0.4908
2025-08-04 20:55:59,057 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:55:59,057 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.012774077064097502, '5975185251685626785': -0.02970533200170523, '8560019474512340676': 0.045146797961140135, '12043264814094380418': -0.012774077064097502, '4296149388320225194': -0.03258556961214278, '15388649110162717160': 0.045146797961140135, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.02970533200170523, '17456602372862189643': -0.027656646653971634}
2025-08-04 20:55:59,057 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09975111724438254), '5975185251685626785': np.float64(0.09636845475592969), '8560019474512340676': np.float64(0.1122466373647906), '12043264814094380418': np.float64(0.09975111724438254), '4296149388320225194': np.float64(0.09580454307698293), '15388649110162717160': np.float64(0.1122466373647906), '2395859185497387824': np.float64(0.09488691642316659), '10913316872057236365': np.float64(0.09580454307698293), '6587436948557123441': np.float64(0.09636845475592969), '17456602372862189643': np.float64(0.096771578692662)}
2025-08-04 20:55:59,058 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:55:59,058 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:55:59,058 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:55:59,062 - INFO -   New temperature for next round: 0.4883
2025-08-04 20:55:59,062 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160']. Corresponding states: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 20:55:59,062 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:56:05,078 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:56:05,078 - INFO - [Round 145, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:56:05,082 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:56:05,082 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:56:05,082 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0864, Aggregated D_Loss=0.7783 from 2 clients (72 examples)
2025-08-04 20:56:05,082 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 2 clients
2025-08-04 20:56:05,082 - INFO - Fit phase aggregation: Summary
2025-08-04 20:56:05,082 - INFO -   fit_clients_total_received: 2
2025-08-04 20:56:05,082 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:56:05,082 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:56:05,083 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:56:05,083 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:56:05,083 - INFO -   aggregated_g_loss: 2.0864
2025-08-04 20:56:05,083 - INFO -   aggregated_d_loss: 0.7783
2025-08-04 20:56:05,083 - INFO -   fit_time_avg_seconds_all_reporting: 0.1578
2025-08-04 20:56:05,084 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:56:11,132 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:56:11,132 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.5371704578399659, 'profile_name': 'Low-End IoT', 'f1_score': 0.7973856209150327, 'avg_anomaly_score': 0.5140123344603039, 'recall': 0.6777777777777778, 'eval_time_seconds': 0.009106874465942383, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7047619047619048, 'precision': 0.9682539682539683}
2025-08-04 20:56:11,132 - INFO - [Round 145, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:56:11,132 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 145.
2025-08-04 20:56:11,133 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 145.
2025-08-04 20:56:11,134 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 145.
2025-08-04 20:56:11,134 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 145.
2025-08-04 20:56:11,141 - INFO - [Round 145, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:56:11,145 - INFO - ==================================================
2025-08-04 20:56:11,145 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:56:11,145 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:56:11,145 - INFO - ==================================================
2025-08-04 20:56:11,146 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:56:11,146 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5077
2025-08-04 20:56:11,146 - INFO -   Global Accuracy (Wgtd Avg): 0.7317
2025-08-04 20:56:11,146 - INFO -   Global F1 Score (Wgtd Avg): 0.8141
2025-08-04 20:56:11,146 - INFO -   Global Precision (Wgtd Avg): 0.9791
2025-08-04 20:56:11,146 - INFO -   Global Recall (Wgtd Avg): 0.6967
2025-08-04 20:56:11,146 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:56:11,146 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0811) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.1789
2025-08-04 20:56:11,146 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 145.
2025-08-04 20:56:11,147 - INFO -   Final Global Reward for action: -0.1789. Client states at selection: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 20:56:11,147 - INFO -   Performance Reward: 0.0811, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 20:56:11,147 - INFO -   Next round's global F1 (for next state Q-val): 0.8141
2025-08-04 20:56:11,147 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:56:11,147 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:56:11,147 - INFO -       Q(s) updated from 0.0451 to 0.0426 (TotalReward: -0.1789, NextMaxQ: -0.0373)
2025-08-04 20:56:11,148 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:56:11,148 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:56:11,148 - INFO -       Q(s) updated from 0.0426 to 0.0400 (TotalReward: -0.1789, NextMaxQ: -0.0373)
2025-08-04 20:56:11,148 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:56:11,149 - INFO - 
2025-08-04 20:56:11,149 - INFO - [ROUND 146]
2025-08-04 20:56:11,149 - INFO - [RLAgent choose_actions_softmax] Round 146. Temperature: 0.4883
2025-08-04 20:56:11,149 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:56:11,150 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.01625202416623889, '5975185251685626785': -0.03077601167588621, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.01625202416623889, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.03077601167588621, '17456602372862189643': -0.027656646653971634}
2025-08-04 20:56:11,153 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10281824565714685), '5975185251685626785': np.float64(0.09980515622051661), '8560019474512340676': np.float64(0.09847882006718127), '12043264814094380418': np.float64(0.10281824565714685), '4296149388320225194': np.float64(0.09943599200241904), '15388649110162717160': np.float64(0.09847882006718127), '2395859185497387824': np.float64(0.09847882006718127), '10913316872057236365': np.float64(0.09943599200241904), '6587436948557123441': np.float64(0.09980515622051661), '17456602372862189643': np.float64(0.10044475203829122)}
2025-08-04 20:56:11,153 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:56:11,153 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:56:11,153 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:56:11,157 - INFO -   New temperature for next round: 0.4859
2025-08-04 20:56:11,157 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:56:11,158 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:56:23,177 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:56:23,178 - INFO - [Round 146, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:56:23,183 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:56:23,183 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:56:23,183 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.7814 from 3 clients (10086 examples)
2025-08-04 20:56:23,183 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.51s across 3 clients
2025-08-04 20:56:23,183 - INFO - Fit phase aggregation: Summary
2025-08-04 20:56:23,184 - INFO -   fit_clients_total_received: 3
2025-08-04 20:56:23,184 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:56:23,184 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:56:23,184 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:56:23,184 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:56:23,184 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:56:23,185 - INFO -   aggregated_d_loss: 0.7814
2025-08-04 20:56:23,185 - INFO -   fit_time_avg_seconds_all_reporting: 2.5133
2025-08-04 20:56:23,185 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:56:29,230 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:56:29,230 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.628183126449585, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8131083711875405, 'avg_anomaly_score': 0.5613557767834789, 'recall': 0.69921875, 'eval_time_seconds': 0.049675941467285156, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7322175732217573, 'precision': 0.9713178294573643}
2025-08-04 20:56:29,231 - INFO - [Round 146, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:56:29,231 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 146.
2025-08-04 20:56:29,231 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 146.
2025-08-04 20:56:29,231 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 146.
2025-08-04 20:56:29,231 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 146.
2025-08-04 20:56:29,231 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 146.
2025-08-04 20:56:29,232 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 146.
2025-08-04 20:56:29,232 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 146.
2025-08-04 20:56:29,232 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 146.
2025-08-04 20:56:29,232 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 146.
2025-08-04 20:56:29,232 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 146.
2025-08-04 20:56:29,239 - INFO - [Round 146, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:56:29,243 - INFO - ==================================================
2025-08-04 20:56:29,243 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:56:29,243 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:56:29,243 - INFO - ==================================================
2025-08-04 20:56:29,243 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:56:29,243 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5626
2025-08-04 20:56:29,243 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 20:56:29,243 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 20:56:29,244 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 20:56:29,244 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 20:56:29,244 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:56:29,244 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0013) - FairPenalty(0.0400) - ResourceCost(0.1000) = -0.1413
2025-08-04 20:56:29,244 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 146.
2025-08-04 20:56:29,244 - INFO -   Final Global Reward for action: -0.1413. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:56:29,244 - INFO -   Performance Reward: -0.0013, Fairness Penalty: 0.0400, Resource Cost: 0.1000
2025-08-04 20:56:29,244 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 20:56:29,244 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:56:29,245 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:56:29,245 - INFO -       Q(s) updated from -0.0163 to -0.0176 (TotalReward: -0.1413, NextMaxQ: -0.0163)
2025-08-04 20:56:29,245 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:56:29,245 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:56:29,245 - INFO -       Q(s) updated from -0.0176 to -0.0190 (TotalReward: -0.1413, NextMaxQ: -0.0176)
2025-08-04 20:56:29,246 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:56:29,246 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 20:56:29,246 - INFO -       Q(s) updated from -0.0277 to -0.0290 (TotalReward: -0.1413, NextMaxQ: -0.0277)
2025-08-04 20:56:29,247 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:56:29,248 - INFO - 
2025-08-04 20:56:29,248 - INFO - [ROUND 147]
2025-08-04 20:56:29,248 - INFO - [RLAgent choose_actions_softmax] Round 147. Temperature: 0.4859
2025-08-04 20:56:29,248 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:56:29,248 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.019045025933898348, '5975185251685626785': -0.03077601167588621, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.019045025933898348, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.03077601167588621, '17456602372862189643': -0.029042441515055417}
2025-08-04 20:56:29,249 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10239311792062869), '5975185251685626785': np.float64(0.09995053964752448), '8560019474512340676': np.float64(0.09861564152753151), '12043264814094380418': np.float64(0.10239311792062869), '4296149388320225194': np.float64(0.09957898334040363), '15388649110162717160': np.float64(0.09861564152753151), '2395859185497387824': np.float64(0.09861564152753151), '10913316872057236365': np.float64(0.09957898334040363), '6587436948557123441': np.float64(0.09995053964752448), '17456602372862189643': np.float64(0.10030779360029198)}
2025-08-04 20:56:29,249 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:56:29,249 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:56:29,249 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:56:29,253 - INFO -   New temperature for next round: 0.4834
2025-08-04 20:56:29,253 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:56:29,253 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:56:44,278 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:56:44,278 - INFO - [Round 147, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:56:44,284 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:56:44,284 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:56:44,285 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.7815 from 3 clients (10145 examples)
2025-08-04 20:56:44,285 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.57s across 3 clients
2025-08-04 20:56:44,285 - INFO - Fit phase aggregation: Summary
2025-08-04 20:56:44,285 - INFO -   fit_clients_total_received: 3
2025-08-04 20:56:44,285 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:56:44,285 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:56:44,285 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:56:44,285 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:56:44,285 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:56:44,286 - INFO -   aggregated_d_loss: 0.7815
2025-08-04 20:56:44,286 - INFO -   fit_time_avg_seconds_all_reporting: 2.5716
2025-08-04 20:56:44,286 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:56:50,330 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:56:50,330 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.5058964967727662, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.4643379366788708, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.009436845779418945, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 20:56:50,330 - INFO - [Round 147, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:56:50,330 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 147.
2025-08-04 20:56:50,331 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 147.
2025-08-04 20:56:50,332 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 147.
2025-08-04 20:56:50,339 - INFO - [Round 147, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:56:50,343 - INFO - ==================================================
2025-08-04 20:56:50,343 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:56:50,343 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:56:50,343 - INFO - ==================================================
2025-08-04 20:56:50,343 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:56:50,343 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4784
2025-08-04 20:56:50,344 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 20:56:50,344 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 20:56:50,344 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 20:56:50,344 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 20:56:50,344 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:56:50,344 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0400) - ResourceCost(0.1000) = -0.1398
2025-08-04 20:56:50,345 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 147.
2025-08-04 20:56:50,345 - INFO -   Final Global Reward for action: -0.1398. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:56:50,345 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.1000
2025-08-04 20:56:50,345 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 20:56:50,345 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:56:50,345 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:56:50,346 - INFO -       Q(s) updated from -0.0190 to -0.0204 (TotalReward: -0.1398, NextMaxQ: -0.0190)
2025-08-04 20:56:50,346 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:56:50,346 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:56:50,346 - INFO -       Q(s) updated from -0.0204 to -0.0218 (TotalReward: -0.1398, NextMaxQ: -0.0204)
2025-08-04 20:56:50,347 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:56:50,347 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:56:50,347 - INFO -       Q(s) updated from -0.0290 to -0.0304 (TotalReward: -0.1398, NextMaxQ: -0.0303)
2025-08-04 20:56:50,348 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:56:50,348 - INFO - 
2025-08-04 20:56:50,348 - INFO - [ROUND 148]
2025-08-04 20:56:50,349 - INFO - [RLAgent choose_actions_softmax] Round 148. Temperature: 0.4834
2025-08-04 20:56:50,349 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:56:50,349 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02180246722021947, '5975185251685626785': -0.03077601167588621, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.02180246722021947, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': 0.0400194792140914, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.03077601167588621, '17456602372862189643': -0.030308121617350605}
2025-08-04 20:56:50,349 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10025116896443302), '5975185251685626785': np.float64(0.09840750620830847), '8560019474512340676': np.float64(0.09708665626930912), '12043264814094380418': np.float64(0.10025116896443302), '4296149388320225194': np.float64(0.09803985112575513), '15388649110162717160': np.float64(0.09708665626930912), '2395859185497387824': np.float64(0.11392684144528883), '10913316872057236365': np.float64(0.09803985112575513), '6587436948557123441': np.float64(0.09840750620830847), '17456602372862189643': np.float64(0.09850279341909964)}
2025-08-04 20:56:50,350 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:56:50,350 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 20:56:50,350 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 20:56:50,353 - INFO -   New temperature for next round: 0.4810
2025-08-04 20:56:50,354 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '2395859185497387824']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:56:50,354 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:57:02,373 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:57:02,373 - INFO - [Round 148, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:57:02,379 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:57:02,379 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.67
2025-08-04 20:57:02,379 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0836, Aggregated D_Loss=0.7802 from 3 clients (13442 examples)
2025-08-04 20:57:02,379 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=3.54s across 3 clients
2025-08-04 20:57:02,379 - INFO - Fit phase aggregation: Summary
2025-08-04 20:57:02,380 - INFO -   fit_clients_total_received: 3
2025-08-04 20:57:02,380 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:57:02,380 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:57:02,380 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:57:02,380 - INFO -   allocated_cores_avg_per_client: 2.6667
2025-08-04 20:57:02,380 - INFO -   aggregated_g_loss: 2.0836
2025-08-04 20:57:02,380 - INFO -   aggregated_d_loss: 0.7802
2025-08-04 20:57:02,380 - INFO -   fit_time_avg_seconds_all_reporting: 3.5429
2025-08-04 20:57:02,381 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:57:08,421 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:57:08,422 - INFO -   Sample of first result (CID 8560019474512340676): Metrics: {'threshold': 0.5854198932647705, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8068376068376069, 'avg_anomaly_score': 0.5465896432807961, 'recall': 0.6880466472303207, 'eval_time_seconds': 0.01868724822998047, 'client_cid_for_attributes': '8', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7196029776674938, 'precision': 0.9752066115702479}
2025-08-04 20:57:08,422 - INFO - [Round 148, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:57:08,422 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 148.
2025-08-04 20:57:08,422 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 148.
2025-08-04 20:57:08,422 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 148.
2025-08-04 20:57:08,423 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 148.
2025-08-04 20:57:08,423 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 148.
2025-08-04 20:57:08,423 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 148.
2025-08-04 20:57:08,423 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 148.
2025-08-04 20:57:08,423 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 148.
2025-08-04 20:57:08,423 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 148.
2025-08-04 20:57:08,424 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 148.
2025-08-04 20:57:08,431 - INFO - [Round 148, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:57:08,434 - INFO - ==================================================
2025-08-04 20:57:08,434 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:57:08,434 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:57:08,434 - INFO - ==================================================
2025-08-04 20:57:08,435 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:57:08,435 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5342
2025-08-04 20:57:08,435 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 20:57:08,435 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 20:57:08,435 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 20:57:08,436 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 20:57:08,436 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:57:08,436 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0400) - ResourceCost(0.1600) = -0.1998
2025-08-04 20:57:08,436 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 148.
2025-08-04 20:57:08,436 - INFO -   Final Global Reward for action: -0.1998. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:57:08,436 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.1600
2025-08-04 20:57:08,436 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 20:57:08,436 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:57:08,436 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:57:08,437 - INFO -       Q(s) updated from -0.0218 to -0.0238 (TotalReward: -0.1998, NextMaxQ: -0.0218)
2025-08-04 20:57:08,437 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:57:08,437 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:57:08,437 - INFO -       Q(s) updated from -0.0238 to -0.0258 (TotalReward: -0.1998, NextMaxQ: -0.0238)
2025-08-04 20:57:08,438 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:57:08,438 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:57:08,438 - INFO -       Q(s) updated from 0.0400 to 0.0373 (TotalReward: -0.1998, NextMaxQ: -0.0373)
2025-08-04 20:57:08,439 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:57:08,439 - INFO - 
2025-08-04 20:57:08,440 - INFO - [ROUND 149]
2025-08-04 20:57:08,440 - INFO - [RLAgent choose_actions_softmax] Round 149. Temperature: 0.4810
2025-08-04 20:57:08,440 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:57:08,440 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0257537441811885, '5975185251685626785': -0.03077601167588621, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.0257537441811885, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.03077601167588621, '17456602372862189643': -0.030423245568729645}
2025-08-04 20:57:08,441 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10131552087954111), '5975185251685626785': np.float64(0.10026321999390311), '8560019474512340676': np.float64(0.0989107454336774), '12043264814094380418': np.float64(0.10131552087954111), '4296149388320225194': np.float64(0.09988675306705604), '15388649110162717160': np.float64(0.0989107454336774), '2395859185497387824': np.float64(0.0989107454336774), '10913316872057236365': np.float64(0.09988675306705604), '6587436948557123441': np.float64(0.10026321999390311), '17456602372862189643': np.float64(0.10033677581796728)}
2025-08-04 20:57:08,441 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:57:08,441 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 20:57:08,441 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 20:57:08,445 - INFO -   New temperature for next round: 0.4786
2025-08-04 20:57:08,445 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:57:08,446 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:57:23,468 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:57:23,468 - INFO - [Round 149, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:57:23,475 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:57:23,476 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 20:57:23,476 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.7806 from 5 clients (10842 examples)
2025-08-04 20:57:23,476 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.73s across 5 clients
2025-08-04 20:57:23,477 - INFO - Fit phase aggregation: Summary
2025-08-04 20:57:23,477 - INFO -   fit_clients_total_received: 5
2025-08-04 20:57:23,477 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:57:23,477 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:57:23,477 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:57:23,477 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 20:57:23,478 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:57:23,478 - INFO -   aggregated_d_loss: 0.7806
2025-08-04 20:57:23,478 - INFO -   fit_time_avg_seconds_all_reporting: 1.7320
2025-08-04 20:57:23,479 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:57:29,523 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:57:29,523 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.588011908531189, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8229988726042841, 'avg_anomaly_score': 0.535794888388726, 'recall': 0.7087378640776699, 'eval_time_seconds': 0.02146458625793457, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7467741935483871, 'precision': 0.9811827956989247}
2025-08-04 20:57:29,524 - INFO - [Round 149, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:57:29,524 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 149.
2025-08-04 20:57:29,524 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 149.
2025-08-04 20:57:29,524 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 149.
2025-08-04 20:57:29,524 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 149.
2025-08-04 20:57:29,524 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 149.
2025-08-04 20:57:29,525 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 149.
2025-08-04 20:57:29,525 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 149.
2025-08-04 20:57:29,525 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 149.
2025-08-04 20:57:29,525 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 149.
2025-08-04 20:57:29,525 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 149.
2025-08-04 20:57:29,532 - INFO - [Round 149, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:57:29,536 - INFO - ==================================================
2025-08-04 20:57:29,536 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:57:29,536 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:57:29,536 - INFO - ==================================================
2025-08-04 20:57:29,536 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:57:29,536 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5424
2025-08-04 20:57:29,537 - INFO -   Global Accuracy (Wgtd Avg): 0.7317
2025-08-04 20:57:29,537 - INFO -   Global F1 Score (Wgtd Avg): 0.8141
2025-08-04 20:57:29,537 - INFO -   Global Precision (Wgtd Avg): 0.9791
2025-08-04 20:57:29,537 - INFO -   Global Recall (Wgtd Avg): 0.6967
2025-08-04 20:57:29,537 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:57:29,537 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0400) - ResourceCost(0.2400) = -0.1996
2025-08-04 20:57:29,537 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 149.
2025-08-04 20:57:29,537 - INFO -   Final Global Reward for action: -0.1996. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:57:29,538 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0400, Resource Cost: 0.2400
2025-08-04 20:57:29,538 - INFO -   Next round's global F1 (for next state Q-val): 0.8141
2025-08-04 20:57:29,538 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:57:29,538 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:57:29,538 - INFO -       Q(s) updated from -0.0258 to -0.0277 (TotalReward: -0.1996, NextMaxQ: -0.0258)
2025-08-04 20:57:29,538 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:57:29,539 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:57:29,539 - INFO -       Q(s) updated from -0.0308 to -0.0327 (TotalReward: -0.1996, NextMaxQ: -0.0308)
2025-08-04 20:57:29,539 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:57:29,539 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 20:57:29,539 - INFO -       Q(s) updated from -0.0277 to -0.0297 (TotalReward: -0.1996, NextMaxQ: -0.0277)
2025-08-04 20:57:29,540 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:57:29,540 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:57:29,540 - INFO -       Q(s) updated from -0.0327 to -0.0347 (TotalReward: -0.1996, NextMaxQ: -0.0327)
2025-08-04 20:57:29,541 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:57:29,541 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:57:29,541 - INFO -       Q(s) updated from -0.0304 to -0.0324 (TotalReward: -0.1996, NextMaxQ: -0.0303)
2025-08-04 20:57:29,542 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:57:29,543 - INFO - 
2025-08-04 20:57:29,543 - INFO - [ROUND 150]
2025-08-04 20:57:29,543 - INFO - [RLAgent choose_actions_softmax] Round 150. Temperature: 0.4786
2025-08-04 20:57:29,543 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:57:29,544 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.029693239246517487, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.029693239246517487, '4296149388320225194': -0.03258556961214278, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03258556961214278, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.030308121617350605}
2025-08-04 20:57:29,544 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10082195547403672), '5975185251685626785': np.float64(0.09977163910011708), '8560019474512340676': np.float64(0.0992304167378352), '12043264814094380418': np.float64(0.10082195547403672), '4296149388320225194': np.float64(0.1002145234672605), '15388649110162717160': np.float64(0.0992304167378352), '2395859185497387824': np.float64(0.0992304167378352), '10913316872057236365': np.float64(0.1002145234672605), '6587436948557123441': np.float64(0.09977163910011708), '17456602372862189643': np.float64(0.10069251370366575)}
2025-08-04 20:57:29,544 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:57:29,544 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:57:29,545 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']
2025-08-04 20:57:29,548 - INFO -   New temperature for next round: 0.4762
2025-08-04 20:57:29,548 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '4296149388320225194', '10913316872057236365', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:57:29,548 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 20:57:44,574 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 20:57:44,574 - INFO - [Round 150, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 20:57:44,581 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 20:57:44,582 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.60
2025-08-04 20:57:44,582 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.7793 from 5 clients (15380 examples)
2025-08-04 20:57:44,582 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.36s across 5 clients
2025-08-04 20:57:44,582 - INFO - Fit phase aggregation: Summary
2025-08-04 20:57:44,582 - INFO -   fit_clients_total_received: 5
2025-08-04 20:57:44,582 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:57:44,582 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:57:44,582 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 20:57:44,583 - INFO -   allocated_cores_avg_per_client: 1.6000
2025-08-04 20:57:44,583 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 20:57:44,583 - INFO -   aggregated_d_loss: 0.7793
2025-08-04 20:57:44,583 - INFO -   fit_time_avg_seconds_all_reporting: 2.3612
2025-08-04 20:57:44,583 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:57:50,627 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:57:50,627 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.599792766571045, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.81291504465308, 'avg_anomaly_score': 0.5484336820400811, 'recall': 0.6944444444444444, 'eval_time_seconds': 0.044789791107177734, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7292909211398277, 'precision': 0.9801214798453893}
2025-08-04 20:57:50,627 - INFO - [Round 150, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:57:50,628 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 150.
2025-08-04 20:57:50,628 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 150.
2025-08-04 20:57:50,628 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 150.
2025-08-04 20:57:50,628 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 150.
2025-08-04 20:57:50,628 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 150.
2025-08-04 20:57:50,628 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 150.
2025-08-04 20:57:50,629 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 150.
2025-08-04 20:57:50,629 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 150.
2025-08-04 20:57:50,629 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 150.
2025-08-04 20:57:50,629 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 150.
2025-08-04 20:57:50,636 - INFO - [Round 150, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:57:50,639 - INFO - ==================================================
2025-08-04 20:57:50,640 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:57:50,640 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:57:50,640 - INFO - ==================================================
2025-08-04 20:57:50,640 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:57:50,640 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5472
2025-08-04 20:57:50,640 - INFO -   Global Accuracy (Wgtd Avg): 0.7310
2025-08-04 20:57:50,640 - INFO -   Global F1 Score (Wgtd Avg): 0.8136
2025-08-04 20:57:50,641 - INFO -   Global Precision (Wgtd Avg): 0.9784
2025-08-04 20:57:50,641 - INFO -   Global Recall (Wgtd Avg): 0.6963
2025-08-04 20:57:50,641 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:57:50,641 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0007) - FairPenalty(0.0500) - ResourceCost(0.1600) = -0.2107
2025-08-04 20:57:50,641 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 150.
2025-08-04 20:57:50,641 - INFO -   Final Global Reward for action: -0.2107. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '4296149388320225194': (8, 0, 0, 8, 8), '10913316872057236365': (8, 0, 0, 8, 8), '17456602372862189643': (7, 3, 0, 8, 8)}
2025-08-04 20:57:50,641 - INFO -   Performance Reward: -0.0007, Fairness Penalty: 0.0500, Resource Cost: 0.1600
2025-08-04 20:57:50,641 - INFO -   Next round's global F1 (for next state Q-val): 0.8136
2025-08-04 20:57:50,642 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:57:50,642 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:57:50,642 - INFO -       Q(s) updated from -0.0297 to -0.0316 (TotalReward: -0.2107, NextMaxQ: -0.0128)
2025-08-04 20:57:50,642 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:57:50,642 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:57:50,642 - INFO -       Q(s) updated from -0.0316 to -0.0335 (TotalReward: -0.2107, NextMaxQ: -0.0128)
2025-08-04 20:57:50,643 - INFO -     Client 4296149388320225194 (Partition ID: 3): 
2025-08-04 20:57:50,643 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:57:50,643 - INFO -       Q(s) updated from -0.0326 to -0.0347 (TotalReward: -0.2107, NextMaxQ: -0.0339)
2025-08-04 20:57:50,644 - INFO -     Client 10913316872057236365 (Partition ID: 9): 
2025-08-04 20:57:50,644 - INFO -       State(s): (8, 0, 0, 8, 8) -> NextState(s'): (8, 1, 0, 8, 8)
2025-08-04 20:57:50,644 - INFO -       Q(s) updated from -0.0347 to -0.0367 (TotalReward: -0.2107, NextMaxQ: -0.0339)
2025-08-04 20:57:50,645 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:57:50,645 - INFO -       State(s): (7, 3, 0, 8, 8) -> NextState(s'): (7, 4, 0, 8, 8)
2025-08-04 20:57:50,645 - INFO -       Q(s) updated from -0.0303 to -0.0323 (TotalReward: -0.2107, NextMaxQ: -0.0207)
2025-08-04 20:57:50,646 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:57:50,646 - INFO - 
2025-08-04 20:57:50,647 - INFO - [ROUND 151]
2025-08-04 20:57:50,647 - INFO - [RLAgent choose_actions_softmax] Round 151. Temperature: 0.4762
2025-08-04 20:57:50,647 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:57:50,647 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.012774077064097502, '5975185251685626785': -0.0347054672284933, '8560019474512340676': 0.037285075241823756, '12043264814094380418': -0.012774077064097502, '4296149388320225194': -0.033909459968943456, '15388649110162717160': 0.037285075241823756, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.033909459968943456, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.020691290617132114}
2025-08-04 20:57:50,648 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10021907646325542), '5975185251685626785': np.float64(0.09570843831771417), '8560019474512340676': np.float64(0.11132724559389004), '12043264814094380418': np.float64(0.10021907646325542), '4296149388320225194': np.float64(0.09586854645430272), '15388649110162717160': np.float64(0.11132724559389004), '2395859185497387824': np.float64(0.09518665542035269), '10913316872057236365': np.float64(0.09586854645430272), '6587436948557123441': np.float64(0.09570843831771417), '17456602372862189643': np.float64(0.09856673092132252)}
2025-08-04 20:57:50,648 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:57:50,648 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160']
2025-08-04 20:57:50,648 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160']
2025-08-04 20:57:50,652 - INFO -   New temperature for next round: 0.4738
2025-08-04 20:57:50,652 - INFO -   Final selected CIDs to return: ['1640189632563049314', '8560019474512340676', '12043264814094380418', '15388649110162717160']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '8560019474512340676': (8, 0, 2, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 20:57:50,652 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:58:02,674 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:58:02,675 - INFO - [Round 151, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:58:02,682 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:58:02,682 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 4.00
2025-08-04 20:58:02,682 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7805 from 4 clients (10451 examples)
2025-08-04 20:58:02,682 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.98s across 4 clients
2025-08-04 20:58:02,682 - INFO - Fit phase aggregation: Summary
2025-08-04 20:58:02,682 - INFO -   fit_clients_total_received: 4
2025-08-04 20:58:02,682 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:58:02,683 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:58:02,683 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:58:02,683 - INFO -   allocated_cores_avg_per_client: 4.0000
2025-08-04 20:58:02,683 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:58:02,683 - INFO -   aggregated_d_loss: 0.7805
2025-08-04 20:58:02,683 - INFO -   fit_time_avg_seconds_all_reporting: 1.9848
2025-08-04 20:58:02,684 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:58:08,726 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:58:08,726 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.5529540061950684, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.5213351051703743, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.01564764976501465, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:58:08,726 - INFO - [Round 151, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:58:08,726 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 151.
2025-08-04 20:58:08,727 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 151.
2025-08-04 20:58:08,728 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 151.
2025-08-04 20:58:08,734 - INFO - [Round 151, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:58:08,738 - INFO - ==================================================
2025-08-04 20:58:08,738 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:58:08,738 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:58:08,739 - INFO - ==================================================
2025-08-04 20:58:08,739 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:58:08,739 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5236
2025-08-04 20:58:08,739 - INFO -   Global Accuracy (Wgtd Avg): 0.7310
2025-08-04 20:58:08,739 - INFO -   Global F1 Score (Wgtd Avg): 0.8136
2025-08-04 20:58:08,739 - INFO -   Global Precision (Wgtd Avg): 0.9784
2025-08-04 20:58:08,739 - INFO -   Global Recall (Wgtd Avg): 0.6963
2025-08-04 20:58:08,739 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:58:08,740 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0600) - ResourceCost(0.3200) = -0.3800
2025-08-04 20:58:08,740 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 151.
2025-08-04 20:58:08,740 - INFO -   Final Global Reward for action: -0.3800. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '8560019474512340676': (8, 0, 2, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 20:58:08,740 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0600, Resource Cost: 0.3200
2025-08-04 20:58:08,740 - INFO -   Next round's global F1 (for next state Q-val): 0.8136
2025-08-04 20:58:08,740 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:58:08,740 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:58:08,740 - INFO -       Q(s) updated from -0.0128 to -0.0166 (TotalReward: -0.3800, NextMaxQ: -0.0128)
2025-08-04 20:58:08,741 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:58:08,741 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:58:08,741 - INFO -       Q(s) updated from 0.0373 to 0.0328 (TotalReward: -0.3800, NextMaxQ: -0.0373)
2025-08-04 20:58:08,741 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:58:08,742 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:58:08,742 - INFO -       Q(s) updated from -0.0166 to -0.0203 (TotalReward: -0.3800, NextMaxQ: -0.0166)
2025-08-04 20:58:08,742 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:58:08,742 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:58:08,742 - INFO -       Q(s) updated from 0.0328 to 0.0283 (TotalReward: -0.3800, NextMaxQ: -0.0373)
2025-08-04 20:58:08,743 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:58:08,743 - INFO - 
2025-08-04 20:58:08,743 - INFO - [ROUND 152]
2025-08-04 20:58:08,744 - INFO - [RLAgent choose_actions_softmax] Round 152. Temperature: 0.4738
2025-08-04 20:58:08,744 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:58:08,744 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.020344741684046375, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.020344741684046375, '4296149388320225194': -0.033909459968943456, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.033909459968943456, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.03229797780104457}
2025-08-04 20:58:08,744 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10252790902136483), '5975185251685626785': np.float64(0.09946725547009423), '8560019474512340676': np.float64(0.09892226275143702), '12043264814094380418': np.float64(0.10252790902136483), '4296149388320225194': np.float64(0.09963448849570467), '15388649110162717160': np.float64(0.09892226275143702), '2395859185497387824': np.float64(0.09892226275143702), '10913316872057236365': np.float64(0.09963448849570467), '6587436948557123441': np.float64(0.09946725547009423), '17456602372862189643': np.float64(0.09997390577136152)}
2025-08-04 20:58:08,745 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:58:08,745 - INFO -     Selected 2 CIDs with this factor: ['1640189632563049314', '12043264814094380418']
2025-08-04 20:58:08,745 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418']
2025-08-04 20:58:08,748 - INFO -   New temperature for next round: 0.4715
2025-08-04 20:58:08,749 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8)}
2025-08-04 20:58:08,749 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:58:23,766 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:58:23,767 - INFO - [Round 152, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:58:23,770 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:58:23,770 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.50
2025-08-04 20:58:23,770 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7830 from 2 clients (10442 examples)
2025-08-04 20:58:23,770 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=3.85s across 2 clients
2025-08-04 20:58:23,771 - INFO - Fit phase aggregation: Summary
2025-08-04 20:58:23,771 - INFO -   fit_clients_total_received: 2
2025-08-04 20:58:23,771 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:58:23,771 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:58:23,771 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:58:23,771 - INFO -   allocated_cores_avg_per_client: 1.5000
2025-08-04 20:58:23,771 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:58:23,771 - INFO -   aggregated_d_loss: 0.7830
2025-08-04 20:58:23,772 - INFO -   fit_time_avg_seconds_all_reporting: 3.8516
2025-08-04 20:58:23,772 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:58:29,817 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:58:29,817 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.642526388168335, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8131083711875405, 'avg_anomaly_score': 0.5750515874681336, 'recall': 0.69921875, 'eval_time_seconds': 0.03858208656311035, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7322175732217573, 'precision': 0.9713178294573643}
2025-08-04 20:58:29,817 - INFO - [Round 152, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:58:29,818 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 152.
2025-08-04 20:58:29,818 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 152.
2025-08-04 20:58:29,818 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 152.
2025-08-04 20:58:29,818 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 152.
2025-08-04 20:58:29,818 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 152.
2025-08-04 20:58:29,818 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 152.
2025-08-04 20:58:29,819 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 152.
2025-08-04 20:58:29,819 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 152.
2025-08-04 20:58:29,819 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 152.
2025-08-04 20:58:29,819 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 152.
2025-08-04 20:58:29,826 - INFO - [Round 152, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:58:29,830 - INFO - ==================================================
2025-08-04 20:58:29,830 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:58:29,830 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:58:29,830 - INFO - ==================================================
2025-08-04 20:58:29,831 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:58:29,831 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5767
2025-08-04 20:58:29,831 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 20:58:29,831 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 20:58:29,831 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 20:58:29,831 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 20:58:29,831 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:58:29,832 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0002) - FairPenalty(0.0600) - ResourceCost(0.0600) = -0.1202
2025-08-04 20:58:29,832 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 152.
2025-08-04 20:58:29,832 - INFO -   Final Global Reward for action: -0.1202. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8)}
2025-08-04 20:58:29,832 - INFO -   Performance Reward: -0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.0600
2025-08-04 20:58:29,832 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 20:58:29,832 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:58:29,832 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:58:29,833 - INFO -       Q(s) updated from -0.0203 to -0.0215 (TotalReward: -0.1202, NextMaxQ: -0.0203)
2025-08-04 20:58:29,833 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:58:29,833 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:58:29,834 - INFO -       Q(s) updated from -0.0215 to -0.0227 (TotalReward: -0.1202, NextMaxQ: -0.0215)
2025-08-04 20:58:29,834 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:58:29,835 - INFO - 
2025-08-04 20:58:29,835 - INFO - [ROUND 153]
2025-08-04 20:58:29,835 - INFO - [RLAgent choose_actions_softmax] Round 153. Temperature: 0.4715
2025-08-04 20:58:29,835 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:58:29,835 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.022707387152740573, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.022707387152740573, '4296149388320225194': -0.033909459968943456, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.033909459968943456, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.03238827285089374}
2025-08-04 20:58:29,836 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10213482427958354), '5975185251685626785': np.float64(0.09956851858680106), '8560019474512340676': np.float64(0.0990202371583527), '12043264814094380418': np.float64(0.10213482427958354), '4296149388320225194': np.float64(0.09973676379583839), '15388649110162717160': np.float64(0.0990202371583527), '2395859185497387824': np.float64(0.0990202371583527), '10913316872057236365': np.float64(0.09973676379583839), '6587436948557123441': np.float64(0.09956851858680106), '17456602372862189643': np.float64(0.1000590752004959)}
2025-08-04 20:58:29,836 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:58:29,836 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:58:29,836 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 20:58:29,840 - INFO -   New temperature for next round: 0.4691
2025-08-04 20:58:29,840 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:58:29,840 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:58:41,863 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:58:41,863 - INFO - [Round 153, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:58:41,868 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:58:41,868 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 20:58:41,869 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0833, Aggregated D_Loss=0.7797 from 3 clients (10556 examples)
2025-08-04 20:58:41,869 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.62s across 3 clients
2025-08-04 20:58:41,869 - INFO - Fit phase aggregation: Summary
2025-08-04 20:58:41,869 - INFO -   fit_clients_total_received: 3
2025-08-04 20:58:41,869 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:58:41,869 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:58:41,869 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:58:41,869 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 20:58:41,869 - INFO -   aggregated_g_loss: 2.0833
2025-08-04 20:58:41,870 - INFO -   aggregated_d_loss: 0.7797
2025-08-04 20:58:41,870 - INFO -   fit_time_avg_seconds_all_reporting: 2.6205
2025-08-04 20:58:41,870 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:58:47,915 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:58:47,915 - INFO -   Sample of first result (CID 12043264814094380418): Metrics: {'threshold': 0.4923294544219971, 'profile_name': 'Low-End IoT', 'f1_score': 0.8124253285543608, 'avg_anomaly_score': 0.4772955580379652, 'recall': 0.6910569105691057, 'eval_time_seconds': 0.015131473541259766, 'client_cid_for_attributes': '0', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7269565217391304, 'precision': 0.9855072463768116}
2025-08-04 20:58:47,915 - INFO - [Round 153, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:58:47,915 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 153.
2025-08-04 20:58:47,916 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 153.
2025-08-04 20:58:47,917 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 153.
2025-08-04 20:58:47,924 - INFO - [Round 153, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:58:47,927 - INFO - ==================================================
2025-08-04 20:58:47,928 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:58:47,928 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:58:47,928 - INFO - ==================================================
2025-08-04 20:58:47,928 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:58:47,928 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4798
2025-08-04 20:58:47,928 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 20:58:47,928 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 20:58:47,928 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 20:58:47,928 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 20:58:47,929 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:58:47,929 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0000) - FairPenalty(0.0600) - ResourceCost(0.1000) = -0.1600
2025-08-04 20:58:47,929 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 153.
2025-08-04 20:58:47,929 - INFO -   Final Global Reward for action: -0.1600. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 20:58:47,929 - INFO -   Performance Reward: -0.0000, Fairness Penalty: 0.0600, Resource Cost: 0.1000
2025-08-04 20:58:47,929 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 20:58:47,929 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:58:47,929 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:58:47,929 - INFO -       Q(s) updated from -0.0227 to -0.0243 (TotalReward: -0.1600, NextMaxQ: -0.0227)
2025-08-04 20:58:47,930 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:58:47,930 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:58:47,930 - INFO -       Q(s) updated from -0.0243 to -0.0259 (TotalReward: -0.1600, NextMaxQ: -0.0243)
2025-08-04 20:58:47,931 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:58:47,931 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 3, 0, 8, 8)
2025-08-04 20:58:47,931 - INFO -       Q(s) updated from -0.0324 to -0.0340 (TotalReward: -0.1600, NextMaxQ: -0.0323)
2025-08-04 20:58:47,931 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:58:47,932 - INFO - 
2025-08-04 20:58:47,932 - INFO - [ROUND 154]
2025-08-04 20:58:47,933 - INFO - [RLAgent choose_actions_softmax] Round 154. Temperature: 0.4691
2025-08-04 20:58:47,933 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:58:47,933 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025860395085822246, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.025860395085822246, '4296149388320225194': -0.033909459968943456, '15388649110162717160': -0.03730887989167328, '2395859185497387824': 0.028312900205651595, '10913316872057236365': -0.033909459968943456, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.03229797780104457}
2025-08-04 20:58:47,934 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10010826623301959), '5975185251685626785': np.float64(0.09823845644472415), '8560019474512340676': np.float64(0.09769478826509108), '12043264814094380418': np.float64(0.10010826623301959), '4296149388320225194': np.float64(0.09840528905619375), '15388649110162717160': np.float64(0.09769478826509108), '2395859185497387824': np.float64(0.11236249768403452), '10913316872057236365': np.float64(0.09840528905619375), '6587436948557123441': np.float64(0.09823845644472415), '17456602372862189643': np.float64(0.0987439023179084)}
2025-08-04 20:58:47,934 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:58:47,934 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 20:58:47,934 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 20:58:47,938 - INFO -   New temperature for next round: 0.4668
2025-08-04 20:58:47,938 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '2395859185497387824']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:58:47,938 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 20:59:02,966 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 20:59:02,966 - INFO - [Round 154, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 20:59:02,971 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 20:59:02,971 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.67
2025-08-04 20:59:02,971 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0833, Aggregated D_Loss=0.7809 from 3 clients (13969 examples)
2025-08-04 20:59:02,972 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=3.55s across 3 clients
2025-08-04 20:59:02,972 - INFO - Fit phase aggregation: Summary
2025-08-04 20:59:02,972 - INFO -   fit_clients_total_received: 3
2025-08-04 20:59:02,972 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:59:02,972 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:59:02,972 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 20:59:02,972 - INFO -   allocated_cores_avg_per_client: 2.6667
2025-08-04 20:59:02,972 - INFO -   aggregated_g_loss: 2.0833
2025-08-04 20:59:02,972 - INFO -   aggregated_d_loss: 0.7809
2025-08-04 20:59:02,972 - INFO -   fit_time_avg_seconds_all_reporting: 3.5517
2025-08-04 20:59:02,973 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:59:09,017 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:59:09,018 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.5952659845352173, 'profile_name': 'Low-End IoT', 'f1_score': 0.8134777376654633, 'avg_anomaly_score': 0.5389860753590862, 'recall': 0.6954732510288066, 'eval_time_seconds': 0.013154268264770508, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7309027777777778, 'precision': 0.9797101449275363}
2025-08-04 20:59:09,018 - INFO - [Round 154, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:59:09,018 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 154.
2025-08-04 20:59:09,018 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 154.
2025-08-04 20:59:09,018 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 154.
2025-08-04 20:59:09,019 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 154.
2025-08-04 20:59:09,027 - INFO - [Round 154, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:59:09,030 - INFO - ==================================================
2025-08-04 20:59:09,030 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:59:09,030 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:59:09,030 - INFO - ==================================================
2025-08-04 20:59:09,031 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:59:09,031 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5388
2025-08-04 20:59:09,031 - INFO -   Global Accuracy (Wgtd Avg): 0.7310
2025-08-04 20:59:09,031 - INFO -   Global F1 Score (Wgtd Avg): 0.8136
2025-08-04 20:59:09,031 - INFO -   Global Precision (Wgtd Avg): 0.9784
2025-08-04 20:59:09,031 - INFO -   Global Recall (Wgtd Avg): 0.6963
2025-08-04 20:59:09,031 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:59:09,032 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0600) - ResourceCost(0.1600) = -0.2198
2025-08-04 20:59:09,032 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 154.
2025-08-04 20:59:09,032 - INFO -   Final Global Reward for action: -0.2198. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 20:59:09,032 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.1600
2025-08-04 20:59:09,032 - INFO -   Next round's global F1 (for next state Q-val): 0.8136
2025-08-04 20:59:09,033 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:59:09,033 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:59:09,033 - INFO -       Q(s) updated from -0.0259 to -0.0280 (TotalReward: -0.2198, NextMaxQ: -0.0259)
2025-08-04 20:59:09,033 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:59:09,033 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:59:09,033 - INFO -       Q(s) updated from -0.0280 to -0.0302 (TotalReward: -0.2198, NextMaxQ: -0.0280)
2025-08-04 20:59:09,034 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 20:59:09,034 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:59:09,034 - INFO -       Q(s) updated from 0.0283 to 0.0255 (TotalReward: -0.2198, NextMaxQ: -0.0373)
2025-08-04 20:59:09,035 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:59:09,035 - INFO - 
2025-08-04 20:59:09,035 - INFO - [ROUND 155]
2025-08-04 20:59:09,035 - INFO - [RLAgent choose_actions_softmax] Round 155. Temperature: 0.4668
2025-08-04 20:59:09,035 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:59:09,036 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.030203360248987933, '5975185251685626785': -0.02090631515962433, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.030203360248987933, '4296149388320225194': -0.033909459968943456, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.033909459968943456, '6587436948557123441': -0.02090631515962433, '17456602372862189643': -0.033955071922594206}
2025-08-04 20:59:09,036 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1002899305422436), '5975185251685626785': np.float64(0.10230748507365287), '8560019474512340676': np.float64(0.09877482587703403), '12043264814094380418': np.float64(0.1002899305422436), '4296149388320225194': np.float64(0.09949680439222391), '15388649110162717160': np.float64(0.09877482587703403), '2395859185497387824': np.float64(0.09877482587703403), '10913316872057236365': np.float64(0.09949680439222391), '6587436948557123441': np.float64(0.10230748507365287), '17456602372862189643': np.float64(0.09948708235265714)}
2025-08-04 20:59:09,037 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:59:09,037 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:59:09,037 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 20:59:09,041 - INFO -   New temperature for next round: 0.4644
2025-08-04 20:59:09,041 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']. Corresponding states: {'1640189632563049314': (8, 5, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8)}
2025-08-04 20:59:09,041 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 20:59:21,062 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 20:59:21,062 - INFO - [Round 155, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 20:59:21,068 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 20:59:21,068 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.50
2025-08-04 20:59:21,069 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7797 from 4 clients (11219 examples)
2025-08-04 20:59:21,069 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.15s across 4 clients
2025-08-04 20:59:21,069 - INFO - Fit phase aggregation: Summary
2025-08-04 20:59:21,069 - INFO -   fit_clients_total_received: 4
2025-08-04 20:59:21,069 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:59:21,069 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:59:21,069 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 20:59:21,070 - INFO -   allocated_cores_avg_per_client: 2.5000
2025-08-04 20:59:21,070 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 20:59:21,070 - INFO -   aggregated_d_loss: 0.7797
2025-08-04 20:59:21,070 - INFO -   fit_time_avg_seconds_all_reporting: 2.1454
2025-08-04 20:59:21,071 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:59:27,115 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:59:27,115 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.574240756034851, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5364560639257911, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.017640352249145508, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 20:59:27,116 - INFO - [Round 155, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:59:27,116 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 155.
2025-08-04 20:59:27,116 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 155.
2025-08-04 20:59:27,116 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 155.
2025-08-04 20:59:27,116 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 155.
2025-08-04 20:59:27,116 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 155.
2025-08-04 20:59:27,116 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 155.
2025-08-04 20:59:27,117 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 155.
2025-08-04 20:59:27,117 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 155.
2025-08-04 20:59:27,117 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 155.
2025-08-04 20:59:27,117 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 155.
2025-08-04 20:59:27,124 - INFO - [Round 155, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:59:27,127 - INFO - ==================================================
2025-08-04 20:59:27,127 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:59:27,127 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:59:27,127 - INFO - ==================================================
2025-08-04 20:59:27,127 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:59:27,128 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5318
2025-08-04 20:59:27,128 - INFO -   Global Accuracy (Wgtd Avg): 0.7312
2025-08-04 20:59:27,128 - INFO -   Global F1 Score (Wgtd Avg): 0.8137
2025-08-04 20:59:27,128 - INFO -   Global Precision (Wgtd Avg): 0.9786
2025-08-04 20:59:27,128 - INFO -   Global Recall (Wgtd Avg): 0.6964
2025-08-04 20:59:27,128 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:59:27,128 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0600) - ResourceCost(0.2000) = -0.2598
2025-08-04 20:59:27,128 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 155.
2025-08-04 20:59:27,129 - INFO -   Final Global Reward for action: -0.2598. Client states at selection: {'1640189632563049314': (8, 5, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 5, 0, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8)}
2025-08-04 20:59:27,129 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0600, Resource Cost: 0.2000
2025-08-04 20:59:27,129 - INFO -   Next round's global F1 (for next state Q-val): 0.8137
2025-08-04 20:59:27,129 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 20:59:27,129 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:59:27,129 - INFO -       Q(s) updated from -0.0302 to -0.0328 (TotalReward: -0.2598, NextMaxQ: -0.0302)
2025-08-04 20:59:27,130 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 20:59:27,130 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:59:27,130 - INFO -       Q(s) updated from -0.0209 to -0.0236 (TotalReward: -0.2598, NextMaxQ: -0.0347)
2025-08-04 20:59:27,130 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 20:59:27,130 - INFO -       State(s): (8, 5, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 20:59:27,131 - INFO -       Q(s) updated from -0.0328 to -0.0353 (TotalReward: -0.2598, NextMaxQ: -0.0328)
2025-08-04 20:59:27,131 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 20:59:27,131 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 20:59:27,131 - INFO -       Q(s) updated from -0.0236 to -0.0263 (TotalReward: -0.2598, NextMaxQ: -0.0347)
2025-08-04 20:59:27,132 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:59:27,132 - INFO - 
2025-08-04 20:59:27,132 - INFO - [ROUND 156]
2025-08-04 20:59:27,132 - INFO - [RLAgent choose_actions_softmax] Round 156. Temperature: 0.4644
2025-08-04 20:59:27,133 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:59:27,133 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.03533730468447693, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.03533730468447693, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.008978485265210629}
2025-08-04 20:59:27,133 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09957786823660385), '5975185251685626785': np.float64(0.0997134281704498), '8560019474512340676': np.float64(0.09915605285476053), '12043264814094380418': np.float64(0.09957786823660385), '4296149388320225194': np.float64(0.09927826416930526), '15388649110162717160': np.float64(0.09915605285476053), '2395859185497387824': np.float64(0.09915605285476053), '10913316872057236365': np.float64(0.09927826416930526), '6587436948557123441': np.float64(0.0997134281704498), '17456602372862189643': np.float64(0.10539272028300072)}
2025-08-04 20:59:27,133 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:59:27,134 - INFO -     Selected 1 CIDs with this factor: ['17456602372862189643']
2025-08-04 20:59:27,134 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643']
2025-08-04 20:59:27,137 - INFO -   New temperature for next round: 0.4621
2025-08-04 20:59:27,137 - INFO -   Final selected CIDs to return: ['17456602372862189643']. Corresponding states: {'17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 20:59:27,138 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 20:59:33,148 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 20:59:33,148 - INFO - [Round 156, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 20:59:33,150 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 20:59:33,150 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.00
2025-08-04 20:59:33,151 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0826, Aggregated D_Loss=0.7954 from 1 clients (36 examples)
2025-08-04 20:59:33,151 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 1 clients
2025-08-04 20:59:33,151 - INFO - Fit phase aggregation: Summary
2025-08-04 20:59:33,151 - INFO -   fit_clients_total_received: 1
2025-08-04 20:59:33,151 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:59:33,151 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:59:33,151 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 20:59:33,151 - INFO -   allocated_cores_avg_per_client: 2.0000
2025-08-04 20:59:33,151 - INFO -   aggregated_g_loss: 2.0826
2025-08-04 20:59:33,152 - INFO -   aggregated_d_loss: 0.7954
2025-08-04 20:59:33,152 - INFO -   fit_time_avg_seconds_all_reporting: 0.1592
2025-08-04 20:59:33,152 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:59:42,204 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:59:42,204 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.5710225105285645, 'profile_name': 'Low-End IoT', 'f1_score': 0.8134777376654633, 'avg_anomaly_score': 0.5099103033749594, 'recall': 0.6954732510288066, 'eval_time_seconds': 0.014542341232299805, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7309027777777778, 'precision': 0.9797101449275363}
2025-08-04 20:59:42,204 - INFO - [Round 156, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:59:42,205 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 156.
2025-08-04 20:59:42,205 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 156.
2025-08-04 20:59:42,205 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 156.
2025-08-04 20:59:42,205 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 156.
2025-08-04 20:59:42,205 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 156.
2025-08-04 20:59:42,206 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 156.
2025-08-04 20:59:42,206 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 156.
2025-08-04 20:59:42,206 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 156.
2025-08-04 20:59:42,206 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 156.
2025-08-04 20:59:42,206 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 156.
2025-08-04 20:59:42,213 - INFO - [Round 156, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:59:42,218 - INFO - ==================================================
2025-08-04 20:59:42,218 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:59:42,218 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:59:42,218 - INFO - ==================================================
2025-08-04 20:59:42,218 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:59:42,218 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5096
2025-08-04 20:59:42,218 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 20:59:42,218 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 20:59:42,219 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 20:59:42,219 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 20:59:42,219 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:59:42,219 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0009) - FairPenalty(0.0000) - ResourceCost(0.0400) = -0.0409
2025-08-04 20:59:42,219 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 156.
2025-08-04 20:59:42,219 - INFO -   Final Global Reward for action: -0.0409. Client states at selection: {'17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 20:59:42,220 - INFO -   Performance Reward: -0.0009, Fairness Penalty: 0.0000, Resource Cost: 0.0400
2025-08-04 20:59:42,220 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 20:59:42,220 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 20:59:42,220 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 20:59:42,220 - INFO -       Q(s) updated from -0.0090 to -0.0096 (TotalReward: -0.0409, NextMaxQ: -0.0340)
2025-08-04 20:59:42,221 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:59:42,221 - INFO - 
2025-08-04 20:59:42,221 - INFO - [ROUND 157]
2025-08-04 20:59:42,222 - INFO - [RLAgent choose_actions_softmax] Round 157. Temperature: 0.4621
2025-08-04 20:59:42,222 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:59:42,222 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0335234919165132, '5975185251685626785': -0.0347054672284933, '8560019474512340676': 0.025495562023468345, '12043264814094380418': -0.0335234919165132, '4296149388320225194': -0.03673679961568835, '15388649110162717160': 0.025495562023468345, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.033955071922594206}
2025-08-04 20:59:42,222 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09761434372273116), '5975185251685626785': np.float64(0.09736499256661933), '8560019474512340676': np.float64(0.1109120966198766), '12043264814094380418': np.float64(0.09761434372273116), '4296149388320225194': np.float64(0.09693794692473318), '15388649110162717160': np.float64(0.1109120966198766), '2395859185497387824': np.float64(0.09681801725751556), '10913316872057236365': np.float64(0.09693794692473318), '6587436948557123441': np.float64(0.09736499256661933), '17456602372862189643': np.float64(0.09752322307456389)}
2025-08-04 20:59:42,223 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:59:42,223 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:59:42,223 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160']
2025-08-04 20:59:42,227 - INFO -   New temperature for next round: 0.4598
2025-08-04 20:59:42,227 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160']. Corresponding states: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 20:59:42,227 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 20:59:48,243 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 20:59:48,243 - INFO - [Round 157, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 20:59:48,246 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 20:59:48,247 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 20:59:48,247 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0866, Aggregated D_Loss=0.7878 from 2 clients (78 examples)
2025-08-04 20:59:48,247 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 2 clients
2025-08-04 20:59:48,247 - INFO - Fit phase aggregation: Summary
2025-08-04 20:59:48,247 - INFO -   fit_clients_total_received: 2
2025-08-04 20:59:48,247 - INFO -   fit_clients_reported_errors: 0
2025-08-04 20:59:48,247 - INFO -   fit_clients_skipped_training: 0
2025-08-04 20:59:48,248 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 20:59:48,248 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 20:59:48,248 - INFO -   aggregated_g_loss: 2.0866
2025-08-04 20:59:48,248 - INFO -   aggregated_d_loss: 0.7878
2025-08-04 20:59:48,248 - INFO -   fit_time_avg_seconds_all_reporting: 0.1603
2025-08-04 20:59:48,249 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 20:59:57,297 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 20:59:57,297 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.554944658279419, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8133730249599267, 'avg_anomaly_score': 0.5170853149029812, 'recall': 0.6948356807511737, 'eval_time_seconds': 0.05217576026916504, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7299536116633533, 'precision': 0.9806736609607951}
2025-08-04 20:59:57,297 - INFO - [Round 157, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 20:59:57,298 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 157.
2025-08-04 20:59:57,298 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 157.
2025-08-04 20:59:57,298 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 157.
2025-08-04 20:59:57,298 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 157.
2025-08-04 20:59:57,298 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 157.
2025-08-04 20:59:57,299 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 157.
2025-08-04 20:59:57,299 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 157.
2025-08-04 20:59:57,299 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 157.
2025-08-04 20:59:57,299 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 157.
2025-08-04 20:59:57,299 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 157.
2025-08-04 20:59:57,307 - INFO - [Round 157, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 20:59:57,311 - INFO - ==================================================
2025-08-04 20:59:57,312 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 20:59:57,312 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 20:59:57,312 - INFO - ==================================================
2025-08-04 20:59:57,312 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 20:59:57,312 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5157
2025-08-04 20:59:57,312 - INFO -   Global Accuracy (Wgtd Avg): 0.7312
2025-08-04 20:59:57,312 - INFO -   Global F1 Score (Wgtd Avg): 0.8137
2025-08-04 20:59:57,312 - INFO -   Global Precision (Wgtd Avg): 0.9786
2025-08-04 20:59:57,313 - INFO -   Global Recall (Wgtd Avg): 0.6964
2025-08-04 20:59:57,313 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 20:59:57,313 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0006) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.2594
2025-08-04 20:59:57,313 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 157.
2025-08-04 20:59:57,313 - INFO -   Final Global Reward for action: -0.2594. Client states at selection: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 20:59:57,313 - INFO -   Performance Reward: 0.0006, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 20:59:57,313 - INFO -   Next round's global F1 (for next state Q-val): 0.8137
2025-08-04 20:59:57,313 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 20:59:57,313 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:59:57,313 - INFO -       Q(s) updated from 0.0255 to 0.0223 (TotalReward: -0.2594, NextMaxQ: -0.0373)
2025-08-04 20:59:57,314 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 20:59:57,314 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 20:59:57,314 - INFO -       Q(s) updated from 0.0223 to 0.0192 (TotalReward: -0.2594, NextMaxQ: -0.0373)
2025-08-04 20:59:57,315 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 20:59:57,316 - INFO - 
2025-08-04 20:59:57,316 - INFO - [ROUND 158]
2025-08-04 20:59:57,316 - INFO - [RLAgent choose_actions_softmax] Round 158. Temperature: 0.4598
2025-08-04 20:59:57,316 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 20:59:57,316 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.013196608881884387, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.013196608881884387, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.033955071922594206}
2025-08-04 20:59:57,318 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1040433549900509), '5975185251685626785': np.float64(0.09928852281029041), '8560019474512340676': np.float64(0.09872794653998677), '12043264814094380418': np.float64(0.1040433549900509), '4296149388320225194': np.float64(0.0988508569914627), '15388649110162717160': np.float64(0.09872794653998677), '2395859185497387824': np.float64(0.09872794653998677), '10913316872057236365': np.float64(0.0988508569914627), '6587436948557123441': np.float64(0.09928852281029041), '17456602372862189643': np.float64(0.09945069079643164)}
2025-08-04 20:59:57,319 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 20:59:57,319 - INFO -     Selected 2 CIDs with this factor: ['1640189632563049314', '12043264814094380418']
2025-08-04 20:59:57,319 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418']
2025-08-04 20:59:57,323 - INFO -   New temperature for next round: 0.4575
2025-08-04 20:59:57,323 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8)}
2025-08-04 20:59:57,323 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 21:00:12,343 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 21:00:12,343 - INFO - [Round 158, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 21:00:12,346 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 21:00:12,346 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.50
2025-08-04 21:00:12,347 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0834, Aggregated D_Loss=0.7869 from 2 clients (10840 examples)
2025-08-04 21:00:12,347 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=4.11s across 2 clients
2025-08-04 21:00:12,347 - INFO - Fit phase aggregation: Summary
2025-08-04 21:00:12,347 - INFO -   fit_clients_total_received: 2
2025-08-04 21:00:12,347 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:00:12,347 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:00:12,347 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 21:00:12,347 - INFO -   allocated_cores_avg_per_client: 1.5000
2025-08-04 21:00:12,347 - INFO -   aggregated_g_loss: 2.0834
2025-08-04 21:00:12,348 - INFO -   aggregated_d_loss: 0.7869
2025-08-04 21:00:12,348 - INFO -   fit_time_avg_seconds_all_reporting: 4.1081
2025-08-04 21:00:12,348 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:00:21,387 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:00:21,388 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5848943948745727, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5421037934095168, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.01597905158996582, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 21:00:21,388 - INFO - [Round 158, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:00:21,388 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 158.
2025-08-04 21:00:21,388 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 158.
2025-08-04 21:00:21,388 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 158.
2025-08-04 21:00:21,389 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 158.
2025-08-04 21:00:21,389 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 158.
2025-08-04 21:00:21,389 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 158.
2025-08-04 21:00:21,389 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 158.
2025-08-04 21:00:21,389 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 158.
2025-08-04 21:00:21,389 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 158.
2025-08-04 21:00:21,390 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 158.
2025-08-04 21:00:21,397 - INFO - [Round 158, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:00:21,401 - INFO - ==================================================
2025-08-04 21:00:21,401 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:00:21,401 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:00:21,401 - INFO - ==================================================
2025-08-04 21:00:21,401 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:00:21,401 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5377
2025-08-04 21:00:21,402 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 21:00:21,402 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 21:00:21,402 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 21:00:21,402 - INFO -   Global Recall (Wgtd Avg): 0.6958
2025-08-04 21:00:21,402 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:00:21,402 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0009) - FairPenalty(0.0200) - ResourceCost(0.0600) = -0.0809
2025-08-04 21:00:21,402 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 158.
2025-08-04 21:00:21,402 - INFO -   Final Global Reward for action: -0.0809. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8)}
2025-08-04 21:00:21,402 - INFO -   Performance Reward: -0.0009, Fairness Penalty: 0.0200, Resource Cost: 0.0600
2025-08-04 21:00:21,402 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 21:00:21,403 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:00:21,403 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:00:21,403 - INFO -       Q(s) updated from -0.0132 to -0.0140 (TotalReward: -0.0809, NextMaxQ: -0.0132)
2025-08-04 21:00:21,403 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:00:21,403 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:00:21,403 - INFO -       Q(s) updated from -0.0140 to -0.0148 (TotalReward: -0.0809, NextMaxQ: -0.0140)
2025-08-04 21:00:21,404 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:00:21,404 - INFO - 
2025-08-04 21:00:21,404 - INFO - [ROUND 159]
2025-08-04 21:00:21,405 - INFO - [RLAgent choose_actions_softmax] Round 159. Temperature: 0.4575
2025-08-04 21:00:21,405 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:00:21,405 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.014787368623757482, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.014787368623757482, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.009603279388338434}
2025-08-04 21:00:21,406 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10321618179618715), '5975185251685626785': np.float64(0.0988189967277699), '8560019474512340676': np.float64(0.09825827570030472), '12043264814094380418': np.float64(0.10321618179618715), '4296149388320225194': np.float64(0.09838121652463679), '15388649110162717160': np.float64(0.09825827570030472), '2395859185497387824': np.float64(0.09825827570030472), '10913316872057236365': np.float64(0.09838121652463679), '6587436948557123441': np.float64(0.0988189967277699), '17456602372862189643': np.float64(0.10439238280189812)}
2025-08-04 21:00:21,406 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:00:21,406 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 21:00:21,406 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 21:00:21,411 - INFO -   New temperature for next round: 0.4552
2025-08-04 21:00:21,411 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:00:21,411 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 21:00:36,430 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 21:00:36,430 - INFO - [Round 159, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 21:00:36,434 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 21:00:36,434 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 21:00:36,434 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0836, Aggregated D_Loss=0.7804 from 3 clients (10952 examples)
2025-08-04 21:00:36,435 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.74s across 3 clients
2025-08-04 21:00:36,435 - INFO - Fit phase aggregation: Summary
2025-08-04 21:00:36,435 - INFO -   fit_clients_total_received: 3
2025-08-04 21:00:36,435 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:00:36,435 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:00:36,436 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 21:00:36,436 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 21:00:36,436 - INFO -   aggregated_g_loss: 2.0836
2025-08-04 21:00:36,436 - INFO -   aggregated_d_loss: 0.7804
2025-08-04 21:00:36,436 - INFO -   fit_time_avg_seconds_all_reporting: 2.7353
2025-08-04 21:00:36,437 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:00:45,483 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:00:45,484 - INFO -   Sample of first result (CID 10913316872057236365): Metrics: {'threshold': 0.5702368021011353, 'profile_name': 'Low-End IoT', 'f1_score': 0.8134777376654633, 'avg_anomaly_score': 0.5222136103030708, 'recall': 0.6954732510288066, 'eval_time_seconds': 0.014064788818359375, 'client_cid_for_attributes': '9', 'allocated_cores_for_pytorch': 1, 'server_round': -1, 'accuracy': 0.7309027777777778, 'precision': 0.9797101449275363}
2025-08-04 21:00:45,484 - INFO - [Round 159, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:00:45,484 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 159.
2025-08-04 21:00:45,484 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 159.
2025-08-04 21:00:45,484 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 159.
2025-08-04 21:00:45,485 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 159.
2025-08-04 21:00:45,492 - INFO - [Round 159, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:00:45,496 - INFO - ==================================================
2025-08-04 21:00:45,496 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:00:45,497 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:00:45,497 - INFO - ==================================================
2025-08-04 21:00:45,497 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:00:45,497 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5228
2025-08-04 21:00:45,497 - INFO -   Global Accuracy (Wgtd Avg): 0.7308
2025-08-04 21:00:45,497 - INFO -   Global F1 Score (Wgtd Avg): 0.8134
2025-08-04 21:00:45,497 - INFO -   Global Precision (Wgtd Avg): 0.9782
2025-08-04 21:00:45,497 - INFO -   Global Recall (Wgtd Avg): 0.6961
2025-08-04 21:00:45,497 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:00:45,498 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0003) - FairPenalty(0.0200) - ResourceCost(0.1000) = -0.1197
2025-08-04 21:00:45,498 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 159.
2025-08-04 21:00:45,498 - INFO -   Final Global Reward for action: -0.1197. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:00:45,498 - INFO -   Performance Reward: 0.0003, Fairness Penalty: 0.0200, Resource Cost: 0.1000
2025-08-04 21:00:45,498 - INFO -   Next round's global F1 (for next state Q-val): 0.8134
2025-08-04 21:00:45,498 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:00:45,498 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:00:45,499 - INFO -       Q(s) updated from -0.0148 to -0.0160 (TotalReward: -0.1197, NextMaxQ: -0.0148)
2025-08-04 21:00:45,499 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:00:45,499 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:00:45,499 - INFO -       Q(s) updated from -0.0160 to -0.0172 (TotalReward: -0.1197, NextMaxQ: -0.0160)
2025-08-04 21:00:45,500 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 21:00:45,500 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 21:00:45,500 - INFO -       Q(s) updated from -0.0096 to -0.0110 (TotalReward: -0.1197, NextMaxQ: -0.0340)
2025-08-04 21:00:45,501 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:00:45,502 - INFO - 
2025-08-04 21:00:45,502 - INFO - [ROUND 160]
2025-08-04 21:00:45,502 - INFO - [RLAgent choose_actions_softmax] Round 160. Temperature: 0.4552
2025-08-04 21:00:45,502 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:00:45,503 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.017150381059983823, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.017150381059983823, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': 0.019158469837080996, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.033955071922594206}
2025-08-04 21:00:45,503 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10203804198113049), '5975185251685626785': np.float64(0.09817798809637363), '8560019474512340676': np.float64(0.09761811288212452), '12043264814094380418': np.float64(0.10203804198113049), '4296149388320225194': np.float64(0.09774086688677909), '15388649110162717160': np.float64(0.09761811288212452), '2395859185497387824': np.float64(0.11051002108430621), '10913316872057236365': np.float64(0.09774086688677909), '6587436948557123441': np.float64(0.09817798809637363), '17456602372862189643': np.float64(0.09833995922287828)}
2025-08-04 21:00:45,503 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:00:45,503 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 21:00:45,504 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 21:00:45,507 - INFO -   New temperature for next round: 0.4529
2025-08-04 21:00:45,507 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '2395859185497387824']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 21:00:45,507 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 21:00:57,526 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 21:00:57,526 - INFO - [Round 160, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 21:00:57,530 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 21:00:57,530 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.67
2025-08-04 21:00:57,531 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0833, Aggregated D_Loss=0.7787 from 3 clients (14522 examples)
2025-08-04 21:00:57,531 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=3.77s across 3 clients
2025-08-04 21:00:57,531 - INFO - Fit phase aggregation: Summary
2025-08-04 21:00:57,531 - INFO -   fit_clients_total_received: 3
2025-08-04 21:00:57,531 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:00:57,531 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:00:57,532 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 21:00:57,532 - INFO -   allocated_cores_avg_per_client: 2.6667
2025-08-04 21:00:57,532 - INFO -   aggregated_g_loss: 2.0833
2025-08-04 21:00:57,532 - INFO -   aggregated_d_loss: 0.7787
2025-08-04 21:00:57,532 - INFO -   fit_time_avg_seconds_all_reporting: 3.7689
2025-08-04 21:00:57,533 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:01:06,566 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:01:06,566 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.5840317487716675, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5454671973233028, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.013834953308105469, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 21:01:06,566 - INFO - [Round 160, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:01:06,566 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 160.
2025-08-04 21:01:06,567 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 160.
2025-08-04 21:01:06,567 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 160.
2025-08-04 21:01:06,567 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 160.
2025-08-04 21:01:06,567 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 160.
2025-08-04 21:01:06,567 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 160.
2025-08-04 21:01:06,568 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 160.
2025-08-04 21:01:06,568 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 160.
2025-08-04 21:01:06,568 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 160.
2025-08-04 21:01:06,568 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 160.
2025-08-04 21:01:06,576 - INFO - [Round 160, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:01:06,580 - INFO - ==================================================
2025-08-04 21:01:06,580 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:01:06,580 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:01:06,580 - INFO - ==================================================
2025-08-04 21:01:06,580 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:01:06,581 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5409
2025-08-04 21:01:06,581 - INFO -   Global Accuracy (Wgtd Avg): 0.7315
2025-08-04 21:01:06,581 - INFO -   Global F1 Score (Wgtd Avg): 0.8139
2025-08-04 21:01:06,581 - INFO -   Global Precision (Wgtd Avg): 0.9789
2025-08-04 21:01:06,581 - INFO -   Global Recall (Wgtd Avg): 0.6966
2025-08-04 21:01:06,581 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:01:06,582 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0005) - FairPenalty(0.0200) - ResourceCost(0.1600) = -0.1795
2025-08-04 21:01:06,582 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 160.
2025-08-04 21:01:06,582 - INFO -   Final Global Reward for action: -0.1795. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 21:01:06,582 - INFO -   Performance Reward: 0.0005, Fairness Penalty: 0.0200, Resource Cost: 0.1600
2025-08-04 21:01:06,582 - INFO -   Next round's global F1 (for next state Q-val): 0.8139
2025-08-04 21:01:06,582 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:01:06,582 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:01:06,582 - INFO -       Q(s) updated from -0.0172 to -0.0189 (TotalReward: -0.1795, NextMaxQ: -0.0172)
2025-08-04 21:01:06,583 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:01:06,583 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:01:06,583 - INFO -       Q(s) updated from -0.0189 to -0.0207 (TotalReward: -0.1795, NextMaxQ: -0.0189)
2025-08-04 21:01:06,583 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 21:01:06,584 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 21:01:06,584 - INFO -       Q(s) updated from 0.0192 to 0.0168 (TotalReward: -0.1795, NextMaxQ: -0.0373)
2025-08-04 21:01:06,584 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:01:06,585 - INFO - 
2025-08-04 21:01:06,585 - INFO - [ROUND 161]
2025-08-04 21:01:06,585 - INFO - [RLAgent choose_actions_softmax] Round 161. Temperature: 0.4529
2025-08-04 21:01:06,585 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:01:06,586 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.020704938586756136, '5975185251685626785': -0.02628278922128135, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.020704938586756136, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.02628278922128135, '17456602372862189643': -0.033955071922594206}
2025-08-04 21:01:06,586 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10236294487560542), '5975185251685626785': np.float64(0.10111011931577112), '8560019474512340676': np.float64(0.09867851348227076), '12043264814094380418': np.float64(0.10236294487560542), '4296149388320225194': np.float64(0.09880322487980213), '15388649110162717160': np.float64(0.09867851348227076), '2395859185497387824': np.float64(0.09867851348227076), '10913316872057236365': np.float64(0.09880322487980213), '6587436948557123441': np.float64(0.10111011931577112), '17456602372862189643': np.float64(0.09941188141083038)}
2025-08-04 21:01:06,586 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:01:06,586 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 21:01:06,586 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 21:01:06,590 - INFO -   New temperature for next round: 0.4507
2025-08-04 21:01:06,591 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8)}
2025-08-04 21:01:06,591 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 21:01:21,619 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 21:01:21,619 - INFO - [Round 161, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 21:01:21,625 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 21:01:21,625 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.50
2025-08-04 21:01:21,625 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7790 from 4 clients (11650 examples)
2025-08-04 21:01:21,626 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.28s across 4 clients
2025-08-04 21:01:21,626 - INFO - Fit phase aggregation: Summary
2025-08-04 21:01:21,626 - INFO -   fit_clients_total_received: 4
2025-08-04 21:01:21,626 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:01:21,626 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:01:21,626 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 21:01:21,626 - INFO -   allocated_cores_avg_per_client: 2.5000
2025-08-04 21:01:21,626 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 21:01:21,626 - INFO -   aggregated_d_loss: 0.7790
2025-08-04 21:01:21,627 - INFO -   fit_time_avg_seconds_all_reporting: 2.2847
2025-08-04 21:01:21,627 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:01:27,674 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:01:27,674 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.5532185435295105, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8137573004542504, 'avg_anomaly_score': 0.5109454809039873, 'recall': 0.6997767857142857, 'eval_time_seconds': 0.03355836868286133, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7331473733147373, 'precision': 0.9720930232558139}
2025-08-04 21:01:27,675 - INFO - [Round 161, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:01:27,675 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 161.
2025-08-04 21:01:27,675 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 161.
2025-08-04 21:01:27,675 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 161.
2025-08-04 21:01:27,675 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 161.
2025-08-04 21:01:27,676 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 161.
2025-08-04 21:01:27,676 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 161.
2025-08-04 21:01:27,676 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 161.
2025-08-04 21:01:27,676 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 161.
2025-08-04 21:01:27,676 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 161.
2025-08-04 21:01:27,676 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 161.
2025-08-04 21:01:27,684 - INFO - [Round 161, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:01:27,688 - INFO - ==================================================
2025-08-04 21:01:27,688 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:01:27,689 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:01:27,689 - INFO - ==================================================
2025-08-04 21:01:27,689 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:01:27,689 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5126
2025-08-04 21:01:27,689 - INFO -   Global Accuracy (Wgtd Avg): 0.7320
2025-08-04 21:01:27,689 - INFO -   Global F1 Score (Wgtd Avg): 0.8143
2025-08-04 21:01:27,689 - INFO -   Global Precision (Wgtd Avg): 0.9793
2025-08-04 21:01:27,689 - INFO -   Global Recall (Wgtd Avg): 0.6969
2025-08-04 21:01:27,690 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:01:27,690 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0804) - FairPenalty(0.0200) - ResourceCost(0.2000) = -0.1396
2025-08-04 21:01:27,690 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 161.
2025-08-04 21:01:27,690 - INFO -   Final Global Reward for action: -0.1396. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8)}
2025-08-04 21:01:27,690 - INFO -   Performance Reward: 0.0804, Fairness Penalty: 0.0200, Resource Cost: 0.2000
2025-08-04 21:01:27,690 - INFO -   Next round's global F1 (for next state Q-val): 0.8143
2025-08-04 21:01:27,690 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:01:27,690 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 21:01:27,690 - INFO -       Q(s) updated from -0.0207 to -0.0222 (TotalReward: -0.1396, NextMaxQ: -0.0335)
2025-08-04 21:01:27,691 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 21:01:27,691 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 21:01:27,691 - INFO -       Q(s) updated from -0.0263 to -0.0277 (TotalReward: -0.1396, NextMaxQ: -0.0347)
2025-08-04 21:01:27,692 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:01:27,692 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 21:01:27,692 - INFO -       Q(s) updated from -0.0222 to -0.0237 (TotalReward: -0.1396, NextMaxQ: -0.0335)
2025-08-04 21:01:27,692 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 21:01:27,693 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 21:01:27,693 - INFO -       Q(s) updated from -0.0277 to -0.0292 (TotalReward: -0.1396, NextMaxQ: -0.0347)
2025-08-04 21:01:27,693 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:01:27,694 - INFO - 
2025-08-04 21:01:27,694 - INFO - [ROUND 162]
2025-08-04 21:01:27,694 - INFO - [RLAgent choose_actions_softmax] Round 162. Temperature: 0.4507
2025-08-04 21:01:27,694 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:01:27,695 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0335234919165132, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.0335234919165132, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.011009726877128699}
2025-08-04 21:01:27,695 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09993320461400443), '5975185251685626785': np.float64(0.099671459824808), '8560019474512340676': np.float64(0.0990973575585774), '12043264814094380418': np.float64(0.09993320461400443), '4296149388320225194': np.float64(0.09922322804615835), '15388649110162717160': np.float64(0.0990973575585774), '2395859185497387824': np.float64(0.0990973575585774), '10913316872057236365': np.float64(0.09922322804615835), '6587436948557123441': np.float64(0.099671459824808), '17456602372862189643': np.float64(0.10505214235432626)}
2025-08-04 21:01:27,695 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:01:27,695 - INFO -     Selected 1 CIDs with this factor: ['17456602372862189643']
2025-08-04 21:01:27,695 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['17456602372862189643']
2025-08-04 21:01:27,699 - INFO -   New temperature for next round: 0.4484
2025-08-04 21:01:27,699 - INFO -   Final selected CIDs to return: ['17456602372862189643']. Corresponding states: {'17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:01:27,699 - INFO - configure_fit: strategy sampled 1 clients (out of 10)
2025-08-04 21:01:33,711 - INFO - aggregate_fit: received 1 results and 0 failures
2025-08-04 21:01:33,711 - INFO - [Round 162, AggrFit START] Called. Received 1 results, 0 failures.
2025-08-04 21:01:33,713 - INFO - Fit phase aggregation: Received metrics from 1 clients.
2025-08-04 21:01:33,713 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.00
2025-08-04 21:01:33,713 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0833, Aggregated D_Loss=0.7949 from 1 clients (36 examples)
2025-08-04 21:01:33,714 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 1 clients
2025-08-04 21:01:33,714 - INFO - Fit phase aggregation: Summary
2025-08-04 21:01:33,714 - INFO -   fit_clients_total_received: 1
2025-08-04 21:01:33,714 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:01:33,714 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:01:33,714 - INFO -   fit_clients_valid_for_loss_aggregation: 1
2025-08-04 21:01:33,714 - INFO -   allocated_cores_avg_per_client: 2.0000
2025-08-04 21:01:33,714 - INFO -   aggregated_g_loss: 2.0833
2025-08-04 21:01:33,715 - INFO -   aggregated_d_loss: 0.7949
2025-08-04 21:01:33,715 - INFO -   fit_time_avg_seconds_all_reporting: 0.1579
2025-08-04 21:01:33,715 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:01:39,763 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:01:39,763 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.6328160881996154, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.81291504465308, 'avg_anomaly_score': 0.5635880187815432, 'recall': 0.6944444444444444, 'eval_time_seconds': 0.0467524528503418, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7292909211398277, 'precision': 0.9801214798453893}
2025-08-04 21:01:39,763 - INFO - [Round 162, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:01:39,763 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 162.
2025-08-04 21:01:39,763 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 162.
2025-08-04 21:01:39,764 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 162.
2025-08-04 21:01:39,765 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 162.
2025-08-04 21:01:39,772 - INFO - [Round 162, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:01:39,776 - INFO - ==================================================
2025-08-04 21:01:39,776 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:01:39,776 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:01:39,776 - INFO - ==================================================
2025-08-04 21:01:39,776 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:01:39,777 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5627
2025-08-04 21:01:39,777 - INFO -   Global Accuracy (Wgtd Avg): 0.7300
2025-08-04 21:01:39,777 - INFO -   Global F1 Score (Wgtd Avg): 0.8129
2025-08-04 21:01:39,777 - INFO -   Global Precision (Wgtd Avg): 0.9776
2025-08-04 21:01:39,777 - INFO -   Global Recall (Wgtd Avg): 0.6957
2025-08-04 21:01:39,777 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:01:39,777 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0018) - FairPenalty(0.0000) - ResourceCost(0.0400) = -0.0418
2025-08-04 21:01:39,778 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 162.
2025-08-04 21:01:39,778 - INFO -   Final Global Reward for action: -0.0418. Client states at selection: {'17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:01:39,778 - INFO -   Performance Reward: -0.0018, Fairness Penalty: 0.0000, Resource Cost: 0.0400
2025-08-04 21:01:39,778 - INFO -   Next round's global F1 (for next state Q-val): 0.8129
2025-08-04 21:01:39,778 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 21:01:39,778 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 21:01:39,778 - INFO -       Q(s) updated from -0.0110 to -0.0116 (TotalReward: -0.0418, NextMaxQ: -0.0340)
2025-08-04 21:01:39,779 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:01:39,779 - INFO - 
2025-08-04 21:01:39,779 - INFO - [ROUND 163]
2025-08-04 21:01:39,780 - INFO - [RLAgent choose_actions_softmax] Round 163. Temperature: 0.4484
2025-08-04 21:01:39,780 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:01:39,780 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0335234919165132, '5975185251685626785': -0.0347054672284933, '8560019474512340676': 0.01683578699131533, '12043264814094380418': -0.0335234919165132, '4296149388320225194': -0.03673679961568835, '15388649110162717160': 0.01683578699131533, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.033955071922594206}
2025-08-04 21:01:39,781 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09795482478550781), '5975185251685626785': np.float64(0.09769697420343466), '8560019474512340676': np.float64(0.10959677137134323), '12043264814094380418': np.float64(0.09795482478550781), '4296149388320225194': np.float64(0.09725541907033267), '15388649110162717160': np.float64(0.10959677137134323), '2395859185497387824': np.float64(0.09713142528978853), '10913316872057236365': np.float64(0.09725541907033267), '6587436948557123441': np.float64(0.09769697420343466), '17456602372862189643': np.float64(0.09786059584897477)}
2025-08-04 21:01:39,781 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:01:39,781 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '15388649110162717160']
2025-08-04 21:01:39,781 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160']
2025-08-04 21:01:39,785 - INFO -   New temperature for next round: 0.4462
2025-08-04 21:01:39,785 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160']. Corresponding states: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 21:01:39,785 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 21:01:45,802 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 21:01:45,802 - INFO - [Round 163, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 21:01:45,806 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 21:01:45,806 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 21:01:45,806 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0844, Aggregated D_Loss=0.7895 from 2 clients (81 examples)
2025-08-04 21:01:45,806 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.16s across 2 clients
2025-08-04 21:01:45,806 - INFO - Fit phase aggregation: Summary
2025-08-04 21:01:45,806 - INFO -   fit_clients_total_received: 2
2025-08-04 21:01:45,806 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:01:45,806 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:01:45,807 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 21:01:45,807 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 21:01:45,807 - INFO -   aggregated_g_loss: 2.0844
2025-08-04 21:01:45,807 - INFO -   aggregated_d_loss: 0.7895
2025-08-04 21:01:45,807 - INFO -   fit_time_avg_seconds_all_reporting: 0.1563
2025-08-04 21:01:45,807 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:01:51,852 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:01:51,852 - INFO -   Sample of first result (CID 17456602372862189643): Metrics: {'threshold': 0.524286413192749, 'profile_name': 'Low-End IoT', 'f1_score': 0.7973856209150327, 'avg_anomaly_score': 0.5024209578831991, 'recall': 0.6777777777777778, 'eval_time_seconds': 0.009404659271240234, 'client_cid_for_attributes': '6', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7047619047619048, 'precision': 0.9682539682539683}
2025-08-04 21:01:51,853 - INFO - [Round 163, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:01:51,853 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 163.
2025-08-04 21:01:51,853 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 163.
2025-08-04 21:01:51,853 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 163.
2025-08-04 21:01:51,853 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 163.
2025-08-04 21:01:51,854 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 163.
2025-08-04 21:01:51,854 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 163.
2025-08-04 21:01:51,854 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 163.
2025-08-04 21:01:51,854 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 163.
2025-08-04 21:01:51,854 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 163.
2025-08-04 21:01:51,854 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 163.
2025-08-04 21:01:51,862 - INFO - [Round 163, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:01:51,865 - INFO - ==================================================
2025-08-04 21:01:51,865 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:01:51,866 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:01:51,866 - INFO - ==================================================
2025-08-04 21:01:51,866 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:01:51,866 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4986
2025-08-04 21:01:51,866 - INFO -   Global Accuracy (Wgtd Avg): 0.7322
2025-08-04 21:01:51,866 - INFO -   Global F1 Score (Wgtd Avg): 0.8144
2025-08-04 21:01:51,866 - INFO -   Global Precision (Wgtd Avg): 0.9795
2025-08-04 21:01:51,867 - INFO -   Global Recall (Wgtd Avg): 0.6970
2025-08-04 21:01:51,867 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:01:51,867 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0811) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.1789
2025-08-04 21:01:51,867 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 163.
2025-08-04 21:01:51,867 - INFO -   Final Global Reward for action: -0.1789. Client states at selection: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 21:01:51,867 - INFO -   Performance Reward: 0.0811, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 21:01:51,867 - INFO -   Next round's global F1 (for next state Q-val): 0.8144
2025-08-04 21:01:51,868 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 21:01:51,868 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 21:01:51,868 - INFO -       Q(s) updated from 0.0168 to 0.0145 (TotalReward: -0.1789, NextMaxQ: -0.0373)
2025-08-04 21:01:51,868 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 21:01:51,869 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 21:01:51,869 - INFO -       Q(s) updated from 0.0145 to 0.0123 (TotalReward: -0.1789, NextMaxQ: -0.0373)
2025-08-04 21:01:51,870 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:01:51,870 - INFO - 
2025-08-04 21:01:51,870 - INFO - [ROUND 164]
2025-08-04 21:01:51,871 - INFO - [RLAgent choose_actions_softmax] Round 164. Temperature: 0.4462
2025-08-04 21:01:51,871 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:01:51,871 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02367038096199004, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.02367038096199004, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.033955071922594206}
2025-08-04 21:01:51,872 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10224610982784223), '5975185251685626785': np.float64(0.09974837608252105), '8560019474512340676': np.float64(0.09916805883448813), '12043264814094380418': np.float64(0.10224610982784223), '4296149388320225194': np.float64(0.099295289048935), '15388649110162717160': np.float64(0.09916805883448813), '2395859185497387824': np.float64(0.09916805883448813), '10913316872057236365': np.float64(0.099295289048935), '6587436948557123441': np.float64(0.09974837608252105), '17456602372862189643': np.float64(0.09991627357793907)}
2025-08-04 21:01:51,872 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:01:51,872 - INFO -     Selected 2 CIDs with this factor: ['1640189632563049314', '12043264814094380418']
2025-08-04 21:01:51,872 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418']
2025-08-04 21:01:51,875 - INFO -   New temperature for next round: 0.4440
2025-08-04 21:01:51,876 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8)}
2025-08-04 21:01:51,876 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 21:02:06,895 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 21:02:06,895 - INFO - [Round 164, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 21:02:06,898 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 21:02:06,898 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.50
2025-08-04 21:02:06,899 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7786 from 2 clients (11257 examples)
2025-08-04 21:02:06,899 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=4.10s across 2 clients
2025-08-04 21:02:06,899 - INFO - Fit phase aggregation: Summary
2025-08-04 21:02:06,899 - INFO -   fit_clients_total_received: 2
2025-08-04 21:02:06,899 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:02:06,899 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:02:06,900 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 21:02:06,900 - INFO -   allocated_cores_avg_per_client: 1.5000
2025-08-04 21:02:06,900 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 21:02:06,900 - INFO -   aggregated_d_loss: 0.7786
2025-08-04 21:02:06,900 - INFO -   fit_time_avg_seconds_all_reporting: 4.0954
2025-08-04 21:02:06,901 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:02:12,947 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:02:12,947 - INFO -   Sample of first result (CID 2395859185497387824): Metrics: {'threshold': 0.5929850220680237, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8390804597701149, 'avg_anomaly_score': 0.5229229008565184, 'recall': 0.7227722772277227, 'eval_time_seconds': 0.010209083557128906, 'client_cid_for_attributes': '2', 'allocated_cores_for_pytorch': 5, 'server_round': -1, 'accuracy': 0.7704918032786885, 'precision': 1.0}
2025-08-04 21:02:12,947 - INFO - [Round 164, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:02:12,948 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 164.
2025-08-04 21:02:12,948 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 164.
2025-08-04 21:02:12,948 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 164.
2025-08-04 21:02:12,948 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 164.
2025-08-04 21:02:12,948 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 164.
2025-08-04 21:02:12,948 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 164.
2025-08-04 21:02:12,949 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 164.
2025-08-04 21:02:12,949 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 164.
2025-08-04 21:02:12,949 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 164.
2025-08-04 21:02:12,949 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 164.
2025-08-04 21:02:12,956 - INFO - [Round 164, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:02:12,960 - INFO - ==================================================
2025-08-04 21:02:12,960 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:02:12,960 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:02:12,961 - INFO - ==================================================
2025-08-04 21:02:12,961 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:02:12,961 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5393
2025-08-04 21:02:12,961 - INFO -   Global Accuracy (Wgtd Avg): 0.7303
2025-08-04 21:02:12,961 - INFO -   Global F1 Score (Wgtd Avg): 0.8131
2025-08-04 21:02:12,961 - INFO -   Global Precision (Wgtd Avg): 0.9778
2025-08-04 21:02:12,961 - INFO -   Global Recall (Wgtd Avg): 0.6959
2025-08-04 21:02:12,961 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:02:12,961 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0018) - FairPenalty(0.0200) - ResourceCost(0.0600) = -0.0818
2025-08-04 21:02:12,962 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 164.
2025-08-04 21:02:12,962 - INFO -   Final Global Reward for action: -0.0818. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8)}
2025-08-04 21:02:12,962 - INFO -   Performance Reward: -0.0018, Fairness Penalty: 0.0200, Resource Cost: 0.0600
2025-08-04 21:02:12,962 - INFO -   Next round's global F1 (for next state Q-val): 0.8131
2025-08-04 21:02:12,962 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:02:12,962 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:02:12,962 - INFO -       Q(s) updated from -0.0237 to -0.0245 (TotalReward: -0.0818, NextMaxQ: -0.0237)
2025-08-04 21:02:12,963 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:02:12,963 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:02:12,963 - INFO -       Q(s) updated from -0.0245 to -0.0253 (TotalReward: -0.0818, NextMaxQ: -0.0245)
2025-08-04 21:02:12,963 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:02:12,964 - INFO - 
2025-08-04 21:02:12,964 - INFO - [ROUND 165]
2025-08-04 21:02:12,964 - INFO - [RLAgent choose_actions_softmax] Round 165. Temperature: 0.4440
2025-08-04 21:02:12,964 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:02:12,965 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.025258108758958373, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.025258108758958373, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.011623202007301301}
2025-08-04 21:02:12,969 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10144360861409636), '5975185251685626785': np.float64(0.09930770160960171), '8560019474512340676': np.float64(0.09872705334948798), '12043264814094380418': np.float64(0.10144360861409636), '4296149388320225194': np.float64(0.09885435467794408), '15388649110162717160': np.float64(0.09872705334948798), '2395859185497387824': np.float64(0.09872705334948798), '10913316872057236365': np.float64(0.09885435467794408), '6587436948557123441': np.float64(0.09930770160960171), '17456602372862189643': np.float64(0.1046075101482517)}
2025-08-04 21:02:12,970 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:02:12,970 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 21:02:12,970 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '17456602372862189643']
2025-08-04 21:02:12,974 - INFO -   New temperature for next round: 0.4417
2025-08-04 21:02:12,974 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:02:12,974 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 21:02:27,996 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 21:02:27,997 - INFO - [Round 165, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 21:02:28,002 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 21:02:28,002 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 1.67
2025-08-04 21:02:28,002 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0836, Aggregated D_Loss=0.7792 from 3 clients (11365 examples)
2025-08-04 21:02:28,002 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.86s across 3 clients
2025-08-04 21:02:28,002 - INFO - Fit phase aggregation: Summary
2025-08-04 21:02:28,002 - INFO -   fit_clients_total_received: 3
2025-08-04 21:02:28,003 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:02:28,003 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:02:28,003 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 21:02:28,003 - INFO -   allocated_cores_avg_per_client: 1.6667
2025-08-04 21:02:28,003 - INFO -   aggregated_g_loss: 2.0836
2025-08-04 21:02:28,003 - INFO -   aggregated_d_loss: 0.7792
2025-08-04 21:02:28,003 - INFO -   fit_time_avg_seconds_all_reporting: 2.8610
2025-08-04 21:02:28,004 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:02:34,055 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:02:34,056 - INFO -   Sample of first result (CID 5975185251685626785): Metrics: {'threshold': 0.6031632423400879, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8137573004542504, 'avg_anomaly_score': 0.5496158716513466, 'recall': 0.6997767857142857, 'eval_time_seconds': 0.033704280853271484, 'client_cid_for_attributes': '7', 'allocated_cores_for_pytorch': 4, 'server_round': -1, 'accuracy': 0.7331473733147373, 'precision': 0.9720930232558139}
2025-08-04 21:02:34,056 - INFO - [Round 165, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:02:34,057 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 165.
2025-08-04 21:02:34,057 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 165.
2025-08-04 21:02:34,057 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 165.
2025-08-04 21:02:34,057 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 165.
2025-08-04 21:02:34,057 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 165.
2025-08-04 21:02:34,057 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 165.
2025-08-04 21:02:34,058 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 165.
2025-08-04 21:02:34,058 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 165.
2025-08-04 21:02:34,058 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 165.
2025-08-04 21:02:34,058 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 165.
2025-08-04 21:02:34,066 - INFO - [Round 165, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:02:34,070 - INFO - ==================================================
2025-08-04 21:02:34,070 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:02:34,070 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:02:34,070 - INFO - ==================================================
2025-08-04 21:02:34,071 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:02:34,071 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5513
2025-08-04 21:02:34,071 - INFO -   Global Accuracy (Wgtd Avg): 0.7305
2025-08-04 21:02:34,071 - INFO -   Global F1 Score (Wgtd Avg): 0.8132
2025-08-04 21:02:34,071 - INFO -   Global Precision (Wgtd Avg): 0.9780
2025-08-04 21:02:34,071 - INFO -   Global Recall (Wgtd Avg): 0.6960
2025-08-04 21:02:34,071 - INFO -   Avg Eval Time per Client: 0.03s
2025-08-04 21:02:34,071 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0200) - ResourceCost(0.1000) = -0.1198
2025-08-04 21:02:34,072 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 165.
2025-08-04 21:02:34,072 - INFO -   Final Global Reward for action: -0.1198. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:02:34,072 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0200, Resource Cost: 0.1000
2025-08-04 21:02:34,072 - INFO -   Next round's global F1 (for next state Q-val): 0.8132
2025-08-04 21:02:34,072 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:02:34,072 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:02:34,072 - INFO -       Q(s) updated from -0.0253 to -0.0264 (TotalReward: -0.1198, NextMaxQ: -0.0253)
2025-08-04 21:02:34,073 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:02:34,073 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:02:34,073 - INFO -       Q(s) updated from -0.0264 to -0.0276 (TotalReward: -0.1198, NextMaxQ: -0.0264)
2025-08-04 21:02:34,074 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 21:02:34,074 - INFO -       State(s): (7, 1, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 21:02:34,074 - INFO -       Q(s) updated from -0.0116 to -0.0130 (TotalReward: -0.1198, NextMaxQ: -0.0340)
2025-08-04 21:02:34,074 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:02:34,075 - INFO - 
2025-08-04 21:02:34,075 - INFO - [ROUND 166]
2025-08-04 21:02:34,075 - INFO - [RLAgent choose_actions_softmax] Round 166. Temperature: 0.4417
2025-08-04 21:02:34,075 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:02:34,076 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.02760327114158786, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.02760327114158786, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': 0.012271786230048492, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.033955071922594206}
2025-08-04 21:02:34,078 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.1003622923283339), '5975185251685626785': np.float64(0.09876157925911329), '8560019474512340676': np.float64(0.09818123091972308), '12043264814094380418': np.float64(0.1003622923283339), '4296149388320225194': np.float64(0.09830846502908379), '15388649110162717160': np.float64(0.09818123091972308), '2395859185497387824': np.float64(0.10984337282384841), '10913316872057236365': np.float64(0.09830846502908379), '6587436948557123441': np.float64(0.09876157925911329), '17456602372862189643': np.float64(0.09892949210364362)}
2025-08-04 21:02:34,078 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:02:34,079 - INFO -     Selected 3 CIDs with this factor: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 21:02:34,079 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '12043264814094380418', '2395859185497387824']
2025-08-04 21:02:34,083 - INFO -   New temperature for next round: 0.4395
2025-08-04 21:02:34,083 - INFO -   Final selected CIDs to return: ['1640189632563049314', '12043264814094380418', '2395859185497387824']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 21:02:34,083 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 21:02:49,110 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 21:02:49,110 - INFO - [Round 166, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 21:02:49,116 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 21:02:49,116 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.67
2025-08-04 21:02:49,117 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0834, Aggregated D_Loss=0.7768 from 3 clients (15071 examples)
2025-08-04 21:02:49,117 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=3.89s across 3 clients
2025-08-04 21:02:49,117 - INFO - Fit phase aggregation: Summary
2025-08-04 21:02:49,117 - INFO -   fit_clients_total_received: 3
2025-08-04 21:02:49,117 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:02:49,118 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:02:49,119 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 21:02:49,119 - INFO -   allocated_cores_avg_per_client: 2.6667
2025-08-04 21:02:49,119 - INFO -   aggregated_g_loss: 2.0834
2025-08-04 21:02:49,119 - INFO -   aggregated_d_loss: 0.7768
2025-08-04 21:02:49,119 - INFO -   fit_time_avg_seconds_all_reporting: 3.8949
2025-08-04 21:02:49,120 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:02:55,165 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:02:55,166 - INFO -   Sample of first result (CID 6587436948557123441): Metrics: {'threshold': 0.5337761402130127, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8133730249599267, 'avg_anomaly_score': 0.5039721889121395, 'recall': 0.6948356807511737, 'eval_time_seconds': 0.05405735969543457, 'client_cid_for_attributes': '4', 'allocated_cores_for_pytorch': 3, 'server_round': -1, 'accuracy': 0.7299536116633533, 'precision': 0.9806736609607951}
2025-08-04 21:02:55,166 - INFO - [Round 166, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:02:55,166 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 166.
2025-08-04 21:02:55,166 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 166.
2025-08-04 21:02:55,167 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 166.
2025-08-04 21:02:55,175 - INFO - [Round 166, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:02:55,179 - INFO - ==================================================
2025-08-04 21:02:55,180 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:02:55,180 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:02:55,180 - INFO - ==================================================
2025-08-04 21:02:55,180 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:02:55,180 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5023
2025-08-04 21:02:55,180 - INFO -   Global Accuracy (Wgtd Avg): 0.7317
2025-08-04 21:02:55,180 - INFO -   Global F1 Score (Wgtd Avg): 0.8141
2025-08-04 21:02:55,180 - INFO -   Global Precision (Wgtd Avg): 0.9791
2025-08-04 21:02:55,181 - INFO -   Global Recall (Wgtd Avg): 0.6967
2025-08-04 21:02:55,181 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:02:55,181 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0008) - FairPenalty(0.0200) - ResourceCost(0.1600) = -0.1792
2025-08-04 21:02:55,181 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 166.
2025-08-04 21:02:55,181 - INFO -   Final Global Reward for action: -0.1792. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '2395859185497387824': (8, 0, 2, 8, 8)}
2025-08-04 21:02:55,181 - INFO -   Performance Reward: 0.0008, Fairness Penalty: 0.0200, Resource Cost: 0.1600
2025-08-04 21:02:55,182 - INFO -   Next round's global F1 (for next state Q-val): 0.8141
2025-08-04 21:02:55,182 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:02:55,182 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:02:55,182 - INFO -       Q(s) updated from -0.0276 to -0.0294 (TotalReward: -0.1792, NextMaxQ: -0.0276)
2025-08-04 21:02:55,182 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:02:55,183 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 3, 0, 8, 8)
2025-08-04 21:02:55,183 - INFO -       Q(s) updated from -0.0294 to -0.0311 (TotalReward: -0.1792, NextMaxQ: -0.0294)
2025-08-04 21:02:55,183 - INFO -     Client 2395859185497387824 (Partition ID: 2): 
2025-08-04 21:02:55,183 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 21:02:55,184 - INFO -       Q(s) updated from 0.0123 to 0.0100 (TotalReward: -0.1792, NextMaxQ: -0.0373)
2025-08-04 21:02:55,184 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:02:55,185 - INFO - 
2025-08-04 21:02:55,185 - INFO - [ROUND 167]
2025-08-04 21:02:55,185 - INFO - [RLAgent choose_actions_softmax] Round 167. Temperature: 0.4395
2025-08-04 21:02:55,186 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:02:55,186 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.031130760737269267, '5975185251685626785': -0.02915840154672577, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.031130760737269267, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.02915840154672577, '17456602372862189643': -0.033955071922594206}
2025-08-04 21:02:55,190 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10065051760344222), '5975185251685626785': np.float64(0.1011031968584327), '8560019474512340676': np.float64(0.09924564365987039), '12043264814094380418': np.float64(0.10065051760344222), '4296149388320225194': np.float64(0.09937490387129448), '15388649110162717160': np.float64(0.09924564365987039), '2395859185497387824': np.float64(0.09924564365987039), '10913316872057236365': np.float64(0.09937490387129448), '6587436948557123441': np.float64(0.1011031968584327), '17456602372862189643': np.float64(0.10000583235404999)}
2025-08-04 21:02:55,190 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:02:55,190 - INFO -     Selected 5 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 21:02:55,190 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']
2025-08-04 21:02:55,194 - INFO -   New temperature for next round: 0.4373
2025-08-04 21:02:55,194 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441', '17456602372862189643']. Corresponding states: {'1640189632563049314': (8, 3, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 21:02:55,194 - INFO - configure_fit: strategy sampled 5 clients (out of 10)
2025-08-04 21:03:10,218 - INFO - aggregate_fit: received 5 results and 0 failures
2025-08-04 21:03:10,219 - INFO - [Round 167, AggrFit START] Called. Received 5 results, 0 failures.
2025-08-04 21:03:10,226 - INFO - Fit phase aggregation: Received metrics from 5 clients.
2025-08-04 21:03:10,226 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.40
2025-08-04 21:03:10,226 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7784 from 5 clients (12126 examples)
2025-08-04 21:03:10,226 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=1.95s across 5 clients
2025-08-04 21:03:10,227 - INFO - Fit phase aggregation: Summary
2025-08-04 21:03:10,227 - INFO -   fit_clients_total_received: 5
2025-08-04 21:03:10,227 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:03:10,227 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:03:10,227 - INFO -   fit_clients_valid_for_loss_aggregation: 5
2025-08-04 21:03:10,227 - INFO -   allocated_cores_avg_per_client: 2.4000
2025-08-04 21:03:10,227 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 21:03:10,227 - INFO -   aggregated_d_loss: 0.7784
2025-08-04 21:03:10,227 - INFO -   fit_time_avg_seconds_all_reporting: 1.9523
2025-08-04 21:03:10,228 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:03:16,274 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:03:16,274 - INFO -   Sample of first result (CID 15388649110162717160): Metrics: {'threshold': 0.6009936332702637, 'profile_name': 'High-End Edge CPU', 'f1_score': 0.8229988726042841, 'avg_anomaly_score': 0.5474514276750626, 'recall': 0.7087378640776699, 'eval_time_seconds': 0.022169828414916992, 'client_cid_for_attributes': '5', 'allocated_cores_for_pytorch': 8, 'server_round': -1, 'accuracy': 0.7467741935483871, 'precision': 0.9811827956989247}
2025-08-04 21:03:16,274 - INFO - [Round 167, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:03:16,275 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 167.
2025-08-04 21:03:16,275 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 167.
2025-08-04 21:03:16,275 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 167.
2025-08-04 21:03:16,275 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 167.
2025-08-04 21:03:16,275 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 167.
2025-08-04 21:03:16,275 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 167.
2025-08-04 21:03:16,276 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 167.
2025-08-04 21:03:16,276 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 167.
2025-08-04 21:03:16,276 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 167.
2025-08-04 21:03:16,276 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 167.
2025-08-04 21:03:16,283 - INFO - [Round 167, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:03:16,288 - INFO - ==================================================
2025-08-04 21:03:16,288 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:03:16,288 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:03:16,288 - INFO - ==================================================
2025-08-04 21:03:16,288 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:03:16,288 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5542
2025-08-04 21:03:16,288 - INFO -   Global Accuracy (Wgtd Avg): 0.7312
2025-08-04 21:03:16,288 - INFO -   Global F1 Score (Wgtd Avg): 0.8137
2025-08-04 21:03:16,289 - INFO -   Global Precision (Wgtd Avg): 0.9786
2025-08-04 21:03:16,289 - INFO -   Global Recall (Wgtd Avg): 0.6964
2025-08-04 21:03:16,289 - INFO -   Avg Eval Time per Client: 0.03s
2025-08-04 21:03:16,289 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0004) - FairPenalty(0.0200) - ResourceCost(0.2400) = -0.2604
2025-08-04 21:03:16,289 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 167.
2025-08-04 21:03:16,289 - INFO -   Final Global Reward for action: -0.2604. Client states at selection: {'1640189632563049314': (8, 3, 0, 8, 8), '5975185251685626785': (8, 0, 1, 8, 8), '12043264814094380418': (8, 3, 0, 8, 8), '6587436948557123441': (8, 0, 1, 8, 8), '17456602372862189643': (7, 2, 0, 8, 8)}
2025-08-04 21:03:16,289 - INFO -   Performance Reward: -0.0004, Fairness Penalty: 0.0200, Resource Cost: 0.2400
2025-08-04 21:03:16,289 - INFO -   Next round's global F1 (for next state Q-val): 0.8137
2025-08-04 21:03:16,290 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:03:16,290 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 21:03:16,290 - INFO -       Q(s) updated from -0.0311 to -0.0337 (TotalReward: -0.2604, NextMaxQ: -0.0335)
2025-08-04 21:03:16,290 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 21:03:16,290 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 21:03:16,290 - INFO -       Q(s) updated from -0.0292 to -0.0318 (TotalReward: -0.2604, NextMaxQ: -0.0347)
2025-08-04 21:03:16,291 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:03:16,291 - INFO -       State(s): (8, 3, 0, 8, 8) -> NextState(s'): (8, 4, 0, 8, 8)
2025-08-04 21:03:16,291 - INFO -       Q(s) updated from -0.0337 to -0.0363 (TotalReward: -0.2604, NextMaxQ: -0.0335)
2025-08-04 21:03:16,291 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 21:03:16,292 - INFO -       State(s): (8, 0, 1, 8, 8) -> NextState(s'): (8, 1, 1, 8, 8)
2025-08-04 21:03:16,292 - INFO -       Q(s) updated from -0.0318 to -0.0344 (TotalReward: -0.2604, NextMaxQ: -0.0347)
2025-08-04 21:03:16,292 - INFO -     Client 17456602372862189643 (Partition ID: 6): 
2025-08-04 21:03:16,292 - INFO -       State(s): (7, 2, 0, 8, 8) -> NextState(s'): (7, 2, 0, 8, 8)
2025-08-04 21:03:16,292 - INFO -       Q(s) updated from -0.0340 to -0.0365 (TotalReward: -0.2604, NextMaxQ: -0.0340)
2025-08-04 21:03:16,293 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:03:16,294 - INFO - 
2025-08-04 21:03:16,294 - INFO - [ROUND 168]
2025-08-04 21:03:16,294 - INFO - [RLAgent choose_actions_softmax] Round 168. Temperature: 0.4373
2025-08-04 21:03:16,294 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:03:16,295 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.0335234919165132, '5975185251685626785': -0.0347054672284933, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.0335234919165132, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.0347054672284933, '17456602372862189643': -0.03652557061380309}
2025-08-04 21:03:16,298 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.10053014984061051), '5975185251685626785': np.float64(0.10025881306119687), '8560019474512340676': np.float64(0.09966374830942877), '12043264814094380418': np.float64(0.10053014984061051), '4296149388320225194': np.float64(0.0997942057821325), '15388649110162717160': np.float64(0.09966374830942877), '2395859185497387824': np.float64(0.09966374830942877), '10913316872057236365': np.float64(0.0997942057821325), '6587436948557123441': np.float64(0.10025881306119687), '17456602372862189643': np.float64(0.09984241770383398)}
2025-08-04 21:03:16,298 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:03:16,298 - INFO -     Selected 4 CIDs with this factor: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 21:03:16,298 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']
2025-08-04 21:03:16,302 - INFO -   New temperature for next round: 0.4351
2025-08-04 21:03:16,302 - INFO -   Final selected CIDs to return: ['1640189632563049314', '5975185251685626785', '12043264814094380418', '6587436948557123441']. Corresponding states: {'1640189632563049314': (8, 4, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8)}
2025-08-04 21:03:16,302 - INFO - configure_fit: strategy sampled 4 clients (out of 10)
2025-08-04 21:03:28,330 - INFO - aggregate_fit: received 4 results and 0 failures
2025-08-04 21:03:28,330 - INFO - [Round 168, AggrFit START] Called. Received 4 results, 0 failures.
2025-08-04 21:03:28,337 - INFO - Fit phase aggregation: Received metrics from 4 clients.
2025-08-04 21:03:28,337 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 2.50
2025-08-04 21:03:28,337 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0835, Aggregated D_Loss=0.7784 from 4 clients (12161 examples)
2025-08-04 21:03:28,337 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=2.38s across 4 clients
2025-08-04 21:03:28,338 - INFO - Fit phase aggregation: Summary
2025-08-04 21:03:28,338 - INFO -   fit_clients_total_received: 4
2025-08-04 21:03:28,338 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:03:28,338 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:03:28,338 - INFO -   fit_clients_valid_for_loss_aggregation: 4
2025-08-04 21:03:28,338 - INFO -   allocated_cores_avg_per_client: 2.5000
2025-08-04 21:03:28,338 - INFO -   aggregated_g_loss: 2.0835
2025-08-04 21:03:28,338 - INFO -   aggregated_d_loss: 0.7784
2025-08-04 21:03:28,339 - INFO -   fit_time_avg_seconds_all_reporting: 2.3769
2025-08-04 21:03:28,339 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:03:34,383 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:03:34,383 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5839769124984742, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.5323456769639795, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.010002613067626953, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 21:03:34,383 - INFO - [Round 168, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:03:34,384 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 168.
2025-08-04 21:03:34,384 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 168.
2025-08-04 21:03:34,384 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 168.
2025-08-04 21:03:34,384 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 168.
2025-08-04 21:03:34,384 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 168.
2025-08-04 21:03:34,385 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 168.
2025-08-04 21:03:34,385 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 168.
2025-08-04 21:03:34,385 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 168.
2025-08-04 21:03:34,385 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 168.
2025-08-04 21:03:34,385 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 168.
2025-08-04 21:03:34,393 - INFO - [Round 168, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:03:34,398 - INFO - ==================================================
2025-08-04 21:03:34,398 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:03:34,398 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:03:34,398 - INFO - ==================================================
2025-08-04 21:03:34,398 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:03:34,399 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5394
2025-08-04 21:03:34,399 - INFO -   Global Accuracy (Wgtd Avg): 0.7315
2025-08-04 21:03:34,399 - INFO -   Global F1 Score (Wgtd Avg): 0.8139
2025-08-04 21:03:34,399 - INFO -   Global Precision (Wgtd Avg): 0.9789
2025-08-04 21:03:34,399 - INFO -   Global Recall (Wgtd Avg): 0.6966
2025-08-04 21:03:34,399 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:03:34,399 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0002) - FairPenalty(0.0400) - ResourceCost(0.2000) = -0.2398
2025-08-04 21:03:34,400 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 168.
2025-08-04 21:03:34,400 - INFO -   Final Global Reward for action: -0.2398. Client states at selection: {'1640189632563049314': (8, 4, 0, 8, 8), '5975185251685626785': (8, 1, 1, 8, 8), '12043264814094380418': (8, 4, 0, 8, 8), '6587436948557123441': (8, 1, 1, 8, 8)}
2025-08-04 21:03:34,400 - INFO -   Performance Reward: 0.0002, Fairness Penalty: 0.0400, Resource Cost: 0.2000
2025-08-04 21:03:34,400 - INFO -   Next round's global F1 (for next state Q-val): 0.8139
2025-08-04 21:03:34,400 - INFO -     Client 1640189632563049314 (Partition ID: 1): 
2025-08-04 21:03:34,400 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 21:03:34,400 - INFO -       Q(s) updated from -0.0335 to -0.0359 (TotalReward: -0.2398, NextMaxQ: -0.0353)
2025-08-04 21:03:34,401 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 21:03:34,401 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 21:03:34,401 - INFO -       Q(s) updated from -0.0347 to -0.0370 (TotalReward: -0.2398, NextMaxQ: -0.0297)
2025-08-04 21:03:34,401 - INFO -     Client 12043264814094380418 (Partition ID: 0): 
2025-08-04 21:03:34,402 - INFO -       State(s): (8, 4, 0, 8, 8) -> NextState(s'): (8, 5, 0, 8, 8)
2025-08-04 21:03:34,402 - INFO -       Q(s) updated from -0.0359 to -0.0383 (TotalReward: -0.2398, NextMaxQ: -0.0353)
2025-08-04 21:03:34,402 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 21:03:34,402 - INFO -       State(s): (8, 1, 1, 8, 8) -> NextState(s'): (8, 2, 1, 8, 8)
2025-08-04 21:03:34,402 - INFO -       Q(s) updated from -0.0370 to -0.0393 (TotalReward: -0.2398, NextMaxQ: -0.0297)
2025-08-04 21:03:34,403 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:03:34,403 - INFO - 
2025-08-04 21:03:34,404 - INFO - [ROUND 169]
2025-08-04 21:03:34,404 - INFO - [RLAgent choose_actions_softmax] Round 169. Temperature: 0.4351
2025-08-04 21:03:34,404 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:03:34,404 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.03533730468447693, '5975185251685626785': -0.02970533200170523, '8560019474512340676': 0.010021058066184958, '12043264814094380418': -0.03533730468447693, '4296149388320225194': -0.03673679961568835, '15388649110162717160': 0.010021058066184958, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.02970533200170523, '17456602372862189643': -0.03652557061380309}
2025-08-04 21:03:34,405 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09773152666578161), '5975185251685626785': np.float64(0.09900466719787594), '8560019474512340676': np.float64(0.10846873025241494), '12043264814094380418': np.float64(0.09773152666578161), '4296149388320225194': np.float64(0.0974177104249071), '15388649110162717160': np.float64(0.10846873025241494), '2395859185497387824': np.float64(0.09728972012987641), '10913316872057236365': np.float64(0.0974177104249071), '6587436948557123441': np.float64(0.09900466719787594), '17456602372862189643': np.float64(0.09746501078816443)}
2025-08-04 21:03:34,405 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:03:34,405 - INFO -     Selected 2 CIDs with this factor: ['8560019474512340676', '15388649110162717160']
2025-08-04 21:03:34,405 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['8560019474512340676', '15388649110162717160']
2025-08-04 21:03:34,409 - INFO -   New temperature for next round: 0.4330
2025-08-04 21:03:34,409 - INFO -   Final selected CIDs to return: ['8560019474512340676', '15388649110162717160']. Corresponding states: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 21:03:34,409 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 21:03:40,426 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 21:03:40,426 - INFO - [Round 169, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 21:03:40,430 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 21:03:40,430 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 6.50
2025-08-04 21:03:40,430 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0807, Aggregated D_Loss=0.7866 from 2 clients (86 examples)
2025-08-04 21:03:40,430 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.17s across 2 clients
2025-08-04 21:03:40,430 - INFO - Fit phase aggregation: Summary
2025-08-04 21:03:40,430 - INFO -   fit_clients_total_received: 2
2025-08-04 21:03:40,431 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:03:40,431 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:03:40,431 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 21:03:40,431 - INFO -   allocated_cores_avg_per_client: 6.5000
2025-08-04 21:03:40,431 - INFO -   aggregated_g_loss: 2.0807
2025-08-04 21:03:40,431 - INFO -   aggregated_d_loss: 0.7866
2025-08-04 21:03:40,431 - INFO -   fit_time_avg_seconds_all_reporting: 0.1689
2025-08-04 21:03:40,432 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:03:49,478 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:03:49,478 - INFO -   Sample of first result (CID 4296149388320225194): Metrics: {'threshold': 0.5094639420509338, 'profile_name': 'Low-End IoT', 'f1_score': 0.8125, 'avg_anomaly_score': 0.48714496330781415, 'recall': 0.6902654867256637, 'eval_time_seconds': 0.017636775970458984, 'client_cid_for_attributes': '3', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7272727272727273, 'precision': 0.9873417721518988}
2025-08-04 21:03:49,478 - INFO - [Round 169, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:03:49,479 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 169.
2025-08-04 21:03:49,479 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 169.
2025-08-04 21:03:49,479 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 169.
2025-08-04 21:03:49,479 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 169.
2025-08-04 21:03:49,480 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 169.
2025-08-04 21:03:49,480 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 169.
2025-08-04 21:03:49,480 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 169.
2025-08-04 21:03:49,480 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 169.
2025-08-04 21:03:49,480 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 169.
2025-08-04 21:03:49,481 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 169.
2025-08-04 21:03:49,488 - INFO - [Round 169, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:03:49,493 - INFO - ==================================================
2025-08-04 21:03:49,493 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:03:49,493 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:03:49,493 - INFO - ==================================================
2025-08-04 21:03:49,493 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:03:49,493 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.4938
2025-08-04 21:03:49,493 - INFO -   Global Accuracy (Wgtd Avg): 0.7322
2025-08-04 21:03:49,494 - INFO -   Global F1 Score (Wgtd Avg): 0.8144
2025-08-04 21:03:49,494 - INFO -   Global Precision (Wgtd Avg): 0.9795
2025-08-04 21:03:49,494 - INFO -   Global Recall (Wgtd Avg): 0.6970
2025-08-04 21:03:49,494 - INFO -   Avg Eval Time per Client: 0.02s
2025-08-04 21:03:49,494 - INFO -   [Mode: multi-criteria] Final reward is Perf(0.0803) - FairPenalty(0.0000) - ResourceCost(0.2600) = -0.1797
2025-08-04 21:03:49,494 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 169.
2025-08-04 21:03:49,494 - INFO -   Final Global Reward for action: -0.1797. Client states at selection: {'8560019474512340676': (8, 0, 2, 8, 8), '15388649110162717160': (8, 0, 2, 8, 8)}
2025-08-04 21:03:49,494 - INFO -   Performance Reward: 0.0803, Fairness Penalty: 0.0000, Resource Cost: 0.2600
2025-08-04 21:03:49,495 - INFO -   Next round's global F1 (for next state Q-val): 0.8144
2025-08-04 21:03:49,495 - INFO -     Client 8560019474512340676 (Partition ID: 8): 
2025-08-04 21:03:49,495 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 21:03:49,495 - INFO -       Q(s) updated from 0.0100 to 0.0078 (TotalReward: -0.1797, NextMaxQ: -0.0373)
2025-08-04 21:03:49,495 - INFO -     Client 15388649110162717160 (Partition ID: 5): 
2025-08-04 21:03:49,496 - INFO -       State(s): (8, 0, 2, 8, 8) -> NextState(s'): (8, 1, 2, 8, 8)
2025-08-04 21:03:49,496 - INFO -       Q(s) updated from 0.0078 to 0.0056 (TotalReward: -0.1797, NextMaxQ: -0.0373)
2025-08-04 21:03:49,496 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:03:49,497 - INFO - 
2025-08-04 21:03:49,497 - INFO - [ROUND 170]
2025-08-04 21:03:49,497 - INFO - [RLAgent choose_actions_softmax] Round 170. Temperature: 0.4330
2025-08-04 21:03:49,497 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:03:49,497 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.038262139783865896, '5975185251685626785': -0.02970533200170523, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.038262139783865896, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.02970533200170523, '17456602372862189643': -0.03652557061380309}
2025-08-04 21:03:49,498 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.09942720850804518), '5975185251685626785': np.float64(0.1014117496992543), '8560019474512340676': np.float64(0.0996463573892504), '12043264814094380418': np.float64(0.09942720850804518), '4296149388320225194': np.float64(0.09977810715834744), '15388649110162717160': np.float64(0.0996463573892504), '2395859185497387824': np.float64(0.0996463573892504), '10913316872057236365': np.float64(0.09977810715834744), '6587436948557123441': np.float64(0.1014117496992543), '17456602372862189643': np.float64(0.09982679710095498)}
2025-08-04 21:03:49,498 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:03:49,498 - INFO -     Selected 2 CIDs with this factor: ['5975185251685626785', '6587436948557123441']
2025-08-04 21:03:49,499 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441']
2025-08-04 21:03:49,502 - INFO -   New temperature for next round: 0.4308
2025-08-04 21:03:49,502 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441']. Corresponding states: {'5975185251685626785': (8, 2, 1, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 21:03:49,502 - INFO - configure_fit: strategy sampled 2 clients (out of 10)
2025-08-04 21:03:55,518 - INFO - aggregate_fit: received 2 results and 0 failures
2025-08-04 21:03:55,519 - INFO - [Round 170, AggrFit START] Called. Received 2 results, 0 failures.
2025-08-04 21:03:55,522 - INFO - Fit phase aggregation: Received metrics from 2 clients.
2025-08-04 21:03:55,522 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.50
2025-08-04 21:03:55,522 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0837, Aggregated D_Loss=0.7735 from 2 clients (635 examples)
2025-08-04 21:03:55,523 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.39s across 2 clients
2025-08-04 21:03:55,523 - INFO - Fit phase aggregation: Summary
2025-08-04 21:03:55,523 - INFO -   fit_clients_total_received: 2
2025-08-04 21:03:55,523 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:03:55,523 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:03:55,523 - INFO -   fit_clients_valid_for_loss_aggregation: 2
2025-08-04 21:03:55,523 - INFO -   allocated_cores_avg_per_client: 3.5000
2025-08-04 21:03:55,523 - INFO -   aggregated_g_loss: 2.0837
2025-08-04 21:03:55,523 - INFO -   aggregated_d_loss: 0.7735
2025-08-04 21:03:55,523 - INFO -   fit_time_avg_seconds_all_reporting: 0.3903
2025-08-04 21:03:55,524 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:04:04,575 - INFO - aggregate_evaluate: received 10 results and 0 failures
2025-08-04 21:04:04,575 - INFO -   Sample of first result (CID 1640189632563049314): Metrics: {'threshold': 0.6220347642898559, 'profile_name': 'Mid-Range Edge', 'f1_score': 0.8085808580858086, 'avg_anomaly_score': 0.5665080793184056, 'recall': 0.6882022471910112, 'eval_time_seconds': 0.013428449630737305, 'client_cid_for_attributes': '1', 'allocated_cores_for_pytorch': 2, 'server_round': -1, 'accuracy': 0.7218225419664268, 'precision': 0.98}
2025-08-04 21:04:04,576 - INFO - [Round 170, AggrEval] Received 10 evaluation results. Updating CLIENT_ATTRIBUTES with historical data.
2025-08-04 21:04:04,576 - INFO -   Appended eval metrics for proxy_cid 1640189632563049314 (partition_id: 1) for round 170.
2025-08-04 21:04:04,576 - INFO -   Appended eval metrics for proxy_cid 6587436948557123441 (partition_id: 4) for round 170.
2025-08-04 21:04:04,576 - INFO -   Appended eval metrics for proxy_cid 10913316872057236365 (partition_id: 9) for round 170.
2025-08-04 21:04:04,576 - INFO -   Appended eval metrics for proxy_cid 8560019474512340676 (partition_id: 8) for round 170.
2025-08-04 21:04:04,576 - INFO -   Appended eval metrics for proxy_cid 2395859185497387824 (partition_id: 2) for round 170.
2025-08-04 21:04:04,577 - INFO -   Appended eval metrics for proxy_cid 4296149388320225194 (partition_id: 3) for round 170.
2025-08-04 21:04:04,577 - INFO -   Appended eval metrics for proxy_cid 15388649110162717160 (partition_id: 5) for round 170.
2025-08-04 21:04:04,577 - INFO -   Appended eval metrics for proxy_cid 5975185251685626785 (partition_id: 7) for round 170.
2025-08-04 21:04:04,577 - INFO -   Appended eval metrics for proxy_cid 17456602372862189643 (partition_id: 6) for round 170.
2025-08-04 21:04:04,577 - INFO -   Appended eval metrics for proxy_cid 12043264814094380418 (partition_id: 0) for round 170.
2025-08-04 21:04:04,585 - INFO - [Round 170, AggrEval] Logging detailed evaluation metrics for 10 clients to CSV.
2025-08-04 21:04:04,590 - INFO - ==================================================
2025-08-04 21:04:04,590 - INFO - EVALUATE METRICS AGGREGATION FUNCTION CALLED
2025-08-04 21:04:04,590 - INFO - Received metrics from 10 clients for evaluation.
2025-08-04 21:04:04,590 - INFO - ==================================================
2025-08-04 21:04:04,591 - INFO - Evaluate phase: Aggregated Results (8119 examples from 10 clients):
2025-08-04 21:04:04,591 - INFO -   Global Avg Anomaly Score (Wgtd Avg): 0.5617
2025-08-04 21:04:04,591 - INFO -   Global Accuracy (Wgtd Avg): 0.7317
2025-08-04 21:04:04,591 - INFO -   Global F1 Score (Wgtd Avg): 0.8141
2025-08-04 21:04:04,591 - INFO -   Global Precision (Wgtd Avg): 0.9791
2025-08-04 21:04:04,591 - INFO -   Global Recall (Wgtd Avg): 0.6967
2025-08-04 21:04:04,591 - INFO -   Avg Eval Time per Client: 0.03s
2025-08-04 21:04:04,591 - INFO -   [Mode: multi-criteria] Final reward is Perf(-0.0005) - FairPenalty(0.0000) - ResourceCost(0.1400) = -0.1405
2025-08-04 21:04:04,591 - INFO - [RLAgent learn_from_round_outcome] Learning from outcome of round (completed) 170.
2025-08-04 21:04:04,591 - INFO -   Final Global Reward for action: -0.1405. Client states at selection: {'5975185251685626785': (8, 2, 1, 8, 8), '6587436948557123441': (8, 2, 1, 8, 8)}
2025-08-04 21:04:04,592 - INFO -   Performance Reward: -0.0005, Fairness Penalty: 0.0000, Resource Cost: 0.1400
2025-08-04 21:04:04,592 - INFO -   Next round's global F1 (for next state Q-val): 0.8141
2025-08-04 21:04:04,592 - INFO -     Client 5975185251685626785 (Partition ID: 7): 
2025-08-04 21:04:04,592 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 21:04:04,592 - INFO -       Q(s) updated from -0.0297 to -0.0311 (TotalReward: -0.1405, NextMaxQ: -0.0335)
2025-08-04 21:04:04,592 - INFO -     Client 6587436948557123441 (Partition ID: 4): 
2025-08-04 21:04:04,593 - INFO -       State(s): (8, 2, 1, 8, 8) -> NextState(s'): (8, 3, 1, 8, 8)
2025-08-04 21:04:04,593 - INFO -       Q(s) updated from -0.0311 to -0.0325 (TotalReward: -0.1405, NextMaxQ: -0.0335)
2025-08-04 21:04:04,593 - INFO - [RLAgent learn_from_round_outcome] Q-table after updates (showing first 5 items for brevity if large): {(6, 0, 0, 6, 0): 0.0, (6, 0, 1, 6, 0): 0.0, (6, 0, 2, 6, 0): 0.06595631233450752, (6, 1, 2, 6, 0): 0.058018247404275136, (6, 1, 2, 6, 6): 0.04212905028749874}
2025-08-04 21:04:04,594 - INFO - 
2025-08-04 21:04:04,594 - INFO - [ROUND 171]
2025-08-04 21:04:04,594 - INFO - [RLAgent choose_actions_softmax] Round 171. Temperature: 0.4308
2025-08-04 21:04:04,594 - INFO -   Available CIDs: ['1640189632563049314', '5975185251685626785', '8560019474512340676', '12043264814094380418', '4296149388320225194', '15388649110162717160', '2395859185497387824', '10913316872057236365', '6587436948557123441', '17456602372862189643']
2025-08-04 21:04:04,595 - INFO -   Calculated Q-values for available clients: {'1640189632563049314': -0.036294527327454, '5975185251685626785': -0.033521512869380626, '8560019474512340676': -0.03730887989167328, '12043264814094380418': -0.036294527327454, '4296149388320225194': -0.03673679961568835, '15388649110162717160': -0.03730887989167328, '2395859185497387824': -0.03730887989167328, '10913316872057236365': -0.03673679961568835, '6587436948557123441': -0.033521512869380626, '17456602372862189643': -0.013010991518492939}
2025-08-04 21:04:04,598 - INFO -   Selection probabilities: {'1640189632563049314': np.float64(0.0994100836359052), '5975185251685626785': np.float64(0.1000520355442711), '8560019474512340676': np.float64(0.09917629165506052), '12043264814094380418': np.float64(0.0994100836359052), '4296149388320225194': np.float64(0.09930807928778311), '15388649110162717160': np.float64(0.09917629165506052), '2395859185497387824': np.float64(0.09917629165506052), '10913316872057236365': np.float64(0.09930807928778311), '6587436948557123441': np.float64(0.1000520355442711), '17456602372862189643': np.float64(0.1049307280988997)}
2025-08-04 21:04:04,599 - INFO -   Attempt 1 with factor 1.00. Threshold value: 0.1000
2025-08-04 21:04:04,599 - INFO -     Selected 3 CIDs with this factor: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 21:04:04,599 - INFO -   Final selected CIDs after adaptive thresholding & capping: ['5975185251685626785', '6587436948557123441', '17456602372862189643']
2025-08-04 21:04:04,602 - INFO -   New temperature for next round: 0.4286
2025-08-04 21:04:04,603 - INFO -   Final selected CIDs to return: ['5975185251685626785', '6587436948557123441', '17456602372862189643']. Corresponding states: {'5975185251685626785': (8, 3, 1, 8, 8), '6587436948557123441': (8, 3, 1, 8, 8), '17456602372862189643': (7, 1, 0, 8, 8)}
2025-08-04 21:04:04,603 - INFO - configure_fit: strategy sampled 3 clients (out of 10)
2025-08-04 21:04:13,627 - INFO - aggregate_fit: received 3 results and 0 failures
2025-08-04 21:04:13,627 - INFO - [Round 171, AggrFit START] Called. Received 3 results, 0 failures.
2025-08-04 21:04:13,632 - INFO - Fit phase aggregation: Received metrics from 3 clients.
2025-08-04 21:04:13,632 - INFO - Fit phase aggregation: Avg Allocated Cores per Client = 3.00
2025-08-04 21:04:13,632 - INFO - Fit phase aggregation: Aggregated G_Loss=2.0834, Aggregated D_Loss=0.7701 from 3 clients (671 examples)
2025-08-04 21:04:13,632 - INFO - Fit phase aggregation: Average Fit Time (all reporting clients)=0.34s across 3 clients
2025-08-04 21:04:13,632 - INFO - Fit phase aggregation: Summary
2025-08-04 21:04:13,633 - INFO -   fit_clients_total_received: 3
2025-08-04 21:04:13,633 - INFO -   fit_clients_reported_errors: 0
2025-08-04 21:04:13,633 - INFO -   fit_clients_skipped_training: 0
2025-08-04 21:04:13,633 - INFO -   fit_clients_valid_for_loss_aggregation: 3
2025-08-04 21:04:13,633 - INFO -   allocated_cores_avg_per_client: 3.0000
2025-08-04 21:04:13,633 - INFO -   aggregated_g_loss: 2.0834
2025-08-04 21:04:13,633 - INFO -   aggregated_d_loss: 0.7701
2025-08-04 21:04:13,633 - INFO -   fit_time_avg_seconds_all_reporting: 0.3382
2025-08-04 21:04:13,634 - INFO - configure_evaluate: strategy sampled 10 clients (out of 10)
2025-08-04 21:17:01,681 - WARNING - Connection attempt failed, retrying...
2025-08-04 21:17:01,682 - WARNING - Connection attempt failed, retrying...
2025-08-04 21:17:01,714 - WARNING - Connection attempt failed, retrying...
2025-08-04 21:17:02,013 - WARNING - Connection attempt failed, retrying in 0.65 seconds
2025-08-04 21:17:02,474 - WARNING - Connection attempt failed, retrying in 0.18 seconds
2025-08-04 21:17:02,535 - WARNING - Connection attempt failed, retrying in 0.16 seconds
2025-08-04 21:17:02,656 - WARNING - Connection attempt failed, retrying in 1.68 seconds
2025-08-04 21:17:02,664 - WARNING - Connection attempt failed, retrying in 3.80 seconds
2025-08-04 21:17:02,697 - WARNING - Connection attempt failed, retrying in 0.86 seconds
2025-08-04 21:17:03,562 - WARNING - Connection attempt failed, retrying in 0.14 seconds
2025-08-04 21:17:03,705 - WARNING - Connection attempt failed, retrying in 15.25 seconds
2025-08-04 21:17:04,342 - WARNING - Connection attempt failed, retrying in 0.40 seconds
2025-08-04 21:17:04,742 - WARNING - Connection attempt failed, retrying in 2.82 seconds
2025-08-04 21:17:06,463 - WARNING - Connection attempt failed, retrying in 3.87 seconds
2025-08-04 21:17:07,568 - WARNING - Connection attempt failed, retrying in 16.37 seconds
2025-08-04 21:17:10,335 - WARNING - Connection attempt failed, retrying in 0.39 seconds
